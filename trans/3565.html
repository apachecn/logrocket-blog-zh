<html>
<head>
<title>Create a GraphQL API with React and Phoenix 2 </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>ç”¨Reactå’ŒPhoenix 2åˆ›å»ºä¸€ä¸ªGraphQL API</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/#0001-01-01">https://blog.logrocket.com/create-graphql-api-react-phoenix-2/#0001-01-01</a></blockquote><div><article class="article-post">
<p>è‡ª21ä¸–çºªåˆä»¥æ¥ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆä¸€ç›´ä½¿ç”¨REST APIsæ¥æŸ¥è¯¢å’Œå˜å¼‚æ•°æ®ã€‚æ¯«æ— ç–‘é—®ï¼ŒRESTæ˜¯ä¸€ç§å¾ˆå¥½çš„è®¿é—®èµ„æºçš„æ–¹å¼ï¼Œä½†æ˜¯å½“æ¶‰åŠåˆ°ç‰¹å®šæ€§æ—¶ï¼ŒRESTæ¨¡å‹æ•ˆç‡ä¸é«˜ã€‚</p>
<p>GraphQLæ˜¯ä¸€ç§æ–°çš„å·¥å…·ï¼Œå®ƒä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ ¹æ®ç‰¹æ®Šæ€§è®¿é—®èµ„æºï¼Œä»è€Œæœ‰æ•ˆåœ°æ¶ˆè€—èµ„æºã€‚ç”±äºGraphQLæä¾›çš„çµæ´»æ€§ï¼Œç¤¾åŒºå·²ç»å¼€å§‹æ„å»ºå®ç”¨ç¨‹åºï¼Œä»¥ä¾¿åœ¨ä»–ä»¬å–œæ¬¢çš„è¯­è¨€ä¸­ä½¿ç”¨GraphQLã€‚</p>
<p>ä¸€ä¸ªè¿™æ ·çš„ä¾‹å­æ˜¯Absintheï¼Œå®ƒæ˜¯ç”¨Elixirå¼€å‘çš„åº“ï¼ŒElixiræ˜¯ä¸€ç§åŸºäºErlangçš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ã€‚è‹¦è‰¾é…’ä¸å‡¤å‡°ç½‘æœåŠ¡å™¨ä¸€èµ·ä½¿ç”¨ï¼Œå‡¤å‡°ç½‘æœåŠ¡å™¨æ˜¯ç”¨é•¿ç”Ÿä¸è€è¯æ„å»ºçš„ï¼Œå¹¶ä¸”è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Phoenixæ„å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªGraphQL APIï¼Œå¹¶å°†å…¶ä¸Reactåº”ç”¨ç¨‹åºè¿æ¥ã€‚</p>
<h2>å…ˆå†³æ¡ä»¶</h2>
<p>è¦å……åˆ†åˆ©ç”¨æœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦:</p>
<ul>
<li>å¯¹JavaScriptã€Reactå’ŒDockeræœ‰åŸºæœ¬çš„äº†è§£</li>
<li>ç†Ÿæ‚‰Elixirè¯­æ³•</li>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤äº’çš„çŸ¥è¯†</li>
</ul>
<p>æˆ‘ä»¬å°†æ¶µç›–:</p>

<h2 id="environment-setup">ç¯å¢ƒè®¾ç½®</h2>
<p>è¦è®¾ç½®æˆ‘ä»¬çš„ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…:</p>

<h3 id="installing-elixir">å®‰è£…è¯å‰‚</h3>
<p>æ‰“å¼€æ‚¨çš„ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">$ wget https://packages.erlang-solutions.com/erlang-solutions_2.0_all.deb &amp;&amp; sudo dpkg -i erlang-solutions_2.0_all.deb</pre>
<pre class="language-bash hljs">$ sudo apt-get update</pre>
<pre class="language-bash hljs">$ sudo apt-get install esl-erlang</pre>
<pre class="language-bash hljs">$ sudo apt-get install elixir</pre>
<h3>å®‰è£…å…­è§’å¤´</h3>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">$ mix local.hex</pre>
<p>è¦æ£€æŸ¥Elixirå’ŒErlangçš„ç‰ˆæœ¬ï¼Œè¯·è¿è¡Œ:</p>
<pre class="language-bash hljs">$ elixir -v
Erlang/OTP 25 [erts-13.0.4] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:1] [jit:ns]

Elixir 1.13.4 (compiled with Erlang/OTP 25)</pre>
<h3>å®‰è£…Phoenixåº”ç”¨ç”Ÿæˆå™¨</h3>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">$ mix archive.install hex phx_new</pre>
<h3 id="installing-node-js">å®‰è£…Node.js</h3>
<p>è¿è¡Œè¿™äº›å‘½ä»¤:</p>
<pre class="language-bash hljs">$ curl -fsSL https://deb.nodesource.com/setup_19.x | sudo -E bash - &amp;&amp;\</pre>
<pre class="language-bash hljs">$ sudo apt-get install -y nodejs</pre>
<p>æ£€æŸ¥Node.jsçš„ç‰ˆæœ¬:</p>
<pre class="language-bash hljs">$ node -v</pre>
<h3 id="installing-docker-docker-compose">å®‰è£…Dockerå’ŒDockeråˆæˆ</h3>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…Docker:</p>
<pre class="language-bash hljs">$ sudo apt-get update</pre>
<pre class="language-bash hljs">$ sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg \
    lsb-release</pre>
<pre class="language-bash hljs">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</pre>
<pre class="language-bash hljs">$ echo \
  "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</pre>
<pre class="language-bash hljs">$ sudo apt-get update</pre>
<pre class="language-bash hljs">$ sudo apt-get install docker-ce docker-ce-cli containerd.io</pre>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…Docker Compose:</p>
<pre class="language-bash hljs">$ sudo apt install docker-compose</pre>
<h2 id="phoenix-application-setup">Phoenixåº”ç”¨ç¨‹åºè®¾ç½®</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¾ç½®PhoenixæœåŠ¡å™¨ï¼Œå¹¶åˆ›å»ºå¯ä¾›GraphQLå·¥ä½œåŒºå’ŒReactåº”ç”¨ç¨‹åºä½¿ç”¨çš„èµ„æºã€‚</p>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæœåŠ¡å™¨:</p>
<p>$ mix phx.new booklist -no-html</p>
<p>å½“æç¤ºè·å–å’Œå®‰è£…ä¾èµ–é¡¹æ—¶ï¼Œè¾“å…¥â€œYâ€ã€‚</p>
<p>è¾“å‡º:</p>
<pre class="language-bash hljs">We are almost there! The following steps are missing:

    $ cd booklist

Then configure your database in config/dev.exs and run:

    $ mix ecto.create

Start your Phoenix app with:

    $ mix phx.server

You can also run your app inside IEx (Interactive Elixir) as:

    $ iex -S mix phx.server</pre>
<h3 id="installing-absinthe-absinthe-plug-dependencies">å®‰è£…è‹¦è‰¾é…’å’Œ<code>absinthe_plug</code>ä¾èµ–é¡¹</h3>
<p>è‹¦è‰¾é…’æ˜¯ä¸ºElixirç¼–å†™çš„GraphQLåº“ï¼Œç”¨äºç¼–å†™æŸ¥è¯¢å’Œå˜å¼‚ã€‚å¸®åŠ©æˆ‘ä»¬ä½¿ç”¨GraphQLã€‚</p>
<p>åœ¨Phoenixä¸­ï¼Œä¾èµ–é¡¹å¿…é¡»æ‰‹åŠ¨å†™å…¥mix.exæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨deps.getå‘½ä»¤å®‰è£…æ·»åŠ çš„ä¾èµ–é¡¹ã€‚å®ƒä¸åƒnpmæˆ–Yarné‚£æ ·å·¥ä½œã€‚</p>
<p>è¦å®‰è£…absincetå’Œabsinthe _ plugï¼Œè¯·åœ¨æ‚¨å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ‚¨çš„é¡¹ç›®ï¼Œå¹¶åœ¨é¡¹ç›®ç›®å½•çš„æ ¹ç›®å½•ä¸­ï¼Œæ›´æ–°mix.exæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre class="language-elixir hljs"># mix.ex
Defp deps do
[
...
{:absinthe, "~&gt; 1.7"}
{:absinthe_plug, "~&gt; 1.5"}
]
end</pre>
<p>ç°åœ¨ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ä¾èµ–é¡¹:</p>
<pre class="language-bash hljs">$ mix deps.get</pre>
<p>è¿™å°±æ˜¯æˆ‘ä»¬çš„ç»ˆç«¯ç°åœ¨çš„æ ·å­:</p>
<pre class="language-plaintext hljs">Resolving Hex dependencies...
Dependency resolution completed:
Unchanged:
  castore 0.1.18
  connection 1.1.0
  cowboy 2.9.0
  cowboy_telemetry 0.4.0
  cowlib 2.11.0
  db_connection 2.4.2
  decimal 2.0.0
  ecto 3.9.1
  ecto_sql 3.9.0
  esbuild 0.5.0
  gettext 0.20.0
  jason 1.4.0
  mime 2.0.3
  phoenix 1.6.14
  phoenix_ecto 4.4.0
  phoenix_html 3.2.0
  phoenix_live_dashboard 0.7.1
  phoenix_live_view 0.18.2
  phoenix_pubsub 2.1.1
  phoenix_view 1.1.2
  plug 1.13.6
  plug_cowboy 2.5.2
  plug_crypto 1.2.3
  postgrex 0.16.5
  ranch 1.8.0
  swoosh 1.8.1
  telemetry 1.1.0
  telemetry_metrics 0.6.1
  telemetry_poller 1.0.0
New:
  absinthe 1.7.0
  absinthe_plug 1.5.8
  nimble_parsec 1.2.3
* Getting absinthe (Hex package)
* Getting absinthe_plug (Hex package)
* Getting nimble_parsec (Hex package)</pre>
<h3 id="adminer-postgresql-docker-compose">ä½¿ç”¨docker-composeå¯åŠ¨Adminerå’ŒPostgreSQL</h3>
<p>ç°åœ¨æˆ‘ä»¬å°†æ—‹è½¬ä¸¤ä¸ªç å¤´é›†è£…ç®±ã€‚ä¸€ä¸ªå°†è¿è¡Œæˆ‘ä»¬çš„PostgreSQLæ•°æ®åº“ï¼Œä¸€ä¸ªå¯ä»¥ä¸Phoenixä¸€èµ·ä½¿ç”¨çš„å…³ç³»æ•°æ®åº“ï¼Œå¦ä¸€ä¸ªå°†è¿è¡ŒAdminerï¼Œä¸€ä¸ªå…¨åŠŸèƒ½çš„æ•°æ®åº“ç®¡ç†å·¥å…·ã€‚</p>
<p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶:</p>
<pre class="language-bash hljs">$ touch docker-compose.yaml</pre>
<p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç ç¼–è¾‘å™¨çš„ç”¨æˆ·ç•Œé¢æ¥åˆ›å»ºå®ƒã€‚ä½ çš„é€‰æ‹©ï¼</p>
<p>ç°åœ¨ï¼Œå°†è¿™æ®µä»£ç ç²˜è´´åˆ°æ‚¨çš„<code>docker-compose</code>æ–‡ä»¶ä¸­:</p>
<pre class="language-docker hljs">version: "3"
services:
  postgres:
    build: ./postgres-dev
    container_name: postgres
    ports:
      - 5432:5432
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB_LIST: booklist_dev

  adminer:
    image: adminer
    container_name: adminer
    restart: always
    ports:
      - 8090:8080
    environment:
      ADMINER_DEFAULT_SERVER: postgres</pre>
<p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>postgres-dev</code>çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªDockerfileå’Œä¸€ä¸ªBashæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre class="language-bash hljs">$ mkdir postgres-dev</pre>
<pre class="language-bash hljs">$ cd postgres-dev</pre>
<pre class="language-bash hljs">$ touch Dockerfile</pre>
<p>åœ¨dockeræ–‡ä»¶ä¸­ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç :</p>
<pre class="language-docker hljs">FROM postgres:latest
COPY setup-databases.sh /docker-entrypoint-initdb.d/</pre>
<p>ç°åœ¨ï¼Œåœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶:</p>
<pre class="language-bash hljs">$ touch setup-databases.sh</pre>
<p>åœ¨Bashæ–‡ä»¶ä¸­ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç :</p>
<pre class="language-bash hljs">#!/bin/bash

set -e
set -u

function create_user_and_database() {
    local DB=$1
    echo "  Creating user and database '$DB'"
    psql -v --username "$POSTGRES_USER" &lt;&lt;-EOSQL
        CREATE DATABASE $DB;
        GRANT ALL PRIVILEGES ON DATABASE $DB TO $POSTGRES_USER;
EOSQL
}

if [ -n "$POSTGRES_DB_LIST" ]; then
    echo "Multiple database creation requested: $POSTGRES_DB_LIST"
    for DB in $(echo $POSTGRES_DB_LIST | tr ',' ' '); do
        create_user_and_database $DB
    done
    echo "Multiple databases created"
fi</pre>
<p>ç°åœ¨ï¼Œä»ç»ˆç«¯è¿”å›åˆ°æ‚¨çš„æ ¹ç›®å½•å¹¶è¿è¡Œä»¥ä¸‹ä»£ç :</p>
<pre class="language-bash hljs">$ docker-compose up -d -build</pre>
<p>è¦æ£€æŸ¥æˆ‘ä»¬çš„å®¹å™¨æ˜¯å¦è¿è¡Œï¼Œè¯·ç¼–å†™ä»¥ä¸‹ä»£ç :</p>
<pre class="language-bash hljs">$ docker ps</pre>
<p>æˆ‘ä»¬çš„è¾“å‡ºåº”è¯¥æ˜¯:</p>
<pre class="language-bash hljs">CONTAINER ID   IMAGE      COMMAND                  CREATED          STATUS          PORTS                                       NAMES
d6831a68a985   adminer    "entrypoint.sh docke..."   13 seconds ago   Up 12 seconds   0.0.0.0:8090-&gt;8080/tcp, :::8090-&gt;8080/tcp   adminer
dca9812e757a   postgres   "docker-entrypoint.s..."   13 seconds ago   Up 12 seconds   0.0.0.0:5432-&gt;5432/tcp, :::5432-&gt;5432/tcp   postgres</pre>
<h3 id="schema-absinthe">ä¸ºè‹¦è‰¾é…’åˆ›å»ºæ¨¡å¼</h3>
<p>æ¨¡å¼æ˜¯ç”¨æ‰§è¡ŒæŸ¥è¯¢çš„ç›¸åŒè¿‡ç¨‹æ„å»ºçš„è“å›¾ã€‚</p>
<p>GraphQL Workspaceæ˜¯ä¸€ä¸ªä¸GraphQLæ‰“åŒ…åœ¨ä¸€èµ·çš„å·¥å…·ï¼Œç”¨äºæŸ¥è¯¢å’Œå˜å¼‚æ•°æ®ã€‚è¯¥å·¥å…·æ˜¯ä¸€ä¸ªç”¨æˆ·ç•Œé¢ï¼Œå¯ä»¥ä»æµè§ˆå™¨è®¿é—®ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åœ¨æˆ‘ä»¬çš„æ¨¡å¼ä¸­ç¡¬ç¼–ç çš„æµ‹è¯•æ•°æ®ï¼Œè¿™å°†å¸®åŠ©æˆ‘ä»¬ç†è§£GraphQLæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆåŠŸæŸ¥è¯¢æ ·æœ¬æ•°æ®åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨PostgreSQLã€‚</p>
<p>åœ¨lib/booklist_web/ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºschema.exçš„æ–‡ä»¶ã€‚å°†ä»¥ä¸‹ä»£ç å¤åˆ¶å¹¶ç²˜è´´åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<pre class="language-elixir hljs">defmodule BooklistWeb.Schema do
  use Absinthe.Schema

  @desc "A Book"
    object :book do
      field :name, :string
      field :author, :string
 
    end

  # Example data
  @book_information %{
    "book1" =&gt; %{id: 1, name: "Harry Potter", author: "JK Rowling"},
    "book2" =&gt; %{id: 2, name: "Charlie Factory", author: "Bernard"},
    "book3" =&gt; %{id: 3, name: "Sherlock Holmes", author: "Sheikhu"}
  }

  query do
    field :book_info, :book do
      arg :id, non_null(:id)
      resolve fn %{id: book_id}, _ -&gt;
        {:ok, @book_information[book_id]}
      end
    end
  end
 end</pre>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„ä»£ç çš„ä¸€äº›é‡è¦å®šä¹‰:</p>
<ul>
<li><code>query</code>:æ˜¯æ ¹æŸ¥è¯¢å¯¹è±¡å®ï¼Œå…¶ä¸­ä¸åŒçš„æŸ¥è¯¢ä½œä¸ºå­—æ®µè¢«æ‹’ç»</li>
<li><code>field</code>:å°è£…å¯¹è±¡ä¸­çš„å­—æ®µï¼Œè¿™é‡Œæ˜¯æŸ¥è¯¢å’Œå¯¹è±¡</li>
<li><code>arg</code>:å°é—­å­—æ®µçš„å‚æ•°</li>
<li><code>resolve</code>:æ‰§è¡Œæˆ‘ä»¬çš„æŸ¥è¯¢é€»è¾‘çš„å‡½æ•°æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡<code>book</code>çš„ç»“æ„å’ŒåŒ…å«å›¾ä¹¦ä¿¡æ¯çš„æµ‹è¯•æ•°æ®ã€‚æŸ¥è¯¢å—æ˜¯ä¸€ä¸ªGraphQLæŸ¥è¯¢ï¼Œå®ƒå°†åœ¨æˆ‘ä»¬çš„GraphQLå·¥ä½œåŒºä¸­è·å–è¿™äº›æ•°æ®ã€‚</li>
</ul>
<h3 id="context-book-information">ä¸º<code>Book</code>ä¿¡æ¯åˆ›å»ºä¸Šä¸‹æ–‡</h3>
<p>ä¸Šä¸‹æ–‡æ˜¯å…·æœ‰ä¸šåŠ¡é€»è¾‘å¹¶å°è£…æ•°æ®è®¿é—®åŠå…¶éªŒè¯çš„æ¨¡å—ã€‚å®ƒé€šå¸¸ä¸æ•°æ®åº“æˆ–APIå¯¹è¯ã€‚<br/>è¦ä¸ºæˆ‘ä»¬çš„å›¾ä¹¦æ¨¡å¼åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œæ‰“å¼€æ‚¨çš„ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">$ mix phx.gen.context Book Info information name:string author:string</pre>
<p>è¾“å‡ºåº”è¯¥æ˜¯:</p>
<pre class="language-bash hljs">==&gt; nimble_parsec
Compiling 4 files (.ex)
Generated nimble_parsec app
==&gt; absinthe
Compiling 1 file (.erl)
Compiling 256 files (.ex)
Generated absinthe app
==&gt; absinthe_plug
Compiling 18 files (.ex)
Generated absinthe_plug app
==&gt; booklist
* creating lib/booklist/book/info.ex
* creating priv/repo/migrations/20221022130430_create_information.exs
* creating lib/booklist/book.ex
* injecting lib/booklist/book.ex
* creating test/booklist/book_test.exs
* injecting test/booklist/book_test.exs
* creating test/support/fixtures/book_fixtures.ex
* injecting test/support/fixtures/book_fixtures.ex

Remember to update your repository by running migrations:

    $ mix ecto.migrate</pre>
<h3 id="running-migrations">è¿è¡Œè¿ç§»</h3>
<p>è¿ç§»æ˜¯å¡«å……åˆ°å…³ç³»æ•°æ®åº“ä¸­çš„æ•°æ®åº“æ¨¡å¼/ç»“æ„ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¿è¡Œä¸€ä¸ªè¿ç§»ï¼Œåœ¨æˆ‘ä»¬çš„<code>booklist_dev</code>æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<code>information</code>çš„è¡¨ã€‚æˆ‘ä»¬å°†ä»ç®¡ç†å‘˜é‚£é‡ŒæŸ¥çœ‹å®ƒã€‚</p>
<p>æˆ‘ä»¬è¿˜å°†ä½¿ç”¨å®˜æ–¹çš„Elixiré¡¹ç›®<a href="https://hexdocs.pm/ecto/Ecto.html"> Ecto </a>ï¼Œå®ƒæ˜¯ä¸€ç§é›†æˆçš„æŸ¥è¯¢è¯­è¨€ï¼Œæä¾›äº†æ•°æ®åº“åŒ…è£…å™¨ã€‚</p>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">$ mix ecto.migrate</pre>
<p>æˆ‘ä»¬çš„è¾“å‡ºåº”è¯¥æ˜¯:</p>
<pre class="language-plaintext hljs">warning: the :gettext compiler is no longer required in your mix.exs.

Please find the following line in your mix.exs and remove the :gettext entry:

    compilers: [..., :gettext, ...] ++ Mix.compilers(),

  (gettext 0.20.0) lib/mix/tasks/compile.gettext.ex:5: Mix.Tasks.Compile.Gettext.run/1
  (mix 1.13.4) lib/mix/task.ex:397: anonymous fn/3 in Mix.Task.run_task/3
  (mix 1.13.4) lib/mix/tasks/compile.all.ex:92: Mix.Tasks.Compile.All.run_compiler/2
  (mix 1.13.4) lib/mix/tasks/compile.all.ex:72: Mix.Tasks.Compile.All.compile/4
  (mix 1.13.4) lib/mix/tasks/compile.all.ex:59: Mix.Tasks.Compile.All.with_logger_app/2
  (mix 1.13.4) lib/mix/tasks/compile.all.ex:36: Mix.Tasks.Compile.All.run/1


18:10:08.705 [info]  == Running 20221022130430 Booklist.Repo.Migrations.CreateInformation.change/0 forward

18:10:08.708 [info]  create table information

18:10:08.713 [info]  == Migrated 20221022130430 in 0.0s</pre>
<p>ä¸‹é¢ï¼Œæ‚¨å¯ä»¥åœ¨ç®¡ç†å‘˜ç”¨æˆ·ç•Œé¢ä¸­çœ‹åˆ°è¿™ä¸ªè¾“å‡º:</p>
<p><img data-attachment-id="140780" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/adminer-ui-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png" data-orig-size="730,350" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="adminer-ui-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output-300x144.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png" decoding="async" class="aligncenter wp-image-140780 size-full jetpack-lazy-image" src="../Images/78fda8e8c5fc4f4ddb19b4e340c970b6.png" alt="Adminer UI output " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output-300x144.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140780" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/adminer-ui-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png" data-orig-size="730,350" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="adminer-ui-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output-300x144.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png" decoding="async" loading="lazy" class="aligncenter wp-image-140780 size-full" src="../Images/78fda8e8c5fc4f4ddb19b4e340c970b6.png" alt="Adminer UI output " srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output-300x144.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/adminer-ui-output.png"/></noscript>
<p>æœ‰ä¸€ä¸ªåä¸º<code>information</code>çš„è¡¨ï¼Œå®ƒæ˜¯ç”±æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥ä¸­è¿è¡Œçš„è¿ç§»åˆ›å»ºçš„ã€‚è¦è®¿é—®Adminerç•Œé¢ï¼Œè¯·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€ï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬åœ¨Dockeråˆæˆæ–‡ä»¶ä¸­ä½¿ç”¨çš„å‡­æ®:</p>

<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æ‚¨çš„æœåŠ¡å™¨:</p>
<pre class="language-bash hljs">$ mix phx.server</pre>
<p>åœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»ç«¯å£4000ä¸Šçš„<code>localhost</code>æ¥ä½¿ç”¨GraphQLå·¥ä½œç©ºé—´ã€‚</p>
<p><img data-attachment-id="140782" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/phoenix-endpoints/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png" data-orig-size="730,375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="phoenix-endpoints" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png" decoding="async" class="aligncenter wp-image-140782 size-full jetpack-lazy-image" src="../Images/d14c6ed76ce1c0f6a98b75958b361e49.png" alt="Phoenix endpoints" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints-300x154.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140782" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/phoenix-endpoints/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png" data-orig-size="730,375" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="phoenix-endpoints" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png" decoding="async" loading="lazy" class="aligncenter wp-image-140782 size-full" src="../Images/d14c6ed76ce1c0f6a98b75958b361e49.png" alt="Phoenix endpoints" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints-300x154.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/phoenix-endpoints.png"/></noscript>
<p>Phoenixå°†å‘æ‚¨å±•ç¤ºä¸€äº›æ‚¨å¯ä»¥ç‚¹å‡»çš„ç«¯ç‚¹ï¼Œå¹¶é€šè¿‡ç”¨æˆ·ç•Œé¢æ¢ç´¢å„ç§å¯ç”¨çš„åŠŸèƒ½ã€‚</p>
<h2 id="route-configuration-graphql-testing">è·¯ç”±é…ç½®å’ŒGraphQLæµ‹è¯•</h2>
<p>è¦ä»GraphQLçš„ç”¨æˆ·ç•Œé¢å’ŒAPIè®¿é—®å®ƒï¼Œæˆ‘ä»¬å¿…é¡»é…ç½®é€‚å½“çš„è·¯ç”±ã€‚æœ¬èŠ‚å°†å‘Šè¯‰æ‚¨å¦‚ä½•æ­£ç¡®é…ç½®è·¯ç”±ã€‚</p>
<h3 id="configuring-routes-access-graphiql-ui-api">é…ç½®è·¯ç”±ä»¥è®¿é—®å›¾å½¢ç”¨æˆ·ç•Œé¢å’ŒAPI</h3>
<p>ä¸ºäº†è¿›è¡ŒæŸ¥è¯¢å’Œæ”¹å˜æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦åœ¨/lib/booklist_web/ä¸­çš„router.exæ–‡ä»¶ä¸­æ·»åŠ è·¯ç”±ã€‚</p>
<p>æ‰“å¼€router.exæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç è¡Œ:</p>
<pre class="language-elixir hljs">scope "/api" do
    pipe_through :api
    forward("/",Absinthe.Plug, schema: MenuxcardWeb.Schema)
  end


scope "/gql" do
    forward "/GraphiQL", Absinthe.Plug.GraphiQL, schema: MenuxcardWeb.Schema
  end</pre>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ç¬¬äºŒæ¡è·¯çº¿è®¿é—®GraphQL webç•Œé¢ã€‚åœ¨æ‚¨çš„åœ°å€æ ä¸­è¾“å…¥ä»¥ä¸‹URL:<br/><code><a href="http://localhost:4000/gql/GraphiQL" rel="nofollow">http://localhost:4000/gql/GraphiQL</a></code><br/>æ‚¨ç°åœ¨åº”è¯¥ä¼šçœ‹åˆ°:</p>
<p><img data-attachment-id="140786" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/graph-ql-second-route/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png" data-orig-size="730,374" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="graph-ql-second-route" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png" decoding="async" class="aligncenter wp-image-140786 size-full jetpack-lazy-image" src="../Images/5dedd8fa0403d6a8352a9bf36ba5177c.png" alt="GraphQL second route" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route-300x154.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140786" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/graph-ql-second-route/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png" data-orig-size="730,374" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="graph-ql-second-route" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route-300x154.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png" decoding="async" loading="lazy" class="aligncenter wp-image-140786 size-full" src="../Images/5dedd8fa0403d6a8352a9bf36ba5177c.png" alt="GraphQL second route" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route-300x154.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/graph-ql-second-route.png"/></noscript>
<p>è¿™æ˜¯GraphQLå·¥ä½œåŒºï¼Œå®ƒä¸ºGraphQLæå–å’Œå˜æ›´æ•°æ®ï¼Œå°±åƒPostmanä¸ºREST APIsæ‰€åšçš„é‚£æ ·ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†æŸ¥è¯¢æˆ‘ä»¬åœ¨å‰é¢çš„æ­¥éª¤ä¸­åœ¨æ¨¡å¼ä¸­ç¡¬ç¼–ç çš„è™šæ‹Ÿæ•°æ®ã€‚</p>
<h3 id="testing-graphiql-ui-querying-sample-data">æµ‹è¯•ä½¿ç”¨ç¤ºä¾‹æ•°æ®è¿›è¡ŒæŸ¥è¯¢çš„GraphiQL UI</h3>
<p>æˆ‘ä»¬å°†ä»è™šæ‹Ÿæ•°æ®ä¸­æŸ¥è¯¢<code>book1</code>,å¹¶ä»æœåŠ¡å™¨ä¸­è·å–å®ƒçš„åç§°å’Œä½œè€…ã€‚</p>
<p>åœ¨GraphQLç•Œé¢çš„å·¦ä¾§é¢æ¿ä¸­è¿è¡Œä»¥ä¸‹æŸ¥è¯¢:</p>
<pre class="language-graphql hljs">query{
  bookInfo(id: "book1"){
    name
    author
  }
}</pre>
<p>æ‚¨å°†æ”¶åˆ°ä»¥ä¸‹æ•°æ®ä½œä¸ºå›æŠ¥:</p>
<pre class="language-graphql hljs">{
  "data": {
    "bookInfo": {
      "author": "JK Rowling",
      "name": "Harry Potter"
    }
  }
}</pre>
<p>ä»¥ä¸‹æ˜¯GraphiQLä¸­çš„è¾“å‡º:</p>
<p><img data-attachment-id="140788" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/graphiql-query-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png" data-orig-size="730,353" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="graphiql-query-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png" decoding="async" class="aligncenter wp-image-140788 size-full jetpack-lazy-image" src="../Images/a675fab76406560fd8e7b714550852e1.png" alt="Query output on GraphiQL" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output-300x145.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140788" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/graphiql-query-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png" data-orig-size="730,353" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="graphiql-query-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output-300x145.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png" decoding="async" loading="lazy" class="aligncenter wp-image-140788 size-full" src="../Images/a675fab76406560fd8e7b714550852e1.png" alt="Query output on GraphiQL" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output-300x145.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/graphiql-query-output.png"/></noscript>
<h3 id="data-querying-mutation-postgresql-graphiql-ui">ä½¿ç”¨å›¾å½¢ç”¨æˆ·ç•Œé¢ä½¿ç”¨PostgreSQLè¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œå˜å¼‚</h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ç©è™šæ‹Ÿæ•°æ®ã€‚ç°åœ¨çœŸæ­£çš„ä¹è¶£å¼€å§‹äº†ï¼</p>
<p>æˆ‘ä»¬å°†ç›´æ¥ä»PostgreSQLæ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®å¹¶å¯¹å…¶è¿›è¡Œå˜å¼‚ï¼Œå¹¶æ£€æŸ¥å³æ—¶å˜åŒ–ã€‚</p>
<p><img data-attachment-id="140791" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/postgresql-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="postgresql-database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png" decoding="async" class="aligncenter wp-image-140791 size-full jetpack-lazy-image" src="../Images/c4b95fbed06d3900a3dbc70a434d3a40.png" alt="PostgreSQL database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database-300x167.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140791" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/postgresql-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png" data-orig-size="730,406" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="postgresql-database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database-300x167.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png" decoding="async" loading="lazy" class="aligncenter wp-image-140791 size-full" src="../Images/c4b95fbed06d3900a3dbc70a434d3a40.png" alt="PostgreSQL database" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database-300x167.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/postgresql-database.png"/></noscript>
<p>ä¿¡æ¯è¡¨æ˜¯ç©ºçš„ã€‚è®©æˆ‘ä»¬é€šè¿‡å˜å¼‚æ¥å¡«å……å®ƒã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨schema.exæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªå˜å¼‚å’ŒæŸ¥è¯¢ã€‚</p>
<p>æ¸…é™¤æˆ‘ä»¬åœ¨æ¨¡å¼æ–‡ä»¶ä¸­ç¼–å†™çš„æŸ¥è¯¢ï¼Œå¹¶ç²˜è´´ä»¥ä¸‹ä»£ç :</p>
<pre class="language-elixir hljs">query do
    field :get_book, :book do
      arg(:id, non_null(:id))
      resolve(fn args, _ -&gt;
        {:ok, Booklist.Book.get_info!(args)}
      end)
    end
  end

  mutation do
    field :create_book, :book do
      arg(:name, non_null(:string))
      arg(:author, non_null(:string))
      resolve(fn args, _ -&gt;
        {:ok, Booklist.Book.create_info(args)}
      end)
    end
  end</pre>
<p>å°†è¿™ç§å˜åŒ–ç²˜è´´åˆ°GraphiQLæ¥å£ä¸­ï¼Œå¹¶è¿è¡Œå®ƒæ¥çœ‹çœ‹ç¥å¥‡ä¹‹å¤„ã€‚</p>
<pre class="language-graphql hljs">mutation{
  createBook(name: "The Sunshine", author: "Nofel"){
   name
   author
  }
}</pre>
<p>æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰æ›´æ”¹:</p>
<p><img data-attachment-id="140793" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/database-changes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png" data-orig-size="730,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database-changes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes-300x214.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png" decoding="async" class="aligncenter wp-image-140793 size-full jetpack-lazy-image" src="../Images/9741edcb13b16ff92f0019e40b2a719f.png" alt="Database changes" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes-300x214.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140793" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/database-changes/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png" data-orig-size="730,520" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database-changes" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes-300x214.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png" decoding="async" loading="lazy" class="aligncenter wp-image-140793 size-full" src="../Images/9741edcb13b16ff92f0019e40b2a719f.png" alt="Database changes" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes-300x214.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/database-changes.png"/></noscript>
<p>æˆ‘ä»¬çš„æ›´æ”¹å·²ç»æ’å…¥åˆ°æˆ‘ä»¬çš„æ•°æ®åº“è¡¨ä¸­ã€‚ä¸‡å²ï¼</p>
<p>ç°åœ¨ï¼Œä¸ºäº†æŸ¥è¯¢è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°†åœ¨æµè§ˆå™¨ç•Œé¢ä¸­ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢ã€‚</p>
<pre class="language-graphql hljs">query{
  getBook(name: "The Sunshine"){
    author
  }
}</pre>
<p>ä»¥ä¸‹æ˜¯è¾“å‡º:</p>
<p><img data-attachment-id="140795" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/database-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png" data-orig-size="730,257" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output-300x106.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png" decoding="async" class="aligncenter wp-image-140795 size-full jetpack-lazy-image" src="../Images/97afe66c8f9c23b64cbbc6be85aa989e.png" alt="Database output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/database-output-300x106.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140795" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/database-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png" data-orig-size="730,257" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="database-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output-300x106.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png" decoding="async" loading="lazy" class="aligncenter wp-image-140795 size-full" src="../Images/97afe66c8f9c23b64cbbc6be85aa989e.png" alt="Database output" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/database-output-300x106.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/database-output.png"/></noscript>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»é…ç½®äº†æˆ‘ä»¬çš„ç¯å¢ƒï¼Œè®¾ç½®äº†ä¸€ä¸ªPhoenix webæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨æ ·æœ¬æ•°æ®å’ŒPostgreSQLæ•°æ®è¿›è¡Œäº†å‡ æ¬¡æŸ¥è¯¢å’Œä¿®æ”¹ã€‚</p>
<p>åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºæˆ‘ä»¬çš„Reactå‰ç«¯ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°æˆ‘ä»¬çš„GraphQLæœåŠ¡å™¨ã€‚</p>
<h3 id="creating-react-project">åˆ›å»ºReacté¡¹ç›®</h3>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å›¾ä¹¦åˆ—è¡¨ç»„ä»¶çš„Reactåº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºå°†ä½¿ç”¨Reactçš„GraphQLåº“<a href="https://blog.logrocket.com/graphql-local-state-management-apollo/"> Apollo </a>ä»PostgreSQLè·å–æ•°æ®ã€‚</p>
<p>è¦åˆ›å»ºReacté¡¹ç›®ï¼Œè¯·æ‰“å¼€æ‚¨çš„ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">$ npx create-react-app my-gql-project</pre>
<p>æˆ‘å·²ç»å°†æˆ‘çš„é¡¹ç›®å‘½åä¸º<code>my-gql-project</code>ã€‚ä½ å¯ä»¥éšæ„å‘½åã€‚</p>
<h3 id="installing-dependencies">å®‰è£…ä¾èµ–é¡¹</h3>
<p>ä½¿ç”¨Apolloå®¢æˆ·ç«¯çš„åº”ç”¨ç¨‹åºéœ€è¦ä¸¤ä¸ªä¾èµ–é¡¹:</p>
<ol>
<li>è¿™ä¸ªåŒ…åŒ…å«äº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè®¾ç½®Apolloå®¢æˆ·ç«¯çš„access GraphQL APIæ‰€éœ€çš„ä¸€åˆ‡ï¼Œæ¯”å¦‚æœ¬åœ°çŠ¶æ€ç®¡ç†ã€é”™è¯¯å¤„ç†ã€å†…å­˜ç¼“å­˜å’Œä¸€ä¸ªReactè§†å›¾å±‚</li>
<li>GraphQL:è¿™ä¸ªåŒ…å¤„ç†æŸ¥è¯¢è§£æé€»è¾‘</li>
</ol>
<p>è¿è¡Œæ­¤å‘½ä»¤å®‰è£…è¿™äº›è½¯ä»¶åŒ…:</p>
<pre class="language-bash hljs">$ yarn install @apollo/client GraphQL</pre>
<h3 id="apollo-connect-graphql-api-server">ä½¿ç”¨Apolloè¿æ¥åˆ°æˆ‘ä»¬çš„GraphQL APIæœåŠ¡å™¨</h3>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆå§‹åŒ–é˜¿æ³¢ç½—å®¢æˆ·ç«¯ã€‚è½¬åˆ°<code>src/index.js</code>å¹¶å¯¼å…¥ä»¥ä¸‹å†…å®¹ï¼Œæˆ–è€…å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹ä»£ç :</p>
<pre class="language-javascript hljs">import { ApolloClient, InMemoryCache, ApolloProvider, gql } from '@apollo/client';</pre>
<p>å¯¼å…¥å¿…è¦çš„ç¬¦å·åï¼Œæˆ‘ä»¬å°†åˆå§‹åŒ–æˆ‘ä»¬çš„Apolloå®¢æˆ·æœºï¼Œå°†ä¸€ç»„é…ç½®ä¼ é€’ç»™å®ƒçš„æ„é€ å‡½æ•°å¯¹è±¡ã€‚</p>
<pre class="language-javascript hljs">const client = new ApolloClient({
  uri: 'http://localhost:4000/api/GraphiQL',
  cache: new InMemoryCache(),});</pre>
<p>ä¸‡å²ï¼æˆ‘ä»¬çš„å®¢æˆ·æœºå·²ç»å‡†å¤‡å¥½è¿æ¥æˆ‘ä»¬åœ¨PhoenixæœåŠ¡å™¨ä¸Šé…ç½®çš„GraphQL APIã€‚</p>
<h2>è¿æ¥æ‚¨çš„å®¢æˆ·ä»¥åšå‡ºååº”</h2>
<p>ä¸ºäº†å°†Reactåº”ç”¨ç¨‹åºè¿æ¥åˆ°Apolloå®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ª<code>&lt;ApolloProvider&gt;</code>ç»„ä»¶åŒ…è£…Reactåº”ç”¨ç¨‹åºã€‚è¯¥ç»„ä»¶å°†Apolloå®¢æˆ·æœºæ”¾åœ¨å…è®¸ä»ç»„ä»¶æ ‘ä¸­çš„ä»»ä½•ä½ç½®è®¿é—®å®ƒçš„ä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<pre class="language-javascript hljs">import React from 'react';
import * as ReactDOM from 'react-dom/client';
import { ApolloClient, InMemoryCache, ApolloProvider } from '@apollo/client';
import App from './App';

const client = new ApolloClient({
  uri: 'http://localhost:4000/api/GraphiQL',
  cache: new InMemoryCache(),
});

// Supported in React 18+
const root = ReactDOM.createRoot(document.getElementById('root'));

root.render(
  &lt;ApolloProvider client={client}&gt;
    &lt;App /&gt;
  &lt;/ApolloProvider&gt;
);</pre>
<h2>ä½¿ç”¨<code>useQuery</code>è¿›è¡Œæ•°æ®æŸ¥è¯¢</h2>
<p>æ—¢ç„¶ApolloProviderè¢«é’©ä½äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ä½¿ç”¨<code>useQuery</code>è¯·æ±‚æ•°æ®ã€‚<code>useQuery</code>æ˜¯ä¸€ä¸ªä¸å‰ç«¯å’ŒUIå…±äº«GraphQLæ•°æ®çš„Reacté’©å­ã€‚</p>
<p>åˆ‡æ¢åˆ°<code>App.js</code>ï¼Œç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢ç°æœ‰ä»£ç :</p>
<pre class="language-javascript hljs">import { useQuery, gql } from "@apollo/client";

const GET_BOOKS = gql`
  query {
    getBook(name: "The Sunshine") {
      name
      author
    }
  }
`;</pre>
<p>æˆ‘ä»¬å·²ç»åœ¨ä¸€ä¸ª<code>gql</code>æ¨¡æ¿æ–‡æœ¬ä¸­å®šä¹‰äº†æŸ¥è¯¢ã€‚è¿™å°†è·å–æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„å‰ç«¯åº”ç”¨ç¨‹åºçš„æ¯ä¸ªé¡µé¢é‡æ–°åŠ è½½æŸ¥è¯¢çš„æ•°æ®ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªåä¸º<code>DisplayBookList</code>çš„ç»„ä»¶ï¼Œå®ƒå°†ä½¿ç”¨<code>useQuery</code>é’©å­æ‰§è¡Œæˆ‘ä»¬çš„<code>GET_BOOKS</code>æŸ¥è¯¢ã€‚</p>
<pre class="language-javascript hljs">  const { loading, error, data } = useQuery(GET_BOOKS);
  if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
  if (error) return &lt;p&gt;Error :(&lt;/p&gt;;
  return data.locations.map(({ name, author }) =&gt; (
    &lt;div key={name}&gt;
      &lt;h3&gt;{name}&lt;/h3&gt;
      &lt;br /&gt;
      &lt;b&gt;About this Book:&lt;/b&gt;
      &lt;p&gt;Author: {author}&lt;/p&gt;
      &lt;br /&gt;
    &lt;/div&gt;
  ));</pre>
<p>æœ€åï¼Œæˆ‘ä»¬å°†æŠŠ<code>DisplayBookList</code>ç»„ä»¶æ·»åŠ åˆ°æˆ‘ä»¬ç°æœ‰çš„ç»„ä»¶æ ‘ä¸­:</p>
<pre class="language-javascript hljs">export default function App() {
  return (
    &lt;div&gt;
      &lt;h2&gt;My first Apollo app ğŸš€&lt;/h2&gt;
      &lt;DisplayBookList /&gt;
    &lt;/div&gt;
  );
}</pre>
<p>æˆ‘ä»¬æœ€ç»ˆçš„<code>App.js</code>çœ‹èµ·æ¥ä¼šåƒè¿™æ ·:</p>
<pre class="language-javascript">import logo from "./logo.svg";
import "./App.css";
// Import everything needed to use the `useQuery` hook
import { useQuery, gql } from "@apollo/client";

const GET_BOOKS = gql`
  query {
    getBook(id: "1") {
      name
      author
    }
  }
`;

function DisplayBookList() {
  const { loading, error, data } = useQuery(GET_BOOKS);
  if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
  if (error) return &lt;p&gt;Error :(&lt;/p&gt;;
  return data.locations.map(({ name, author }) =&gt; (
    &lt;div key={name}&gt;
      &lt;h3&gt;{name}&lt;/h3&gt;
      &lt;br /&gt;
      &lt;b&gt;About this Book:&lt;/b&gt;
      &lt;p&gt;{author}&lt;/p&gt;
      &lt;br /&gt;
    &lt;/div&gt;
  ));
  
  export default function App() {
  return (
    &lt;div&gt;
      &lt;h2&gt;My first Apollo app ğŸš€&lt;/h2&gt;
      &lt;DisplayBookList /&gt;
    &lt;/div&gt;
  );
}</pre>
<p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç å·²ç»å‡†å¤‡å¥½äº†ï¼Œè®©æˆ‘ä»¬å¯åŠ¨Reactåº”ç”¨ç¨‹åºï¼Œçœ‹çœ‹ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ã€‚</p>
<p>è¿è¡Œ:</p>
<pre class="language-bash hljs">$ yarn start</pre>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè½¬åˆ°<code><a href="http://localhost:3000">http://localhost:3000</a></code>æŸ¥çœ‹è¾“å‡ºã€‚</p>
<p><img data-attachment-id="140798" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/react-app-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png" data-orig-size="730,649" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-app-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output-300x267.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png" decoding="async" class="aligncenter wp-image-140798 size-full jetpack-lazy-image" src="../Images/0f1736c8d69732026c7948ac3355110d.png" alt="React app output" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output-300x267.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="140798" data-permalink="https://blog.logrocket.com/create-graphql-api-react-phoenix-2/attachment/react-app-output/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png" data-orig-size="730,649" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="react-app-output" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output-300x267.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png" decoding="async" loading="lazy" class="aligncenter wp-image-140798 size-full" src="../Images/0f1736c8d69732026c7948ac3355110d.png" alt="React app output" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output-300x267.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/react-app-output.png"/></noscript>
<p>å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬çš„Reactåº”ç”¨ç¨‹åºæˆåŠŸåœ°ä»è®¾ç½®äº†GraphQLçš„PhoenixæœåŠ¡å™¨ä¸ŠæŸ¥è¯¢äº†æ•°æ®ã€‚</p>
<h2>ç»“è®º</h2>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨Reactå’ŒPhoenixåˆ›å»ºä¸€ä¸ªGraphQL APIï¼Œä½¿ç”¨æ¨¡å¼å’Œä¸Šä¸‹æ–‡æ¥æ„å»ºæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ã€‚æˆ‘ä»¬è¿˜å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨Dockeræ¥ç«‹å³å¯åŠ¨PostgreSQLå’ŒAdminerï¼Œè€Œæ— éœ€åœ¨æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä¸Šå®‰è£…é™¤Dockerä¹‹å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨Apolloå®¢æˆ·æœºè¿æ¥åˆ°æ‰˜ç®¡GraphQLçš„PhoenixæœåŠ¡å™¨å¹¶ä»ä¸­è·å–æ•°æ®ã€‚</p>
<p>è¦è¿›ä¸€æ­¥æ¢ç´¢çµè¯ï¼Œè¯·è®¿é—®<a href="https://elixir-lang.org/">çµè¯ä¸»é¡µ</a>æˆ–è®¿é—®ä»–ä»¬çš„<a href="https://elixir-lang.org/docs.html">æ–‡æ¡£é¡µé¢</a>ã€‚</p>
<p>ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼ğŸ˜‡</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:å…¨é¢äº†è§£æ‚¨çš„ç”Ÿäº§Reactåº”ç”¨</h2><p>è°ƒè¯•Reactåº”ç”¨ç¨‹åºå¯èƒ½å¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯å½“ç”¨æˆ·é‡åˆ°éš¾ä»¥é‡ç°çš„é—®é¢˜æ—¶ã€‚å¦‚æœæ‚¨å¯¹ç›‘è§†å’Œè·Ÿè¸ªReduxçŠ¶æ€ã€è‡ªåŠ¨æ˜¾ç¤ºJavaScripté”™è¯¯ä»¥åŠè·Ÿè¸ªç¼“æ…¢çš„ç½‘ç»œè¯·æ±‚å’Œç»„ä»¶åŠ è½½æ—¶é—´æ„Ÿå…´è¶£ï¼Œ</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket ç»“åˆäº†ä¼šè¯å›æ”¾ã€äº§å“åˆ†æå’Œé”™è¯¯è·Ÿè¸ªï¼Œä½¿è½¯ä»¶å›¢é˜Ÿèƒ½å¤Ÿåˆ›å»ºç†æƒ³çš„webå’Œç§»åŠ¨äº§å“ä½“éªŒã€‚è¿™å¯¹ä½ æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>LogRocketä¸æ˜¯çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸æ˜¯è¦æ±‚ç”¨æˆ·æä¾›æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨å›æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ï¼Œä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚</p>
<p>ä¸å†æœ‰å˜ˆæ‚çš„è­¦æŠ¥ã€‚æ™ºèƒ½é”™è¯¯è·Ÿè¸ªå…è®¸æ‚¨å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç„¶åä»ä¸­å­¦ä¹ ã€‚è·å¾—æœ‰å½±å“çš„ç”¨æˆ·é—®é¢˜çš„é€šçŸ¥ï¼Œè€Œä¸æ˜¯è¯¯æŠ¥ã€‚è­¦æŠ¥è¶Šå°‘ï¼Œæœ‰ç”¨çš„ä¿¡å·è¶Šå¤šã€‚</p>
<p vwo-el-id="28675660750">LogRocket Reduxä¸­é—´ä»¶åŒ…ä¸ºæ‚¨çš„ç”¨æˆ·ä¼šè¯å¢åŠ äº†ä¸€å±‚é¢å¤–çš„å¯è§æ€§ã€‚LogRocketè®°å½•Reduxå­˜å‚¨ä¸­çš„æ‰€æœ‰æ“ä½œå’ŒçŠ¶æ€ã€‚</p>
<p vwo-el-id="28675661060">ç°ä»£åŒ–æ‚¨è°ƒè¯•Reactåº”ç”¨çš„æ–¹å¼â€” <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">å¼€å§‹å…è´¹ç›‘æ§</a>ã€‚</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>