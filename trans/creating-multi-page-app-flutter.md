# åœ¨ Flutter - LogRocket åšå®¢ä¸­åˆ›å»ºå¤šé¡µåº”ç”¨ç¨‹åº

> åŸæ–‡ï¼š<https://blog.logrocket.com/creating-multi-page-app-flutter/>

Flutter æ˜¯ç”± Google å¼€å‘çš„å¼€æº SDKï¼Œæœ‰åŠ©äºä»å•ä¸€ä»£ç åº“ä¸ºç§»åŠ¨ã€webã€æ¡Œé¢å’ŒåµŒå…¥å¼åº”ç”¨ç¨‹åºåˆ›å»ºæœ¬æœºä¼˜åŒ–çš„åº”ç”¨ç¨‹åºã€‚Flutter çš„äººæ°”ä¸æ—¥ä¿±å¢ï¼›é¢¤æŒ¯åº”ç”¨ç°åœ¨æ— å¤„ä¸åœ¨ã€‚

è¯´åˆ°åš appï¼Œä¸ä»…ä»…æ˜¯å¼€å‘æ¼‚äº®çš„ UIï¼›è¿™ä¹Ÿæ˜¯é€šè¿‡å°†ä½ çš„åº”ç”¨åˆ†æˆå¤šä¸ªé¡µé¢æ¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä½¿ç”¨ Flutter çš„å¯¼èˆªå’Œå¤šé¡µé¢åº”ç”¨ç¨‹åºã€‚

## ä»€ä¹ˆæ˜¯é£˜åŠ¨ä¸­çš„ä¸€é¡µï¼Ÿ

é¡µé¢æ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹å¯è§çš„å•ä¸ªå±å¹•ã€‚å•ä¸ªé¡µé¢æˆ–å±å¹•å¯ä»¥ç”±è®¸å¤šå°éƒ¨ä»¶ç»„æˆï¼Œè¿™äº›å°éƒ¨ä»¶è¢«ç»„ç»‡åœ¨ä¸€èµ·ä»¥åˆ›å»ºæ‰€éœ€çš„ UIã€‚Flutter ä¸­çš„é¡µé¢/å±å¹•è¢«ç§°ä¸ºè·¯çº¿ï¼Œæˆ‘ä»¬ä½¿ç”¨ Navigator å°éƒ¨ä»¶åœ¨å®ƒä»¬ä¹‹é—´å¯¼èˆªã€‚

åœ¨ Flutter ä¸­ï¼Œæ‰€æœ‰ä¸œè¥¿â€”â€”åŒ…æ‹¬å¤šé¡µé¢åº”ç”¨â€”â€”éƒ½æ˜¯å°éƒ¨ä»¶ã€‚Flutter ä½¿ç”¨æ–¹ä¾¿çš„å°éƒ¨ä»¶(å¦‚ MaterialApp ),æ ¹æ®ç”¨æˆ·çš„å¯¼èˆªå’Œåå¥½æ˜¾ç¤ºä¸åŒçš„å±å¹•ã€‚

## ä½ å¦‚ä½•æµè§ˆç½‘é¡µï¼Ÿ

Navigator å°éƒ¨ä»¶ä¸ MaterialApp æ†ç»‘åœ¨ä¸€èµ·ï¼Œç®¡ç†ä¸€å † [Route](https://api.flutter.dev/flutter/widgets/Route-class.html) å¯¹è±¡ã€‚æ‚¨å¯ä»¥å°† route å¯¹è±¡è§†ä¸ºå•ä¸ªé¡µé¢æˆ–å±å¹•çš„è¡¨ç¤ºã€‚è¿™ä¸€å æœ€ä¸Šé¢çš„è·¯çº¿å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å¯è§çš„ï¼Œå½“ç”¨æˆ·æŒ‰ä¸‹åé€€æŒ‰é’®æ—¶ï¼Œæœ€ä¸Šé¢çš„è·¯çº¿å°±ä¼šå¼¹å‡ºï¼Œéœ²å‡ºä¸‹é¢çš„è·¯çº¿ï¼Œå°±åƒä¸€å å¡ç‰‡ä¸€æ ·ã€‚

## æˆ‘ä»¬èµ°å§ğŸš€

è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ª MaterialApp å°éƒ¨ä»¶ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé…ç½®é¡¶çº§çš„[å¯¼èˆªå™¨](https://api.flutter.dev/flutter/widgets/Navigator-class.html)ä»¥åŠå…¶ä»–åŸºæœ¬çš„ä¸œè¥¿:

```
class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Naviation Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const FirstPage(title: 'FirstPage'),
    );
  }
}

```

ç”±äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæœ‰å¤šä¸ªé¡µé¢ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªé¡µé¢/å±å¹•ï¼Œåˆ†åˆ«å«åš**ç¬¬ä¸€é¡µ**å’Œ**ç¬¬äºŒé¡µ**ã€‚

ä¸‹é¢æ˜¯**ç¬¬ä¸€é¡µ**å°éƒ¨ä»¶ï¼Œå®ƒç”±ä¸€ä¸ªæ˜¾ç¤ºé¡µé¢/å±å¹•æ ‡é¢˜çš„ AppBar å’Œä¸€ä¸ªæ˜¾ç¤ºå¯¼èˆªåˆ°**ç¬¬äºŒé¡µ**çš„æŒ‰é’®çš„ä¸»ä½“ç»„æˆ:

```
class FirstPage extends StatelessWidget {
  const FirstPage({Key? key, required this.title}) : super(key: key);
  final String title;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: TextButton(
          onPressed: () {},
          child: const Text('Next'),
        ),
      ),
    );
  }
}

```

ç°åœ¨ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€é¡µç›®å‰çš„æ ·å­ã€‚

![First Page](img/88148f618c7e5c270aadda9fb5a78017.png)

### å¯¼èˆªåˆ°ç¬¬äºŒé¡µğŸšª

å¦‚æœä½ å°è¯•ç‚¹å‡»**ä¸‹ä¸€ä¸ª**æŒ‰é’®ï¼Œä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å‘Šè¯‰ Flutter å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶è¯¥åšä»€ä¹ˆã€‚

ä½¿ç”¨`Navigator.push()`æ–¹æ³•åˆ‡æ¢åˆ°æ–°è·¯çº¿ã€‚å¯¼èˆªå™¨çš„`push()`æ–¹æ³•å°†ä¸€æ¡è·¯ç”±æ·»åŠ åˆ°å®ƒç®¡ç†çš„è·¯ç”±å †æ ˆä¸­ã€‚

ä¸ºäº†å¯¼èˆªåˆ°**ç¬¬äºŒé¡µ**ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºå®ƒï¼Œä½ ä¸è¿™æ ·è®¤ä¸ºå—ï¼ŸğŸ¤ **ç¬¬äºŒé¡µ**å°†ä¸**ç¬¬ä¸€é¡µ**å‡ ä¹ç›¸åŒï¼Œæ–‡æœ¬ç°åœ¨å˜ä¸º**è¿”å›**:

```
class SecondPage extends StatelessWidget {
  const SecondPage({Key? key, required this.title}) : super(key: key);
  final String title;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(title),
      ),
      body: Center(
        child: TextButton(
          onPressed: () {},
          child: const Text('Go Back'),
        ),
      ),
    );
  }
}

```

æ—¢ç„¶æˆ‘ä»¬çš„**ç¬¬äºŒé¡µ**å·²ç»æ„å»ºå¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ–°**ç¬¬ä¸€é¡µ**ä¸­çš„`onPressed()`æ–¹æ³•å¯¼èˆªåˆ°å®ƒã€‚ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢**é¦–é¡µ**çš„`TextButton`ä¸­çš„`onPressed()`:

```
onPressed: () {
   Navigator.push(context, MaterialPageRoute(builder: (context) {
     return const SecondPage(title: 'SecondPage');
   }));
}

```

å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨`MaterialPageRoute`åœ¨é¡µé¢/å±å¹•ä¹‹é—´å¯¼èˆªï¼Œä½†æœ‰æ—¶å½“æˆ‘ä»¬æƒ³è¦æ›´å¤šçš„æ§åˆ¶æ¥æ·»åŠ è‡ªå®šä¹‰è¿‡æ¸¡ä¹‹ç±»çš„ä¸œè¥¿æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`PageRouteBuilder`ã€‚

### è¿”å›é¦–é¡µğŸ”™

ä¸‡å²ï¼ğŸ¥‚:ä½ å·²ç»æˆåŠŸåœ°åœ¨ Flutter ä¸­åˆ›å»ºäº†ä½ çš„ç¬¬ä¸€ä¸ªå¤šé¡µé¢åº”ç”¨ç¨‹åºã€‚è¶³å¤Ÿçš„åº†ç¥æ´»åŠ¨ï¼›ç°åœ¨æ˜¯æ—¶å€™å¯¼èˆªå›ç¬¬**é¡µç¬¬**é¡µäº†ã€‚

ä¸ºäº†å¾€å›å¯¼èˆªï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`Navigator.pop()`æ–¹æ³•ã€‚å®ƒä»å¯¼èˆªå™¨çš„è·¯çº¿å †æ ˆä¸­åˆ é™¤å½“å‰è·¯çº¿ã€‚

åœ¨**ç¬¬äºŒé¡µ**ä¸­ï¼Œç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢`onPressed()`:

```
onPressed: () {
  Navigator.pop(context);
}

```

è¿™æ˜¯æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€åšçš„æ‰€æœ‰åŠªåŠ›çš„ç»“æœ:

![Second Page](img/c27b77411e66892985a02309b30a2c82.png)

### ä»ç¬¬äºŒé¡µè¿”å›ä¸€äº›æ•°æ®åˆ°ç¬¬ä¸€é¡µğŸš›

æœ‰æ—¶ï¼Œæ‚¨å¸Œæœ›ä»å¯¼èˆªå™¨å †æ ˆå¼¹å‡ºçš„è·¯çº¿è¿”å›ä¸€äº›æ•°æ®ã€‚å‡è®¾åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå½“æˆ‘ä»¬ä»**ç¬¬äºŒé¡µ**å¯¼èˆªå›**ç¬¬ä¸€é¡µ**æ—¶ï¼Œæˆ‘ä»¬å°†è¿”å›ä¸€æ¡æ¶ˆæ¯è¯´**ä»ç¬¬äºŒé¡µ**è¿”å›ã€‚

åœ¨`SecondPage`çš„`build()`æ–¹æ³•ä¸­ï¼Œæ›´æ–°`onPressed()`å›è°ƒ:

```
onPressed: () {
  Navigator.pop(context, "Returned from SecondPage");
}

```

ç°åœ¨åœ¨`FirstPage`çš„`build()`æ–¹æ³•ä¸­ï¼Œå°†`onPressed()`æ–¹æ³•æ›¿æ¢ä¸º:

```
onPressed: () async {
  var message = await Navigator.push(context,
   MaterialPageRoute(builder: (context) {
     return const SecondPage(title: 'SecondPage');
    }));
        // This message will be printed to the console
   print(message);
}

```

è¿™é‡Œçš„`onPressed()`æ–¹æ³•ç°åœ¨çœ‹èµ·æ¥åƒä¸€ä¸ªå¥‡æ€ªçš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨`async/await`å…³é”®å­—æ¥ç­‰å¾…æ–¹æ³•`Navigator.push()`è¿”å›çš„`Future`ã€‚

ç†è§£å®ƒå°±åƒæˆ‘ä»¬åœ¨ç­‰å¾…åœ¨`push()`æ–¹æ³•ä¸Šä½¿ç”¨å…³é”®å­—`await`ï¼Œç›´åˆ°å®ƒè¢«å¼¹å‡ºå¹¶è¿”å›æ¶ˆæ¯ã€‚ä¸ºäº†ä½¿ç”¨`await`å…³é”®å­—ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨å…³é”®å­—`async`ä½¿`onPressed()`æ–¹æ³•å¼‚æ­¥ã€‚å¦‚æœæ‚¨éœ€è¦å¸®åŠ©ï¼Œè¯·äº†è§£æ›´å¤šå…³äº Dart ä¸­çš„[å¼‚æ­¥ç¼–ç¨‹](https://dart.dev/codelabs/async-await)çš„ä¿¡æ¯ã€‚

è¿è¡Œ appï¼ŒæŒ‰ä¸‹**ç¬¬äºŒé¡µ**ä¸Šçš„**è¿”å›**æŒ‰é’®ã€‚æ£€æŸ¥æ§åˆ¶å°ä»¥æŸ¥çœ‹è¿”å›çš„æ¶ˆæ¯:

```
flutter: Returned from SecondPage

```

## é—è¨€

åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ [Navigator å°éƒ¨ä»¶](https://blog.logrocket.com/understanding-flutter-navigation-routing/)åœ¨ Flutter ä¸­åˆ›å»ºå¤šé¡µé¢åº”ç”¨ç¨‹åºï¼Œä»¥åŠå¦‚ä½•åœ¨å¼¹å‡ºä¸€æ¡è·¯çº¿æ—¶è¿”å›æ•°æ®ã€‚è¿™ä¸æ˜¯ç»“æŸï¼Œè€Œæ˜¯å¤§é‡è¯¾ç¨‹çš„å¼€å§‹ï¼Œå½“ä½ åœ¨å­¦ä¹ æ‰‘åŠ¨çš„æ—…ç¨‹ä¸­å‰è¿›æ—¶ï¼Œè¿™äº›è¯¾ç¨‹ä¼šå‘ä½ èµ°æ¥ã€‚æˆ‘å»ºè®®ä½ å»æµè§ˆä¸€ä¸‹[å®˜æ–¹æ–‡ä»¶](https://docs.flutter.dev/development/ui/navigation)ï¼Œäº†è§£æ›´å¤šå…³äºå¯¼èˆªå’Œå…¶ä»–åŸºç¡€çŸ¥è¯†ã€‚

ç¥ä½ å¥½è¿ï¼å¼€å¿ƒé£˜é£˜ï¼ğŸ‘¨â€ğŸ’»

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶å‘è¡¨ã€‚ğŸ‘‡

æ¬¢è¿ä»»ä½•åé¦ˆã€‚

## ä½¿ç”¨ [LogRocket](https://lp.logrocket.com/blg/signup) æ¶ˆé™¤ä¼ ç»Ÿé”™è¯¯æŠ¥å‘Šçš„å¹²æ‰°

[![LogRocket Dashboard Free Trial Banner](img/d6f5a5dd739296c1dd7aab3d5e77eeb9.png)](https://lp.logrocket.com/blg/signup)

[LogRocket](https://lp.logrocket.com/blg/signup) æ˜¯ä¸€ä¸ªæ•°å­—ä½“éªŒåˆ†æè§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿æŠ¤æ‚¨å…å—æ•°ç™¾ä¸ªå‡é˜³æ€§é”™è¯¯è­¦æŠ¥çš„å½±å“ï¼Œåªé’ˆå¯¹å‡ ä¸ªçœŸæ­£é‡è¦çš„é¡¹ç›®ã€‚LogRocket ä¼šå‘Šè¯‰æ‚¨åº”ç”¨ç¨‹åºä¸­å®é™…å½±å“ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„ bug å’Œ UX é—®é¢˜ã€‚

ç„¶åï¼Œä½¿ç”¨å…·æœ‰æ·±å±‚æŠ€æœ¯é¥æµ‹çš„ä¼šè¯é‡æ”¾æ¥ç¡®åˆ‡åœ°æŸ¥çœ‹ç”¨æˆ·çœ‹åˆ°äº†ä»€ä¹ˆä»¥åŠæ˜¯ä»€ä¹ˆå¯¼è‡´äº†é—®é¢˜ï¼Œå°±åƒä½ åœ¨ä»–ä»¬èº«åçœ‹ä¸€æ ·ã€‚

LogRocket è‡ªåŠ¨èšåˆå®¢æˆ·ç«¯é”™è¯¯ã€JS å¼‚å¸¸ã€å‰ç«¯æ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·äº¤äº’ã€‚ç„¶å LogRocket ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥å‘Šè¯‰ä½ å“ªäº›é—®é¢˜æ­£åœ¨å½±å“å¤§å¤šæ•°ç”¨æˆ·ï¼Œå¹¶æä¾›ä½ éœ€è¦ä¿®å¤å®ƒçš„ä¸Šä¸‹æ–‡ã€‚

å…³æ³¨é‡è¦çš„ bugâ€”[ä»Šå¤©å°±è¯•è¯• LogRocketã€‘ã€‚](https://lp.logrocket.com/blg/signup-issue-free)