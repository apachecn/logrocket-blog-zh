<html>
<head>
<title>Using Re.pack for large-scale React Native projects </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>å¯¹å¤§å‹Reactæœ¬åœ°é¡¹ç›®ä½¿ç”¨Re.pack</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/repack-large-scale-react-native-apps/#0001-01-01">https://blog.logrocket.com/repack-large-scale-react-native-apps/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Re.packæ˜¯ä¸€ä¸ªåŸºäºwebpackçš„å·¥å…·åŒ…ï¼Œç”¨äºæ„å»ºå®Œå…¨æ”¯æŒwebpackç”Ÿæ€ç³»ç»Ÿçš„ReactåŸç”Ÿåº”ç”¨ç¨‹åºï¼Œå®ƒå·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´ï¼Œé€šè¿‡ä¸ºReactåŸç”Ÿåº”ç”¨ç¨‹åºå¸¦æ¥ä»£ç æ‹†åˆ†ã€æ¨¡å—è”åˆå’Œå¤šæ†ç»‘æ”¯æŒï¼Œæ­£åœ¨è§£å†³å¤§è§„æ¨¡åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªå¤§é—®é¢˜ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹Re.packä¸ºReactåŸç”Ÿåº”ç”¨ç¨‹åºæä¾›äº†ä»€ä¹ˆï¼Œå¹¶å¯¹å…¶åŠŸèƒ½è¿›è¡Œä¸€ä¸ªå°å®éªŒã€‚</p>
<p>å‘å‰è·³:</p>

<h2 id="bundling-javascript-react-native">ç»‘å®šJavaScriptå’ŒReact Native</h2>
<p>æ†ç»‘å™¨æ˜¯æ‰€æœ‰JavaScriptåº”ç”¨çš„åŸºç¡€æŠ€æœ¯ã€‚ReactåŸç”Ÿåº”ç”¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼›éšç€æˆ‘ä»¬åœ¨React Nativeä¸­å¼€å‘æ›´å¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œæœ‰æ•ˆæ†ç»‘å¤§é‡JavaScriptçš„æƒ³æ³•å¼€å§‹å‡ºç°ã€‚</p>
<p>è„¸ä¹¦æœ€è¿‘æŠ•èµ„äº†â€œæˆ‘â€<a href="https://facebook.github.io/metro/">tro bundler</a>,å¹¶åœ¨ç¤¾åŒºçš„å¸®åŠ©ä¸‹å–å¾—äº†æ˜¾è‘—æˆæ•ˆã€‚ä½†æ˜¯å¯¹äºæœåŠ¡äºå‡ åä¸ªå…·æœ‰å¤§é‡ç‰¹æ€§çš„æ¨¡å—çš„å¤§è§„æ¨¡åº”ç”¨ç¨‹åºï¼Œéœ€è¦ä¸€ä¸ªæ›´åŠ åŠ¨æ€å’Œç‰¹æ€§æ›´åŠ ä¸°å¯Œçš„æ†ç»‘å™¨ã€‚å¦‚æœä½ æœ‰webpackï¼Œè¿˜èƒ½å»å“ªé‡Œæ‰¾å‘¢ï¼ŸğŸ™‚</p>
<p>Re.packå¸¦æ¥äº†ç¤¾åŒºåå¹´æ¥ä¸ºReact Nativeå¼€å‘çš„webpackçš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ©ç”¨ç°ä»£æ€æƒ³ï¼Œå¦‚æ¨¡å—è”åˆå’ŒåŠ¨æ€ä»£ç åˆ†å‰²ï¼Œæ¥å¼€å‘React Nativeåº”ç”¨ç¨‹åºã€‚</p>
<h2 id="repack-features">é‡æ–°æ‰“åŒ…åŠŸèƒ½</h2>
<h3 id="better-code-splitting">æ›´å¥½çš„ä»£ç åˆ†å‰²</h3>
<p>è‡ªä»SPAså‡ºç°ä»¥æ¥ï¼Œä»£ç åˆ†å‰²å°±ä¸€ç›´æ˜¯äººä»¬è°ˆè®ºçš„è¯é¢˜ï¼Œå½“æ—¶æˆ‘ä»¬å¼€å§‹æä¾›å¤§é‡çš„JavaScriptæ¥å‘ˆç°å“ªæ€•æ˜¯æœ€å°çš„UIã€‚å¯¹äºReactåŸç”Ÿappæ¥è¯´ï¼Œå°±æœ‰ç‚¹ä¸ä¸€æ ·äº†ï¼›åœ¨è¿™é‡Œï¼Œå®ƒæ˜¯å…³äºåœ¨ä¸»çº¿ç¨‹ä¸ŠåªåŠ è½½æ‰€éœ€çš„JSï¼Œä»¥ä½¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯åŠ¨æ›´å¿«ï¼Œå¹¶ä¼˜åŒ–å†…å­˜æ¶ˆè€—ã€‚å°½ç®¡Reactæ‚¬ç–‘ä»£ç æ‹†åˆ†ç°åœ¨å¯¹äºReactåº”ç”¨æ¥è¯´éå¸¸ç®€å•ï¼Œä½†å¯¹äºRNåº”ç”¨æ¥è¯´ä»ç„¶æ˜¯ä¸€ä¸ªéº»çƒ¦ã€‚</p>
<p>Re.packå…è®¸åˆ›å»ºåŸºäºæ‚¬å¿µçš„åº”ç”¨ç¨‹åºå—ï¼Œæ¯ä¸ªå—åªåœ¨éœ€è¦æ—¶åŠ è½½åˆ°ä¸»çº¿ç¨‹ä¸Šã€‚åœ¨æœ¬æ–‡çš„åé¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨è¿™ä¸ªç‰¹æ€§çš„è¯¦ç»†å®ç°ã€‚</p>
<h3 id="module-federation">æ¨¡å—è”ç›Ÿ</h3>
<p>å‰ç«¯å·¥ç¨‹ä¸­æœ€è¿‘å‡ºç°äº†å‡ ç§æ¨¡å¼ï¼Œå…¶ä¸­æœ€çªå‡ºçš„æ˜¯æ¨¡å—è”åˆâ€”â€”ä¸‹é¢æ˜¯webpack <a href="https://webpack.js.org/concepts/module-federation/">å¦‚ä½•å®šä¹‰æ¦‚å¿µ</a> <a href="https://webpack.js.org/concepts/module-federation/"> : </a></p>
<blockquote><p>å¤šä¸ªç‹¬ç«‹çš„æ„å»ºåº”è¯¥å½¢æˆä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚è¿™äº›ç‹¬ç«‹çš„æ„å»ºå°±åƒå®¹å™¨ä¸€æ ·ï¼Œå¯ä»¥åœ¨æ„å»ºä¹‹é—´å…¬å¼€å’Œä½¿ç”¨ä»£ç ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„åº”ç”¨ç¨‹åºã€‚</p></blockquote>
<p>è¿™æ”¯æŒè·¨åº”ç”¨ç¨‹åºçš„å¤§é‡ä»£ç é‡ç”¨ï¼Œè€Œæ— éœ€å¤„ç†è½¯ä»¶åŒ…ç®¡ç†çš„éº»çƒ¦ã€‚Re.packå…è®¸RNåº”ç”¨ç¨‹åºä½¿ç”¨æœ¬åœ°å’Œè¿œç¨‹å—çš„æ¨¡å—è”é‚¦ï¼Œè¿™ä½¿å¾—åŒæ—¶å‘å‡ ä¸ªåº”ç”¨ç¨‹åºå‘å¸ƒé”™è¯¯ä¿®å¤å’Œå‡çº§å˜å¾—éå¸¸å®¹æ˜“ã€‚</p>
<h2 id="plugin-ecosystem">æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ</h2>
<p>åœ¨è¿‡å»çš„åå¹´ä¸­ï¼Œç¤¾åŒºå·²ç»ä¸ºwebpackå¼€å‘äº†å¤§é‡çš„æ’ä»¶ï¼Œä¸ºæ†ç»‘é¢†åŸŸå¸¦æ¥äº†ä¸€äº›éå¸¸é…·çš„æƒ³æ³•ã€‚ä¸ºReactæœ¬åœ°æ†ç»‘å¯ç”¨webpackæ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›æ’ä»¶ï¼Œå¹¶åˆ›å»ºæ›´åŠ ä¼˜åŒ–å’Œé«˜æ•ˆçš„JSæ†ç»‘åŒ…ã€‚</p>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå°çš„æ¼”ç¤ºåº”ç”¨ç¨‹åºæ¥æµ‹è¯•æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„ç‰¹æ€§ã€‚</p>
<h2 id="building-demo-react-native-app">æ„å»ºæˆ‘ä»¬çš„æ¼”ç¤ºReactæœ¬æœºåº”ç”¨ç¨‹åº</h2>
<h3 id="initializing-react-native-app">åˆå§‹åŒ–æˆ‘ä»¬çš„Reactæœ¬åœ°åº”ç”¨</h3>
<p>æˆ‘ä»¬å°†ä»é€šè¿‡CLIä½¿ç”¨TypeScriptæ¨¡æ¿è®¾ç½®Reactæœ¬æœºåº”ç”¨ç¨‹åºå¼€å§‹:</p>
<pre class="language-typescript hljs">npx react-native init RepackDemo --template react-native-template-typescript</pre>
<h3 id="adding-dependencies">æ·»åŠ ä¾èµ–å…³ç³»</h3>
<p>é¡¹ç›®å¯åŠ¨å¹¶è¿è¡Œåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€å°†Re.packç›¸å…³çš„ä¾èµ–é¡¹æ·»åŠ åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­:</p>
<pre class="language-javascript hljs">npm i -D @callstack/repack babel-loader swc-loader terser-webpack-plugin webpack @types/react</pre>
<p>æˆ–è€…:</p>
<pre class="language-bash hljs">yarn add -D @callstack/repack babel-loader swc-loader terser-webpack-plugin webpack @types/react</pre>
<h3 id="configuring-commands">é…ç½®å‘½ä»¤</h3>
<p>ä½¿ç”¨Re.packæ„å‘³ç€æˆ‘ä»¬æ­£åœ¨è¿œç¦»React Nativeçš„é»˜è®¤metro bundlerï¼Œå› æ­¤é»˜è®¤çš„<code>react-native start</code>å‘½ä»¤ä¸å†æœ‰ç”¨ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>react-native webpack-start</code>æ¥è¿è¡Œæˆ‘ä»¬çš„JSæœåŠ¡å™¨ã€‚</p>
<p>ä¸ºäº†ä½¿è¿™ä¸ªå‘½ä»¤åœ¨React Nativeä¸­å¯ç”¨ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨ä»¥ä¸‹å†…å®¹æ›´æ–°æˆ‘ä»¬çš„<code>react-native.config.js</code>:</p>
<pre class="language-javascript hljs">module.exports = {
 commands: require('@callstack/repack/commands'),
};
</pre>
<p>è¿™å°†ä½¿Re.packå‘½ä»¤<code>react-native webpack-start</code>å’Œ<code>react-native webpack-bundle</code>ä¸React Nativeæ— ç¼æŒ‚é’©ã€‚ç°åœ¨ï¼Œä¸ºäº†è®©æˆ‘ä»¬çš„å¼€å‘æ›´å¿«ï¼Œæˆ‘ä»¬å°†æŠŠpackage.jsonä¸­çš„<code>start</code>è„šæœ¬æ›´æ–°ä¸º<code>react-native webpack-start</code>:</p>
<pre class="language-javascript hljs">{
  â€œscriptsâ€: {
    â€œstartâ€: â€œreact-native webpack-startâ€
  }
}
</pre>
<h3 id="configuring-webpack">é…ç½®webpack</h3>
<p>ä¸ºäº†ä½¿ç”¨æˆ‘ä»¬æ–°çš„<code>start</code>å‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªwebpacké…ç½®æ–‡ä»¶ã€‚å‡ºäºæ¼”ç¤ºç›®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ç°æˆçš„é…ç½®ã€‚æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¸æ–­æ·±å…¥å’Œæ›´æ–°é…ç½®ã€‚æ‚¨å¯ä»¥ä»æˆ‘ä»¬çš„æ¼”ç¤ºé¡¹ç›®ä¸­å¤åˆ¶<a href="https://github.com/zsajjad/RepackDemo/blob/main/webpack.config.mjs">è¿™äº›é…ç½®</a>ï¼Œå¹¶å°†å…¶æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>webpack.config.mjs</code>ä¸­ã€‚</p>
<h3 id="configure-ios-native">é…ç½®iOSåŸç”Ÿ</h3>
<p>å¯¹äºå‘å¸ƒæ„å»ºï¼Œæˆ‘ä»¬çš„JavaScriptæ˜¯ä½¿ç”¨Xcodeçš„æ„å»ºé˜¶æ®µä»»åŠ¡æ†ç»‘çš„ã€‚ä¸ºäº†åœ¨é‚£é‡Œé‡æ–°æ‰“åŒ…ï¼Œæˆ‘ä»¬å°†æ›´æ–°æ„å»ºé˜¶æ®µã€‚å°†ä¸‹é¢ä¸€è¡Œæ·»åŠ åˆ°<code>Bundle React Native code and images</code>ä»»åŠ¡:</p>
<pre class="language-javascript hljs">export BUNDLE_COMMAND=webpack-bundle
</pre>
<p><img data-attachment-id="155270" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/bundle-react-native-code-images-task-xcode/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png" data-orig-size="730,285" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The bundle React Native code and images task in Xcode" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode-300x117.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png" decoding="async" class="aligncenter size-full wp-image-155270 jetpack-lazy-image" src="../Images/06e802ce05b02b06a30d839ae5261369.png" alt="The Bundle React Native Code And Images Task In Xcode" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode-300x117.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155270" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/bundle-react-native-code-images-task-xcode/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png" data-orig-size="730,285" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="The bundle React Native code and images task in Xcode" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode-300x117.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-155270" src="../Images/06e802ce05b02b06a30d839ae5261369.png" alt="The Bundle React Native Code And Images Task In Xcode" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode-300x117.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-react-native-code-images-task-xcode.png"/></noscript>
<h3 id="configure-android-native">é…ç½®AndroidåŸç”Ÿ</h3>
<p>å°±åƒåœ¨iOSåº”ç”¨ç¨‹åºä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬å°†æ›´æ–°<code>buildCommand</code>æ¥ä¸ºAndroidåº”ç”¨ç¨‹åºæ„å»ºä¸€ä¸ªå‘½ä»¤ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ›´æ–°<code>app/build.gradle</code>ä¸­çš„ä»¥ä¸‹è¡Œ:</p>
<pre class="language-javascript hljs">project.ext.react = [
    enableHermes: true,  // clean and rebuild if changing
    bundleCommand: "webpack-bundle",
]
</pre>
<p>ğŸ¥³:æˆ‘ä»¬ç°åœ¨å‡†å¤‡å¼€å§‹åœ¨React Nativeä¸­åˆ©ç”¨Re.packè¿›è¡ŒJavaScriptæ†ç»‘ã€‚</p>
<h2 id="how-code-splitting-works-repack">ä»£ç åˆ†å‰²å¦‚ä½•ä¸Re.packä¸€èµ·å·¥ä½œ</h2>
<p>è®©æˆ‘ä»¬å¼€å§‹æ¢ç´¢ä»£ç åˆ†å‰²å¦‚ä½•ä¸Re.packä¸€èµ·å·¥ä½œã€‚é‡ç”³ä¸€ä¸‹ï¼Œæœ¬åœ°å—æ˜¯åº”ç”¨ç¨‹åºè‡ªå¸¦çš„ï¼Œè€Œè¿œç¨‹å—æ˜¯é€šè¿‡ç½‘ç»œæä¾›çš„ï¼Œä¸æ˜¯åº”ç”¨ç¨‹åºæ„å»ºçš„ä¸€éƒ¨åˆ†ã€‚å¯¹äºæˆ‘ä»¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºæœ¬åœ°å’Œè¿œç¨‹å—ä»¥è·å¾—æ›´å¥½çš„ç†è§£ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå›è´­çš„æ ·å­:</p>
<p><img data-attachment-id="155272" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/apps-repo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png" data-orig-size="560,649" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Appsâ€™ repo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo-259x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png" decoding="async" class="aligncenter size-full wp-image-155272 jetpack-lazy-image" src="../Images/66fa037704221cc5e31b4b0c1dae0b56.png" alt="Apps' Repo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png 560w, https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo-259x300.png 259w" data-lazy-sizes="(max-width: 560px) 100vw, 560px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155272" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/apps-repo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png" data-orig-size="560,649" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Appsâ€™ repo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo-259x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-155272" src="../Images/66fa037704221cc5e31b4b0c1dae0b56.png" alt="Apps' Repo" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png 560w, https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo-259x300.png 259w" sizes="(max-width: 560px) 100vw, 560px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/apps-repo.png"/></noscript>
<p>æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªæ¨¡å—:<code>LocalModule</code>å’Œ<code>Remote Module</code>ã€‚</p>
<p>è¿™é‡Œæ˜¯æˆ‘ä»¬å°è£…åŠ¨æ€åŠ è½½çš„<a href="https://www.dropbox.com/paper/ep/redirect/external-link?url=https%3A%2F%2Fgithub.com%2Fzsajjad%2FRepackDemo%2Fblob%2Fmain%2Fsrc%2Fmodules%2FRemoteModule%2Findex.tsx&amp;hmac=1wAChinqucoFoJ5QsRKWZJ%2BEtoUGg9Ahaqe598n5NfE%3D">æ¨¡å—åŒ…è£…å™¨</a>:</p>
<pre class="language-typescript hljs">/**
 * path: src/modules/RemoteModule/index.tsx
 * description:
 *    This is a remote module that is loaded asynchronously.
 *    This file encapsulate React.lazy and React.Suspense over the remote module.
 */
import React from 'react';
import { Text } from '../../components/Text';
const Component = React.lazy(() =&gt; import(/* webpackChunkName: "remoteModule" */ './RemoteModule'));
export default () =&gt; (
  &lt;React.Suspense fallback={&lt;Text&gt;Loading Remote Module...&lt;/Text&gt;}&gt;
    &lt;Component /&gt;
  &lt;/React.Suspense&gt;
);
</pre>
<p>ä¸‹é¢æ˜¯<a href="https://github.com/zsajjad/RepackDemo/blob/main/src/modules/RemoteModule/index.tsx">æ¨¡å—çš„ä»£ç </a>çš„æ ·å­:</p>
<pre class="language-typescript hljs">/**
z * path: src/modules/RemoteModule/RemoteModule.tsx
 * description:
 *   This is a remote module that is loaded asynchronously.
 *   This file is the actual module that is loaded asynchronously.
 */
import React from 'react';
import { useColorScheme, View } from 'react-native';
import { Colors } from 'react-native/Libraries/NewAppScreen';
import { Section } from '../../components/Section';
import { Text } from '../../components/Text';
function RemoteModule() {
  const isDarkMode = useColorScheme() === 'dark';
  return (
    &lt;View
      style={{
        backgroundColor: isDarkMode ? Colors.black : Colors.white,
      }}
    &gt;
      &lt;Section title="Remote Module"&gt;
        &lt;Text&gt;
          This module is loading dynamically for execution and is not shipped with the app. It is a remote module.
        &lt;/Text&gt;
      &lt;/Section&gt;
      &lt;Section title="Details"&gt;
        &lt;Text&gt;
          This will not be part of app's initial bundle size. This will be loaded in app after consuming network
          bandwidth.
        &lt;/Text&gt;
      &lt;/Section&gt;
    &lt;/View&gt;
  );
}
export default RemoteModule;
</pre>
<p>ä¸€æ—¦æˆ‘ä»¬çš„æ¨¡å—å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å°†è®¾ç½®æˆ‘ä»¬çš„webpacké…ç½®ã€appé…ç½®å’Œæ ¹æ–‡ä»¶ï¼Œä»¥æ”¯æŒè¿™äº›æ¨¡å—çš„åŠ¨æ€åŠ è½½ã€‚</p>
<p>åœ¨åº”ç”¨ç¨‹åºé…ç½®æ–¹é¢ï¼Œæˆ‘ä»¬å°†å®šä¹‰æˆ‘ä»¬å¸Œæœ›åŠ¨æ€åŠ è½½çš„æ¨¡å—ã€‚å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä»¥ä¸‹æ¨¡å—:</p>
<pre class="language-json hljs">// app.json
{
  "localChunks": ["src_modules_LocalModule_LocalModule_tsx"],
  "remoteChunks": ["src_modules_RemoteModule_RemoteModule_tsx"],
}
</pre>
<p>è¿™é‡Œï¼Œ<code>localChunks</code>æ˜¯appè‡ªå¸¦çš„æ¨¡å—ï¼Œ<code>remoteChunks</code>æ˜¯åŠ¨æ€åŠ è½½çš„æ¨¡å—ã€‚è¿™äº›æ¨¡å—è¢«ä¼ é€’ç»™webpacké…ç½®ï¼Œä»¥ä¾¿èƒ½å¤ŸåŠ¨æ€åŠ è½½è¿™äº›æ¨¡å—ã€‚</p>
<p>åœ¨webpacké…ç½®æ–¹é¢ï¼Œæˆ‘ä»¬å°†ä¸ºåº”ç”¨ç¨‹åºå®šä¹‰å…¥å£ç‚¹ã€‚å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä»¥ä¸‹å…¥å£ç‚¹:</p>
<pre class="language-javascript hljs">// webpack.config.mjs#222
new Repack.RepackPlugin({
  ...
  extraChunks: [
    {
      include: appJson.localChunks,
      type: 'local',
    },
    {
      include: appJson.remoteChunks,
      type: 'remote',
      outputPath: path.join('build/output', platform, 'remote'),
    },
  ],
  ...
}),
</pre>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨ä¸»åŒ…æ—è¾¹å®šä¹‰äº†ä¸¤ä¸ªé¢å¤–çš„å—â€”â€”ä¸€ä¸ªç”¨äºæœ¬åœ°æ¨¡å—ï¼Œä¸€ä¸ªç”¨äºè¿œç¨‹æ¨¡å—ã€‚æˆ‘ä»¬è¿˜ä¸ºè¿œç¨‹å—å®šä¹‰äº†ä¸€ä¸ªè¾“å‡ºè·¯å¾„ã€‚åœ¨æ„å»ºè¿‡ç¨‹ç»“æŸæ—¶ï¼Œè¿œç¨‹å—å°†ä¿å­˜åœ¨è¿™é‡Œã€‚</p>
<p>åœ¨æ ¹æ–‡ä»¶ç«¯ï¼Œæˆ‘ä»¬å°†å®šä¹‰å¦‚ä½•åŠ è½½è¿™äº›æ¨¡å—ã€‚å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬å®šä¹‰ä»¥ä¸‹æ ¹æ–‡ä»¶:</p>
<pre class="language-javascript hljs">// index.js
import { AppRegistry, Platform } from 'react-native';
import { ScriptManager, Script } from '@callstack/repack/client';
import App from './src/App';
import { name as appName, localChunks, remoteChunkUrl, remoteChunkPort } from './app.json';

/**
 * We need to set storage for the ScriptManager to enable caching. This enables us to avoid downloading the same script multiple times.
 */
import AsyncStorage from '@react-native-async-storage/async-storage';
ScriptManager.shared.setStorage(AsyncStorage);

/**
 * We need to set a resolver for the ScriptManager to enable loading scripts from the remote server.
 * The resolver is a function that takes a scriptId and returns a promise that resolves to a script object.
 * The script object has the following shape:
 */
ScriptManager.shared.addResolver(async (scriptId) =&gt; {
  // For development we want to load scripts from the dev server.
  if (__DEV__) {
    return {
      url: Script.getDevServerURL(scriptId),
      cache: false,
    };
  }

  // For production we want to load local chunks from from the file system.
  if (localChunks.includes(scriptId)) {
    return {
      url: Script.getFileSystemURL(scriptId),
    };
  }

  /**
   * For production we want to load remote chunks from the remote server.
   *
   * We have create a small http server that serves the remote chunks.
   * The server is started by the `start:remote` script. It serves the chunks from the `build/output` directory.
   * For customizing server see `./serve-remote-bundles.js`
   */
  const scriptUrl = Platform.select({
    ios: `http://localhost:${remoteChunkPort}/build/output/ios/remote/${scriptId}`,
    android: `${remoteChunkUrl}:${remoteChunkPort}/build/output/android/remote/${scriptId}`,
  });

  return {
    url: Script.getRemoteURL(scriptUrl),
  };
});

/**
 * We can also add a listener to the ScriptManager to get notified about the loading process. This is useful for debugging.
 *
 * This is optional and can be removed.
 */
ScriptManager.shared.on('resolving', (...args) =&gt; {
  console.log('DEBUG/resolving', ...args);
});

ScriptManager.shared.on('resolved', (...args) =&gt; {
  console.log('DEBUG/resolved', ...args);
});

ScriptManager.shared.on('prefetching', (...args) =&gt; {
  console.log('DEBUG/prefetching', ...args);
});

ScriptManager.shared.on('loading', (...args) =&gt; {
  console.log('DEBUG/loading', ...args);
});

ScriptManager.shared.on('loaded', (...args) =&gt; {
  console.log('DEBUG/loaded', ...args);
});

ScriptManager.shared.on('error', (...args) =&gt; {
  console.log('DEBUG/error', ...args);
});

/**
 * We need to register the root component of the app with the AppRegistry.
 * Just like in the default React Native setup.
 */
AppRegistry.registerComponent(appName, () =&gt; App);
</pre>
<p>è¿™ä½¿å¾—æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯ä»¥åŠ è½½è¿œç¨‹æ¨¡å—ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¹¶æŸ¥çœ‹ç»“æœã€‚å› ä¸ºæ¨¡å—æ˜¯åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ä»å¼€å‘æœåŠ¡å™¨åŠ è½½çš„ï¼Œæ‰€ä»¥å®ƒä¸é»˜è®¤è®¾ç½®æ²¡æœ‰å¤ªå¤§çš„ä¸åŒã€‚ä½†æ˜¯åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿œç¨‹æ¨¡å—æ˜¯åœ¨ä¸»åŒ…æ—è¾¹åˆ›å»ºçš„ï¼Œå¹¶ä¸”æ˜¯åŠ¨æ€åŠ è½½çš„ã€‚</p>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‘å¸ƒAPKï¼Œå¹¶å°†å…¶æ”¾åœ¨Android Studioä¸­çš„APKåˆ†æå·¥å…·ä¸‹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ¬åœ°æ¨¡å—ä¸æ˜¯ä¸»åŒ…çš„ä¸€éƒ¨åˆ†ï¼Œè€Œè¿œç¨‹æ¨¡å—ä¸åœ¨APKå†…éƒ¨ï¼›ç›¸åï¼Œå®ƒæ˜¯åœ¨æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„repoçš„<code>build/output/android/remote</code>ç›®å½•ä¸­åˆ›å»ºçš„:</p>
<p><img data-attachment-id="155274" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/bundle-files-created-under-assets-directory/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png" data-orig-size="730,290" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bundle files created under assets directory" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory-300x119.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png" decoding="async" class="aligncenter size-full wp-image-155274 jetpack-lazy-image" src="../Images/37ec78f23ffc95bc30cd2defda800623.png" alt="Bundle Files Created Under Assets Directory" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory-300x119.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155274" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/bundle-files-created-under-assets-directory/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png" data-orig-size="730,290" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bundle files created under assets directory" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory-300x119.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-155274" src="../Images/37ec78f23ffc95bc30cd2defda800623.png" alt="Bundle Files Created Under Assets Directory" srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory-300x119.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/bundle-files-created-under-assets-directory.png"/></noscript>
<p><img data-attachment-id="155277" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/remote-bundles-generated-build-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png" data-orig-size="730,176" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Remote bundles are generated in the build folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png" decoding="async" class="aligncenter size-full wp-image-155277 jetpack-lazy-image" src="../Images/5052614c191cbd98b1fbc893adeb9ece.png" alt="Remote Bundles Are Generated In The Build Folder " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder-300x72.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="155277" data-permalink="https://blog.logrocket.com/repack-large-scale-react-native-apps/attachment/remote-bundles-generated-build-folder/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png" data-orig-size="730,176" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Remote bundles are generated in the build folder" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder-300x72.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-155277" src="../Images/5052614c191cbd98b1fbc893adeb9ece.png" alt="Remote Bundles Are Generated In The Build Folder " srcset="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png 730w, https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder-300x72.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2023/01/remote-bundles-generated-build-folder.png"/></noscript>
<p>å‡ºäºæµ‹è¯•ç›®çš„ï¼Œæˆ‘ä»¬å¼€å§‹æ†ç»‘æœåŠ¡äºHTTPæœåŠ¡å™¨ï¼Œå¹¶åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹æµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿œç¨‹æ¨¡å—æ˜¯ä»HTTPæœåŠ¡å™¨åŠ è½½çš„:</p>
<blockquote class="embedly-card" data-card-controls="1" data-card-align="center" data-card-theme="light">

<p>Dropboxæ˜¯ä¸€é¡¹å…è´¹æœåŠ¡ï¼Œå¯ä»¥è®©ä½ å°†ç…§ç‰‡ã€æ–‡æ¡£å’Œè§†é¢‘å¸¦åˆ°ä»»ä½•åœ°æ–¹ï¼Œå¹¶è½»æ¾åˆ†äº«ã€‚æ°¸è¿œä¸è¦å†ç»™è‡ªå·±å‘é‚®ä»¶äº†ï¼</p>
</blockquote>
<p>å¤šä¸ªå…¥å£ç‚¹</p>
<h2 id="multiple-entry-points-repack">webpackçš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒå…è®¸æˆ‘ä»¬ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºå¤šä¸ªå…¥å£ç‚¹ã€‚è¿™å¯¹äºå¤§è§„æ¨¡å’Œ<a href="https://en.wikipedia.org/wiki/Brownfield_(software_development)"> B </a> <a href="https://en.wikipedia.org/wiki/Brownfield_(software_development)"> rownfield </a>åº”ç”¨ç¨‹åºéå¸¸æœ‰ç”¨ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ†æˆå¤šä¸ªåŒ…ã€‚</h2>
<p>ç‰¹åˆ«æ˜¯å¯¹äºReact Nativeä¸ºæŸäº›åŠŸèƒ½æä¾›æ”¯æŒçš„æ£•è‰²åœ°å¸¦åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ†ç»‘åŒ…ï¼Œåœ¨å®ƒä»¬ä¹‹é—´å…±äº«æŸäº›æœ¬æœºä¾èµ–å…³ç³»ã€‚æœ¬èŠ‚å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨Re.packä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ›å»ºå¤šä¸ªå…¥å£ç‚¹ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„appä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ›´å°æ›´ç®€å•çš„å…¥å£ç‚¹ï¼Œ<code>Bitsy</code>ï¼›å®ƒæ˜¯ä»ä¸åŒçš„å…¥å£ç‚¹<code>/bitsy.js</code>åŠ è½½çš„ã€‚</p>
<p>æˆ‘ä»¬æ›´æ–°äº†webpacké…ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<p>è¦ä»æœ¬æœºå¯åŠ¨<code>Bitsy</code>ï¼Œæ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼æ›´æ–°<code>MainActivity.java</code>:</p>
<pre class="language-javascript hljs">    // webpack.config.js#L70
    entry: [
      ...
      path.join(dirname, 'bitsy.js'),
      ...
    ]
</pre>
<p>æˆ–è€…<code>AppDelegate.m</code>å¦‚ä¸‹:</p>
<pre class="language-javascript hljs">    // MainActivity.java#L15
    @Override
    protected String getMainComponentName() {
        return "RepackBitsy";
    }
</pre>
<p>è¿è¡Œåº”ç”¨ç¨‹åºå°†å¯åŠ¨<code>Bitsy</code>æ¨¡å—ï¼Œè€Œä¸æ˜¯<code>RepackDemo</code>åº”ç”¨ç¨‹åºã€‚</p>
<pre class="language-javascript hljs">    // AppDelegate.m#L47
    UIView *rootView = RCTAppSetupDefaultRootView(bridge, @"RepackBitsy", initProps);
</pre>
<p>ç»“è®º</p>
<h2 id="conclusion">ä»è¿‡å»åå¹´å¼€å§‹ï¼Œwebpackå°±å‡ºç°åœ¨å‰ç«¯å¼€å‘ä¸­ã€‚æˆ‘ä»¬çœ‹åˆ°äº†å¾ˆå¤šå›´ç»•å®ƒå¼€å‘çš„æ’ä»¶ï¼Œä¸ºå¤§å‹appè§£å†³æ†ç»‘å’Œä¼˜åŒ–é¢†åŸŸçš„å¤æ‚é—®é¢˜ã€‚è®©React Nativeå…·å¤‡æ‰€æœ‰è¿™äº›èƒ½åŠ›ï¼Œå°†æœ‰åŠ©äºæˆ‘ä»¬è½»æ¾ç»´æŠ¤å¤§å‹ç§»åŠ¨åº”ç”¨ã€‚è¿™ä¹Ÿå¯ä»¥å¸®åŠ©RNåº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ å®‰å…¨å’Œé«˜æ•ˆã€‚</h2>
<p>ç”¨Re.pack æ£€æŸ¥è¿™ä¸ª<a href="https://github.com/zsajjad/RepackDemo">æ ·æœ¬é¡¹ç›®ã€‚æ‚¨å¯èƒ½éœ€è¦è°ƒæ•´é¡¹ç›®çš„webpacké…ç½®ï¼Œä»¥ç¡®ä¿è·å¾—æœ€ä½³ç»“æœã€‚æœ‰å…³æ¯ä¸ªé€‰é¡¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒé…ç½®æ–‡ä»¶å’Œwebpackæ–‡æ¡£ä¸­çš„æ³¨é‡Šã€‚</a></p>
<p><a href="https://lp.logrocket.com/blg/react-native-signup"> LogRocket </a>:å³æ—¶é‡ç°ReactåŸç”Ÿåº”ç”¨ä¸­çš„é—®é¢˜ã€‚</p><div class="code-block code-block-18">
<div class="blog-plug inline-plug react-native-plug"><h2><a href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>æ˜¯ä¸€æ¬¾ReactåŸç”Ÿç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¯å¸®åŠ©æ‚¨å³æ—¶é‡ç°é—®é¢˜ã€ç¡®å®šbugçš„ä¼˜å…ˆçº§å¹¶äº†è§£ReactåŸç”Ÿåº”ç”¨çš„æ€§èƒ½ã€‚</h2><a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/110055665562c1e02069b3698e6cc671.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/110055665562c1e02069b3698e6cc671.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/react-native-plug_v2-2.png"/></noscript></a><p>LogRocketè¿˜å¯ä»¥å‘ä½ å±•ç¤ºç”¨æˆ·æ˜¯å¦‚ä½•ä¸ä½ çš„åº”ç”¨ç¨‹åºäº’åŠ¨çš„ï¼Œä»è€Œå¸®åŠ©ä½ æé«˜è½¬åŒ–ç‡å’Œäº§å“ä½¿ç”¨ç‡ã€‚LogRocketçš„äº§å“åˆ†æåŠŸèƒ½æ­ç¤ºäº†ç”¨æˆ·ä¸å®Œæˆç‰¹å®šæµç¨‹æˆ–ä¸é‡‡ç”¨æ–°åŠŸèƒ½çš„åŸå› ã€‚</p><p>å¼€å§‹ä¸»åŠ¨ç›‘æ§æ‚¨çš„ReactåŸç”Ÿåº”ç”¨â€” <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">å…è´¹è¯•ç”¨LogRocketã€‘ã€‚</a></p><p>Start proactively monitoring your React Native apps â€” <a class="signup" href="https://lp.logrocket.com/blg/react-native-signup" target="_blank" rel="noopener noreferrer">try LogRocket for free</a>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>