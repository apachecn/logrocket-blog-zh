# ä½¿ç”¨ TypeRunner è¿›è¡Œç±»å‹æ£€æŸ¥

> åŸæ–‡ï¼š<https://blog.logrocket.com/type-checking-typerunner/>

[TypeRunner](https://github.com/marcj/TypeRunner) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ç±»å‹è„šæœ¬ç¼–è¯‘å™¨ï¼Œæ”¯æŒç±»å‹æ£€æŸ¥ï¼Œå®Œå…¨ä¸éœ€è¦`tsc`æˆ– JavaScript å¼•æ“ã€‚å®ƒé€šè¿‡å°† TypeScript æºä»£ç ç¼–è¯‘æˆå­—èŠ‚ç å¹¶åœ¨å®šåˆ¶çš„è™šæ‹Ÿæœºä¸­è¿è¡Œï¼Œæå¤§åœ°åŠ å¿«äº†ç±»å‹æ£€æŸ¥çš„é€Ÿåº¦ã€‚

é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒTypeRunner ä½¿ TypeScript è¯­è¨€åœ¨å£°æ˜ç±»å‹ä¿¡æ¯æ–¹é¢å˜å¾—å¼ºå¤§ï¼Œç„¶åä½¿ç”¨è¿™äº›å®šä¹‰åœ¨å…¶ä»–è¯­è¨€ä¸­æ‰§è¡Œç±»å‹æ£€æŸ¥â€”â€”å®Œå…¨ç‹¬ç«‹äº Node.jsã€Deno æˆ– JavaScript å¼•æ“ã€‚TypeRunner ä½¿ä»¥ TypeScript ç¼–å†™çš„ç±»å‹ä¿¡æ¯å¯ä»¥ç§»æ¤åˆ°å…¶ä»–ç¯å¢ƒä¸­ã€‚

åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒTypeRunner åªæ˜¯ä¸€ä¸ªæ¦‚å¿µéªŒè¯ï¼Œä»…æ”¯æŒä¸€äº›åŸºæœ¬çš„ç±»å‹è¡¨è¾¾å¼(å³åŸè¯­ã€å¯¹è±¡æ–‡å­—ã€æ³›å‹å‡½æ•°ç±»å‹ã€æ¨¡æ¿æ–‡å­—ã€ç±»å‹åˆ«åã€æ•°ç»„ã€å…ƒç»„ã€äº¤é›†ã€è”åˆå’Œ rest å‚æ•°)ã€‚å°šä¸æ”¯æŒæ¥å£æˆ–ç±»ã€‚è¯¥åŒ…çš„ä½œè€… Marc J. Schmidt åœ¨å›è´­ä¸­å»ºè®®ï¼Œå½“ç¤¾åŒºæä¾›è¶³å¤Ÿçš„èµ„é‡‘æ—¶ï¼Œå¼€å‘å°†ä¼šç»§ç»­ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ TypeRunner èƒŒåçš„æ¦‚å¿µï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ TypeRunner å¯¹ä¸€ä¸ªç®€å•çš„é¡¹ç›®è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¹¶å°†å…¶åŠŸèƒ½ä¸ Deno å’Œ`tsc`è¿›è¡Œæ¯”è¾ƒã€‚æˆ‘ä»¬è¿˜å°†äº†è§£ä¸€é¡¹é«˜çº§åŠŸèƒ½åŠå…¶å½“å‰çš„å±€é™æ€§ã€‚

æˆ‘ä»¬å¼€å§‹å§ï¼

*å‘å‰è·³è½¬:*

## äº†è§£æ€§èƒ½é—®é¢˜

åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œç”¨ JavaScript ç¼–å†™çš„è¢«å¹¿æ³›é‡‡ç”¨çš„ web å¼€å‘å·¥å…·å—åˆ°äº†ç”¨æ›´é«˜æ€§èƒ½è¯­è¨€ç¼–å†™çš„å·¥å…·çš„æ¿€çƒˆç«äº‰ï¼Œæ¯”å¦‚ Go å’Œ Rustã€‚ä¸€äº›çªå‡ºçš„ä¾‹å­æ˜¯ç”¨ Go ç¼–å†™çš„ esbuildï¼Œä»¥åŠç”¨ Rust ç¼–å†™çš„ swc æˆ– [Turbopack](https://blog.logrocket.com/introducing-turbopack-rust-based-successor-webpack/) ã€‚

ç°åœ¨ï¼Œéšç€`tsc`åœ¨å¹•åè¿è¡Œ JavaScript è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¼€å‘å¤§å‹ä»£ç åº“çš„å¼€å‘äººå‘˜åœ¨ç¼–è¾‘ä»£ç æ—¶ä¼šé‡åˆ°æ¥è‡ªç¼–è¯‘å™¨çš„å»¶è¿Ÿåé¦ˆã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œæ”¹å˜ä¸€ä¸ªå‡½æ•°å‚æ•°çš„ç±»å‹ï¼Œç„¶åç­‰å¾…å‡ ç§’é’Ÿï¼Œçº¢è‰²çš„é”™è¯¯çº¿å°±ä¼šå‡ºç°ï¼è¿™ä¸æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ DXï¼

ç”±äº TypeScript è¯­è¨€æœåŠ¡å™¨åœ¨å¤§å‹ä»£ç åº“ä¸­çš„ä½æ€§èƒ½ï¼Œå…¬å¸å’Œå¼€å‘äººå‘˜æ­£åœ¨å¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚ä¸€åå¼€å‘äººå‘˜æœ€è¿‘åœ¨å…³äº [TypeRunner repo](https://github.com/marcj/TypeRunner) çš„ GitHub é—®é¢˜ä¸­éå¸¸æ˜ç¡®åœ°è¡¨è¾¾äº†è¿™ä¸€éœ€æ±‚:

> â€œæˆ‘æ„¿æ„èŠ±é’±ä¹°ä¸€ä¸ªé€Ÿåº¦æ›´å¿«çš„ VS Code language æœåŠ¡å™¨ï¼Œæˆ‘ç›¸ä¿¡æˆåƒä¸Šä¸‡çš„å¼€å‘äººå‘˜ä¹Ÿä¼šè¿™æ ·åšï¼Œå³ä½¿å®ƒä¸èƒ½ä¸ TypeScript 100%å¯¹ç­‰ã€‚â€

## å¼•å…¥ TypeRunner

TypeScript é¡¹ç›®ä¸­å®šä¹‰çš„ç±»å‹åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ºå¼€å‘äººå‘˜æä¾›å¸®åŠ©ï¼Œä½†åœ¨è¿è¡Œå‰ä¼šè¢«åˆ é™¤ã€‚ç„¶è€Œï¼Œç±»å‹ä¹Ÿåœ¨è¿è¡Œæ—¶ä¸ºè½¯ä»¶æä¾›ä»·å€¼ã€‚

ä¾‹å¦‚ï¼ŒTypeScript æ¥å£å¯ä»¥ç”¨äº HTTP ç«¯ç‚¹çš„è¯·æ±‚/å“åº”éªŒè¯ã€‚æˆ–è€…ï¼Œå‡è®¾æˆ‘ä»¬ç”¨ TypeScript æ¥å£å®šä¹‰äº†ä¸€ä¸ªæ•´ä½“æ•°æ®æ¨¡å‹ï¼Œå¹¶å°†è¿™äº›ç±»å‹å£°æ˜ä¸ºè®¸å¤šä¸åŒæ¶ˆè´¹è€…(å¦‚å¾®æœåŠ¡æˆ–å‰ç«¯åº”ç”¨ç¨‹åº)çš„å•ä¸€çœŸå®æ¥æºã€‚

ä½¿ç”¨ TypeRunnerï¼Œåœ¨ TypeScript ä¸­å®šä¹‰çš„æ•°æ®æ¨¡å‹çš„ä½¿ç”¨è€…ä¸ä¸€å®šéœ€è¦ç”¨ TypeScript ç¼–å†™ã€‚TypeRunner å¯ä»¥ç‹¬ç«‹äºè¯­è¨€æ·»åŠ ç±»å‹æ£€æŸ¥ï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äº`tsc`æˆ– JavaScript å¼•æ“ã€‚

TypeRunner æå– TypeScript ä»£ç çš„ç±»å‹ä¿¡æ¯ï¼Œç¼–è¯‘æˆå­—èŠ‚ç ï¼Œåœ¨è‡ªå®šä¹‰è™šæ‹Ÿæœºä¸­æ‰§è¡Œï¼Œè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

TypeRunner æ—¨åœ¨æ»¡è¶³ä¸¤ä¸ªä¸»è¦ç›®æ ‡:

*   ä½¿ TypeScript çš„ç±»å‹ä¿¡æ¯åœ¨å…¶ä»–è¯­è¨€ä¸­å¯ç”¨
*   æé«˜ç±»å‹æ£€æŸ¥çš„é€Ÿåº¦

***æ³¨æ„ï¼Œ*** TypeRunner åœ¨è¿è¡Œæ—¶ä¸æ‰§è¡Œç±»å‹æ£€æŸ¥ï¼Œä½†å…¶ä½œè€…ä¹Ÿæ˜¯ [Deepkit Type](https://deepkit.io/library/type) çš„å¼€å‘è€…ï¼Œè¯¥åº“ä½¿ç±»å‹åœ¨è¿è¡Œæ—¶å¯ç”¨ï¼Œä»¥ä¾¿å°† JSON ååºåˆ—åŒ–ä¸ºç±»(åä¹‹äº¦ç„¶)ï¼Œæ ¹æ®æ¥å£éªŒè¯å¯¹è±¡æˆ–åŸºäºæ¥å£ç¼–å†™ç±»å‹ä¿æŠ¤ã€‚å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ TypeScript çš„ç±»å‹ä¿¡æ¯çš„è¿è¡Œæ—¶ç”¨æ³•ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨æŸ¥çœ‹ä¸€ä¸‹

### ç±»å‹çš„å¯ç§»æ¤æ€§

æ•°æ®æ¨¡å‹é€šå¸¸ç”¨ç‰¹å®šäºé¢†åŸŸçš„è¯­è¨€(DSL)æ¥å£°æ˜ï¼Œé€šå¸¸åªæœ‰å¾ˆå°‘çš„ç”¨ä¾‹ä»¥åŠæœ‰é™çš„å·¥å…·ã€‚åŸºäºåŒä¸€æ•°æ®æ¨¡å‹çš„æœåŠ¡å¿…é¡»æ ¹æ®æ¨¡å‹ä¸­å£°æ˜çš„ç±»å‹å’Œå…³ç³»æ¥éªŒè¯å®ƒä»¬çš„ä»£ç å’Œç‰¹æ€§ã€‚ä¸åŒæœåŠ¡çš„ API éœ€è¦éµå®ˆä¸€å®šçš„å¥‘çº¦ï¼Œä»¥ä¾¿ä¸€èµ·æ­£å¸¸å·¥ä½œã€‚å¥å£®çš„ç³»ç»Ÿå¿…é¡»ä»è¿è¡Œæ—¶ç”±äºæ— æ•ˆæ•°æ®å¯¼è‡´çš„é”™è¯¯ä¸­æ¢å¤ã€‚

ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬èƒ½å¤Ÿç”¨ TypeScript æ¥å£ã€ç±»å‹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»æ¥å£°æ˜ä¸€ä¸ªç³»ç»Ÿçš„æ•°æ®æ¨¡å‹ã€‚å—¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»Šå¤©å¼€å§‹åšï¼ä½†æ˜¯ä¸ºäº†ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å¿…é¡»ä¾èµ– JavaScript å’Œ TypeScript ç¼–è¯‘å™¨ã€‚æ¯•ç«Ÿï¼Œå¯¹äºç”¨å®Œå…¨ä¸åŒçš„è¯­è¨€ç¼–å†™ä½†ä¾èµ–äºç›¸åŒæ•°æ®æ¨¡å‹çš„æœåŠ¡æ¥è¯´ï¼Œè¿™ç§ç±»å‹çš„ä¿¡æ¯å¯èƒ½æ˜¯æœ‰ç”¨çš„ã€‚

ä½†æ˜¯ï¼Œä½¿ç”¨ TypeRunnerï¼Œå¯ä»¥å°†å£°æ˜çš„ TypeScript æ•°æ®æ¨¡å‹ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œç§»æ¤åˆ°ä»»ä½•åœ°æ–¹ï¼Œå¹¶é€šè¿‡ CLI æˆ–ä½œä¸ºåº“(ä¾‹å¦‚ï¼Œåœ¨ CI/CD ç®¡é“ä¸­)ç”¨äºç±»å‹æ£€æŸ¥ã€‚

## TypeRunner çš„ç”¨ä¾‹

TypeRunner æœ‰å‡ ä¸ªçœŸå®çš„ç”¨ä¾‹ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­:

*   é JavaScript ç¯å¢ƒä¸­çš„ç±»å‹æ£€æŸ¥
*   ç”¨ TypeScript æ¥å£å’Œç±»å‹æ›¿æ¢ç”¨äºæ•°æ®å»ºæ¨¡çš„ DSL
*   æé«˜ç±»å‹æ£€æŸ¥æ€§èƒ½

## è¿è¡Œä¸­çš„ TypeRunner

æˆªè‡³æœ¬æ–‡æ’°å†™ä¹‹æ—¶ï¼ŒTypeRunner åªæ”¯æŒ TypeScript çš„ç±»å‹ç³»ç»Ÿçš„ä¸€ä¸ªå­é›†ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥å¾ˆå¥½åœ°åˆ©ç”¨å®ƒï¼

ä¸ºäº†å®é™…æ¼”ç¤º TypeRunnerï¼Œè®©æˆ‘ä»¬ä»å®šä¹‰ä¸€ä¸ªç®€å•çš„ç”¨æˆ·æ•°æ®æ¨¡å‹å¼€å§‹ã€‚

åœ¨æ„å»º TypeRunner ä¹‹å‰ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå®šä¹‰æ¨¡å‹ã€‚

è¿™æ˜¯å› ä¸º Docker å®¹å™¨(æˆ‘ä»¬å°†åœ¨å…¶ä¸­çœ‹åˆ° TypeRunner æ‰§è¡Œç±»å‹æ£€æŸ¥)ä¸æä¾›åŸºäºç»ˆç«¯çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚

* * *

### æ›´å¤šæ¥è‡ª LogRocket çš„ç²¾å½©æ–‡ç« :

* * *

æ¨¡å‹(åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ TypeScript æºä»£ç )å°†ä½œä¸ºå·æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚

### å…‹éš† TypeRunner repo

[TypeRunner repo](https://github.com/marcj/TypeRunner) åŒ…å«æ„å»º Docker æ˜ åƒçš„ C++æºä»£ç å’ŒæŒ‡ä»¤ã€‚ä½œä¸ºæç¤ºï¼Œæ‚¨éœ€è¦é€’å½’åœ°å…‹éš† repoï¼Œå¦‚æœæ‚¨å·²ç»è®¾ç½®äº† GitHub SSH å¯†é’¥ï¼Œè¿™åªèƒ½åœ¨å‘½ä»¤è¡Œä¸Šå·¥ä½œ:

```
git clone [emailÂ protected]:marcj/TypeRunner.git
cd TypeRunner
git submodule update --init --recursive

```

### å»ºç«‹ç å¤´å·¥äººå½¢è±¡

å¦‚æœä½ è¿˜æ²¡æœ‰åœ¨ä½ çš„ç³»ç»Ÿä¸Šå®‰è£…å®ƒï¼Œä½ å¯ä»¥[åœ¨è¿™é‡Œ](https://www.docker.com/get-started)å¾—åˆ° Dockerã€‚

æˆ‘ä»¬å°†æŠŠ TypeRunner æ„å»ºåˆ° Docker æ˜ åƒä¸­ï¼Œå¹¶è¿è¡Œè£…è½½äº† TypeScript æºæ–‡ä»¶çš„ä¸€æ¬¡æ€§å®¹å™¨ï¼Œä»¥ä¾¿è¿›è¡Œç±»å‹æ£€æŸ¥:

```
docker build -t typerunner .

```

è¿™é‡Œæˆ‘ä»¬æ ‡è®°å›¾åƒï¼Œ`typerunner,`,æˆ‘ä»¬å°†åœ¨è¿è¡Œå›¾åƒå¤–çš„å®¹å™¨æ—¶å¼•ç”¨å®ƒã€‚

***æ³¨æ„ï¼Œ*** å¦‚æœæˆ‘ä»¬åœ¨äº¤äº’æ¨¡å¼ä¸‹è¿è¡Œå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥ã€ŠTypeRunnerã€‹çš„ä½œè€… [Marc J. Schmidt](https://twitter.com/MarcJSchmidt) ç”¨æ¥åšåŸºå‡†æµ‹è¯•çš„æµ‹è¯•æ–‡ä»¶

```
docker run -it typerunner
cat tests/model.ts

```

### ä½¿ç”¨ TypeRunner è¿›è¡Œç±»å‹æ£€æŸ¥(æ²¡æœ‰`tsc)`çš„ç±»å‹æ£€æŸ¥)

TypeRunner å…è®¸æ‚¨åœ¨æ²¡æœ‰ TypeScript ç¼–è¯‘å™¨(ä¹Ÿç§°ä¸º`tsc`)çš„æƒ…å†µä¸‹è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ä¸€æ—¦ C++æºä»£ç åœ¨æˆ‘ä»¬ç”¨ Docker è®¾ç½®çš„ç¯å¢ƒä¸­è¢«ç¼–è¯‘ï¼Œä»»ä½•ç±»å‹è„šæœ¬ä»£ç éƒ½å¯ä»¥é€šè¿‡æŒ‚è½½åˆ° Docker å®¹å™¨ä¸­è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶`main.ts`ï¼Œå¹¶ç”¨ TypeScript ç¼–å†™ä¸€ä¸ªåŸºæœ¬çš„ HTTP å¤„ç†ç¨‹åºã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸ä¼šçœ‹åˆ° VS ä»£ç æˆ–ä»»ä½•å…¶ä»–å†…ç½®äº TypeScript è¯­è¨€æœåŠ¡å™¨çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†è®© TypeRunner æ¥åšç¹é‡çš„å·¥ä½œï¼ğŸ˜‰

```
// main.ts
type Phone = {
  country: "US" | "FR" | "UK" | "DE";
  phoneArea: number;
  phoneNumber: number;
};

type User = {
  id: string;
  name: string;
  age: number;
  contact: Phone;
};

const lindasPhone: Phone = {
  country: "FS",
  phoneArea: 123,
  phoneNumber: 4567,
};

const users: User[] = [
  {
    id: "abc",
    name: "Linda",
    age: 23,
    contact: lindasPhone,
  },
  {
    id: "def",
    name: "Wendy",
    age: 32,
    contact: {
      country: "UK",
      phoneArea: 123,
      phoneNumber: "4567",
    },
  },
];

```

è¿™æ®µä»£ç æ˜¾ç„¶æœ‰ä¸€äº›ç±»å‹é”™è¯¯ã€‚è¿™æ˜¯å›½é™…æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åƒ TypeRunnerã€Deno å’Œ`tsc`è¿™æ ·çš„ç±»å‹æ£€æŸ¥å·¥å…·å¦‚ä½•å¸®åŠ©æ£€æµ‹å’Œä¿®å¤è¿™äº›é”™è¯¯ã€‚

æˆ‘é¼“åŠ±æ‚¨å°è¯•ä½¿ç”¨ TypeRunner å¹¶æ·»åŠ ä¸€äº›é¢å¤–çš„ç±»å‹é”™è¯¯ï¼Œä»¥ä¾¿è·å¾—å®è·µç»éªŒï¼

è¦ä½¿ç”¨ TypeRunner å¯¹ç¤ºä¾‹ä»£ç è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
# Type check main.ts with TypeRunner
docker run -v $(pwd)/main.ts:/typerunner/main_test.ts typerunner build/typescript_main main_test.ts

```

***æ³¨æ„ï¼Œ*** `build/typescript_main`æ˜¯æ‰§è¡Œç±»å‹æ£€æŸ¥çš„ TypeRunner å¯æ‰§è¡Œæ–‡ä»¶ï¼›`main_test.ts`æ˜¯æˆ‘ä»¬å¦‚ä½•å‘½åæˆ‘ä»¬æŒ‚è½½çš„æºæ–‡ä»¶`main.ts`

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ Deno æ£€æŸ¥æˆ‘ä»¬çš„`main.ts`æ–‡ä»¶å¹¶æ¯”è¾ƒè¾“å‡ºã€‚

### ä½¿ç”¨ Deno è¿›è¡Œç±»å‹æ£€æŸ¥

Deno å¯ç”¨äºé€šè¿‡å‘½ä»¤è¡Œå¯¹ TypeScript æ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥:

```
deno check main.ts

# does the same as
npx tsc --noEmit main.ts

```

Deno ä½¿ç”¨`tsc`è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå› æ­¤ TypeRunner ä¸ Deno å’Œ`tsc`ç›¸æ¯”å…·æœ‰ç›¸åŒçš„æ€§èƒ½ä¼˜åŠ¿ã€‚

åœ¨è¿è¡Œ`deno check main.ts`æ—¶ï¼ŒDeno åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­å‘ç°äº†ä¸¤ä¸ªç±»å‹é”™è¯¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªç”¨æ›²çº¿å’Œè¡Œå·è¡¨ç¤ºçš„é”™è¯¯çš„ç»“æ„åŒ–æ¦‚è¿°ã€‚æœ¬è´¨ä¸Šï¼Œè¿è¡Œ`deno check` å’Œè¿è¡Œ`npx tsc â€“noEmit` æ˜¯ä¸€æ ·çš„

***æ³¨æ„ï¼Œ*** å¦‚æœæ²¡æœ‰é€šè¿‡`--check`æ ‡å¿—æ˜¾å¼å¯ç”¨ç±»å‹æ£€æŸ¥ï¼ŒDeno å°†åœ¨æ²¡æœ‰ç±»å‹æ£€æŸ¥çš„æƒ…å†µä¸‹è¿è¡Œæ‚¨çš„æºä»£ç ï¼Œè€Œä¸ç®¡æ½œåœ¨çš„ç±»å‹é”™è¯¯

```
# No type checking: This only compiles with tsc and runs in Deno
deno run main.ts

# Demand type checking
deno run --check main.ts

```

### è¾“å‡ºæ¯”è¾ƒ:TypeRunner vs. Deno å’Œ`tsc`

TypeRunner å°†ç±»å‹æ£€æŸ¥çš„ç»“æœè¾“å‡ºåˆ°`stdout`ï¼Œæ‰€ä»¥æ‚¨ä¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°çº¢è‰²çš„æ›²çº¿(è¡¨ç¤ºé”™è¯¯):

```
# [.... other logs â€¦.]

main_test.ts:188:199 - error TS0000: Type '{"country": "FS""phoneArea": 123"phoneNumber": 4567}' is not assignable to type '{"country": "US" | "FR" | "UK" | "DE""phoneArea": number"phoneNumber": number}'

Â»const lindasPhone: Phone =
Â»      ~~~~~~~~~~~

main_test.ts:277:282 - error TS0000: Type '[{"id": "abc""name": "Linda""age": 23"contact": {"country": "US" | "FR" | "UK" | "DE""phoneArea": number"phoneNumber": number}}, {"id": "def""name": "Wendy""age": 32"contact": {"country": "UK""phoneArea": 123"phoneNumber": "4567"}}]' is not assignable to type 'Array<{"id": string"name": string"age": number"contact": {"country": "US" | "FR" | "UK" | "DE""phoneArea": number"phoneNumber": number}}>'

Â»const users: User[] = [ // no squiggly lines from Deno/tsc
Â»      ~~~~~

Found 2 errors in main_test.ts

```

ä¸ºäº†æ¯”è¾ƒï¼Œä¸‹é¢æ˜¯ç”¨ Deno ( `tsc`)è¿›è¡Œç±»å‹æ£€æŸ¥çš„è¾“å‡º:

```
# Output from Deno / tsc

error: TS2322 [ERROR]: Type '"FS"' is not assignable to type '"US" | "FR" | "UK" | "DE"'.
  country: "FS",
  ~~~~~~~
    at file:///home/christian/projects/typerunner-demo-app/main.ts:15:3

    The expected type comes from property 'country' which is declared here on type 'Phone'
      country: "US" | "FR" | "UK" | "DE";
      ~~~~~~~
        at file:///home/christian/projects/typerunner-demo-app/main.ts:2:3

TS2322 [ERROR]: Type 'string' is not assignable to type 'number'.
      phoneNumber: "4567", // no squiggly lines from TypeRunner
      ~~~~~~~~~~~
    at file:///home/christian/projects/typerunner-demo-app/main.ts:34:7

    The expected type comes from property 'phoneNumber' which is declared here on type 'Phone'
      phoneNumber: number;
      ~~~~~~~~~~~
        at file:///home/christian/projects/typerunner-demo-app/main.ts:4:3

Found 2 errors.

```

ä¸»è¦çš„åŒºåˆ«æ˜¯ä»£ç ä¸­çš„æ ¼å¼å’Œæ›²çº¿(è¡¨ç¤ºé”™è¯¯)çš„ä½ç½®ã€‚

ä¾‹å¦‚ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„ç”¨æˆ·ç¾¤ã€‚å®ƒåœ¨ç¬¬äºŒä¸ªå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªé”™è¯¯çš„ç±»å‹ï¼ŒåµŒå¥—åœ¨`contact.phoneNumber`å±æ€§ä¸­ã€‚Deno åœ¨è®¾ç½®äº†ä¸æ­£ç¡®çš„ç±»å‹(å®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯ä¸€ä¸ªæ•°å­—)çš„åœ°æ–¹æ ‡è®°è¿™ä¸ªç±»å‹é”™è¯¯ï¼Œè€Œ TypeRunner å°†`users`æ•°ç»„æ ‡è®°ä¸ºé”™è¯¯ã€‚

## å¤„ç†å¤æ‚ç±»å‹

[TypeRunner è‡ªè¿°æ–‡ä»¶](https://github.com/marcj/TypeRunner)å±•ç¤ºäº† TypeRunner èƒ½å¤Ÿæ£€æŸ¥çš„ä¸€äº›å¤æ‚ç±»å‹:

```
type StringToNum<T extends string, A extends 0[] = []> = `${A['length']}` extends T ? A['length'] : StringToNum<T, [...A, 0]>;
const var1: StringToNum<'999'> = 999;

```

è¿™ä¸ªç‰¹æ®Šçš„`StringToNum`ç±»å‹å¯èƒ½å®é™…ä¸Šå¹¶ä¸ç›¸å…³ï¼Œä½†æ˜¯å®ƒå¾ˆå¥½åœ°æ¼”ç¤ºäº†å¤æ‚ç±»å‹æ˜¯å¦‚ä½•è¢« TypeRunner æ„é€ å’Œç±»å‹æ£€æŸ¥çš„ã€‚

## å½“å‰çš„é™åˆ¶

åœ¨ä½¿ç”¨ TypeRunner æ—¶ï¼Œæˆ‘å¶ç„¶å‘ç°äº†ä¸€äº›ä¸æºä»£ç ä¸­çš„è¡¨è¾¾å¼ç›¸å…³çš„å½“å‰é™åˆ¶ï¼Œåœ¨ç¼–å†™æ—¶ TypeRunner æ— æ³•å¤„ç†è¿™äº›é™åˆ¶ã€‚

### æ”¯æŒå¯¼å…¥è¯­å¥

TypeRunner ç›®å‰ä¸æ”¯æŒå¤„ç† import è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ Deno æ ‡å‡†åº“ä¸­çš„ HTTP å¤„ç†ç¨‹åºå’ŒæœåŠ¡å™¨ï¼Œæ­£å¦‚æˆ‘æ‰€å¸Œæœ›çš„:

```
// TypeRunner cannot process import statements at the moment
import { serve } from "https://deno.land/[emailÂ protected]/http/server.ts";
import { type Handler } from "https://deno.land/[emailÂ protected]/http/server.ts";

```

### Deno å…¨å±€åç§°ç©ºé—´çš„ä½¿ç”¨

ç›®å‰æ— æ³•ä½¿ç”¨ TypeRunner ä» Deno å…¨å±€åç§°ç©ºé—´`Deno`å¯åŠ¨ HTTP æœåŠ¡å™¨:

```
// TypeRunner cannot process references to the Deno global namespace
const conn = Deno.listen({ port: 80 });

// TypeRunner's output
// terminate called after throwing an instance of 'std::runtime_error'
//  what():  Property access to Never not supported

```

## TypeRunner çš„ä¼˜åŠ¿

ä¸ç±»ä¼¼äº`tsc`çš„å·¥å…·ç›¸æ¯”ï¼ŒTypeRunner æä¾›äº†å·¨å¤§çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒå°† TypeScript ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œå¹¶åœ¨ä¸€ä¸ªå®šåˆ¶çš„è™šæ‹Ÿæœºä¸­è¿›è¡Œå¤„ç†ï¼Œè€Œä¸”æ˜¯ç”¨ C++ç¼–å†™çš„ã€‚

ä½œä¸ºä¸€ç§é™æ€ç±»å‹çš„é€šç”¨ç¼–è¯‘è¯­è¨€ï¼ŒC++æä¾›äº†æ¯” JavaScript ç­‰è§£é‡Šå‹è¯­è¨€æ›´å¥½çš„æ€§èƒ½ã€‚C++çš„æ€§èƒ½ä¸ Rust ç­‰æ›´å¹´è½»çš„ç¼–è¯‘è¯­è¨€ä¸ç›¸ä¸Šä¸‹ã€‚TypeRunner ä½œè€…å‡ºäºä¸ªäººåå¥½æ˜ç¡®é€‰æ‹© C++è€Œä¸æ˜¯ Rust:

> [ä¸ºä»€ä¹ˆ C++ä¸ä¼šç”Ÿé”ˆï¼Ÿ](https://github.com/marcj/TypeRunner#why-c-and-not-rust)å› ä¸ºæˆ‘æ¯” Rust æ‡‚ C++å¤šäº†ã€‚ä¼˜ç§€ C++å¼€å‘äººå‘˜çš„å¸‚åœºè¦å¤§å¾—å¤šã€‚TypeScript ä»£ç è¿˜å¯ä»¥å¾ˆå¥½åœ°æ˜ å°„åˆ° C++ï¼Œå› æ­¤ç§»æ¤æ‰«æå™¨ã€è§£æå™¨å’Œ AST ç»“æ„å®é™…ä¸Šç›¸å½“å®¹æ˜“ï¼Œè¿™ä½¿å¾—å°† TypeScript tsc çš„ç‰¹æ€§å›ç§»æ¤åˆ° TypeRunner æ›´åŠ å®¹æ˜“ã€‚æˆ‘ä¹Ÿè§‰å¾—é“é”ˆå¾ˆä¸‘ã€‚â€

TypeRunner é€šè¿‡é«˜æ•ˆç¼“å­˜è§£æåçš„ AST å’Œç¼–è¯‘åçš„å­—èŠ‚ç (å³çƒ­è¿è¡Œ)è¿›ä¸€æ­¥æé«˜äº†æ€§èƒ½ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªåŒ…å«æ•°ç™¾ä¸ªæ–‡ä»¶çš„å¤§å‹é¡¹ç›®ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡ç±»å‹æ£€æŸ¥è¿è¡Œä¹‹é—´åªæœ‰ä¸€ä¸¤ä¸ªæ›´æ”¹ï¼Œé‚£ä¹ˆåªæœ‰æœ‰æ›´æ”¹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ TypeRunner å¤„ç†çš„æ‰€æœ‰ä¸‰ä¸ªé˜¶æ®µ:

1.  è§£æ AST
2.  ç¼–è¯‘æˆå­—èŠ‚ç 
3.  åœ¨å®šåˆ¶è™šæ‹Ÿæœºä¸­æ‰§è¡Œå­—èŠ‚ç 

## ç»“è®º

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† TypeRunner çš„æ¦‚å¿µã€ç‰¹æ€§ã€ä¼˜ç‚¹å’Œå±€é™æ€§ã€‚æˆ‘ä»¬è¿˜æ¼”ç¤ºäº†å®ƒåœ¨å®é™…ä¸­çš„ä½¿ç”¨ï¼Œå¹¶å°†å…¶æ€§èƒ½ä¸ Deno å’Œ `tsc`è¿›è¡Œäº†æ¯”è¾ƒã€‚

åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒTypeRunner é¡¹ç›®ä»…ä»…æ˜¯ä¸€ä¸ªæ¦‚å¿µéªŒè¯ï¼Œå› æ­¤å®ƒç¼ºä¹æµç•…çš„ç”¨æˆ·ä½“éªŒï¼Œå¹¶ä¸”ä¸æ”¯æŒ TypeScript è¯­è¨€çš„æ¯ä¸ªæ–¹é¢ã€‚

æˆ‘æ‰“èµŒå¼€æºç¤¾åŒºæœªæ¥ä¼šåšå‡ºè´¡çŒ®æ¥å¢å¼º TypeRunner çš„å¯ç”¨æ€§ï¼Œæ‰€ä»¥åœ¨å®ƒçš„åŸºç¡€ä¸Šæ„å»ºå¹¶å‘å¸ƒæ¶ˆæ¯å§ï¼æˆ‘è¿«ä¸åŠå¾…åœ°æƒ³çœ‹åˆ° TypeRunner è·å¾—ç‰µå¼•åŠ›ï¼Œå¹¶çœ‹åˆ°å®ƒçš„é‡‡ç”¨é£™å‡ï¼

## [LogRocket](https://lp.logrocket.com/blg/typescript-signup) :å…¨é¢äº†è§£æ‚¨çš„ç½‘ç»œå’Œç§»åŠ¨åº”ç”¨

[![LogRocket Dashboard Free Trial Banner](img/d6f5a5dd739296c1dd7aab3d5e77eeb9.png)](https://lp.logrocket.com/blg/typescript-signup)

LogRocket æ˜¯ä¸€ä¸ªå‰ç«¯åº”ç”¨ç¨‹åºç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è®©æ‚¨å›æ”¾é—®é¢˜ï¼Œå°±åƒé—®é¢˜å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ã€‚LogRocket ä¸éœ€è¦çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸éœ€è¦å‘ç”¨æˆ·è¯¢é—®æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨é‡æ”¾ä¼šè¯ä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚å®ƒå¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ª Reduxã€Vuex å’Œ@ngrx/store çš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚

é™¤äº†è®°å½• Redux æ“ä½œå’ŒçŠ¶æ€ï¼ŒLogRocket è¿˜è®°å½•æ§åˆ¶å°æ—¥å¿—ã€JavaScript é”™è¯¯ã€å †æ ˆè·Ÿè¸ªã€å¸¦æœ‰å¤´+æ­£æ–‡çš„ç½‘ç»œè¯·æ±‚/å“åº”ã€æµè§ˆå™¨å…ƒæ•°æ®å’Œè‡ªå®šä¹‰æ—¥å¿—ã€‚å®ƒè¿˜ä½¿ç”¨ DOM æ¥è®°å½•é¡µé¢ä¸Šçš„ HTML å’Œ CSSï¼Œç”šè‡³ä¸ºæœ€å¤æ‚çš„å•é¡µé¢å’Œç§»åŠ¨åº”ç”¨ç¨‹åºé‡æ–°åˆ›å»ºåƒç´ çº§å®Œç¾è§†é¢‘ã€‚

[Try it for free](https://lp.logrocket.com/blg/typescript-signup)

.