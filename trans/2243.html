<html>
<head>
<title>Using WebSockets in Flutter - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>åœ¨ Flutter - LogRocket åšå®¢ä¸­ä½¿ç”¨ WebSockets</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/using-websockets-flutter/#0001-01-01">https://blog.logrocket.com/using-websockets-flutter/#0001-01-01</a></blockquote><div><article class="article-post">
<p>å¦‚ä»Šï¼Œè®¸å¤šåº”ç”¨éœ€è¦å®æ—¶æ•°æ®æ¥å‘ç”¨æˆ·æä¾›å³æ—¶åé¦ˆï¼Œæ— è®ºæ˜¯æ˜¾ç¤ºä¸€ä¸ªäººå®æ—¶æ‰“å­—çš„èŠå¤©åº”ç”¨ï¼Œè¿˜æ˜¯ç›´æ¥ä»ç¡¬ä»¶ä¼ æ„Ÿå™¨ç»˜åˆ¶æ•°æ®çš„è¿œç¨‹åº”ç”¨ã€‚</p>
<p>æˆ‘ä»¬è¯•å›¾ç”¨ REST è§£å†³è¿™äº›é—®é¢˜ï¼Œä½†æ˜¯é¢ä¸´ä¸€ä¸ªå¤æ‚çš„é—®é¢˜:ä¸ºäº†è·å¾—æ¥è¿‘å³æ—¶çš„åé¦ˆï¼Œæˆ‘ä»¬å¿…é¡»æ¯åˆ†é’Ÿ ping æœåŠ¡å™¨å‡ æ¬¡ï¼Œè¿™åœ¨æ¶æ„ä¸Šå¾ˆéš¾å®ç°ï¼Œå¹¶ä¸”ä¼šä½¿æœåŠ¡å™¨è¿‡è½½ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨åƒ Firebase Realtime Database è¿™æ ·çš„è§£å†³æ–¹æ¡ˆï¼Œæ‚¨ä¼šæ³¨æ„åˆ°ï¼Œåªè¦ä¸€æ¡æ–°è®°å½•æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼ŒFlutter åº”ç”¨ç¨‹åºå°±ä¼šæ¥æ”¶å®ƒä½œä¸ºä¸€ä¸ª<code>Stream</code>å¹¶å°†æ•°æ®æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚</p>
<p>ä½†æ˜¯ Firebase æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿäº‹å®æ˜¯ï¼ŒFirebase ç­‰æ¡†æ¶ä¾èµ–äºä¸€é¡¹éå¸¸é‡è¦çš„æŠ€æœ¯:WebSocketsã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„ WebSockets æ¥åˆ›å»ºå‘ç”¨æˆ·æ˜¾ç¤ºå®æ—¶æ•°æ®çš„åº”ç”¨ç¨‹åºã€‚</p>
<h2>ä»€ä¹ˆæ˜¯ WebSocket APIï¼Ÿ</h2>
<p>æ ¹æ® Mozilla çš„è¯´æ³•ï¼ŒWebSocket API æ˜¯â€œä¸€ç§å…ˆè¿›çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·çš„æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æ‰“å¼€åŒå‘çš„äº¤äº’å¼é€šä¿¡ä¼šè¯â€¦â€¦ä½ å¯ä»¥å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯å¹¶æ¥æ”¶äº‹ä»¶é©±åŠ¨çš„å“åº”ï¼Œè€Œä¸å¿…è½®è¯¢æœåŠ¡å™¨çš„å›å¤ã€‚â€</p>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒWebSockets ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ:</p>
<ul>
<li>æµå¼ä¼ è¾“ä¿¡æ¯çš„æœåŠ¡å™¨</li>
<li>å‡†å¤‡æ¥æ”¶æ–°æ•°æ®æµçš„åº”ç”¨ç¨‹åºä¸­çš„ä¸€ä¸ª<code>client</code></li>
<li>ç”¨äºåœ¨<code>client</code>å’ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡çš„<code>channel</code></li>
<li><code>Messages</code>åœ¨<code>client</code>å’ŒæœåŠ¡å™¨ä¹‹é—´å‘é€</li>
</ul>
<p>ä¸ REST ç›¸åï¼Œä½¿ç”¨ WebSocketsï¼Œæˆ‘ä»¬åœ¨å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯åï¼Œä¸ç­‰å¾…æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ã€‚æˆ‘ä»¬å¯ä»¥å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶ä»æœåŠ¡å™¨æ¥æ”¶å‡ åæ¡æ¶ˆæ¯ã€‚</p>
<p>åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆè®¢é˜…é€šçŸ¥ï¼›æˆ‘ä»¬è®¢é˜…äº†ä¸€ä¸ªç‰¹å®šçš„ä¸»é¢˜ï¼Œä¾‹å¦‚ï¼ŒUSD-EUR çš„å…‘æ¢å€¼ï¼Œç„¶åæ¯å½“ USD-EUR çš„å…‘æ¢å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„æ–°æ¶ˆæ¯ã€‚</p>
<p>è¿™ç§å®æ—¶é€šä¿¡æµä½¿ WebSockets æˆä¸ºè‚¡ç¥¨äº¤æ˜“åº”ç”¨ç¨‹åºã€èŠå¤©åº”ç”¨ç¨‹åºã€ç‰©è”ç½‘åº”ç”¨ç¨‹åºå’Œå…¶ä»–å¿…é¡»æ¥æ”¶è¾“å…¥æ•°æ®æµçš„åº”ç”¨ç¨‹åºçš„ç†æƒ³æŠ€æœ¯ã€‚</p>
<p>é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨ Flutter ä¸­ä½¿ç”¨å®ƒä»¬ï¼Ÿ</p>
<h2>åœ¨ Dart ä¸­ä½¿ç”¨ WebSockets</h2>
<p>å¹¸è¿çš„æ˜¯ï¼Œ<a href="https://blog.logrocket.com/introduction-to-using-dart-in-flutter/"> Flutter çš„è¯­è¨€ Dart </a>ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆæ¥å¤„ç† WebSockets: <a href="https://api.dart.dev/stable/2.14.2/dart-io/WebSocket-class.html">çš„<code>WebSocket</code>ç±»ã€‚</a></p>
<p>å¦‚æœæˆ‘ä»¬åªä¸ºä¸€ä¸ªç›®æ ‡å¼€å‘åº”ç”¨ç¨‹åº(æ¡Œé¢ã€ç½‘ç»œæˆ–ç§»åŠ¨)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨<code>WebSocket</code>ã€‚</p>
<p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬é€‰æ‹©è·¨å¹³å°ä½¿ç”¨æˆ‘ä»¬çš„åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ„è¯†åˆ°<code>WebSocket</code>ç±»ä¾èµ–äº<code>dart:io</code>å’Œ<code>dart:html</code>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åŒæ—¶ä¸ºç§»åŠ¨å’Œç½‘ç»œç¼–è¯‘ã€‚</p>
<p>è°¢å¤©è°¢åœ°ï¼ŒDart å›¢é˜Ÿåˆ›å»ºäº†<code><a href="https://pub.dev/packages/web_socket_channel">web_socket_channel</a></code> <a href="https://pub.dev/packages/web_socket_channel">ï¼Œè¿™æ˜¯ä¸€ä¸ªå®˜æ–¹åº“</a>ï¼Œå®ƒæŠ½è±¡äº†<code>dart:io</code>å’Œ<code>dart:html</code>é€»è¾‘ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»æ¥åˆ›å»ºå¤šå¹³å°åº”ç”¨ç¨‹åºã€‚</p>
<p>è¦ä½¿ç”¨<code>web_spclet_channel</code>ï¼Œæˆ‘ä»¬å¿…é¡»éµå¾ªä¸‰ä¸ªç®€å•çš„æ­¥éª¤:</p>
<ol>
<li>ä½¿ç”¨<code>WebSocketChannel</code>åˆ›å»ºä¸€ä¸ªæ–°å®¢æˆ·ç«¯ï¼Œå¹¶é€šè¿‡<code>connect</code>åŠŸèƒ½è¿æ¥åˆ°ä¸€ä¸ªé€šé“</li>
<li>ä½¿ç”¨<code>stream</code> getter æ”¶å¬æ”¶åˆ°çš„æ¶ˆæ¯</li>
<li>ä½¿ç”¨<code>sink</code> getter å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯</li>
</ol>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª<a href="https://docs.pro.coinbase.com/"> CoinBase Pro API </a>çš„ä¸€ä¸ªä¾‹å­ï¼Œé€šè¿‡ WebSockets è·å–åŠ å¯†è´§å¸çš„å®æ—¶ä»·å€¼ã€‚</p>
<h3>åˆ›å»ºæ–°çš„ Dart é¡¹ç›®</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ Dart é¡¹ç›®:</p>
<pre class="language-bash hljs">dart create websocket_example
</pre>
<p>è¿™å°†åœ¨<code>websocket_example</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Dart ä¸“ç”¨é¡¹ç›®ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨æ‚¨æœ€å–œæ¬¢çš„ IDE ä¸­æ‰“å¼€é¡¹ç›®å¹¶æ·»åŠ <code>web_socket_channel</code>ä¾èµ–é¡¹:</p>
<pre class="language-yaml hljs">dependencies:
  web_socket_channel: ^2.1.0
</pre>
<p>åˆ›å»ºå¥½é¡¹ç›®åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ CoinBase Pro APIã€‚</p>
<p>æˆ‘ä»¬çš„ WebSocket å®¢æˆ·ç«¯å¿…é¡»è¿æ¥åˆ° URI<code>wss://ws-feed.pro.coinbase.com</code>ï¼Œæ‰èƒ½æ¥æ”¶æ›´æ–°ã€‚ä¸ºäº†ç›‘å¬è¿™äº›æ›´æ–°ï¼Œæˆ‘ä»¬å¿…é¡»<code>listen</code>æ¥æ”¶ä»»ä½•ä¼ å…¥çš„æ¶ˆæ¯:</p>
<pre class="language-dart hljs">import 'package:web_socket_channel/web_socket_channel.dart';

void main(List&lt;String&gt; arguments) {
  /// Create the WebSocket channel
  final channel = WebSocketChannel.connect(
    Uri.parse('wss://ws-feed.pro.coinbase.com'),
  );

  /// Listen for all incoming data
  channel.stream.listen(
    (data) {
      print(data);
    },
    onError: (error) =&gt; print(error),
  );

}
</pre>
<p>ç”±äºæˆ‘ä»¬æƒ³ä»æœåŠ¡å™¨æ¥æ”¶å½“å‰å€¼ä¸º BTC-æ¬§å…ƒçš„æ›´æ–°ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨æ¥è‡ª API çš„<code><a href="https://docs.cloud.coinbase.com/exchange/docs/overview#subscribe">subscribe</a></code> <a href="https://docs.cloud.coinbase.com/exchange/docs/overview#subscribe">æ¶ˆæ¯ã€‚è¦å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–°åˆ›å»ºçš„<code>WebSocketChannel</code>ä¸­çš„<code>sink</code>å‘æœåŠ¡å™¨å‘é€ JSON æ¶ˆæ¯:</a></p>
<pre class="language-dart hljs">import 'dart:convert';

import 'package:web_socket_channel/web_socket_channel.dart';

void main(List&lt;String&gt; arguments) async {
  /// Create the WebSocket channel
  final channel = WebSocketChannel.connect(
    Uri.parse('wss://ws-feed.pro.coinbase.com'),
  );

  channel.sink.add(
    jsonEncode(
      {
        "type": "subscribe",
        "channels": [
          {
            "name": "ticker",
            "product_ids": [
              "BTC-EUR",
            ]
          }
        ]
      },
    ),
  );

  /// Listen for all incoming data
  channel.stream.listen(
    (data) {
      print(data);
    },
    onError: (error) =&gt; print(error),
  );
}
</pre>
<p>è¦æŸ¥çœ‹å®ƒçš„è¿è¡Œæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>dart run bin/web_socket_example.dart</code>å‘½ä»¤ã€‚å¸Œæœ›æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºæ¥è‡ª CoinBase Pro API çš„æ–°æ¶ˆæ¯çš„æ–°æ—¥å¿—:</p>
<pre class="language-json hljs">{"type":"subscriptions","channels":[{"name":"ticker","product_ids":["BTC-EUR"]}]}
{"type":"ticker","sequence":12764748963,"product_id":"BTC-EUR","price":"36941.64","open_24h":"38285.55","volume_24h":"4722.06983151","low_24h":"34300","high_24h":"38674.98","volume_30d":"43802.53509763","best_bid":"36934.04","best_ask":"36941.64","side":"buy","time":"2021-09-21T08:00:20.424250Z","trade_id":50228771,"last_size":"0.08072577"}
{"type":"ticker","sequence":12764749180,"product_id":"BTC-EUR","price":"36941.55","open_24h":"38285.55","volume_24h":"4722.08309939","low_24h":"34300","high_24h":"38674.98","volume_30d":"43802.54836551","best_bid":"36933.09","best_ask":"36941.55","side":"buy","time":"2021-09-21T08:00:21.167335Z","trade_id":50228772,"last_size":"0.01326788"}
</pre>
<p>ä¸€ä¸ªé—®é¢˜ä»ç„¶å­˜åœ¨:æˆ‘ä»¬å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ¸ é“ï¼Œä½†æˆ‘ä»¬å¦‚ä½•å…³é—­å®ƒï¼Ÿ</p>
<h3>å…³é—­é¢‘é“</h3>
<p>åŒæ ·çš„æ–¹å¼æˆ‘ä»¬è®¿é—®åº•å±‚<code>sink</code>å‘æœåŠ¡å™¨å‘é€æ–°æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥<code>close</code>ä¸€æ®µæ—¶é—´åçš„è¿æ¥:</p>
<pre class="language-dart hljs">void main(List&lt;String&gt; arguments) async {
  // ...

  /// Wait for 5 seconds
  await Future.delayed(Duration(seconds: 5));

  /// Close the channel
  channel.sink.close();
}
</pre>
<p>å¦‚æœæˆ‘ä»¬é‡æ–°è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°äº”ç§’é’Ÿåï¼Œå®ƒå…³é—­äº†é¢‘é“å’Œåº”ç”¨ç¨‹åºã€‚</p>
<h2>åœ¨é¢¤æŒ¯ä¸­æ˜¾ç¤ºå®æ—¶æ•°æ®</h2>
<p>æ—¢ç„¶æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªä½¿ç”¨ WebSockets çš„ç®€å• Dart åº”ç”¨ç¨‹åºï¼Œ<a href="https://blog.logrocket.com/tag/flutter/">æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª Flutter åº”ç”¨ç¨‹åº</a>æ¥å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ WebSocketsã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ä¹‹å‰å®Œæˆçš„æ‰€æœ‰ä»£ç éƒ½å¯ä»¥åœ¨æˆ‘ä»¬çš„ Flutter åº”ç”¨ç¨‹åºä¸­é‡ç”¨ã€‚è¯¥åº”ç”¨ç¨‹åºå°†:</p>
<ul>
<li>æ˜¾ç¤ºæ¬§æ´²è´§å¸çš„å€¼</li>
<li>æ˜¾ç¤º BTC-æ¬§æ´²çš„ä»·å€¼</li>
<li>å¦‚æœç”¨æˆ·éœ€è¦ï¼Œå…³é—­ä¸¤ä¸ªé€šé“</li>
</ul>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å¥—æ¥å­—é€šé“:ä¸€ä¸ªæ¥æ”¶ ETH-EUR æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªæ¥æ”¶ BTC-EUR æ¶ˆæ¯ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¯·è®°ä½ï¼ŒCoinBase Pro API å…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé€šé“æ¥æ¥æ”¶å¤šä¸ªå€¼ï¼Œè¿™äº›å€¼å¯ä»¥ä½¿ç”¨å’Œæ˜ å°„ä¼ å…¥çš„æ¶ˆæ¯ï¼Œä»¥æ˜¾ç¤ºåœ¨ä¸åŒçš„å°éƒ¨ä»¶ä¸­ã€‚</p>
<p>æˆ‘ä»¬å¿…é¡»åˆ›å»ºé€‚å½“çš„<code>CoinbaseRequest</code>å’Œ<code>CoinbaseResponse</code>ç±»ï¼Œå¹¶ä½¿ç”¨<code>json_serializable</code>è½»æ¾åœ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ƒä»¬ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ™®é€šçš„<code>Map</code>æ¥æ¥æ”¶å’Œå‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨:</p>
<pre class="language-dart hljs">import 'package:json_annotation/json_annotation.dart';

part 'coinbase_request.g.dart';

@JsonSerializable()
class CoinbaseRequest {
  final String type;
  final List&lt;Map&lt;String, dynamic&gt;&gt; channels;

  CoinbaseRequest(this.type, this.channels);

  factory CoinbaseRequest.fromJson(Map&lt;String, dynamic&gt; json) =&gt;
      _$CoinbaseRequestFromJson(json);

  Map&lt;String, dynamic&gt; toJson() =&gt; _$CoinbaseRequestToJson(this);
}
import 'package:json_annotation/json_annotation.dart';

part 'coinbase_response.g.dart';

@JsonSerializable()
class CoinbaseResponse {
  final String price;
  @JsonKey(name: 'product_id')
  final String productId;

  CoinbaseResponse(this.price, this.productId);

  factory CoinbaseResponse.fromJson(Map&lt;String, dynamic&gt; json) =&gt;
      _$CoinbaseResponseFromJson(json);

  Map&lt;String, dynamic&gt; toJson() =&gt; _$CoinbaseResponseToJson(this);
}
</pre>
<p>ä¸ºäº†éš”ç¦»æˆ‘ä»¬çš„ WebSocket é€»è¾‘ï¼Œè®©æˆ‘ä»¬åˆ›å»º<code>CoinbaseProvider</code>,å®ƒè´Ÿè´£:</p>
<ul>
<li>é€šè¿‡æ„é€ å‡½æ•°åˆ›å»º WebSocket é€šé“</li>
<li>ç”¨<code>openBitcoin</code>æ–¹æ³•å‘é€šé“å‘é€æ¶ˆæ¯</li>
<li>ä½¿ç”¨<code>bitcoinStream</code>æš´éœ²æ•°æ®çš„<code>Stream</code></li>
<li>ç”¨<code>closeBitcoin</code>æ–¹æ³•å…³é—­ WebSocket é€šé“</li>
</ul>
<p>è¿™åŒæ ·é€‚ç”¨äº<code>Ethereum</code>ï¼Œä½†æ˜¯ä¸ºäº†è®©è¿™ä¸ªä¾‹å­æ›´æ˜“è¯»ï¼Œæˆ‘ä»¬å°†åªå±•ç¤º<code>BTC-EUR</code>çš„ä»£ç :</p>
<pre class="language-dart hljs">/// Manages opening and closing the sockets for the
/// two different sockets: ETH socker and BTC socket
class CoinbaseProvider {
  late final WebSocketChannel _btcWebsocket;

  static const _btcProduct = "BTC-EUR";

  CoinbaseProvider()
      : _btcWebsocket = WebSocketChannel.connect(
          Uri.parse('wss://ws-feed.pro.coinbase.com'),
        );

  Stream&lt;CoinbaseResponse&gt; get bitcoinStream =&gt; _btcWebsocket.stream
      .map&lt;CoinbaseResponse&gt;(
          (value) =&gt; CoinbaseResponse.fromJson(jsonDecode(value)))
      .skipWhile((element) =&gt; element.productId != _btcProduct);

  void openBitcoin() {
    _btcWebsocket.sink.add(
      jsonEncode(
        CoinbaseRequest(
          'subscribe',
          [
            {
              "name": "ticker",
              "product_ids": [_btcProduct]
            }
          ],
        ).toJson(),
      ),
    );
  }

  void closeBitcoin() {
    _btcWebsocket.sink.close();
  }
</pre>
<h3>ä½¿ç”¨<code>StreamBuilder</code>å°éƒ¨ä»¶</h3>
<p>æ ¹æ®æˆ‘ä»¬ä¹‹å‰çš„ç»éªŒï¼Œæˆ‘ä»¬å‘ç° Dart ä¸­çš„<code>WebSockets</code>å…¬å¼€äº†ä¸€ä¸ª<code>Stream</code>æ¥æ¥æ”¶æ¥è‡ªæœåŠ¡å™¨çš„ä¼ å…¥æ¶ˆæ¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå°éƒ¨ä»¶æ¥æ¥æ”¶ä¸€ä¸ª<code>Stream</code>å¹¶å¯¹å…¶åšå‡ºååº”ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code><a href="https://api.flutter.dev/flutter/widgets/StreamBuilder-class.html">StreamBuilder</a></code> <a href="https://api.flutter.dev/flutter/widgets/StreamBuilder-class.html">å°éƒ¨ä»¶</a>ï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬:</p>
<ul>
<li>æˆ‘ä»¬æ­£åœ¨ç­‰å¾…æ•°æ®</li>
<li>æˆ‘ä»¬æ”¶åˆ°äº†æ•°æ®</li>
<li>æˆ‘ä»¬æ”¶åˆ°ä¸€ä¸ªé”™è¯¯</li>
<li>æµä»¥ä¸€ä¸ª<code>done</code>äº‹ä»¶ç»“æŸ</li>
</ul>
<p>ä½¿ç”¨æˆ‘ä»¬çš„æä¾›è€…ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå°éƒ¨ä»¶æ¥å¯è§†åŒ–åœ°æ˜¾ç¤ºè¿™äº›çŠ¶æ€ï¼Œæ¯”å¦‚ä¸€ä¸ªå¾®è°ƒå™¨æ¥æŒ‡ç¤ºæˆ‘ä»¬æ­£åœ¨ç­‰å¾…æ•°æ®ã€‚</p>
<p><img data-attachment-id="71495" data-permalink="https://blog.logrocket.com/using-websockets-flutter/loading-spinner/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Loading spinner" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png" decoding="async" class="aligncenter size-full wp-image-71495 jetpack-lazy-image" src="../Images/c6e084a99eafab1a389a186af0660781.png" alt="Loading Spinner" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner-300x123.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71495" data-permalink="https://blog.logrocket.com/using-websockets-flutter/loading-spinner/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png" data-orig-size="730,299" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Loading spinner" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner-300x123.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71495" src="../Images/c6e084a99eafab1a389a186af0660781.png" alt="Loading Spinner" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner-300x123.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Loading-spinner.png"/></noscript>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ˜¾ç¤ºæ¬§æ´²ç‘å£«æ³•éƒå’Œ BTC æ³•éƒçš„å½“å‰ä»·æ ¼æ¥æ˜¾ç¤ºæˆ‘ä»¬æ”¶åˆ°çš„æ•°æ®ã€‚</p>
<p><img data-attachment-id="71497" data-permalink="https://blog.logrocket.com/using-websockets-flutter/displaying-coin-price/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png" data-orig-size="730,238" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Displaying coin price" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price-300x98.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png" decoding="async" class="aligncenter size-full wp-image-71497 jetpack-lazy-image" src="../Images/caa4410741ed51c4e943079ae3a89807.png" alt="Displaying Coin Brice, Showing Etherium Price And Bitcoin Price" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price-300x98.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71497" data-permalink="https://blog.logrocket.com/using-websockets-flutter/displaying-coin-price/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png" data-orig-size="730,238" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Displaying coin price" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price-300x98.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71497" src="../Images/caa4410741ed51c4e943079ae3a89807.png" alt="Displaying Coin Brice, Showing Etherium Price And Bitcoin Price" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price-300x98.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/Displaying-coin-price.png"/></noscript>
<p>æˆ‘ä»¬å¯ä»¥å…³é—­ WebSockets å¹¶æ˜¾ç¤ºâ€œæ²¡æœ‰æ›´å¤šçš„æ•°æ®â€</p>
<p><img data-attachment-id="71499" data-permalink="https://blog.logrocket.com/using-websockets-flutter/no-more-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png" data-orig-size="730,208" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="No more data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png" decoding="async" class="aligncenter size-full wp-image-71499 jetpack-lazy-image" src="../Images/6ad21459ef8610d619fc12bf78fb3f58.png" alt="Showing &quot;No more data&quot;" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data-300x85.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="71499" data-permalink="https://blog.logrocket.com/using-websockets-flutter/no-more-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png" data-orig-size="730,208" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="No more data" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data-300x85.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-71499" src="../Images/6ad21459ef8610d619fc12bf78fb3f58.png" alt="Showing &quot;No more data&quot;" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data-300x85.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/No-more-data.png"/></noscript>
<p>ä½¿ç”¨<code>StreamBuilder</code> <code>connectionState</code>å’Œ<code>data</code>æ¥è·å–å…³äºæ¯ä¸ªçŠ¶æ€çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶æˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºç»™ç”¨æˆ·çš„æ‰€æœ‰ä¸‰ä¸ªçŠ¶æ€:</p>
<ul>
<li>å½“æˆ‘ä»¬è¿˜æ²¡æœ‰æ”¶åˆ°ä»»ä½•æ•°æ®æ—¶çš„åŠ è½½çŠ¶æ€</li>
<li>å½“å‰æ¬§æ´²æ³•éƒæˆ– BTC æ³•éƒä»·æ ¼</li>
<li>å…³é—­ WebSocket è¿æ¥åçš„å…³é—­çŠ¶æ€</li>
</ul>
<pre class="language-dart hljs">class CoinPrice extends StatelessWidget {
  final Stream stream;
  final Color color;

  const CoinPrice({
    required this.stream,
    required this.color,
    Key? key,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.all(12.0),
      child: StreamBuilder(
        stream: stream,
        builder: (context, snapshot) {
          /// We are waiting for incoming data data
          if (snapshot.connectionState == ConnectionState.waiting) {
            return const Center(
              child: CircularProgressIndicator(),
            );
          }

          /// We have an active connection and we have received data
          if (snapshot.connectionState == ConnectionState.active &amp;&amp;
              snapshot.hasData) {
            return Center(
              child: Text(
                '${snapshot.data!.productId}: ${snapshot.data!.price}',
                style: TextStyle(
                  color: color,
                  fontSize: 24.0,
                  fontWeight: FontWeight.bold,
                ),
              ),
            );
          }

          /// When we have closed the connection
          if (snapshot.connectionState == ConnectionState.done) {
            return const Center(
              child: Text(
                'No more data',
                style: TextStyle(
                  color: Colors.red,
                ),
              ),
            );
          }

          /// For all other situations, we display a simple "No data"
          /// message
          return const Center(
            child: Text('No data'),
          );
        },
      ),
    );
  }
}
</pre>
<h3>åˆ›å»ºæŒ‰é’®å°éƒ¨ä»¶</h3>
<p>æœ‰äº†æ¥æ”¶å®Œæ•´æ•°æ®æµçš„å°éƒ¨ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­åˆ›å»ºä¸€ä¸ªæŒ‰é’®å°éƒ¨ä»¶ï¼Œå®ƒå‘ CoinBase æœåŠ¡å™¨å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä»¥æ¥æ”¶å…³äº<code>BTC-EUR</code>å½“å‰ä»·æ ¼çš„ä¿¡æ¯ï¼Œå¹¶åˆ›å»ºå¦ä¸€ä¸ªå…³é—­æ‰€æœ‰å¥—æ¥å­—è¿æ¥çš„æŒ‰é’®ã€‚</p>
<p>ç¬¬ä¸€ä¸ªæŒ‰é’®æ˜¯<code>CoinButton</code>ï¼Œå®ƒå¯ä»¥é€šè¿‡ WebSocket å‘é€æ¶ˆæ¯ï¼Œå¼€å§‹æ¥æ”¶å…³äºç‰¹å®šç¡¬å¸çš„æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬ä¸æ˜¯åˆ›å»ºä¸¤ä¸ªä¸åŒçš„å°éƒ¨ä»¶ï¼Œæ¯ä¸ªéƒ¨ä»¶å¯¹åº”ä¸€ç§åŠ å¯†è´§å¸ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªé€šç”¨çš„å°éƒ¨ä»¶ï¼Œå®ƒæ¥å—<code>title</code>ã€<code>backgroundColor</code>å’Œ<code>isOpen</code>æ¥äº†è§£æˆ‘ä»¬æ˜¯å¦å·²ç»åœ¨æ¥æ”¶è¯¥ç¡¬å¸çš„ä¿¡æ¯ã€‚</p>
<p>æœ€åï¼Œå®ƒå°†æ¥å—<code>onTap</code>,å…è®¸æˆ‘ä»¬ç”¨é€‚å½“çš„å‡½æ•°è°ƒç”¨<code>CoinbaseProvider</code>:</p>
<pre class="language-dart hljs">/// Send WebSocket message to receive information
/// regarding a certain coin
/// 
/// Usage:
/// ```dart
/// CoinButton(
///  isSocketOpen: _showBitcoin,
///  title: "BTC",
///  backgroundColor: Colors.orange,
///  onTap: (isSocketOpen) {
///    if (!isSocketOpen) {
///      widget.provider.openBitcoin();
///      setState(() =&gt; _showBitcoin = true);
///    }
///  },
///)
/// ```
class CoinButton extends StatelessWidget {
  final bool isSocketOpen;
  final String title;
  final Function(bool) onTap;
  final Color backgroundColor;

  const CoinButton({
    required this.isSocketOpen,
    required this.title,
    required this.onTap,
    required this.backgroundColor,
    Key? key,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialButton(
      onPressed: () =&gt; !isSocketOpen ? onTap(isSocketOpen) : null,
      color: backgroundColor,
      child: Row(
        children: [
          if (!isSocketOpen)
            const Icon(
              Icons.close,
              color: Colors.red,
            ),
          if (isSocketOpen)
            const Icon(
              Icons.check,
              color: Colors.green,
            ),
          Text(title),
        ],
      ),
    );
  }
}
</pre>
<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ¥å—<code>CoinbaseProvider</code>ä½œä¸ºå‚æ•°çš„<code>CloseWebSocketsWidget</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¿é—®<code>closeBitcoin</code>å’Œ<code>closeEthereum</code>å‡½æ•°:</p>
<pre class="language-dart hljs">/// Button to close the WebSocket connection
class CloseSocketsWidget extends StatelessWidget {
  const CloseSocketsWidget({
    Key? key,
    required this.provider,

  }) : super(key: key);

  final CoinbaseProvider provider;

  @override
  Widget build(BuildContext context) {
    return MaterialButton(
      color: Colors.red,
      child: Row(
        mainAxisAlignment: MainAxisAlignment.center,
        children: const &lt;Widget&gt;[
          Icon(
            Icons.warning,
            color: Colors.white,
          ),
          SizedBox(
            width: 12.0,
          ),
          Text(
            "CLOSE SOCKETS",
            style: TextStyle(
              color: Colors.white,
            ),
          )
        ],
      ),
      onPressed: () {
        provider.closeBitcoin();
        provider.closeEthereum();
      },
    );
  }
}
</pre>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå®æ—¶æ˜¾ç¤ºä¸åŒçš„åŠ å¯†è´§å¸ä»·æ ¼:</p>
<p><img decoding="async" class="aligncenter jetpack-lazy-image" src="../Images/968bbd578f0beedaaf33311d4230e599.png" alt="" data-lazy-src="https://paper-attachments.dropbox.com/s_06B91234F4DA739615760794546C4B69244C0EAF12F88F677915D9135C2BEBFE_1633796752112_gif-websockets.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://paper-attachments.dropbox.com/s_06B91234F4DA739615760794546C4B69244C0EAF12F88F677915D9135C2BEBFE_1633796752112_gif-websockets.gif"/></p><noscript><img data-lazy-fallback="1" decoding="async" loading="lazy" class="aligncenter" src="../Images/968bbd578f0beedaaf33311d4230e599.png" alt="" data-original-src="https://paper-attachments.dropbox.com/s_06B91234F4DA739615760794546C4B69244C0EAF12F88F677915D9135C2BEBFE_1633796752112_gif-websockets.gif"/></noscript>
<h2>ç»“è®º</h2>
<p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»å‘ç”¨æˆ·æ˜¾ç¤ºå®æ—¶æ•°æ®ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼ŒWebSockets å¯ä»¥è®©æˆ‘ä»¬åœ¨ Flutter åº”ç”¨ç¨‹åºä¸­è½»æ¾å®Œæˆè¿™ä¸€è¿‡ç¨‹ï¼Œåªéœ€å››ä¸ªç®€å•çš„æ­¥éª¤:</p>
<ol>
<li>åˆ›å»ºå®¢æˆ·ç«¯</li>
<li>å°†å®¢æˆ·ç«¯è¿æ¥åˆ°é€šé“</li>
<li>å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯</li>
<li>ç›‘å¬ä¼ å…¥çš„æ¶ˆæ¯</li>
</ol>
<p>è¿™å…è®¸æˆ‘ä»¬åˆ›å»ºååº”å¼çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬çš„<code>StreamBuilders</code>å°éƒ¨ä»¶å¯ä»¥æ ¹æ®å½“å‰çŠ¶æ€è¿›è¡Œæ›´æ”¹ã€‚æˆ‘ä»¬åœ¨ç­‰å¾…æ–°çš„æ•°æ®å—ï¼Ÿæˆ‘ä»¬æ”¶åˆ°é”™è¯¯æˆ–æ–°æ•°æ®äº†å—ï¼Ÿ</p>
<p>è¿™äº›é—®é¢˜å¯ä»¥è½¬åŒ–ä¸º UI ç»„ä»¶ï¼Œä¾‹å¦‚åŠ¨ç”»æ˜¾ç¤ºæŸäººæ­£åœ¨èŠå¤©ä¸­è¾“å…¥å†…å®¹æˆ–æ›´æ–°é¡µé¢ä¸Šå›¾å½¢çš„å€¼ã€‚</p>
<p>ç°åœ¨ï¼Œé—®ä½ ä¸€ä¸ªé—®é¢˜ï¼æ‚¨æ›¾ç»éœ€è¦åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­å‘ç”¨æˆ·æ˜¾ç¤ºå®æ—¶æ•°æ®å—ï¼Ÿå¦‚æœæœ‰ï¼Œä½ ç”¨çš„æ˜¯ä»€ä¹ˆï¼ŸFirebaseï¼ŸWebSocketsï¼ŸgRPC æœåŠ¡å™¨ç«¯æµï¼Ÿ</p>
<p>å¾ˆå¥½å¥‡èƒ½æ”¶åˆ°ä½ çš„å›ä¿¡ï¼ğŸ˜</p>
<p>è¦æŸ¥çœ‹å®Œæ•´çš„ä»£ç ï¼Œä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªåº“ã€‚</p><div class="code-block code-block-2">
<div class="blog-plug base-cta"><h2>ä½¿ç”¨<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>æ¶ˆé™¤ä¼ ç»Ÿé”™è¯¯æŠ¥å‘Šçš„å¹²æ‰°</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>æ˜¯ä¸€ä¸ªæ•°å­—ä½“éªŒåˆ†æè§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿æŠ¤æ‚¨å…å—æ•°ç™¾ä¸ªå‡é˜³æ€§é”™è¯¯è­¦æŠ¥çš„å½±å“ï¼Œåªé’ˆå¯¹å‡ ä¸ªçœŸæ­£é‡è¦çš„é¡¹ç›®ã€‚LogRocket ä¼šå‘Šè¯‰æ‚¨åº”ç”¨ç¨‹åºä¸­å®é™…å½±å“ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„ bug å’Œ UX é—®é¢˜ã€‚</p>
<p>ç„¶åï¼Œä½¿ç”¨å…·æœ‰æ·±å±‚æŠ€æœ¯é¥æµ‹çš„ä¼šè¯é‡æ”¾æ¥ç¡®åˆ‡åœ°æŸ¥çœ‹ç”¨æˆ·çœ‹åˆ°äº†ä»€ä¹ˆä»¥åŠæ˜¯ä»€ä¹ˆå¯¼è‡´äº†é—®é¢˜ï¼Œå°±åƒä½ åœ¨ä»–ä»¬èº«åçœ‹ä¸€æ ·ã€‚</p>
<p>LogRocket è‡ªåŠ¨èšåˆå®¢æˆ·ç«¯é”™è¯¯ã€JS å¼‚å¸¸ã€å‰ç«¯æ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·äº¤äº’ã€‚ç„¶å LogRocket ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥å‘Šè¯‰ä½ å“ªäº›é—®é¢˜æ­£åœ¨å½±å“å¤§å¤šæ•°ç”¨æˆ·ï¼Œå¹¶æä¾›ä½ éœ€è¦ä¿®å¤å®ƒçš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>å…³æ³¨é‡è¦çš„ bugâ€”<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">ä»Šå¤©å°±è¯•è¯• LogRocketã€‘ã€‚</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>