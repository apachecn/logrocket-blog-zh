<html>
<head>
<title>How to build a chatroom app with React and Firebase - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>å¦‚ä½•ç”¨ React å’Œ Firebase - LogRocket Blog æ„å»ºèŠå¤©å®¤åº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/#0001-01-01">https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/#0001-01-01</a></blockquote><div><article class="article-post">
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨<a href="https://firebase.google.com/docs/firestore">äº‘ Firestore </a>å’Œ<a href="https://firebase.google.com/docs/auth"> Firebase è®¤è¯</a>åœ¨ React ä¸­æ„å»ºä¸€ä¸ªèŠå¤©å®¤åº”ç”¨ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ Firestore æ•°æ®åº“æ¥å­˜å‚¨èŠå¤©å®¤æ¶ˆæ¯ï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡ Firebase èº«ä»½éªŒè¯ä½¿ç”¨ Google ç™»å½•æ¥ç™»å½•ã€‚æˆ‘ä»¬ç”šè‡³å…è®¸ç”¨æˆ·ä»å¤šä¸ªèŠå¤©å®¤è¯é¢˜ä¸­é€‰æ‹©ä»–ä»¬æ„Ÿå…´è¶£çš„è¯é¢˜ã€‚</p>
<p>æˆ‘ä»¬å®Œæˆçš„é¡¹ç›®å°†çœ‹èµ·æ¥åƒä¸‹é¢çš„ gif:</p>
<p><img data-attachment-id="117981" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/final-chat-room-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif" data-orig-size="600,688" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-chat-room-app-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example-262x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif" decoding="async" class="aligncenter wp-image-117981 size-full jetpack-lazy-image" src="../Images/ee5a5375fe31caaed824bc27bbeb2306.png" alt="Final Chat Room App Example" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="117981" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/final-chat-room-app-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif" data-orig-size="600,688" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="final-chat-room-app-example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example-262x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif" decoding="async" loading="lazy" class="aligncenter wp-image-117981 size-full" src="../Images/ee5a5375fe31caaed824bc27bbeb2306.png" alt="Final Chat Room App Example" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/final-chat-room-app-example.gif"/></noscript>
<p>æœ€ç»ˆçš„é¡¹ç›®ä»£ç å¯ä»¥åœ¨<a href="https://github.com/zachsnoek/react-firebase-chat-app"> GitHub </a>ä¸Šæ‰¾åˆ°ã€‚åœ¨æœ¬æ•™ç¨‹çš„æœ€åï¼Œæˆ‘å°†ç»™å‡ºä¸€äº›æ‰©å±•è¿™ä¸ªåº”ç”¨ç¨‹åºçš„æ–¹æ³•ï¼Œä»¥è¿›ä¸€æ­¥æé«˜æ‚¨çš„ React å’Œ Firebase æŠ€èƒ½ã€‚</p>
<p>è¦é˜…è¯»æœ¬æ–‡ï¼Œæ‚¨éœ€è¦å…·å¤‡ä¸­çº§ JavaScriptã€React å’Œ CSS çŸ¥è¯†ã€‚ä½ è¿˜éœ€è¦ä¸€ä¸ªè°·æ­Œè´¦æˆ·æ¥è®¿é—® Firebaseã€‚å¦‚æœä½ æ²¡æœ‰è°·æ­Œè´¦æˆ·ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ React Routerï¼ŒReact ä¸­ç”¨äºè·¯ç”±çš„åº“ã€‚React è·¯ç”±å™¨çš„çŸ¥è¯†ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯ä½ å¯èƒ½æƒ³è¦<a href="https://reactrouter.com/docs/en/v6">æŸ¥é˜…æ–‡æ¡£</a>ã€‚æˆ‘ä»¬å¼€å§‹å§ï¼</p>

<h2 id="what-firebase-cloud-firestore">ä»€ä¹ˆæ˜¯ Firebase Cloud Firestoreï¼Ÿ</h2>
<p>Firebase æ˜¯ Google ä¸ºå¼€å‘åº”ç”¨ç¨‹åºè€Œæ„å»ºçš„å¹³å°ã€‚Firebase æä¾›çš„äº§å“å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åŠ å¿«å¼€å‘é€Ÿåº¦ï¼Œå¿«é€Ÿæ‰©å±•ï¼Œå¹¶ä¸ºå¸¸è§çš„å¼€å‘éœ€æ±‚åˆ›å»ºç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å°†åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ä¸¤ä¸ª Firebase äº§å“æ˜¯ Cloud Firestore å’Œ Firebase Authenticationã€‚</p>
<p>äº‘ Firestore æ˜¯ä¸€ä¸ªäº‘æ‰˜ç®¡çš„ NoSQL æ•°æ®åº“ã€‚æ•°æ®ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨æ–‡æ¡£ä¸­ï¼Œæ–‡æ¡£è¢«ç»„ç»‡æˆé›†åˆã€‚æ•°æ®æ˜¯çµæ´»çš„ï¼Œå¯ä»¥åµŒå¥—åœ¨åŒ…å«å­é›†åˆçš„æ–‡æ¡£ä¸­ã€‚Firestore æ•°æ®åº“å¯è‡ªåŠ¨æ‰©å±•ï¼Œå¹¶å¯è·¨å¬ä¼—åŒæ­¥æ•°æ®ã€‚æ­¤å¤–ï¼Œå®ƒä»¬æœ‰ä¸€ä¸ªå…è´¹å±‚ï¼Œå› æ­¤å¾ˆå®¹æ˜“ç”¨äºå®éªŒå’Œå­¦ä¹ ã€‚</p>
<h2 id="what-firebase-authentication">ä»€ä¹ˆæ˜¯ Firebase è®¤è¯ï¼Ÿ</h2>
<p>å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ä¸æ˜¯ä¸€ä»¶å°äº‹ï¼Œè€Œæ˜¯æ‚¨å¸Œæœ›æ­£ç¡®å®Œæˆçš„äº‹æƒ…ã€‚å¹¸è¿çš„æ˜¯ï¼ŒFirebase å·²ç»ä¸ºæˆ‘ä»¬å®Œæˆäº†å¤§éƒ¨åˆ†è‰°è‹¦çš„å·¥ä½œï¼Œå¹¶å®ç°äº†åç«¯å’Œç™»å½•è§£å†³æ–¹æ¡ˆæ¥ç®€åŒ–èº«ä»½éªŒè¯ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Firebase Authentication çš„ç®€å• SDKï¼Œé€šè¿‡ç”µå­é‚®ä»¶å’Œå¯†ç ã€Google ç™»å½•å’Œç”µè¯å·ç ç­‰ç™»å½•æ–¹æ³•å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
<p>ç°åœ¨æ‚¨å·²ç»ç†Ÿæ‚‰äº† Firebaseï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿™ä¸ªé¡¹ç›®å§ï¼</p>
<h2 id="set-up-firebase-project-react-app">è®¾ç½® Firebase é¡¹ç›®å’Œ React åº”ç”¨ç¨‹åº</h2>
<p>è¦å°† Firebase æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª Firebase é¡¹ç›®å¹¶æ³¨å†Œæˆ‘ä»¬çš„ Firebase åº”ç”¨ç¨‹åºã€‚</p>
<p>Firebase é¡¹ç›®æ˜¯ Firebase åº”ç”¨ç¨‹åºåŠå…¶èµ„æºå’ŒæœåŠ¡çš„å®¹å™¨ï¼Œå¦‚ Firestore æ•°æ®åº“å’Œèº«ä»½éªŒè¯æä¾›ç¨‹åºã€‚Firebase åº”ç”¨ç¨‹åº(å³ web åº”ç”¨ç¨‹åºæˆ– iOS åº”ç”¨ç¨‹åº)å±äºä¸€ä¸ªé¡¹ç›®ï¼›ä¸€ä¸ªé¡¹ç›®å¯ä»¥æœ‰è®¸å¤šåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å®ƒçš„æ‰€æœ‰åº”ç”¨ç¨‹åºå…±äº«ç›¸åŒçš„èµ„æºå’ŒæœåŠ¡ã€‚</p>
<p>è¦åˆ›å»º Firebase é¡¹ç›®ï¼Œè¯·å¯¼èˆªåˆ° Firebase æ§åˆ¶å°ï¼Œå¹¶æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œ:</p>
<ol>
<li>å¦‚æœä½ ä»¥å‰ç”¨è¿‡ Firebaseï¼Œç‚¹å‡»<strong>åˆ›å»ºä¸€ä¸ªé¡¹ç›®</strong>æˆ–è€…<strong>æ·»åŠ é¡¹ç›®</strong></li>
<li>è¾“å…¥<code>Chat Room</code>ä½œä¸ºé¡¹ç›®åç§°ï¼Œç„¶åç‚¹å‡»<strong>ç»§ç»­</strong></li>
<li>æ‰“å¼€æˆ–å…³é—­<code>Enable Google Analytics for this project</code>ï¼›ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘é€‰æ‹©ç¦ç”¨è°·æ­Œåˆ†æ</li>
<li>ç‚¹å‡»<strong>åˆ›å»ºé¡¹ç›®</strong></li>
</ol>
<p>æœ€åä¸€æ­¥å°†åˆ›å»ºæ‚¨çš„ Firebase èŠå¤©å®¤é¡¹ç›®å¹¶æä¾›å…¶èµ„æºã€‚ä¸€æ—¦æä¾›äº†èµ„æºï¼Œå•å‡»<strong>ç»§ç»­</strong>å¯¼èˆªåˆ°é¡¹ç›®çš„æ¦‚è¿°é¡µé¢ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»º Firebase åº”ç”¨ç¨‹åºã€‚å› ä¸ºæˆ‘ä»¬è¦å°† Firebase æ·»åŠ åˆ° React åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª web åº”ç”¨ç¨‹åºã€‚</p>
<ol>
<li>å‰å¾€<strong>æ¦‚è¿°</strong>é¡µé¢ï¼Œç‚¹å‡»<strong>ä¸‹çš„ç½‘ç»œå›¾æ ‡ï¼Œå¼€å§‹å°† Firebase æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨</strong></li>
<li>åœ¨<code>App nickname</code>å­—æ®µè¾“å…¥<code>Chat Room</code></li>
<li>ç‚¹å‡»<strong>æ³¨å†Œåº”ç”¨</strong></li>
</ol>
<p>æ³¨å†Œåº”ç”¨ç¨‹åºåï¼Œæ‚¨åº”è¯¥ä¼šåœ¨<strong> Add Firebase SDK </strong>ä¸‹çœ‹åˆ°å°† Firebase SDK æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­çš„è¯´æ˜:</p>
<p><img data-attachment-id="118047" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/add-firebase-sdk-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-firebase-sdk-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png" decoding="async" class="aligncenter wp-image-118047 size-full jetpack-lazy-image" src="../Images/0a2ff74f7911dbb2323c7f54df4f12f4.png" alt="Add Firebase SDK App" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app-266x300.png 266w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118047" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/add-firebase-sdk-app/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="add-firebase-sdk-app" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png" decoding="async" loading="lazy" class="aligncenter wp-image-118047 size-full" src="../Images/0a2ff74f7911dbb2323c7f54df4f12f4.png" alt="Add Firebase SDK App" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app-266x300.png 266w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/add-firebase-sdk-app.png"/></noscript>
<p>ä¿æŒæ­¤é¡µé¢æ‰“å¼€ï¼›åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å›åˆ°è¿™ä¸ªè¯é¢˜æ¥è®¨è®ºæˆ‘ä»¬çš„ Firebase é…ç½®ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è®¾ç½® React åº”ç”¨ç¨‹åºå¹¶æ·»åŠ æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Create React App å¼•å¯¼æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº:</p>
<pre class="language-bash">npx create-react-app chat-room &amp;&amp; cd chat-room
</pre>
<p>æ¥ä¸‹æ¥ï¼Œå®‰è£… Firebase SDKï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿè®¿é—® Firebase èº«ä»½éªŒè¯ã€äº‘ Firestore å’Œ React è·¯ç”±å™¨çš„åŠŸèƒ½:</p>
<pre class="language-bash">npm i firebase react-router-dom
</pre>
<h2 id="initialize-firebase">åˆå§‹åŒ– Firebase</h2>
<p>éšç€ React é¡¹ç›®çš„å»ºç«‹å’Œ Firebase åº”ç”¨ç¨‹åºçš„æ³¨å†Œï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ– Firebase äº†ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹æˆ‘ä»¬å°†å¦‚ä½•åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Firebase SDK ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç™»å½•å‡½æ•°ï¼Œå®ƒä½¿ç”¨ Firebase èº«ä»½éªŒè¯é€šè¿‡ Google sign-in è®©ç”¨æˆ·ç™»å½•ã€‚æˆ‘ä»¬å°†åœ¨ state ä¸­å­˜å‚¨ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼Œå¹¶é€šè¿‡ä¸Šä¸‹æ–‡ API ä½¿è¿™äº›ä¿¡æ¯å’Œç™»å½•åŠŸèƒ½å¯¹ç»„ä»¶å¯ç”¨<a href="https://blog.logrocket.com/react-context-api-deep-dive-examples/">ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ Firestore SDK å‡½æ•°æ¥è¯»å–å’Œå†™å…¥æˆ‘ä»¬çš„æ•°æ®åº“ã€‚è¯»å–æ•°æ®åº“æ¶ˆæ¯çš„è‡ªå®šä¹‰é’©å­å°†å…è®¸ç»„ä»¶è·å¾—æœ€æ–°çš„åŒæ­¥æ•°æ®ã€‚</a></p>
<p>è®°ä½è¿™ä¸€ç‚¹ï¼Œæœ¬èŠ‚çš„ç›®æ ‡æ˜¯åœ¨ React ä¸­åˆå§‹åŒ–æˆ‘ä»¬çš„ Firebase åº”ç”¨ç¨‹åºï¼Œå¹¶è®¾ç½®æ¨¡å—æ¥å¯¼å‡ºæˆ‘ä»¬å‰é¢æåˆ°çš„ä½¿ç”¨ SDK çš„å‡½æ•°ã€‚</p>
<p>é¦–å…ˆï¼Œåˆ›å»ºåˆå§‹åŒ– Firebase å¹¶å¯¼å‡ºæˆ‘ä»¬çš„å‡½æ•°çš„ç›®å½•å’Œæ¨¡å—æ–‡ä»¶:</p>
<pre class="language-bash">mkdir src/services &amp;&amp; touch src/services/firebase.js
</pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·»åŠ  Firebase é…ç½®å¹¶åˆå§‹åŒ–åº”ç”¨ç¨‹åºã€‚<code>firebaseConfig</code>å¯¹è±¡æ¥è‡ªæ‚¨åœ¨<code>Add Firebase SDK</code>ä¸‹æ³¨å†Œåº”ç”¨ç¨‹åºåæ˜¾ç¤ºçš„ä¿¡æ¯:</p>
<pre class="language-javascript">import { initializeApp } from "firebase/app";
const firebaseConfig = {
    // TODO: Add your Firebase configuration here
};
const app = initializeApp(firebaseConfig);
</pre>
<p>è¿”å›ä¸€ä¸ª Firebase åº”ç”¨ç¨‹åºå®ä¾‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè·¨ Firebase æœåŠ¡ä½¿ç”¨é€šç”¨é…ç½®å’Œè®¤è¯ã€‚æˆ‘ä»¬ç¨åè®¾ç½® Firestore æ—¶ä¼šç”¨åˆ°å®ƒã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­åˆå§‹åŒ– Firebase æ‰€éœ€è¦åšçš„ä¸€åˆ‡ï¼è®©æˆ‘ä»¬ç»§ç»­æ·»åŠ  Firebase èº«ä»½éªŒè¯å’Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª React ä»£ç ã€‚</p>
<h2 id="add-firebase-authentication">æ·»åŠ  Firebase èº«ä»½éªŒè¯</h2>
<p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠ Firebase èº«ä»½éªŒè¯æ·»åŠ åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œåˆ›å»ºä¸€ä¸ªä½œä¸º Google ç”¨æˆ·ç™»å½•çš„å‡½æ•°ï¼Œå¹¶è®¾ç½®æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­ç®€è¦è®¨è®ºè¿‡çš„èº«ä»½éªŒè¯ä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä¼ é€’ä¸€ä¸ª<code>user</code>å¯¹è±¡å’Œä¸€ä¸ª<code>login</code>å‡½æ•°çš„<code>&lt;AuthProvider&gt;</code>ç»„ä»¶ã€‚<code>login</code>åŒ…è£… SDK çš„ Google sign-in åŠŸèƒ½ï¼Œç„¶åå°†è®¤è¯ç”¨æˆ·è®¾ç½®ä¸ºçŠ¶æ€ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Firebase æ§åˆ¶å°ä¸­å¯ç”¨ Google ä½œä¸ºç™»å½•æ–¹æ³•ã€‚é¦–å…ˆï¼Œå¯¼èˆªåˆ°æ§åˆ¶å°ã€‚</p>
<ol>
<li>ç‚¹å‡»ä¾§è¾¹æ ä¸­çš„<strong>è®¤è¯</strong></li>
<li>ç‚¹å‡»<strong>å¼€å§‹</strong></li>
<li>ç‚¹å‡»é¡¶éƒ¨çš„<strong>ç™»å½•æ–¹å¼</strong>é€‰é¡¹å¡</li>
<li>åœ¨<strong>ç™»å½•æä¾›å•†</strong>ä¸‹ï¼Œç‚¹å‡»<strong>è°·æ­Œ</strong></li>
<li>åˆ‡æ¢<strong>ä½¿èƒ½</strong></li>
<li>é€‰æ‹©ä¸€ä¸ª<strong>é¡¹ç›®æ”¯æŒç”µå­é‚®ä»¶</strong></li>
<li>ç‚¹å‡»<strong>ä¿å­˜</strong></li>
</ol>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ  Firebase èº«ä»½éªŒè¯ã€‚åœ¨<code>src/services/firebase.js</code>ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç :</p>
<pre class="language-javascript">// ...

import { GoogleAuthProvider, signInWithPopup, getAuth } from 'firebase/auth';

// ...

async function loginWithGoogle() {
    try {
        const provider = new GoogleAuthProvider();
        const auth = getAuth();

        const { user } = await signInWithPopup(auth, provider);

        return { uid: user.uid, displayName: user.displayName };
    } catch (error) {
        if (error.code !== 'auth/cancelled-popup-request') {
            console.error(error);
        }

        return null;
    }
}

export { loginWithGoogle };
</pre>
<p>åœ¨<code>try</code>å—ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>GoogleAuthProvider</code>ï¼Œå®ƒä¸º Google ç”Ÿæˆä¸€ä¸ªå‡­è¯ï¼Œå¹¶è°ƒç”¨<code>getAuth</code>ï¼Œå®ƒè¿”å›ä¸€ä¸ª Firebase è®¤è¯å®ä¾‹ã€‚æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªå¯¹è±¡ä¼ é€’ç»™<code>signInWithPopup</code>ï¼Œå®ƒå¤„ç†å¼¹å‡ºçª—å£ä¸­çš„ç™»å½•æµï¼Œå¹¶åœ¨ç”¨æˆ·é€šè¿‡èº«ä»½éªŒè¯åè¿”å›ä»–ä»¬çš„ä¿¡æ¯ã€‚æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸ª API ä½¿å¾—ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹å˜å¾—ç›¸å½“ç®€å•ã€‚</p><div class="code-block code-block-54">
<hr/>
<h3>æ›´å¤šæ¥è‡ª LogRocket çš„ç²¾å½©æ–‡ç« :</h3>

<hr/></div>
<p>Firebase èº«ä»½éªŒè¯æ”¯æŒè®¸å¤šå…¶ä»–èº«ä»½éªŒè¯æ–¹æ³•ï¼›ä½ å¯ä»¥åœ¨<a href="https://firebase.google.com/docs/auth/web/start"> Firebase æ–‡æ¡£</a>ä¸­äº†è§£å®ƒä»¬ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºèº«ä»½éªŒè¯ä¸Šä¸‹æ–‡å’Œæä¾›è€…ã€‚ä¸ºä¸Šä¸‹æ–‡åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•å’Œä¸€ä¸ªæ–‡ä»¶æ¥å­˜å‚¨å®ƒ:</p>
<pre class="language-javascript">mkdir src/context &amp;&amp; touch src/context/auth.js
</pre>
<p>åœ¨<code>src/context/auth.js</code>ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç :</p>
<pre class="language-javascript">import React from 'react';
import { loginWithGoogle } from '../services/firebase';

const AuthContext = React.createContext();

const AuthProvider = (props) =&gt; {
    const [user, setUser] = React.useState(null);

    const login = async () =&gt; {
        const user = await loginWithGoogle();

        if (!user) {
            // TODO: Handle failed login
        }

        setUser(user);
    };

    const value = { user, login };

    return &lt;AuthContext.Provider value={value} {...props} /&gt;;
};

export { AuthContext, AuthProvider };
</pre>
<p>æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>AuthContext</code>å¯¹è±¡ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª<code>&lt;AuthProvider&gt;</code>ç»„ä»¶æ¥è¿”å›ä¸Šä¸‹æ–‡çš„æä¾›è€…ã€‚åœ¨<code>AuthProvider</code>ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æˆ‘ä»¬çš„<code>user</code>çŠ¶æ€å’Œä¸€ä¸ªç™»å½•å‡½æ•°ï¼Œä¸€æ—¦ç”¨æˆ·æˆåŠŸç™»å½•ï¼Œè¯¥å‡½æ•°å°†è°ƒç”¨æˆ‘ä»¬çš„<code>loginWithGoogle</code>å‡½æ•°å¹¶è®¾ç½®<code>user</code>çŠ¶æ€ã€‚æœ€åï¼Œæˆ‘ä»¬è®©ä¸Šä¸‹æ–‡è®¢é˜…è€…å¯ä»¥ä½¿ç”¨<code>user</code>å’Œ<code>login</code>å‡½æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå®šåˆ¶çš„<code>useAuth</code>é’©å­æ¥ä½¿ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„æ ¹<code>&lt;App&gt;</code>ç»„ä»¶ä¸­ä½¿ç”¨å®ƒæ¥æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æœ‰ä¸€ä¸ªç™»å½•çš„<code>user</code>çŠ¶æ€ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥å‘ˆç°ä¸€ä¸ªç™»å½•é¡µé¢å¹¶è®©è¯¥é¡µé¢è°ƒç”¨<code>login</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿæ˜¯é€šè¿‡ä¸Šä¸‹æ–‡æ¥æ”¶çš„ã€‚å¦‚æœæˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>user</code>ä¿¡æ¯æ¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚</p>
<p>ç”¨ä¸‹é¢çš„ä»£ç ä¸ºæˆ‘ä»¬çš„é’©å­åˆ›å»ºä¸€ä¸ªç›®å½•å’Œä¸€ä¸ªæ–‡ä»¶æ¥å­˜å‚¨æ–°çš„é’©å­:</p>
<pre class="language-javascript">mkdir src/hooks &amp;&amp; touch src/hooks/useAuth.js
</pre>
<p>åœ¨<code>src/hooks/useAuth.js</code>ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„é’©å­ï¼Œè°ƒç”¨<code>useContext</code>æ¥ä½¿ç”¨æˆ‘ä»¬åœ¨<code>src/context/auth.js</code>ä¸­åˆ›å»ºçš„ä¸Šä¸‹æ–‡å€¼:</p>
<pre class="language-javascript">import React from 'react';
import { AuthContext } from '../context/auth';

function useAuth() {
    const value = React.useContext(AuthContext);

    if (!value) {
        throw new Error("AuthContext's value is undefined.");
    }

    return value;
}

export { useAuth };
</pre>
<p>æœ€åï¼Œé€šè¿‡ç”¨æˆ‘ä»¬çš„<code>&lt;AuthProvider&gt;</code>åŒ…è£…<code>&lt;App&gt;</code>ç»„ä»¶ï¼Œè®©æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡å€¼å¯¹æ•´ä¸ªç»„ä»¶æ ‘å¯ç”¨ã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°<code>src/index.js</code>:</p>
<pre class="language-javascript">// ...

import { AuthProvider } from './context/auth';

// ...

root.render(
    &lt;AuthProvider&gt;
        &lt;App /&gt;
    &lt;/AuthProvider&gt;
);

// ...
</pre>
<p>æœ‰äº†åˆé€‚çš„<code>&lt;AuthProvider&gt;</code>å¹¶åˆ›å»ºäº†æˆ‘ä»¬çš„<code>useAuth</code>é’©å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç™»å½•ç”¨æˆ·å¹¶åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­æ¥æ”¶ä»–ä»¬çš„è®¤è¯ä¿¡æ¯äº†ã€‚</p>
<h2 id="add-unauthenticated-app">æ·»åŠ <code>&lt;UnauthenticatedApp&gt;</code>å’Œ<code>&lt;AuthenticatedApp&gt;</code>ç»„ä»¶</h2>
<p>ä¹‹å‰ï¼Œæˆ‘æåˆ°è¿‡æˆ‘ä»¬å°†ä½¿ç”¨<code>useAuth</code>é’©å­æ¥å†³å®šæˆ‘ä»¬æ˜¯å¦åº”è¯¥æ˜¾ç¤ºä¸€ä¸ªç™»å½•ç•Œé¢ã€‚åœ¨æˆ‘ä»¬çš„<code>&lt;App&gt;</code>ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†æ£€æŸ¥æ˜¯å¦æœ‰ä¸€ä¸ª<code>user</code>ã€‚å¦‚æœè¿™æ ·åšï¼Œæˆ‘ä»¬å°†å‘ˆç°ä¸€ä¸ª<code>&lt;AuthenticatedApp&gt;</code>ï¼Œå®ƒæ˜¯ç”¨æˆ·å¯ä»¥èŠå¤©çš„ä¸»è¦åº”ç”¨ç¨‹åºã€‚å¦‚æœæˆ‘ä»¬ä¸è¿™æ ·åšï¼Œæˆ‘ä»¬å°†å‘ˆç°ä¸€ä¸ª<code>&lt;UnauthenticatedApp&gt;</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰ç™»å½•æŒ‰é’®çš„é¡µé¢ã€‚</p>
<p>è¯¥é€»è¾‘çš„æ ¸å¿ƒå¦‚ä¸‹æ‰€ç¤º:</p>
<pre class="language-javascript">function App() {
    const { user } = useAuth();
    return user ? &lt;AuthenticatedApp /&gt; : &lt;UnauthenticatedApp /&gt;;
}
</pre>
<p>è®©æˆ‘ä»¬ä»ç”¨å ä½ç¬¦å®ç°åˆ›å»ºè¿™ä¸¤ä¸ªç»„ä»¶å¼€å§‹ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»„ä»¶ç›®å½•æ¥å­˜å‚¨æˆ‘ä»¬çš„æ‰€æœ‰ç»„ä»¶ä»¥åŠä¸¤ä¸ªæ–°ç»„ä»¶çš„ç›®å½•å’Œæ–‡ä»¶:</p>
<pre class="language-javascript">mkdir src/components src/components/AuthenticatedApp src/components/UnauthenticatedApp
touch src/components/AuthenticatedApp/index.jsx
touch src/components/UnauthenticatedApp/index.jsx src/components/UnauthenticatedApp/styles.css
</pre>
<p>åœ¨<code>src/components/AuthenticatedApp/index.jsx</code>ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå ä½ç¬¦ç»„ä»¶:</p>
<pre class="language-javascript">function AuthenticatedApp() {
    return &lt;div&gt;I'm authenticated!&lt;/div&gt;
}

export { AuthenticatedApp };
</pre>
<p>åœ¨<code>src/components/UnauthenticatedApp/index.jsx</code>ä¸­è¿›è¡ŒåŒæ ·çš„æ“ä½œ:</p>
<pre class="language-javascript">function UnauthenticatedApp() {
    return &lt;div&gt;I'm unauthenticated!&lt;/div&gt;
}

export { UnauthenticatedApp };
</pre>
<p>ç°åœ¨ï¼Œåœ¨<code>src/components/App.js</code>ä¸­ï¼Œè®©æˆ‘ä»¬æ‰§è¡Œå‰é¢æè¿°çš„è®¤è¯æ£€æŸ¥ï¼Œæ·»åŠ ä¸€ä¸ªå¤´ï¼Œæœ€åï¼Œè®¾ç½®æˆ‘ä»¬çš„å¸ƒå±€ã€‚ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢é»˜è®¤ä»£ç :</p>
<pre class="language-javascript">import { AuthenticatedApp } from './components/AuthenticatedApp';
import { UnauthenticatedApp } from './components/UnauthenticatedApp';
import { useAuth } from './hooks/useAuth';
import './App.css';

function App() {
    const { user } = useAuth();

    return (
        &lt;div className="container"&gt;
            &lt;h1&gt;ğŸ’¬ Chat Room&lt;/h1&gt;
            {user ? &lt;AuthenticatedApp /&gt; : &lt;UnauthenticatedApp /&gt;}
        &lt;/div&gt;
    );
}

export default App;
</pre>
<p>åœ¨<code>src/App.css</code>ä¸­ï¼Œç”¨è¿™äº›å…¨å±€æ ·å¼æ›¿æ¢é»˜è®¤æ ·å¼:</p>
<pre class="language-javascript">* {
    box-sizing: border-box;
}

html {
    --color-background: hsl(216, 8%, 12%);
    --color-blue: hsl(208, 100%, 50%);
    --color-gray: hsl(210, 3%, 25%);
    --color-white: white;
    --border-radius: 5px;
    background-color: var(--color-background);
    color: var(--color-white);
}

html,
body,
#root {
    height: 100%;
}

h1,
h2,
h3,
h4,
ul {
    margin: 0;
}

a {
    color: inherit;
    text-decoration: none;
}

ul {
    padding: 0;
    list-style: none;
}

button {
    cursor: pointer;
}

input,
button {
    font-size: 1rem;
    color: inherit;
    border: none;
    border-radius: var(--border-radius);
}

.container {
    height: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    padding: 32px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 32px;
}
</pre>
<p>æœ€åï¼Œè¿è¡Œ<code>yarn start</code>å¹¶å¯¼èˆªåˆ°<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>ã€‚ç”±äº<code>user</code>åœ¨æˆ‘ä»¬çš„<code>&lt;AuthProvider&gt;</code>ä¸­è¢«åˆå§‹åŒ–ä¸º<code>null</code>ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°æ–‡æœ¬é˜…è¯»<code>I'm unauthenticated!</code>:</p>
<p><img data-attachment-id="118050" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/chatroom-user-unauthenticated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chatroom-user-unauthenticated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png" decoding="async" class="aligncenter wp-image-118050 size-full jetpack-lazy-image" src="../Images/7e8473b1873f335cfbde00748963e2a2.png" alt="Chatroom User Unauthenticated" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated-266x300.png 266w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118050" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/chatroom-user-unauthenticated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chatroom-user-unauthenticated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png" decoding="async" loading="lazy" class="aligncenter wp-image-118050 size-full" src="../Images/7e8473b1873f335cfbde00748963e2a2.png" alt="Chatroom User Unauthenticated" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated-266x300.png 266w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-user-unauthenticated.png"/></noscript>
<h2 id="implement-unauthenticated-app">å®æ–½<code>&lt;UnauthenticatedApp&gt;</code></h2>
<p>ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†æ‰€æœ‰ä¸œè¥¿è¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶å°†ç™»å½•æŒ‰é’®æ·»åŠ åˆ°<code>&lt;UnauthenticatedApp&gt;</code>ä¸­ã€‚æˆ‘ä»¬å·²ç»å®Œæˆäº†ç¼–å†™<code>login</code>å‡½æ•°å¹¶é€šè¿‡ä¸Šä¸‹æ–‡ä¼ é€’å®ƒçš„å›°éš¾éƒ¨åˆ†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€šè¿‡<code>useAuth</code>æ¶ˆè´¹æˆ‘ä»¬çš„<code>AuthContext</code>æ¥è·å¾—<code>login</code>å‡½æ•°ï¼Œå¹¶å‘ˆç°ä¸€ä¸ªè°ƒç”¨å®ƒçš„æŒ‰é’®ã€‚</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»ç™»å½•æŒ‰é’®æ—¶ï¼Œ<code>login</code>è¢«è°ƒç”¨ï¼Œæ˜¾ç¤º Google ç™»å½•å¼¹å‡ºçª—å£ã€‚ä¸€æ—¦ç™»å½•å®Œæˆï¼Œ<code>user</code>å°†å­˜å‚¨åœ¨ state ä¸­ï¼Œæ˜¾ç¤º<code>&lt;AuthenticatedApp&gt;</code>ã€‚</p>
<p>åœ¨<code>src/components/UnauthenticatedApp/index.jsx</code>ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç :</p>
<pre class="language-javascript">import { useAuth } from '../../hooks/useAuth';
import './styles.css';

function UnauthenticatedApp() {
    const { login } = useAuth();

    return (
        &lt;&gt;
            &lt;h2&gt;Log in to join a chat room!&lt;/h2&gt;
            &lt;div&gt;
                &lt;button onClick={login} className="login"&gt;
                    Login with Google
                &lt;/button&gt;
            &lt;/div&gt;
        &lt;/&gt;
    );
}

export { UnauthenticatedApp };
</pre>
<p>å°†ä»¥ä¸‹æ ·å¼æ·»åŠ åˆ°<code>src/components/UnauthenticatedApp/styles.css</code>:</p>
<pre class="language-javascript">.login {
    background: var(--color-blue);
    padding: 16px;
}
</pre>
<p>ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªåˆ°æ‚¨çš„åº”ç”¨ç¨‹åºå¹¶å°è¯•ç™»å½•ã€‚ä¸€æ—¦é€šè¿‡èº«ä»½éªŒè¯ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ–‡æœ¬<code>I'm authenticated!</code>:</p>
<p><img data-attachment-id="118054" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/chatroom-ser-authenticated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chatroom-user-authenticated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png" decoding="async" class="aligncenter wp-image-118054 size-full jetpack-lazy-image" src="../Images/095fe91315789ca309e8f8ae18ee124e.png" alt="Chatroom User Authenticated" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated-266x300.png 266w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118054" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/chatroom-ser-authenticated/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chatroom-user-authenticated" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png" decoding="async" loading="lazy" class="aligncenter wp-image-118054 size-full" src="../Images/095fe91315789ca309e8f8ae18ee124e.png" alt="Chatroom User Authenticated" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated-266x300.png 266w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chatroom-ser-authenticated.png"/></noscript>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æœ‰äº†åŸºæœ¬çš„èº«ä»½éªŒè¯ã€‚è®©æˆ‘ä»¬ç»§ç»­å®ç°<code>&lt;AuthenticatedApp&gt;</code>ç»„ä»¶ã€‚</p>
<h2 id="add-chat-rooms-routing">æ·»åŠ èŠå¤©å®¤å’Œè·¯ç”±</h2>
<p>æœ‰èƒ½åŠ›å’Œåˆ«äººèŠå¤©æ˜¯å¾ˆæ£’çš„ï¼Œä½†æ˜¯å’Œåˆ«äººèŠä¸åŒçš„è¯é¢˜ä¼šæ›´æœ‰è¶£ã€‚æˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºç¡¬ç¼–ç çš„èŠå¤©å®¤ä¸»é¢˜æ¥å®ç°è¿™ä¸€ç‚¹ï¼›åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºç¡¬ç¼–ç çš„èŠå¤©å®¤å¹¶è®¾ç½®è·¯ç”±ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªæˆ¿é—´è®¾ç½®ä¸åŒçš„è·¯ç”±ï¼Œå³<code>/room/{roomId}</code>ã€‚</p>
<p>é¦–å…ˆï¼Œä¸ºæˆ‘ä»¬çš„èŠå¤©å®¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶:</p>
<pre class="language-javascript">mkdir src/data &amp;&amp; touch src/data/chatRooms.js
</pre>
<p>åœ¨<code>src/data/chatRooms.js</code>ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ªæˆ¿é—´å¯¼å‡ºä¸€ä¸ªå¸¦æœ‰<code>id</code>å’Œ<code>title</code>çš„<code>chatRooms</code>å¯¹è±¡:</p>
<pre class="language-javascript">const chatRooms = [
    { id: 'dogs', title: 'ğŸ¶ Dogs ğŸ¶' },
    { id: 'food', title: 'ğŸ” Food ğŸ”' },
    { id: 'general', title: 'ğŸ’¬ General ğŸ’¬' },
    { id: 'news', title: 'ğŸ— News ğŸ—' },
    { id: 'music', title: 'ğŸ¹ Music ğŸ¹' },
    { id: 'sports', title: 'ğŸˆ Sports ğŸˆ' },
];

export { chatRooms };
</pre>
<p>è¿™äº›æ˜¯æˆ‘æƒ³åˆ°çš„ç¬¬ä¸€ä¸ªè¯é¢˜ï¼Œä½†è¿™æ˜¯ä½ çš„é¡¹ç›®ï¼Œæ‰€ä»¥è¯·éšæ„æ·»åŠ ä½ æ„Ÿå…´è¶£çš„èŠå¤©å®¤è¯é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥è®¾ç½®è·¯ç”±å™¨ã€‚<code>&lt;AuthenticatedApp&gt;</code>å°†å‘ˆç°ä¸€ä¸ªåŒ…å«ä¸¤æ¡è·¯å¾„çš„è·¯ç”±å™¨:ä¸€æ¡è·¯å¾„<code>/</code>å°†æˆ‘ä»¬å¸¦åˆ°ä¸€ä¸ª<code>&lt;Landing&gt;</code>ç»„ä»¶ï¼Œå¦ä¸€æ¡è·¯å¾„<code>/room/:id</code>å‘ˆç°ä¸€ä¸ª<code>&lt;ChatRoom&gt;</code>ç»„ä»¶ã€‚</p>
<p>è®©æˆ‘ä»¬ä¸ºä¸¤ä¸ªæ–°ç»„ä»¶åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶å°†å ä½ç¬¦ç»„ä»¶æ”¾å…¥å…¶ä¸­:</p>
<pre class="language-javascript">mkdir src/components/Landing src/components/ChatRoom
touch src/components/Landing/index.jsx src/components/Landing/styles.css
touch src/components/ChatRoom/index.jsx src/components/ChatRoom/styles.css
</pre>
<p>å°†è´Ÿè´£åˆ—å‡ºæˆ‘ä»¬æ‰€æœ‰çš„èŠå¤©å®¤ã€‚ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªå°†å¯¼èˆªè‡³<code>/room/:id</code>ã€‚åœ¨<code>src/components/Landing/index.jsx</code>ä¸­æ·»åŠ ä¸€ä¸ªå ä½ç¬¦ç»„ä»¶:</p>
<pre class="language-javascript">function Landing() {
    return &lt;div&gt;Landing&lt;/div&gt;;
}

export { Landing };
</pre>
<p><code>&lt;ChatRoom&gt;</code>å°†åˆ—å‡ºä¸€ä¸ªæˆ¿é—´çš„æ¶ˆæ¯å¹¶å‘ˆç°ä¸€ä¸ªè¾“å…¥å’Œå‘é€å¦ä¸€ä¸ªæ¶ˆæ¯çš„æŒ‰é’®ã€‚åœ¨<code>src/components/ChatRoom.index.jsx</code>ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç :</p>
<pre class="language-javascript">function ChatRoom() {
    return &lt;div&gt;Chat room&lt;/div&gt;;
}

export { ChatRoom };
</pre>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨<code>&lt;AuthenticatedApp&gt;</code>ä¸­è®¾ç½®è·¯ç”±å™¨ï¼Œå¹¶ç”¨æˆ‘ä»¬çš„æ–°ç»„ä»¶æ¸²æŸ“è·¯çº¿ã€‚ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢æˆ‘ä»¬åœ¨<code>src/components/AuthenticatedApp/index.jsx</code>ä¸­çš„å ä½ç¬¦å®ç°:</p>
<pre class="language-javascript">import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { Landing } from '../Landing';
import { ChatRoom } from '../ChatRoom';

function AuthenticatedApp() {
    return (
        &lt;BrowserRouter&gt;
            &lt;Routes&gt;
                &lt;Route path="/" element={&lt;Landing /&gt;} /&gt;
                &lt;Route path="/room/:id" element={&lt;ChatRoom /&gt;} /&gt;
            &lt;/Routes&gt;
        &lt;/BrowserRouter&gt;
    );
}

export { AuthenticatedApp };
</pre>
<p>ç”¨ React è·¯ç”±å™¨è®¨è®ºå¯¼èˆªå·²ç»è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼›å¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äº React è·¯ç”±å™¨çš„ä¿¡æ¯ï¼Œ<a href="https://reactrouter.com/docs/en/v6">æŸ¥çœ‹ä»–ä»¬çš„æ–‡æ¡£</a>ã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡å®ç°<code>&lt;Landing&gt;</code>æ¥æµ‹è¯•æˆ‘ä»¬çš„è·¯ç”±å™¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€‰æ‹©ä¸€ä¸ªèŠå¤©å®¤ã€‚åœ¨<code>&lt;Landing&gt;</code>ä¸­ï¼Œæˆ‘ä»¬å°†ç®€å•åœ°ä¸ºæ¯ä¸ªç¡¬ç¼–ç çš„<code>chatRooms</code>åˆ›å»ºä¸€ä¸ª React è·¯ç”±å™¨<code>&lt;Link&gt;</code>:</p>
<pre class="language-javascript">import { Link } from 'react-router-dom';
import { chatRooms } from '../../data/chatRooms';
import './styles.css';

function Landing() {
    return (
        &lt;&gt;
            &lt;h2&gt;Choose a Chat Room&lt;/h2&gt;
            &lt;ul className="chat-room-list"&gt;
                {chatRooms.map((room) =&gt; (
                    &lt;li key={room.id}&gt;
                        &lt;Link to={`/room/${room.id}`}&gt;{room.title}&lt;/Link&gt;
                    &lt;/li&gt;
                ))}
            &lt;/ul&gt;
        &lt;/&gt;
    );
}

export { Landing };
</pre>
<p>ä¸ºäº†è®©äº‹æƒ…çœ‹èµ·æ¥æ›´å¥½ï¼Œè®©æˆ‘ä»¬ç»™<code>src/components/Landing/styles.css</code>æ·»åŠ ä¸€äº›æ ·å¼:</p>
<pre class="language-javascript">.chat-room-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.chat-room-list li {
    height: 100px;
    background: var(--color-gray);
    flex: 1 1 calc(50% - 4px);
    border-radius: var(--border-radius);
    display: flex;
    justify-content: center;
    align-items: center;
}
</pre>
<p>å½“æ‚¨å¯¼èˆªåˆ°<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>å¹¶ç™»å½•æ—¶ï¼Œè·¯ç”±å™¨ä¼šå°†æ‚¨å¸¦åˆ°æ›´æ–°åçš„<code>&lt;Landing&gt;</code>ç»„ä»¶:</p>
<p><img data-attachment-id="118094" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/updated-landing-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updated-landing-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png" decoding="async" class="aligncenter wp-image-118094 size-full jetpack-lazy-image" src="../Images/c097c6230ce12c5f4535a059c8f632a5.png" alt="Updated Landing Component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component-266x300.png 266w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118094" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/updated-landing-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png" data-orig-size="730,823" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updated-landing-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component-266x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png" decoding="async" loading="lazy" class="aligncenter wp-image-118094 size-full" src="../Images/c097c6230ce12c5f4535a059c8f632a5.png" alt="Updated Landing Component" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component-266x300.png 266w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-landing-component.png"/></noscript>
<p>å¦‚æœä½ ç‚¹å‡»<strong>ğŸ¶ç‹—ğŸ¶</strong>ä¾‹å¦‚ï¼Œæ‚¨åº”è¯¥è¢«å¸¦åˆ°<code><a href="http://localhost:3000/room/dogs" rel="nofollow">http://localhost:3000/room/dogs</a></code>å¹¶çœ‹åˆ°æ–‡æœ¬<code>Chat room</code>ã€‚</p>
<p>æœ€åï¼Œè®©æˆ‘ä»¬è®¾ç½®æˆ‘ä»¬çš„<code>&lt;ChatRoom&gt;</code>ç»„ä»¶ï¼Œç¨åæˆ‘ä»¬å°†å®Œæˆå®ç°ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ˜¾ç¤ºèŠå¤©å®¤ä¿¡æ¯ï¼Œå¹¶æä¾›è¿”å›ç™»å½•é¡µé¢çš„é“¾æ¥:</p>
<pre class="language-javascript">import { Link, useParams } from 'react-router-dom';
import { chatRooms } from '../../data/chatRooms';
import './styles.css';

function ChatRoom() {
    const params = useParams();

    const room = chatRooms.find((x) =&gt; x.id === params.id);
    if (!room) {
        // TODO: 404
    }

    return (
        &lt;&gt;
            &lt;h2&gt;{room.title}&lt;/h2&gt;
            &lt;div&gt;
                &lt;Link to="/"&gt;â¬…ï¸ Back to all rooms&lt;/Link&gt;
            &lt;/div&gt;
            &lt;div className="messages-container"&gt;
                                {/* TODO */}
            &lt;/div&gt;
        &lt;/&gt;
    );
}

export { ChatRoom };
</pre>
<p>å›æƒ³ä¸€ä¸‹ï¼Œè¿™ä¸ªç»„ä»¶æ˜¯ä¸ºè·¯å¾„<code>/room/:id</code>å‘ˆç°çš„ã€‚ä½¿ç”¨ React Router çš„<code>useParams</code>é’©å­ï¼Œæˆ‘ä»¬å¯ä»¥æ£€ç´¢ URL ä¸­çš„ ID å¹¶æ‰¾åˆ°ç›¸åº”çš„ç¡¬ç¼–ç èŠå¤©å®¤ã€‚</p>
<p>å°†ä»¥ä¸‹æ ·å¼æ·»åŠ åˆ°<code>src/components/ChatRoom/styles.css</code>:</p>
<pre class="language-javascript">.messages-container {
    width: 100%;
    padding: 16px;
    flex-grow: 1;
    border: 1px solid var(--color-gray);
    border-radius: var(--border-radius);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}
</pre>
<p>å¦‚æœæ‚¨å¯¼èˆªå›<code><a href="http://localhost:3000/room/dogs" rel="nofollow">http://localhost:3000/room/dogs</a></code>ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æˆ‘ä»¬æ›´æ–°çš„ç»„ä»¶:</p>
<p><img data-attachment-id="118098" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/updated-chat-room-dog-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png" data-orig-size="730,837" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updated-chat-room-dog-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component-262x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png" decoding="async" class="aligncenter wp-image-118098 size-full jetpack-lazy-image" src="../Images/4eed23eb544651dab936274c6bb4fb3a.png" alt="Updated Chat Room Dog Component" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component-262x300.png 262w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118098" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/updated-chat-room-dog-component/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png" data-orig-size="730,837" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="updated-chat-room-dog-component" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component-262x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png" decoding="async" loading="lazy" class="aligncenter wp-image-118098 size-full" src="../Images/4eed23eb544651dab936274c6bb4fb3a.png" alt="Updated Chat Room Dog Component" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component-262x300.png 262w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/updated-chat-room-dog-component.png"/></noscript>
<h2 id="write-chat-room-messages">ç¼–å†™èŠå¤©å®¤æ¶ˆæ¯</h2>
<p>ç°åœ¨æˆ‘ä»¬æ¯ä¸ªèŠå¤©å®¤éƒ½æœ‰é¡µé¢äº†ï¼Œè®©æˆ‘ä»¬æ·»åŠ å‘æˆ¿é—´å‘é€æ¶ˆæ¯çš„åŠŸèƒ½ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ§åˆ¶å°ä¸­åˆ›å»ºä¸€ä¸ª Firestore æ•°æ®åº“:</p>
<ol>
<li>åœ¨ Firebase æ§åˆ¶å°ä¸­ï¼Œå•å‡»<strong>èŠå¤©å®¤</strong>é¡¹ç›®ï¼Œè¿›å…¥å…¶é¡¹ç›®æ¦‚è¿°é¡µé¢</li>
<li>åœ¨å¯¼èˆªèœå•ä¸­ï¼Œç‚¹å‡»<strong> Firestore æ•°æ®åº“</strong></li>
<li>ç‚¹å‡»<strong>åˆ›å»ºæ•°æ®åº“</strong></li>
<li>åœ¨æ¨¡å¼ä¸‹ï¼Œåœ¨<code>Secure rules for Cloud Firestore</code>ä¸‹ï¼Œç‚¹å‡»<strong>åœ¨æµ‹è¯•æ¨¡å¼ä¸‹å¼€å§‹</strong></li>
<li>ç‚¹å‡»ä¸‹ä¸€ä¸ªçš„<strong>ï¼Œé€‰æ‹©ç¦»ä½ æœ€è¿‘çš„<strong>äº‘ç«åº—ä½ç½®</strong></strong></li>
<li>ç‚¹å‡»<strong>å¯ç”¨</strong></li>
</ol>
<p>åœ¨æµ‹è¯•æ¨¡å¼ä¸‹å¯åŠ¨äº‘ Firestore å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿä¸Šæ‰‹ï¼Œè€Œæ— éœ€ç«‹å³æ‹…å¿ƒè®¾ç½®å®‰å…¨è§„åˆ™ã€‚åœ¨æµ‹è¯•æ¨¡å¼ä¸‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¯»å–å’Œè¦†ç›–æˆ‘ä»¬çš„æ•°æ®ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ä¸­ï¼Œæ‚¨ä¼šå¸Œæœ›ä¿æŠ¤æ‚¨çš„æ•°æ®åº“ã€‚</p>
<p>æä¾›äº‘ Firestore æ•°æ®åº“åï¼Œæ‚¨åº”è¯¥ä¼šè½¬åˆ°ä¸€ä¸ªå¸¦æœ‰æ•°æ®åº“æ•°æ®æŸ¥çœ‹å™¨çš„é¡µé¢:</p>
<p><img data-attachment-id="118100" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/cloud-firestore-database-location/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png" data-orig-size="730,394" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cloud-firestore-database-location" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location-300x162.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png" decoding="async" class="aligncenter wp-image-118100 size-full jetpack-lazy-image" src="../Images/06e99ce0ee26f60b0e1d156de19dfdbe.png" alt="Cloud Firestore Database Location" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location-300x162.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118100" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/cloud-firestore-database-location/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png" data-orig-size="730,394" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cloud-firestore-database-location" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location-300x162.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png" decoding="async" loading="lazy" class="aligncenter wp-image-118100 size-full" src="../Images/06e99ce0ee26f60b0e1d156de19dfdbe.png" alt="Cloud Firestore Database Location" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location-300x162.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/cloud-firestore-database-location.png"/></noscript>
<p>æ·»åŠ æ•°æ®åï¼Œæ•°æ®æŸ¥çœ‹å™¨å°†æ˜¾ç¤ºæ•°æ®çš„ç»“æ„ï¼Œå¹¶å…è®¸æˆ‘ä»¬æŸ¥çœ‹ã€æ·»åŠ ã€ç¼–è¾‘å’Œåˆ é™¤æ•°æ®ã€‚</p>
<p>å›æƒ³ä¸€ä¸‹ï¼ŒFirestore æ•°æ®å­˜å‚¨åœ¨é”®å€¼æ–‡æ¡£ä¸­ï¼Œè¿™äº›æ–‡æ¡£è¢«åˆ†ç»„åˆ°é›†åˆä¸­ã€‚æ¯ä¸ªæ–‡æ¡£éƒ½å¿…é¡»å±äºä¸€ä¸ªé›†åˆã€‚æ–‡æ¡£ç±»ä¼¼äº JSON ä¾‹å¦‚ï¼Œä¸€ä¸ª<code>dogs</code>èŠå¤©å®¤çš„æ–‡æ¡£å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼æ„å»º:</p>
<pre class="language-javascript">[dogs]
name : "ğŸ¶ Dogs ğŸ¶"
description : "A place to chat about dogs."
dateCreated : 2022-01-01
</pre>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªèŠå¤©å®¤æ–‡æ¡£ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ª<code>chat-rooms</code>é›†åˆä¸­:</p>
<pre class="language-javascript">[chat-rooms]

    [dogs]
    name : "ğŸ¶ Dogs ğŸ¶"
    description : "A place to chat about dogs."
    dateCreated : 2022-01-01

    [general]
    name : "ğŸ” Food ğŸ”"
    description : "All things food."
    dateCreated : 2022-01-01

    ...
</pre>
<p>ä½†æ˜¯ï¼Œå¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†ä¸ºæ¯ä¸ªæˆ¿é—´ ID åˆ›å»ºä¸€ä¸ª<code>chat-rooms</code>é›†åˆå’Œä¸€ä¸ªåµŒå¥—æ–‡æ¡£ã€‚æˆ‘ä»¬å°†ä¸ºæ¯ä¸ªæ–‡æ¡£åˆ›å»ºä¸€ä¸ª<code>messages</code>å­é›†åˆï¼Œè€Œä¸æ˜¯å°†æ¯ä¸ªæ–‡æ¡£ä¸­çš„æ¶ˆæ¯å­˜å‚¨ä¸ºé”®å€¼å¯¹ã€‚å­é›†åˆæ˜¯ä¸æ–‡æ¡£ç›¸å…³è”çš„é›†åˆã€‚æ¯ä¸ª<code>messages</code>å­é›†åˆå°†åŒ…å«å¤šä¸ªæ¶ˆæ¯æ–‡æ¡£ï¼Œå…¶ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</p>
<pre class="language-javascript">[chat-rooms]

    [dogs]
        [messages]
            [documentID]
            text : "..."
            timestamp : ...

    [general]
        [messages]
            [documentId]
            text : "..."
            timestamp : ...

    ...
</pre>
<p>ä¾‹å¦‚ï¼Œä¸ºäº†å¼•ç”¨æˆ‘ä»¬çš„<code>messages</code>å­é›†åˆä¸­çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è·¯å¾„<code>chat-rooms/{roomId}/messages/{documentId}</code>ã€‚</p>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬ä¸ä¼šä½¿ç”¨æ•°æ®æŸ¥çœ‹å™¨æ¥æ˜¾å¼åœ°åˆ›å»ºè¿™äº›é›†åˆå’Œæ–‡æ¡£ã€‚å½“æˆ‘ä»¬å†™å…¥æ•°æ®åº“æ—¶ï¼ŒFirestore å°†åˆ›å»ºä¸€ä¸ªé›†åˆæˆ–æ–‡æ¡£ï¼Œå¦‚æœå®ƒè¿˜ä¸å­˜åœ¨çš„è¯ã€‚</p>
<p>è®°ä½è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>sendMessage</code>å‡½æ•°ï¼Œå°†ä¸€ä¸ªæ–‡æ¡£æ·»åŠ åˆ°ä¸€ä¸ªæˆ¿é—´çš„<code>messages</code>å­é›†åˆä¸­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ç”¨<code>getFirestore</code>åˆå§‹åŒ–ä¸€ä¸ª Firestore å®ä¾‹ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹ Firestore æœåŠ¡çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ‰§è¡Œè¯»å†™æ“ä½œ:</p>
<pre class="language-javascript">// ...

import { getFirestore } from 'firebase/firestore';

// ...

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ...
</pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>addDoc</code>å’Œ<code>collection</code> SDK å‡½æ•°æ¥æ·»åŠ æ–‡æ¡£ã€‚<code>addDoc</code>æ¥å—ä¸€ä¸ªé›†åˆï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨<code>collection</code>å’Œä¸€ä¸ªæ–‡æ¡£å¯¹è±¡è·å¾—ä¸€ä¸ªå¼•ç”¨ã€‚<code>collection</code>è·å– Firestore å®ä¾‹å’Œæ„æˆé›†åˆè·¯å¾„çš„å‚æ•°ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯<code>messages</code>å­é›†åˆã€‚</p>
<p>åŒæ ·ï¼ŒFirestore å°†åˆ›å»ºä»»ä½•ä¸å­˜åœ¨çš„é›†åˆå’Œæ–‡æ¡£ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€å•åœ°æŒ‡å®šæˆ‘ä»¬æƒ³è¦çš„è·¯å¾„ã€‚<code>addDoc</code>è¿˜å°†ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª ID:</p>
<pre class="language-javascript">// ...

import { getFirestore, collection, addDoc, serverTimestamp } from 'firebase/firestore';

// ...

async function sendMessage(roomId, user, text) {
    try {
        await addDoc(collection(db, 'chat-rooms', roomId, 'messages'), {
            uid: user.uid,
            displayName: user.displayName,
            text: text.trim(),
            timestamp: serverTimestamp(),
        });
    } catch (error) {
        console.error(error);
    }
}

export { loginWithGoogle, sendMessage };
</pre>
<p>æˆ‘ä»¬çš„<code>sendMessage</code>å‡½æ•°æ¥æ”¶<code>roomId</code>ã€å½“å‰çš„<code>user</code>(å®ƒæ˜¯å­˜å‚¨åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨èº«ä»½éªŒè¯è·å¾—å®ƒ)å’Œæ¶ˆæ¯<code>text</code>ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™äº›æ•°æ®æ¥å½¢æˆä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™<code>addDoc</code>çš„æ–‡æ¡£å¯¹è±¡ã€‚</p>
<p>æˆ‘ä»¬è¿˜ä¸ºæˆ‘ä»¬çš„<code>timestamp</code>å±æ€§ä½¿ç”¨äº†<code>serverTimestamp</code>å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨æ£€ç´¢æ¶ˆæ¯æ—¶æŒ‰ç…§æ¶ˆæ¯æ—¥æœŸè¿›è¡Œæ’åºã€‚ä½ å¯ä»¥åœ¨<a href="https://firebase.google.com/docs/reference/android/com/google/firebase/Timestamp">æ–‡æ¡£</a>ä¸­è¯»åˆ°æ›´å¤šå…³äºè¿™ä¸ªåŠŸèƒ½çš„å†…å®¹ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå†™æ¶ˆæ¯æ•°æ®çš„å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè°ƒç”¨å®ƒçš„è¾“å…¥ç»„ä»¶ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<code>&lt;MessageInput&gt;</code>ç»„ä»¶ï¼Œå®ƒå‘ˆç°åœ¨<code>&lt;ChatRoom&gt;</code>ç»„ä»¶çš„åº•éƒ¨ã€‚åˆ›å»ºç»„ä»¶ç›®å½•å’Œæ–‡ä»¶:</p>
<pre class="language-javascript">mkdir src/components/MessageInput
touch src/components/MessageInput/index.jsx src/components/MessageInput/styles.css
</pre>
<p>å°†è¿”å›ä¸€ä¸ªå¸¦æœ‰æ–‡æœ¬è¾“å…¥å’Œæäº¤æŒ‰é’®çš„ç®€å•è¡¨å•ã€‚æˆ‘ä»¬å°†ä»é“å…·ä¸­è·å–<code>roomId</code>ï¼Œä»ä¸Šä¸‹æ–‡ä¸­è·å–<code>user</code>ã€‚å½“è¡¨å•æäº¤åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯è°ƒç”¨æˆ‘ä»¬çš„<code>sendMessage</code>å‡½æ•°ã€‚</p>
<p>å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°<code>src/components/MessageInput/index.jsx</code>:</p>
<pre class="language-javascript">import React from 'react';
import { useAuth } from '../../hooks/useAuth';
import { sendMessage } from '../../services/firebase';
import './styles.css';

function MessageInput({ roomId }) {
    const { user } = useAuth();
    const [value, setValue] = React.useState('');

    const handleChange = (event) =&gt; {
        setValue(event.target.value);
    };

    const handleSubmit = (event) =&gt; {
        event.preventDefault();
        sendMessage(roomId, user, value);
        setValue('');
    };

    return (
        &lt;form onSubmit={handleSubmit} className="message-input-container"&gt;
            &lt;input
                type="text"
                placeholder="Enter a message"
                value={value}
                onChange={handleChange}
                className="message-input"
                required
                minLength={1}
            /&gt;
            &lt;button type="submit" disabled={value &lt; 1} className="send-message"&gt;
                Send
            &lt;/button&gt;
        &lt;/form&gt;
    );
}
export { MessageInput };
</pre>
<p>å°†æ ·å¼æ·»åŠ åˆ°<code>src/components/MessageInput/styles.css</code>:</p>
<pre class="language-css">.message-input-container {
    display: flex;
    gap: 4px;
}

.message-input {
    padding: 12px 8px;
    flex: 1;
    background: var(--color-gray);
    border-radius: var(--border-radius);
}

.send-message {
    padding: 12px 14px;
    background: var(--color-blue);
    border-radius: var(--border-radius);
    cursor: pointer;
}
</pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¸²æŸ“<code>&lt;ChatRoom&gt;</code>ä¸­çš„ç»„ä»¶:</p>
<pre class="language-javascript">// ...

import { MessageInput } from '../MessageInput';

// ...

function ChatRoom() {
    // ...
        return (
        &lt;&gt;
            &lt;h2&gt;{room.title}&lt;/h2&gt;
            &lt;div&gt;
                &lt;Link to="/"&gt;â¬…ï¸ Back to all rooms&lt;/Link&gt;
            &lt;/div&gt;
            &lt;div className="messages-container"&gt;
                &lt;MessageInput roomId={room.id} /&gt;
            &lt;/div&gt;
        &lt;/&gt;
    );
}

// ...
</pre>
<p>å¦‚æœæ‚¨è¿”å›åˆ°<code><a href="http://localhost:3000/room/dogs" rel="nofollow">http://localhost:3000/room/dogs</a></code>ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ¶ˆæ¯è¾“å…¥:</p>
<p><img data-attachment-id="118090" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/component-rendered-dog-chat-room/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png" data-orig-size="730,837" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="component-rendered-dog-chat-room" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room-262x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png" decoding="async" class="aligncenter wp-image-118090 size-full jetpack-lazy-image" src="../Images/a3402fc23b7a28e7c4b112cad2727abd.png" alt="Component Rendered Dog Chat Room" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room-262x300.png 262w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118090" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/component-rendered-dog-chat-room/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png" data-orig-size="730,837" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="component-rendered-dog-chat-room" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room-262x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png" decoding="async" loading="lazy" class="aligncenter wp-image-118090 size-full" src="../Images/a3402fc23b7a28e7c4b112cad2727abd.png" alt="Component Rendered Dog Chat Room" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room-262x300.png 262w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/component-rendered-dog-chat-room.png"/></noscript>
<p>å°è¯•è¾“å…¥ä¸€äº›æ¶ˆæ¯ï¼Œç„¶åè¿”å›åˆ° Firebase æ§åˆ¶å°ä¸­çš„æ•°æ®æŸ¥çœ‹å™¨ã€‚æ‚¨åº”è¯¥çœ‹åˆ°ä¸€ä¸ª<code>chat-rooms</code>é›†åˆæ˜¯ç”¨ä»¥ä¸‹ç»“æ„åˆ›å»ºçš„:</p>
<p><img data-attachment-id="118087" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/chat-room-collection-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png" data-orig-size="730,394" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chat-room-collection-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure-300x162.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png" decoding="async" class="aligncenter wp-image-118087 size-full jetpack-lazy-image" src="../Images/332ca41c902af0cca3619c86a70147c7.png" alt="Chat Room Collection Structure" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure-300x162.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="118087" data-permalink="https://blog.logrocket.com/how-to-build-chatroom-app-react-firebase/attachment/chat-room-collection-structure/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png" data-orig-size="730,394" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chat-room-collection-structure" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure-300x162.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png" decoding="async" loading="lazy" class="aligncenter wp-image-118087 size-full" src="../Images/332ca41c902af0cca3619c86a70147c7.png" alt="Chat Room Collection Structure" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure-300x162.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/chat-room-collection-structure.png"/></noscript>
<p>å¦‚æœæ‚¨ç‚¹å‡»è¿›å…¥<code>messages</code>å­é›†åˆï¼Œæ‚¨å°†çœ‹åˆ°æ‚¨åˆšåˆšåˆ›å»ºçš„æ¶ˆæ¯çš„æ–‡æ¡£ã€‚å°è¯•åœ¨ä¸åŒçš„èŠå¤©å®¤ä¸­æ·»åŠ æ¶ˆæ¯ï¼Œå¹¶æ³¨æ„å¦‚ä½•ä¸ºæ¯ä¸ªèŠå¤©å®¤åˆ›å»ºæ–°æ–‡æ¡£ã€‚</p>
<h2 id="read-chat-room-messages">é˜…è¯»èŠå¤©å®¤æ¶ˆæ¯</h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å‘ Firestore å†™å…¥æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯æ£€ç´¢èŠå¤©å®¤çš„æ‰€æœ‰æ¶ˆæ¯ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåœ¨<code>&lt;ChatRoom&gt;</code>ä¸­å‘ˆç°çš„<code>&lt;MessageList&gt;</code>ç»„ä»¶ï¼Œå¹¶åˆ—å‡ºä¸€ä¸ªæˆ¿é—´çš„æ‰€æœ‰æ¶ˆæ¯ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè·å–æˆ¿é—´æ¶ˆæ¯çš„<code>getMessages</code>å‡½æ•°å’Œä¸€ä¸ªå°†å®ƒä»¬å­˜å‚¨åœ¨ state ä¸­çš„<code>useMessages</code>é’©å­ã€‚</p>
<p>è®©æˆ‘ä»¬ä»åˆ›å»º<code>getMessages</code>å¼€å§‹ã€‚ç”¨ä¸‹é¢çš„ä»£ç æ›´æ–°<code>src/services/firebase.js</code>:</p>
<pre class="language-javascript">// ...

import {
    getFirestore,
    collection,
    addDoc,
    serverTimestamp,
    onSnapshot,
    query,
    orderBy,
} from 'firebase/firestore';

// ...

function getMessages(roomId, callback) {
    return onSnapshot(
        query(
            collection(db, 'chat-rooms', roomId, 'messages'),
            orderBy('timestamp', 'asc')
        ),
        (querySnapshot) =&gt; {
            const messages = querySnapshot.docs.map((doc) =&gt; ({
                id: doc.id,
                ...doc.data(),
            }));
            callback(messages);
        }
    );
}

export { loginWithGoogle, sendMessage, getMessages };
</pre>
<p>SDK åŠŸèƒ½è®©æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Firestore çš„å®æ—¶æ›´æ–°ã€‚å®ƒä¾¦å¬æŸ¥è¯¢çš„ç»“æœï¼Œå¹¶åœ¨å‘ç”Ÿæ›´æ”¹æ—¶æ¥æ”¶æ›´æ–°ã€‚</p>
<p>æˆ‘ä»¬ä¼ é€’ç»™å®ƒä¸€ä¸ªä½¿ç”¨<code>query</code>å‡½æ•°æ„é€ çš„æŸ¥è¯¢ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ç›‘å¬ä¸€ä¸ªæˆ¿é—´çš„<code>messages</code>å­é›†åˆçš„å˜åŒ–ï¼Œå¹¶æŒ‰ç…§æ–‡æ¡£çš„<code>timestamp</code>å¯¹æ–‡æ¡£è¿›è¡Œå‡åºæ’åºã€‚</p>
<p>æˆ‘ä»¬ç»™å®ƒçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒï¼Œå½“å®ƒæ¥æ”¶åˆ°åˆå§‹æŸ¥è¯¢å’Œä»»ä½•åç»­æ›´æ–°æ—¶ï¼Œæ¯”å¦‚æ·»åŠ æ–°æ–‡æ¡£æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒã€‚æˆ‘ä»¬é€šè¿‡æ˜ å°„æ¯ä¸ªæ–‡æ¡£å½¢æˆä¸€ä¸ªæ¶ˆæ¯æ•°ç»„ï¼Œç„¶åç”¨æ ¼å¼åŒ–çš„æ¶ˆæ¯è°ƒç”¨<code>callback</code>ã€‚å½“æˆ‘ä»¬åœ¨é’©å­ä¸­è°ƒç”¨<code>getMessages</code>æ—¶ï¼Œæˆ‘ä»¬å°†ä¼ é€’ä¸€ä¸ª<code>callback</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨çŠ¶æ€ä¸­å­˜å‚¨æ¶ˆæ¯ã€‚</p>
<p><code>onSnapshot</code>è¿”å›ä¸€ä¸ªå–æ¶ˆè®¢é˜…å‡½æ•°æ¥åˆ†ç¦»ä¾¦å¬å™¨ï¼Œè¿™æ ·å½“ä¸å†éœ€è¦å›è°ƒå‡½æ•°æ—¶å°±ä¸ä¼šè°ƒç”¨å®ƒï¼›æˆ‘ä»¬ç”¨è¿™ä¸ªæ¥æ¸…ç†æˆ‘ä»¬çš„é’©å­ã€‚</p>
<p>é¦–å…ˆï¼Œåˆ›å»º<code>useMessages</code>é’©å­æ–‡ä»¶:</p>
<pre class="language-javascript">touch src/hooks/useMessages.js
</pre>
<p><code>useMessages</code>å°†æ¥å—ä¸€ä¸ª<code>roomId</code>ï¼Œåœ¨ state ä¸­å­˜å‚¨æ¶ˆæ¯ï¼Œå¹¶è¿”å›æ¶ˆæ¯ã€‚å®ƒå°†ä½¿ç”¨ä¸€ä¸ªæ•ˆæœæ¥è·å–å¸¦æœ‰<code>getMessages</code>çš„æ¶ˆæ¯ï¼Œå¹¶åœ¨æ•ˆæœæ¸…ç†åå–æ¶ˆå¬ä¼—çš„è®¢é˜…:</p>
<pre class="language-javascript">import React from 'react';
import { getMessages } from '../services/firebase';

function useMessages(roomId) {
    const [messages, setMessages] = React.useState([]);

    React.useEffect(() =&gt; {
        const unsubscribe = getMessages(roomId, setMessages);
        return unsubscribe;
    }, [roomId]);

    return messages;
}

export { useMessages };
</pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»º<code>&lt;MessageList&gt;</code>ç»„ä»¶æ¥è·å–å’Œå‘ˆç°æˆ¿é—´çš„æ¶ˆæ¯ã€‚ä¸ºæ­¤ç»„ä»¶åˆ›å»ºæ–°çš„ç»„ä»¶æ–‡ä»¶:</p>
<pre class="language-javascript">mkdir src/components/MessageList
touch src/components/MessageList/index.jsx src/components/MessageList/styles.css
</pre>
<p><code>&lt;MessageList&gt;</code>å°†æŠŠ<code>roomId</code>ä½œä¸ºé“å…·ï¼Œä¼ é€’ç»™<code>useMessages</code>ï¼Œç„¶åæ¸²æŸ“æ¶ˆæ¯ã€‚å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°<code>src/components/MessageList/index.jsx</code>:</p>
<pre class="language-javascript">import React from 'react';
import { useAuth } from '../../hooks/useAuth';
import { useMessages } from '../../hooks/useMessages';
import './styles.css';

function MessageList({ roomId }) {
    const containerRef = React.useRef(null);
    const { user } = useAuth();
    const messages = useMessages(roomId);

    React.useLayoutEffect(() =&gt; {
        if (containerRef.current) {
            containerRef.current.scrollTop = containerRef.current.scrollHeight;
        }
    });

    return (
        &lt;div className="message-list-container" ref={containerRef}&gt;
            &lt;ul className="message-list"&gt;
                {messages.map((x) =&gt; (
                    &lt;Message
                        key={x.id}
                        message={x}
                        isOwnMessage={x.uid === user.uid}
                    /&gt;
                ))}
            &lt;/ul&gt;
        &lt;/div&gt;
    );
}

function Message({ message, isOwnMessage }) {
    const { displayName, text } = message;
    return (
        &lt;li className={['message', isOwnMessage &amp;&amp; 'own-message'].join(' ')}&gt;
            &lt;h4 className="sender"&gt;{isOwnMessage ? 'You' : displayName}&lt;/h4&gt;
            &lt;div&gt;{text}&lt;/div&gt;
        &lt;/li&gt;
    );
}

export { MessageList };
</pre>
<p>å¸ƒå±€æ•ˆæœä¸­çš„é€»è¾‘å¯¼è‡´å®¹å™¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œå› æ­¤æˆ‘ä»¬æ€»æ˜¯çœ‹åˆ°æœ€è¿‘çš„æ¶ˆæ¯ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†å‘<code>src/components/MessageList/styles.css</code>æ·»åŠ æ ·å¼:</p>
<pre class="language-javascript">.message-list-container {
    margin-bottom: 16px;
    flex: 1;
    overflow: scroll;
}

.message-list {
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.message {
    padding: 8px 16px;
    margin-bottom: 8px;
    background: var(--color-gray);
    border-radius: var(--border-radius);
    text-align: left;
}

.own-message {
    background: var(--color-blue);
    align-self: flex-end;
    text-align: right;
}

.sender {
    margin-bottom: 8px;
}
</pre>
<p>æœ€åï¼Œå°†<code>&lt;ChatRoom&gt;</code>ä¸­çš„ç»„ä»¶å‘ˆç°åœ¨æˆ‘ä»¬ä¹‹å‰æ·»åŠ çš„<code>&lt;MessageInput&gt;</code>ä¹‹ä¸Š:</p>
<pre class="language-javascript">// ...

import { MessageList } from '../MessageList';

// ...

function ChatRoom() {
    // ...
    return (
        &lt;&gt;
            &lt;h2&gt;{room.title}&lt;/h2&gt;
            &lt;div&gt;
                &lt;Link to="/"&gt;â¬…ï¸ Back to all rooms&lt;/Link&gt;
            &lt;/div&gt;
            &lt;div className="messages-container"&gt;
                &lt;MessageList roomId={room.id} /&gt;
                &lt;MessageInput roomId={room.id} /&gt;
            &lt;/div&gt;
        &lt;/&gt;
    );
}

// ...
</pre>
<p>æ­å–œä½ ï¼Œä½ ç°åœ¨æœ‰ä¸€ä¸ªç”¨ React å’Œ Firebase æ„å»ºçš„èŠå¤©å®¤åº”ç”¨ç¨‹åºäº†ï¼å¯ä»¥åœ¨<a href="https://github.com/zachsnoek/react-firebase-chat-app"> GitHub </a>ä¸ŠæŸ¥çœ‹æœ€ç»ˆä»£ç ã€‚</p>
<h2 id="nextsteps">åç»­æ­¥éª¤</h2>
<p>ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ æ–¹æ³•æ˜¯æ‹¿ä¸€ä¸ªé¡¹ç›®ï¼Œä¿®æ”¹å®ƒæˆ–è€…æ·»åŠ æ›´å¤šçš„ç‰¹æ€§ã€‚è¿™é‡Œæœ‰ä¸€äº›æ‰©å±•è¿™ä¸ªé¡¹ç›®çš„æ–¹æ³•:</p>
<ul>
<li><a href="https://firebase.google.com/docs/firestore/quickstart#secure_your_data">ä¿æŠ¤ Firestore æ•°æ®åº“</a></li>
<li>æ·»åŠ å¯¹ä¸åŒèº«ä»½éªŒè¯æ–¹æ³•çš„æ”¯æŒ</li>
<li>åœ¨ firestorm ä¸­è€Œä¸æ˜¯ä»£ç ä¸­å­˜å‚¨èŠå¤©å®¤</li>
<li>å…è®¸ç”¨æˆ·æ·»åŠ ä»–ä»¬è‡ªå·±çš„èŠå¤©å®¤</li>
<li>è®©ç”¨æˆ·æ³¨é”€</li>
<li>è¿›å…¥èŠå¤©å®¤æ—¶åªæ˜¾ç¤ºæœ€åä¸€åˆ†é’Ÿçš„èŠå¤©æ¶ˆæ¯</li>
<li>å½“ç”¨æˆ·è¿›å…¥æˆ–ç¦»å¼€èŠå¤©å®¤æ—¶æ˜¾ç¤ºä¿¡æ¯</li>
<li>æ˜¾ç¤ºç”¨æˆ·å¤´åƒ</li>
<li>æ˜¾ç¤ºèŠå¤©å®¤ä¸­çš„æ‰€æœ‰ç”¨æˆ·</li>
<li>ä¸ºç”¨æˆ·éšæœºåˆ†é…é‚®ä»¶é¢œè‰²</li>
</ul>
<h2 id="conclusion">ç»“è®º</h2>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ Firebase æ„å»ºä¸€ä¸ªç®€å•çš„èŠå¤©å®¤åº”ç”¨ç¨‹åºã€‚æ‚¨äº†è§£äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª Firebase é¡¹ç›®å¹¶å°†å…¶æ·»åŠ åˆ° React åº”ç”¨ç¨‹åºä¸­ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Firebase Authentication çš„ Google ç™»å½•æ–¹æ³•å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
<p>ç„¶åï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨<code>addDoc</code> API å†™å…¥ Firestore æ•°æ®åº“ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨<code>onSnapshot</code> API ç›‘å¬å®æ—¶æ›´æ–°ã€‚</p>
<p>å¦‚æœä½ æœ‰å…´è¶£å­¦ä¹ æ›´å¤šå…³äº Firebase çš„çŸ¥è¯†ï¼Œä½ å¯ä»¥<a href="https://firebase.google.com/docs">æŸ¥çœ‹æ–‡æ¡£</a>ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–æƒ³ä¸æˆ‘è”ç³»ï¼Œè¯·åŠ¡å¿…åœ¨<a href="https://www.linkedin.com/in/zachsnoek/"> LinkedIn </a>æˆ–<a href="https://twitter.com/zach_snoek"> Twitter </a>ä¸Šç•™è¨€æˆ–è”ç³»æˆ‘ï¼</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">ä½¿ç”¨ LogRocket æ¶ˆé™¤ä¼ ç»Ÿååº”é”™è¯¯æŠ¥å‘Šçš„å™ªéŸ³</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>æ˜¯ä¸€æ¬¾ React analytics è§£å†³æ–¹æ¡ˆï¼Œå¯ä¿æŠ¤æ‚¨å…å—æ•°ç™¾ä¸ªè¯¯æŠ¥é”™è¯¯è­¦æŠ¥çš„å½±å“ï¼Œåªé’ˆå¯¹å°‘æ•°çœŸæ­£é‡è¦çš„é¡¹ç›®ã€‚LogRocket å‘Šè¯‰æ‚¨ React åº”ç”¨ç¨‹åºä¸­å®é™…å½±å“ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„ bug å’Œ UX é—®é¢˜ã€‚</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>è‡ªåŠ¨èšåˆå®¢æˆ·ç«¯é”™è¯¯ã€ååº”é”™è¯¯è¾¹ç•Œã€è¿˜åŸçŠ¶æ€ã€ç¼“æ…¢çš„ç»„ä»¶åŠ è½½æ—¶é—´ã€JS å¼‚å¸¸ã€å‰ç«¯æ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·äº¤äº’ã€‚ç„¶åï¼ŒLogRocket ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥é€šçŸ¥æ‚¨å½±å“å¤§å¤šæ•°ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„é—®é¢˜ï¼Œå¹¶æä¾›æ‚¨ä¿®å¤å®ƒæ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚</p><p vwo-el-id="28675661060">å…³æ³¨é‡è¦çš„ React bugâ€”<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">ä»Šå¤©å°±è¯•è¯• LogRocketã€‘ã€‚</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>