<html>
<head>
<title>Creating and saving images with node-canvas - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>ä½¿ç”¨ node-canvas - LogRocket åšå®¢åˆ›å»ºå’Œä¿å­˜å›¾åƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/creating-saving-images-node-canvas/#0001-01-01">https://blog.logrocket.com/creating-saving-images-node-canvas/#0001-01-01</a></blockquote><div><article class="article-post">
<p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Node.js ä¸ºä¸€äº›å†…å®¹ç”Ÿæˆå…ƒå›¾åƒï¼Œæ¯”å¦‚ä¸€ç¯‡åšå®¢æ–‡ç« ã€‚</p>
<p>æˆ‘ä»¬å‡è®¾:</p>
<ul>
<li>å›¾åƒ<a href="https://neilpatel.com/blog/open-graph-meta-tags/#:~:text=The" target="_blank" rel="noopener">åº”è¯¥æ˜¯</a> <code><a href="https://neilpatel.com/blog/open-graph-meta-tags/#:~:text=The" target="_blank" rel="noopener">1200px</a></code> <a href="https://neilpatel.com/blog/open-graph-meta-tags/#:~:text=The" target="_blank" rel="noopener"> x </a> <code><a href="https://neilpatel.com/blog/open-graph-meta-tags/#:~:text=The" target="_blank" rel="noopener">627px</a></code></li>
<li>è¿™ç¯‡æ–‡ç« çš„æ ‡é¢˜é•¿åº¦ä¸ä¸€ï¼Œå¦‚æœå¤ªé•¿ï¼Œæˆ‘ä»¬ä¼šå°†å…¶æˆªæ–­ï¼Œå¹¶ç”¨çœç•¥å·(â€¦)è¡¨ç¤º</li>
<li>æœ‰ä¸€ä¸ªä½œè€…åå­—</li>
<li>æˆ‘ä»¬æƒ³åœ¨å›¾åƒçš„é¡¶éƒ¨åŒ…æ‹¬ä¸€ä¸ªæ ‡å¿—</li>
</ul>
<h2>ä¸ºä»€ä¹ˆè¦ç”Ÿæˆå…ƒå›¾åƒï¼Ÿ</h2>
<p>æˆ‘ä¸ºæˆ‘å†™çš„æ¯ä¸€ç¯‡åšå®¢æ–‡ç« æ‰‹åŠ¨ç”Ÿæˆå…ƒå›¾åƒã€‚å®ƒè®©é˜…è¯»å¸–å­åˆ—è¡¨çš„è¯»è€…æ„Ÿè§‰æ›´æ„‰å¿«ï¼Œåœ¨ç¤¾äº¤åª’ä½“ä¸Šåˆ†äº«æ—¶çœ‹èµ·æ¥ä¹Ÿä¸é”™ã€‚</p>
<p>ä½†æ˜¯æˆ‘èŠ±äº†ç›¸å½“å¤šçš„æ—¶é—´æ¥æ‰¾åˆ°æ­£ç¡®çš„å›¾æ ‡ï¼Œé€‰æ‹©ä¸€ç§æˆ‘æœ€è¿‘æ²¡æœ‰è¿‡åº¦ä½¿ç”¨çš„é¢œè‰²ï¼Œå¯¼å‡ºå›¾åƒï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æˆ‘çš„é¡¹ç›®ä¸­ã€‚å¦‚æœæˆ‘èƒ½è‡ªåŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘å°±ä¸ç”¨åšä»»ä½•å·¥ä½œï¼Œä»ç„¶ä¼šæœ‰ä¸€ä¸ªçœ‹èµ·æ¥ä¸é”™çš„å½¢è±¡ã€‚</p>
<p>å¯¹äºæˆ‘æˆ–è€…ä»»ä½•å·²ç»æ‰‹åŠ¨ç”Ÿæˆå›¾åƒçš„äººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªçœæ—¶çš„æ–¹æ³•ã€‚ä½†æ˜¯å¯¹äºé‚£äº›è¿˜æ²¡æœ‰ç”Ÿæˆå›¾ç‰‡çš„äººæ¥è¯´ï¼Œå®ƒè®©ä½ çš„å†…å®¹åœ¨åˆ†äº«æ—¶çœ‹èµ·æ¥æ›´åŠ ç²¾ç¾ã€‚è€Œä¸”ï¼Œå¸¦æœ‰å›¾ç‰‡çš„é“¾æ¥æ›´å®¹æ˜“è¢«ç”¨æˆ·ç‚¹å‡»ã€‚</p>
<h2>ç”¨ç”»å¸ƒå’ŒèŠ‚ç‚¹ç»˜åˆ¶å›¾åƒ</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å¼€å§‹æˆ‘ä»¬çš„æ–° JavaScript é¡¹ç›®ã€‚(å¦‚æœä½ çŸ¥é“æ€ä¹ˆåšï¼Œé‚£å¤ªå¥½äº†ï¼å¦‚æœæ²¡æœ‰ï¼Œ<a href="https://www.seancdavis.com/blog/new-javascript-project-setup/" target="_blank" rel="noopener">è¿™é‡Œæœ‰ä¸€ä¸ªæ–¹ä¾¿çš„æŒ‡å—</a>ã€‚)</p>
<p>ä¸€æ—¦ä½ æœ‰äº†åŸºæœ¬çš„ä¸œè¥¿ï¼Œå®‰è£…ä½ çš„ä¾èµ–é¡¹ã€‚å¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„æ˜¯<a href="https://www.npmjs.com/package/canvas" target="_blank" rel="noopener">èŠ‚ç‚¹-ç”»å¸ƒ</a>ã€‚</p>
<pre>npm install canvas
</pre>
<p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>draw.js</code>çš„æ–°æ–‡ä»¶ã€‚è¿™å°†æ˜¯æˆ‘ä»¬è¿è¡Œçš„è„šæœ¬ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨å®ƒæ¥è®°å½•ä¸€ä¸ªâ€œhello worldâ€æ¶ˆæ¯ã€‚</p>
<pre>console.log("hello world")
</pre>
<p>åœ¨æ‚¨çš„<code>package.json</code>æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯èƒ½æœ‰ä¸€ä¸ª<code>scripts</code>éƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸€ä¸ª<code>test</code>è„šæœ¬ã€‚å‘è¯¥éƒ¨åˆ†æ·»åŠ ä¸€ä¸ªè¿è¡Œ<code>node draw.js</code>çš„<code>draw</code>è„šæœ¬ã€‚</p>
<pre>{
  // ...
  "scripts": {
    "draw": "node draw.js"
  }
}
</pre>
<p>ç°åœ¨è¿è¡Œå®ƒï¼</p>
<pre>npm run draw
</pre>
<p>æ‚¨åº”è¯¥ä¼šåœ¨ç»ˆç«¯çª—å£ä¸Šçœ‹åˆ°â€œhello worldâ€å­—æ ·ã€‚å¦‚æœä½ åšåˆ°äº†ï¼Œä½ å°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ç”Ÿæˆæˆ‘ä»¬çš„å›¾åƒäº†ã€‚</p>
<h2>ç©ºç™½ç”»å¸ƒä¿å­˜åˆ°æ–‡ä»¶</h2>
<p>è®©æˆ‘ä»¬é¦–å…ˆç®€å•åœ°ç”Ÿæˆä¸€ä¸ªç´«è‰²çŸ©å½¢ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¸€ä¸ªåä¸º<code>image.png</code>çš„æ–‡ä»¶ä¸­ã€‚æ›´æ–°æ‚¨çš„<code>draw.js</code>æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre>const { createCanvas } = require("canvas");
const fs = require("fs");

// Dimensions for the image
const width = 1200;
const height = 627;

// Instantiate the canvas object
const canvas = createCanvas(width, height);
const context = canvas.getContext("2d");

// Fill the rectangle with purple
context.fillStyle = "#764abc";
context.fillRect(0, 0, width, height);

// Write the image to file
const buffer = canvas.toBuffer("image/png");
fs.writeFileSync("./image.png", buffer);
</pre>
<p>ç°åœ¨å†æ¬¡è¿è¡Œè„šæœ¬(<code>npm run draw</code>)å¹¶æ£€æŸ¥é¡¹ç›®ä¸­çš„<code>image.png</code>æ–‡ä»¶ã€‚æ‰“å¼€å®ƒï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªç©ºç™½çš„ç´«è‰²çŸ©å½¢ã€‚</p>
<p><img data-attachment-id="72194" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/purple-background/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Purple background" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png" decoding="async" class="aligncenter size-full wp-image-72194 jetpack-lazy-image" src="../Images/238bb5ed5d9659e4e0321378ed0db1d6.png" alt="Purple Background" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72194" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/purple-background/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Purple background" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72194" src="../Images/238bb5ed5d9659e4e0321378ed0db1d6.png" alt="Purple Background" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/purple-background.png"/></noscript>
<h2>ç”¨ç”»å¸ƒæ·»åŠ æ–‡ç« æ ‡é¢˜</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€äº›å†…å®¹ã€‚æˆ‘ä»¬ä»å¸–å­æ ‡é¢˜å¼€å§‹ã€‚å°†ä¸€ä¸ª<code>post</code>å¯¹è±¡æ·»åŠ åˆ°æ–‡ä»¶çš„é¡¶éƒ¨(æˆ‘ä»¬ç¨åå°†å‘è¯¥å¯¹è±¡æ·»åŠ ä½œè€…)ï¼Œç„¶ååœ¨å›¾åƒä¸Šå‘ˆç°æ ‡é¢˜ã€‚</p>
<pre>const { createCanvas } = require("canvas");
const fs = require("fs");

const width = 1200;
const height = 627;

// Add post object with the content to render
const post = {
  title: "Draw and save images with Canvas and Node"
}

const canvas = createCanvas(width, height);
const context = canvas.getContext("2d");

context.fillStyle = "#764abc";
context.fillRect(0, 0, width, height);

// Set the style of the test and render it to the canvas
context.font = "bold 70pt 'PT Sans'";
context.textAlign = "center";
context.fillStyle = "#fff";
// 600 is the x value (the center of the image)
// 170 is the y (the top of the line of text)
context.fillText(post.title, 600, 170);

const buffer = canvas.toBuffer("image/png");
fs.writeFileSync("./image.png", buffer);
</pre>
<p>è¿™æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ç»“æœ:</p>
<p><img data-attachment-id="72197" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/text-cut-off/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text cut off" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png" decoding="async" class="aligncenter size-full wp-image-72197 jetpack-lazy-image" src="../Images/50222f57375a2c1546c5cff534aa404b.png" alt="Text Cut Off" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72197" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/text-cut-off/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text cut off" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72197" src="../Images/50222f57375a2c1546c5cff534aa404b.png" alt="Text Cut Off" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-cut-off.png"/></noscript>
<p>å“å‘¦ï¼å®ƒå®Œå…¨æŒ‰ç…§æˆ‘ä»¬çš„è¦æ±‚åšäº†ï¼Œä½†æ˜¯é‚£ç§å¤§å°çš„æ–‡æœ¬é‡å¯¹äºç”»å¸ƒæ¥è¯´å¤ªå¤§äº†ï¼Œå®ƒæº¢å‡ºäº†è¾¹ç¼˜ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿æ–‡æœ¬å˜å°ï¼Œä½†æˆ‘ä¸ä¼šå‡å°‘å¤ªå¤šï¼Œå› ä¸ºæˆ‘å¸Œæœ›å®ƒåœ¨å›¾åƒå…±äº«æ—¶æ˜“äºé˜…è¯»ã€‚å³ä½¿æˆ‘ä»¬ç¼©å°æ–‡æœ¬ï¼Œæˆ‘ä»¬ä¹Ÿä»ç„¶å¯èƒ½é‡åˆ°è¿™äº›é—®é¢˜ã€‚</p>
<h2>ç¯ç»•æ ‡é¢˜æ–‡æœ¬</h2>
<p>è®©æˆ‘ä»¬æ¢æˆæ–‡å­—æ¢è¡Œå§ï¼</p>
<p>å› ä¸ºè¿™å°†éœ€è¦ç›¸å½“å¤šçš„é€»è¾‘æ¥æ­£ç¡®å·¥ä½œï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä¿æŒä¸»è„šæœ¬æ–‡ä»¶çš„æ•´æ´å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ©æ‰‹ã€‚å‘<code>utils/format-title.js</code>æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä»£ç ï¼ŒåŠ äº†æ³¨é‡Šï¼Œè¿™æ ·æ›´å®¹æ˜“ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<pre>const getMaxNextLine = (input, maxChars = 20) =&gt; {
  // Split the string into an array of words.
  const allWords = input.split(" ");
  // Find the index in the words array at which we should stop or we will exceed
  // maximum characters.
  const lineIndex = allWords.reduce((prev, cur, index) =&gt; {
    if (prev?.done) return prev;
    const endLastWord = prev?.position || 0;
    const position = endLastWord + 1 + cur.length;
    return position &gt;= maxChars ? { done: true, index } : { position, index };
  });
  // Using the index, build a string for this line ...
  const line = allWords.slice(0, lineIndex.index).join(" ");
  // And determine what's left.
  const remainingChars = allWords.slice(lineIndex.index).join(" ");
  // Return the result.
  return { line, remainingChars };
};

exports.formatTitle = (title) =&gt; {
  let output = [];
  // If the title is 40 characters or longer, look to add ellipses at the end of
  // the second line.
  if (title.length &gt;= 40) {
    const firstLine = getMaxNextLine(title);
    const secondLine = getMaxNextLine(firstLine.remainingChars);
    output = [firstLine.line];
    let fmSecondLine = secondLine.line;
    if (secondLine.remainingChars.length &gt; 0) fmSecondLine += " ...";
    output.push(fmSecondLine);
  }
  // If 20 characters or longer, add the entire second line, using a max of half
  // the characters, making the first line always slightly shorter than the
  // second.
  else if (title.length &gt;= 20) {
    const firstLine = getMaxNextLine(title, title.length / 2);
    output = [firstLine.line, firstLine.remainingChars];
  }
  // Otherwise, return the short title.
  else {
    output = [title];
  }

  return output;
};
</pre>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬å¯¼å‡ºäº†ç¬¬äºŒä¸ªå‡½æ•°ã€‚è¿™æ˜¯æˆ‘ä»¬å°†åœ¨ä¸»è„šæœ¬ä¸­ä½¿ç”¨çš„ä¸€ä¸ªã€‚ç¬¬ä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ä¸‹ä¸€è¡Œå’Œå‰©ä½™çš„å­—ç¬¦ï¼Œå®ƒä¸å…è®¸ä»»ä½•ä¸€è¡Œçš„é•¿åº¦è¶…è¿‡ 20 ä¸ªå­—ç¬¦ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°†å…¶å¯¼å…¥åˆ°ä¸»<code>draw.js</code>è„šæœ¬ä¸­ã€‚</p>
<pre>const { createCanvas } = require("canvas");
const fs = require("fs");

// Import the helper function.
const { formatTitle } = require("./utils/format-title");

const post = {
  title: "Draw and save images with Canvas and Node"
}

const width = 1200;
const height = 627;
// Extract the starting Y value for the title's position, which
// we'll move if we add a second line.
const titleY = 170;
// Set the line height of the text, which varies based on the
// font size and family.
const lineHeight = 100;

const canvas = createCanvas(width, height);
const context = canvas.getContext("2d");

context.fillStyle = "#764abc";
context.fillRect(0, 0, width, height);

context.font = "bold 70pt 'PT Sans'";
context.textAlign = "center";
context.fillStyle = "#fff";

// Format the title and render to the canvas.
const text = formatTitle(post.title);
context.fillText(text[0], 600, titleY);
// If we need a second line, we move use the titleY and lineHeight
// to find the appropriate Y value.
if (text[1]) context.fillText(text[1], 600, titleY + lineHeight);

const buffer = canvas.toBuffer("image/png");
fs.writeFileSync("./image.png", buffer);
</pre>
<p>å†æ¬¡è¿è¡Œå®ƒï¼Œç„¶åæ‰“å¼€ç”Ÿæˆçš„<code>image.png</code>æ–‡ä»¶ã€‚</p>
<p><img data-attachment-id="72199" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/text-centered/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text centered" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png" decoding="async" class="aligncenter size-full wp-image-72199 jetpack-lazy-image" src="../Images/ec6bea9eddb23fed28fd5ec85f9c71d3.png" alt="Text Centered" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72199" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/text-centered/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text centered" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72199" src="../Images/ec6bea9eddb23fed28fd5ec85f9c71d3.png" alt="Text Centered" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered.png"/></noscript>
<p>å¤ªå¥½äº†ï¼æˆ‘ä»¬çš„æ ‡é¢˜å¾ˆé•¿ï¼Œæ‰€ä»¥åˆ†æˆä¸¤è¡Œã€‚ç¬¬äºŒè¡Œä»ç„¶å¤ªé•¿ï¼Œæ‰€ä»¥<code>formatTitle</code>åŠ©æ‰‹åœ¨æœ«å°¾æ·»åŠ äº†çœç•¥å·ã€‚</p>
<p>å°è¯•å°†æ ‡é¢˜æ›´æ”¹ä¸º 20 åˆ° 40 ä¸ªå­—ç¬¦ï¼Œç„¶åå†æ¬¡è¿è¡Œè„šæœ¬ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<p><img data-attachment-id="72201" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/draw-and-save-images/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Draw and save images" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png" decoding="async" class="aligncenter size-full wp-image-72201 jetpack-lazy-image" src="../Images/14053f06a4fe291bcec37800c51835e3.png" alt="Draw and Save Images" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72201" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/draw-and-save-images/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Draw and save images" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72201" src="../Images/14053f06a4fe291bcec37800c51835e3.png" alt="Draw and Save Images" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/draw-and-save-images.png"/></noscript>
<p>è¯·æ³¨æ„ï¼Œè¯¥è¡Œåœ¨â€œä¿å­˜â€ä¹‹åæ–­å¼€ï¼Œè€Œä¸æ˜¯åƒå®Œæ•´æ ‡é¢˜é‚£æ ·åœ¨â€œå›¾åƒâ€ä¹‹åæ–­å¼€ã€‚è¿™æ˜¯å› ä¸º<code>formatTitle</code>å‡½æ•°è¯•å›¾å˜å¾—æ›´èªæ˜ï¼Œå¦‚æœæ ‡é¢˜åœ¨ 20 åˆ° 40 ä¸ªå­—ç¬¦ä¹‹é—´ï¼Œå®ƒå°†ä½¿è¡Œçš„é•¿åº¦ç›¸ä¼¼ï¼Œè¿™æ ·æˆ‘ä»¬(å¸Œæœ›)ä¸ä¼šå‡ºç°åçš„ä¸­æ–­ã€‚å®ƒæ— è®ºå¦‚ä½•éƒ½ä¸å®Œç¾ï¼Œä½†å®ƒè§£å†³äº†è¿™äº›ç®€å•çš„æ¡ˆä¾‹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¿›ä¸€æ­¥ç¼©çŸ­å®ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€è¡Œä¸­å¾—åˆ°æ‰€æœ‰çš„æ ‡é¢˜ã€‚</p>
<p><img data-attachment-id="72203" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/single-line-text/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Single line of text" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png" decoding="async" class="aligncenter size-full wp-image-72203 jetpack-lazy-image" src="../Images/23510bf03efae84a3f187fa188231188.png" alt="Single Line of Text" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72203" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/single-line-text/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Single line of text" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72203" src="../Images/23510bf03efae84a3f187fa188231188.png" alt="Single Line of Text" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/single-line-text.png"/></noscript>
<p>å¥½å§ï¼æˆ‘ä»¬æ­£åœ¨å–å¾—è¿›å±•ã€‚ğŸ˜…</p>
<h2>æ·»åŠ ç½²å</h2>
<p>è®©æˆ‘ä»¬ç»§ç»­æ·»åŠ ä½œè€…å§“åçš„ç½²åã€‚</p>
<pre>const { createCanvas } = require("canvas");
const fs = require("fs");

const { formatTitle } = require("./utils/format-title");

// Add author name to the post object. (Notice that I
// put the title back to the original.)
const post = {
  title: "Draw and save images with Canvas and Node",
  author: "Sean C Davis",
};

const width = 1200;
const height = 627;
const titleY = 170;
const lineHeight = 100;
const authorY = 500;

const canvas = createCanvas(width, height);
const context = canvas.getContext("2d");

context.fillStyle = "#764abc";
context.fillRect(0, 0, width, height);

context.font = "bold 70pt 'PT Sans'";
context.textAlign = "center";
context.fillStyle = "#fff";

const text = formatTitle(post.title);
context.fillText(text[0], 600, titleY);
if (text[1]) context.fillText(text[1], 600, titleY + lineHeight);

// Render the byline on the image, starting at 600px.
context.font = "40pt 'PT Sans'";
context.fillText(`by ${post.author}`, 600, authorY);

const buffer = canvas.toBuffer("image/png");
fs.writeFileSync("./image.png", buffer);
</pre>
<p>å†è¿è¡Œä¸€æ¬¡ã€‚</p>
<p><img data-attachment-id="72205" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/byline-added/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Byline added" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png" decoding="async" class="aligncenter size-full wp-image-72205 jetpack-lazy-image" src="../Images/40b1c9a168a4ccf7dc15ef23ee3b1194.png" alt="Byline Added" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72205" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/byline-added/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Byline added" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72205" src="../Images/40b1c9a168a4ccf7dc15ef23ee3b1194.png" alt="Byline Added" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/byline-added.png"/></noscript>
<p>è¿™å¼€å§‹çœ‹èµ·æ¥åƒæ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨çš„ä¸œè¥¿äº†ï¼</p>
<h2>æ·»åŠ å¾½æ ‡å›¾åƒ</h2>
<p>è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ ‡å¿—æ¥å®Œå–„å®ƒã€‚æˆ‘ä»¬å°†ä¸å¾—ä¸åœ¨è¿™é‡Œåšä¸€äº›é€»è¾‘ä¸Šçš„æ”¹å˜ã€‚å…ˆç»™<code>assets/logo.png</code>åŠ ä¸ª logoã€‚<a href="https://github.com/seancdavis/seancdavis-com/raw/2741fbaa7b6da7f0f186fed5d2a4dcc4d174c943/examples/generate-meta-images/assets/logo.png" target="_blank" rel="noopener">è¿™æ˜¯æˆ‘åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨çš„</a>ã€‚</p>
<p><em>æ³¨æ„:æˆ‘æŠŠå›¾åƒ</em> <code>800px</code> <em>åšå¾—å¾ˆå®½ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨</em> <code>400px</code> <em>æ¸²æŸ“å®ƒï¼Œå®ƒåœ¨æ›´é«˜çš„ DPR å±å¹•ä¸Šçœ‹èµ·æ¥ä»ç„¶æ¸…æ™°ã€‚ä½ å¯èƒ½æƒ³æ ¹æ®ä½ ä½¿ç”¨çš„å›¾åƒæ”¾å¤§æˆ–ç¼©å°</em><em/><em>ã€‚</em></p>
<p>ä¸‹é¢çš„ä»£ç å¸¦æœ‰æ³¨é‡Šï¼Œä»¥å¸®åŠ©æ‚¨äº†è§£è¿™äº›å˜åŒ–ã€‚</p>
<pre>// Bring in loadImage function from canvas so we can
// add an image to the canvas.
const { createCanvas, loadImage } = require("canvas");
const fs = require("fs");

const { formatTitle } = require("./utils/format-title");

const post = {
  title: "Draw and save images with Canvas and Node",
  author: "Sean C Davis",
};

const width = 1200;
const height = 627;
// Set the coordinates for the image position.
const imagePosition = {
  w: 400,
  h: 88,
  x: 400,
    y: 75,
};
// Because we are putting the image near the top (y: 75)
// move the title down.
const titleY = 300;
const titleLineHeight = 100;
// Bring up the author's Y value as well to make it all
// fit together nicely.
const authorY = 525;

const canvas = createCanvas(width, height);
const context = canvas.getContext("2d");

context.fillStyle = "#764abc";
context.fillRect(0, 0, width, height);

context.font = "bold 70pt 'PT Sans'";
context.textAlign = "center";
context.fillStyle = "#fff";

const titleText = formatTitle(post.title);
context.fillText(titleText[0], 600, titleY);
if (titleText[1]) context.fillText(titleText[1], 600, titleY + titleLineHeight);

context.font = "40pt 'PT Sans'";
context.fillText(`by ${post.author}`, 600, authorY);

// Load the logo file and then render it on the screen.
loadImage("./assets/logo.png").then((image) =&gt; {
  const { w, h, x, y } = imagePosition;
  context.drawImage(image, x, y, w, h);

  const buffer = canvas.toBuffer("image/png");
  fs.writeFileSync("./image.png", buffer);
});
</pre>
<p>å†è¿è¡Œä¸€æ¬¡ã€‚</p>
<p><img data-attachment-id="72207" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/logo-added/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Logo added" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png" decoding="async" class="aligncenter size-full wp-image-72207 jetpack-lazy-image" src="../Images/a2fa8daf0ca6f0a0c674ff4c84eb7800.png" alt="Logo Added" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72207" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/logo-added/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Logo added" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72207" src="../Images/a2fa8daf0ca6f0a0c674ff4c84eb7800.png" alt="Logo Added" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/logo-added.png"/></noscript>
<p>çœ‹çœ‹é‚£ä¸ªï¼å‘œå“‡ï¼æˆ‘å–œæ¬¢å®ƒã€‚çœ‹èµ·æ¥å¾ˆæ£’ï¼Œå¯ä»¥åˆ†äº«ã€‚</p>
<p>è®©æˆ‘ä»¬ä»”ç»†æ£€æŸ¥å®ƒæ˜¯å¦è¦†ç›–äº†æˆ‘ä»¬çš„ç”¨ä¾‹ã€‚ç¼©çŸ­æ ‡é¢˜ï¼Œä½¿å…¶é€‚åˆå•è¡Œï¼Œç„¶åå†æ¬¡è¿è¡Œè„šæœ¬ã€‚</p>
<p><img data-attachment-id="72209" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/text-centered-and-aligned/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text centered and aligned" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png" decoding="async" class="aligncenter size-full wp-image-72209 jetpack-lazy-image" src="../Images/e8ddfa7bb5a8d75a391f82648e0fdb8c.png" alt="Text Centered and Aligned" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72209" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/text-centered-and-aligned/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Text centered and aligned" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72209" src="../Images/e8ddfa7bb5a8d75a391f82648e0fdb8c.png" alt="Text Centered and Aligned" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/text-centered-and-aligned.png"/></noscript>
<p>å—¯â€¦â€¦çœ‹èµ·æ¥ä¸å¤ªå¥½ã€‚ğŸ™</p>
<p>å†è¡¥å……ä¸€ç‚¹å®šä½é€»è¾‘å§ã€‚</p>
<pre>const { createCanvas, loadImage } = require("canvas");
const fs = require("fs");

const { formatTitle } = require("./utils/format-title");

const post = {
  title: "Draw and save images with Canvas and Node",
  author: "Sean C Davis",
};
// Move the title formatter up farther because we're going to
// use it to set our Y values.
const titleText = formatTitle(post.title);

const width = 1200;
const height = 627;
const imagePosition = {
  w: 400,
  h: 88,
  x: 400,
    // Calculate the Y of the image based on the number of
    // lines in the title.
    y: titleText.length === 2 ? 75 : 100,
};
// Do the same with the title's Y value.
const titleY = titleText.length === 2 ? 300 : 350;
const titleLineHeight = 100;
// And the author's Y value.
const authorY = titleText.length === 2 ? 525 : 500;

const canvas = createCanvas(width, height);
const context = canvas.getContext("2d");

context.fillStyle = "#764abc";
context.fillRect(0, 0, width, height);

context.font = "bold 70pt 'PT Sans'";
context.textAlign = "center";
context.fillStyle = "#fff";

context.fillText(titleText[0], 600, titleY);
if (titleText[1]) context.fillText(titleText[1], 600, titleY + titleLineHeight);

context.font = "40pt 'PT Sans'";
context.fillText(`by ${post.author}`, 600, authorY);

loadImage("./assets/logo.png").then((image) =&gt; {
  const { w, h, x, y } = imagePosition;
  context.drawImage(image, x, y, w, h);

  const buffer = canvas.toBuffer("image/png");
  fs.writeFileSync("./image.png", buffer);
});
</pre>
<p>å¥½å§ï¼Œå†æ¥ä¸€æ¬¡çŸ­æ ‡é¢˜ã€‚</p>
<p><img data-attachment-id="72211" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/final-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png" decoding="async" class="aligncenter size-full wp-image-72211 jetpack-lazy-image" src="../Images/97255a9e36ada824bf57696498a9e887.png" alt="Final Example" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/final-example-300x157.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="72211" data-permalink="https://blog.logrocket.com/creating-saving-images-node-canvas/final-example/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png" data-orig-size="730,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Final example" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example-300x157.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-72211" src="../Images/97255a9e36ada824bf57696498a9e887.png" alt="Final Example" srcset="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/10/final-example-300x157.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/10/final-example.png"/></noscript>
<p>çœ‹èµ·æ¥ä¸é”™ï¼ä¸æ˜¯å®Œç¾çš„åƒç´ ï¼Œä½†ç›¸å½“åšå®ã€‚æ ¹æ®æ‚¨çš„ä½¿ç”¨æƒ…å†µâ€”â€”å›¾åƒå¤§å°ã€å­—ä½“ç³»åˆ—å’Œå¤§å°â€”â€”æ‚¨å¯èƒ½æƒ³è¦è°ƒæ•´è¿™äº›å€¼ï¼Œç›´åˆ°å®ƒçœ‹èµ·æ¥åˆé€‚ä¸ºæ­¢ï¼Œä½†æ˜¯ç°åœ¨æ‚¨å·²ç»æœ‰äº†ä¸€ä¸ªå¼ºå¤§çš„åŸºç¡€ã€‚</p>
<h2>ç»“è®º</h2>
<p>ä½ å¯ä»¥ç”¨å¤šç§æ–¹å¼æ¥ä½¿ç”¨å®ƒã€‚æˆ‘æƒ³åœ¨è¿™é‡Œåœä¸‹æ¥ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»è§£å†³äº†æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œæˆ‘æ‰“å¼€äº†å¦ä¸€ä¸ªå¸–å­ï¼Œåœ¨è¿™ä¸ªå¸–å­ä¸­ï¼Œæˆ‘ä»ä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¸­è¯»å–å¸–å­æ•°æ®ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–‡ä»¶ç”Ÿæˆå›¾åƒã€‚è¿™æä¾›äº†ä¸€äº›é¢å¤–çš„é€»è¾‘ï¼Œå¯ä»¥å¸®åŠ©ä½ æŠŠä½ çš„è„šæœ¬å˜æˆä½ å¯ä»¥ç”¨äºç”Ÿäº§çš„ä¸œè¥¿ã€‚</p>
<p><a href="https://www.seancdavis.com/blog/generate-meta-images-for-blog-posts-with-node/" target="_blank" rel="noopener">åœ¨è¿™é‡Œçœ‹å¸–å­</a>ã€‚è€Œ<a href="https://github.com/seancdavis/seancdavis-com/tree/1c86b1f8e5333d5239caa10fd000be0e371997cb/examples/generate-meta-images" target="_blank" rel="noopener">è¿™é‡Œæ˜¯å®ƒçš„ç¤ºä¾‹ä»£ç </a>ã€‚</p>
<p>æˆ‘å¾ˆæƒ³çœ‹çœ‹ä½ æ˜¯å¦‚ä½•æŠŠè¿™ä¸ªä¾‹å­åº”ç”¨åˆ°ä½ çš„é¡¹ç›®ä¸­çš„ã€‚åˆ†äº«ç»™å…¨ä¸–ç•Œ(<a href="https://twitter.com/seancdavis29" target="_blank" rel="noopener">å’Œæˆ‘</a>)ï¼</p><div class="code-block code-block-23">
<div class="blog-plug inline-plug node-plug"><h2>200 åª<img src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> <noscript> <img data-lazy-fallback="1" src="../Images/61167b9d027ca73ed5aaf59a9ec31267.png" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/green-check.png"/> </noscript>æ˜¾ç¤ºå™¨å‡ºç°æ•…éšœï¼Œç”Ÿäº§ä¸­ç½‘ç»œè¯·æ±‚ç¼“æ…¢</h2><p>éƒ¨ç½²åŸºäºèŠ‚ç‚¹çš„ web åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™æ˜¯å®¹æ˜“çš„éƒ¨åˆ†ã€‚ç¡®ä¿æ‚¨çš„èŠ‚ç‚¹å®ä¾‹ç»§ç»­ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾›èµ„æºæ˜¯äº‹æƒ…å˜å¾—æ›´åŠ å›°éš¾çš„åœ°æ–¹ã€‚å¦‚æœæ‚¨å¯¹ç¡®ä¿å¯¹åç«¯æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡çš„è¯·æ±‚æˆåŠŸæ„Ÿå…´è¶£ï¼Œ</p><a href="https://lp.logrocket.com/blg/node-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer"><img src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/><noscript><img data-lazy-fallback="1" src="../Images/cae72fd2a54c5f02a6398c4867894844.png" alt="LogRocket Network Request Monitoring" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/12/network-request-filter-2-1.png"/></noscript></a><a href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket å°±åƒæ˜¯ç½‘ç»œå’Œç§»åŠ¨åº”ç”¨ç¨‹åºçš„ DVRï¼Œè®°å½•ä¸‹ç”¨æˆ·ä¸ä½ çš„åº”ç”¨ç¨‹åºäº¤äº’æ—¶å‘ç”Ÿçš„ä¸€åˆ‡ã€‚æ‚¨å¯ä»¥æ±‡æ€»å¹¶æŠ¥å‘Šæœ‰é—®é¢˜çš„ç½‘ç»œè¯·æ±‚ï¼Œä»¥å¿«é€Ÿäº†è§£æ ¹æœ¬åŸå› ï¼Œè€Œä¸æ˜¯çŒœæµ‹é—®é¢˜å‘ç”Ÿçš„åŸå› ã€‚</p><p>LogRocket æ£€æµ‹æ‚¨çš„åº”ç”¨ç¨‹åºä»¥è®°å½•åŸºçº¿æ€§èƒ½è®¡æ—¶ï¼Œå¦‚é¡µé¢åŠ è½½æ—¶é—´ã€åˆ°è¾¾ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´ã€æ…¢é€Ÿç½‘ç»œè¯·æ±‚ï¼Œè¿˜è®°å½• Reduxã€NgRx å’Œ Vuex æ“ä½œ/çŠ¶æ€ã€‚</p><a class="signup" href="https://lp.logrocket.com/blg/node-signup" target="_blank" rel="noopener noreferrer">Start monitoring for free</a><p>. </p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>