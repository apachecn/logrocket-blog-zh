<html>
<head>
<title>Understanding Astro islands architecture </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>äº†è§£é˜¿ç«¥æœ¨å²›å»ºç­‘</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/understanding-astro-islands-architecture/#0001-01-01">https://blog.logrocket.com/understanding-astro-islands-architecture/#0001-01-01</a></blockquote><div><article class="article-post">
<p>å¦‚ä»Šï¼Œæˆ‘ä»¬éƒ½ä¹ æƒ¯äºçœ‹åˆ°æ–°çš„æ¡†æ¶å‡ºç°ï¼Œå¹¶æ‰¿è¯ºå½»åº•æ”¹å˜æˆ‘ä»¬æ„å»ºwebçš„æ–¹å¼ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¤§å¤šæ•°æ—¶å€™ä»ç„¶ä¾èµ–äºç‰¹å®šçš„UIåº“(Reactã€Vueã€Svelteç­‰)ã€‚)æ¥å®šä¹‰æˆ‘ä»¬çš„ç»„ä»¶å¹¶ä¸ºç”¨æˆ·æ„å»ºä½“éªŒã€‚</p>
<p>è¿™ä¸€æ¬¡ï¼Œæ•…äº‹ä¸åŒäº†ï¼åˆ©ç”¨<a href="https://vite.js/"> Vite.js </a>çš„åŠ›é‡ï¼Œæˆ‘ä»¬å¾—åˆ°äº†Astro:ä¸€ä¸ªä¸å¯çŸ¥çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥ä½œä¸ºSSG(é™æ€ç«™ç‚¹ç”Ÿæˆå™¨)å·¥ä½œï¼Œå¹¶æä¾›SSR(æœåŠ¡å™¨ç«¯æ¸²æŸ“)ã€‚</p>
<p>ä½¿ç”¨Astroæ’ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æˆ‘ä»¬æƒ³è¦çš„æ–¹å¼æ„å»ºå’Œå¢å¼ºæˆ‘ä»¬çš„ç½‘ç«™ï¼Œç”šè‡³å¯ä»¥å°†ä¸åŒçš„UIåº“åˆå¹¶åˆ°ä¸€ä¸ªé¡¹ç›®ä¸­ã€‚</p>
<p>åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£Astro islandsä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•æä¾›è¿™ä¸€åŠŸèƒ½çš„ã€‚</p>
<p><em>å‘å‰è·³è½¬:</em></p>

<h2 id="astro-introduction">Astro 101:ç®€ä»‹</h2>
<p>å½“ä½ çœ‹ä»–ä»¬<a href="https://astro.build/">å®˜ç½‘</a>ä¸Šçš„å®šä¹‰ï¼Œä½ ä¼šå‘ç°:</p>
<p>Astroæ˜¯ä¸€ä¸ªä¸€ä½“åŒ–çš„webæ¡†æ¶ï¼Œç”¨äºæ„å»ºå¿«é€Ÿã€ä»¥å†…å®¹ä¸ºä¸­å¿ƒçš„ç½‘ç«™ã€‚</p>
<p>æœ€è¿‘ï¼Œä»–ä»¬å‘å¸ƒäº†<a href="https://astro.build/blog/astro-1/">ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆæœ¬</a>ï¼Œæ ‡å¿—ç€è¯¥æ¡†æ¶å·²ç»å‡†å¤‡å¥½æŠ•å…¥ç”Ÿäº§ï¼Œè¿™æ˜¯æ–°å…´æ¡†æ¶çš„ä¸€ä¸ªå·¨å¤§é‡Œç¨‹ç¢‘ã€‚ç½‘ç»œç¤¾åŒºçš„ååº”éå¸¸ç§¯æï¼Œæ¯å¤©æˆ‘ä»¬éƒ½çœ‹åˆ°è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®ä½¿ç”¨Astro frontendsã€‚</p>
<p>Astroæœ‰è®¸å¤šå¾ˆé…·çš„ç‰¹æ€§ï¼Œè®©å¼€å‘è€…å’Œç”¨æˆ·ä½“éªŒå¾ˆæ£’ã€‚æˆ‘å»ºè®®æŸ¥çœ‹å¦ä¸€ç¯‡LogRocketæ–‡ç« ä»¥è·å¾—å…³äºAstroçš„æ›´å…¨é¢çš„æ¦‚è¿°ã€‚</p>
<p>åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼ŒAstroå’Œå…¶ä»–æ¡†æ¶çš„å…³é”®åŒºåˆ«åœ¨äºå®ƒçš„æ¶æ„:å­¤å²›æ¶æ„ã€‚è¿™ä¸ªæ¦‚å¿µåœ¨2019å¹´ç”±<a href="https://twitter.com/ksylor">å‡¯è’‚Â·å¡å‹’-ç±³å‹’</a>é¦–æ¬¡æè¿°ï¼Œéšåç”±Preactçš„åˆ›ä½œè€…<a href="https://twitter.com/_developit">æ°æ£®Â·ç±³å‹’</a>åœ¨<a href="https://jasonformat.com/islands-architecture/">æœ¬å¸–</a>ä¸­è¿›ä¸€æ­¥é˜è¿°ã€‚</p>
<p><img data-attachment-id="145421" data-permalink="https://blog.logrocket.com/understanding-astro-islands-architecture/attachment/astro-islands-architecture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png" data-orig-size="730,637" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Astro-islands-architecture" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture-300x262.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png" decoding="async" class="aligncenter wp-image-145421 size-full jetpack-lazy-image" src="../Images/8540359c2ccad739b25e6ad0b3f357b4.png" alt="Astro islands architecture" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture-300x262.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145421" data-permalink="https://blog.logrocket.com/understanding-astro-islands-architecture/attachment/astro-islands-architecture/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png" data-orig-size="730,637" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Astro-islands-architecture" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture-300x262.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png" decoding="async" loading="lazy" class="aligncenter wp-image-145421 size-full" src="../Images/8540359c2ccad739b25e6ad0b3f357b4.png" alt="Astro islands architecture" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture-300x262.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/Astro-islands-architecture.png"/></noscript>
<h2 id="astro-islands">ä»€ä¹ˆæ˜¯é˜¿ç«¥æœ¨å²›ï¼Ÿ</h2>
<p>æœ¯è¯­â€œAstro islandâ€æŒ‡çš„æ˜¯HTMLé™æ€é¡µé¢ä¸Šçš„äº¤äº’å¼UIç»„ä»¶ã€‚ä¸€ä¸ªé¡µé¢ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªå²›ï¼Œä¸€ä¸ªå²›æ€»æ˜¯å­¤ç«‹åœ°å‘ˆç°ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªå²›å¯ä»¥ä½¿ç”¨ä»»ä½•UIæ¡†æ¶ï¼Œç”šè‡³åªæ˜¯æ™®é€šçš„Astroä»£ç ï¼Œä¸é¡µé¢ä¸Šçš„å…¶ä»–å²›ä¸€èµ·ä½¿ç”¨ã€‚</p>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼ŒAstroåœ¨é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆçš„æ¯ä¸ªç½‘ç«™éƒ½æ²¡æœ‰å®¢æˆ·ç«¯JavaScriptã€‚æ¯æ¬¡æˆ‘ä»¬åœ¨é¡µé¢ä¸Šæ¸²æŸ“ä¸€ä¸ªå²›ï¼ŒAstroéƒ½ä¼šæå‰è‡ªåŠ¨æ¸²æŸ“æˆHTMLï¼Œç„¶åå‰¥ç¦»æ‰æ‰€æœ‰çš„JavaScriptã€‚è¿™é€šè¿‡ä»é¡µé¢ä¸­ç§»é™¤æ‰€æœ‰æœªä½¿ç”¨çš„JavaScriptæ¥ä¿æŒæ¯ä¸ªç«™ç‚¹çš„é€Ÿåº¦ã€‚</p>
<p>æˆ‘ä»¬ä»¥Reactä¸­åšçš„ä¸€ä¸ª<code>Counter</code>ç»„ä»¶çš„å®ç°ä¸ºä¾‹ã€‚ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¼šæ˜¾ç¤ºä¸€ä¸ªæŒ‰é’®ï¼Œæ–‡å­—ä¸ºâ€œ<code>Counter: 0</code>â€ï¼Œç”¨æˆ·æ¯ç‚¹å‡»ä¸€æ¬¡ï¼Œè®¡æ•°å™¨å°±ä¼šå¢åŠ <code>1</code>ã€‚</p>
<pre class="language-typescript hljs">// src/components/Counter.tsx
import { useState } from 'react';

const Counter = () =&gt; {
  const [count, setCounter] = useState(0);
  return (
    &lt;button onClick={() =&gt; setCounter((number) =&gt; number + 1)}&gt;
      Counter: {count}
    &lt;/button&gt;
  );
};

export default Counter;
</pre>
<p>ç„¶åï¼Œè®©æˆ‘ä»¬åœ¨Astroä¸­æ¸²æŸ“è¿™ä¸ªç»„ä»¶ã€‚</p>
<p>è¦åœ¨Astroé¡¹ç›®ä¸­ä½¿ç”¨Reactç»„ä»¶ï¼Œå¿…é¡»å°†<code><a href="https://docs.astro.build/en/guides/integrations-guide/react/">@astrojs/react</a></code>é›†æˆæ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚</p>
<pre class="language-javascript hljs">// src/pages/index.astro
---
import Counter from '../components/Counter';
---

&lt;Counter /&gt;
</pre>
<p>è¿™æ®µä»£ç å°†å‘ˆç°æŒ‰é’®ï¼Œä½†æ˜¯å› ä¸ºJavaScriptåœ¨æ„å»ºæ—¶è¢«Astroåˆ é™¤äº†ï¼Œæ‰€ä»¥ç”¨æˆ·ä¸èƒ½å¢åŠ è®¡æ•°å™¨çš„å€¼ã€‚å½“æˆ‘ä»¬æƒ³è®©æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå…·æœ‰äº¤äº’æ€§æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä½¿ç”¨å®¢æˆ·ç«¯æŒ‡ä»¤æ¥æ˜ç¡®è¯´æ˜(æˆ‘ä»¬å°†åœ¨åé¢è®¨è®ºå®ƒä»¬)ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºéƒ¨åˆ†æˆ–é€‰æ‹©æ€§æ°´åˆã€‚æœ¬è´¨ä¸Šï¼Œè¿™æ„å‘³ç€å‘å¸ƒæ”¯æŒç»„ä»¶çš„åŠ¨æ€è¿è¡Œæ—¶éœ€æ±‚æ‰€éœ€çš„ä»»ä½•æ¡†æ¶ä»£ç æˆ–è¿è¡Œæ—¶ã€‚åƒçŠ¶æ€å˜åŒ–å’Œäº¤äº’æ€§è¿™æ ·çš„äº‹æƒ…å°±æ˜¯æœ€å¥½çš„ä¾‹å­ã€‚</p>
<pre class="language-javascript hljs">// src/pages/index.astro
---
import Counter from '../components/Counter.jsx';
--

&lt;Counter client:load /&gt;
</pre>
<p>Astro islandsçš„ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œé™¤äº†ä¸“æ³¨äºè®©ä½ çš„åº”ç”¨ç¨‹åºå°½å¯èƒ½è½»ä¹‹å¤–ï¼Œæ¯ä¸ªå²›éƒ½æ˜¯å¹¶è¡ŒåŠ è½½çš„ã€‚æ‚¨ç”šè‡³å¯ä»¥ä½¿ç”¨å®¢æˆ·æœºæŒ‡ä»¤ä¸ºæ¯ä¸ªå²›å•ç‹¬æŒ‡å®šè£…è½½ç­–ç•¥ï¼è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®Œå…¨æ§åˆ¶å¦‚ä½•ä»¥åŠä½•æ—¶ä¸ºå®¢æˆ·åŠ è½½èµ„äº§ï¼Œå¹¶å°½æˆ‘ä»¬æ‰€èƒ½æä¾›æœ€ä½³ä½“éªŒã€‚</p>
<h2 id="astro-islands-compare-rest">é˜¿æ–¯ç‰¹ç½—å²›å’Œå…¶ä»–åœ°æ–¹ç›¸æ¯”æ€ä¹ˆæ ·ï¼Ÿ</h2>
<p>æ­£å¦‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« å¼€å¤´æåˆ°çš„ï¼ŒAstroå›¢é˜Ÿå¹¶æ²¡æœ‰åˆ›é€ å²›å±¿å»ºç­‘ã€‚ç›¸åŒçš„æŠ€æœ¯åœ¨è®¸å¤šæ¡†æ¶ä¸­å®ç°ï¼Œå¹¶ä½œä¸ºå•ç‹¬çš„åº“å‘å¸ƒã€‚</p>
<p>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯<a href="https://is-land.11ty.dev/"> <code>is-land</code> </a>(æ¥è‡ª<a href="https://www.11ty.dev/"> <code>11ty</code> </a>å›¢é˜Ÿ)ï¼Œå®ƒåœ¨ç»™ç»„ä»¶è¡¥æ°´æ—¶æä¾›äº†é™„åŠ æ¡ä»¶(ä¹Ÿç§°ä¸ºå®¢æˆ·ç«¯æŒ‡ä»¤)ï¼Œä¾‹å¦‚:</p>
<ul>
<li><code>on:interaction</code></li>
<li><code>on:save-data</code></li>
</ul>
<p>å®ƒè¿˜å…è®¸æ‚¨åœ¨ç»„ä»¶å°šæœªæ°´åˆæ—¶æŒ‡å®šä¸€ä¸ªåå¤‡:</p>
<pre class="language-html hljs">&lt;is-land on:interaction&gt;
  &lt;form&gt;
    &lt;button type="button"&gt;Hydrate the island&lt;/button&gt;
  &lt;/form&gt;

  &lt;p&gt;This content is before hydration.&lt;/p&gt;

  &lt;template data-island="replace"&gt;
    &lt;vanilla-web-component&gt;My component content after hydration&lt;/vanilla-web-component&gt;
  &lt;/template&gt;
&lt;/is-land&gt;
</pre>
<p>å°½ç®¡æ¡†æ¶ä¹‹é—´åœ¨è¯­æ³•ä¸Šæœ‰äº›å·®å¼‚ï¼Œä½†ä¸»è¦æ€æƒ³æ˜¯æ¯ä¸ªæ¡†æ¶æœ€ç»ˆéƒ½å®ç°äº†éƒ¨åˆ†æ°´åˆã€‚Astroç¼–å†™UIçš„æ–¹å¼ç¡®ä¿äº†ç”¨æˆ·éœ€æ±‚æ€»æ˜¯å®šä¹‰æ°´åˆç­–ç•¥ï¼Œè¿™åœ¨å…¶ä»–å­¤å²›æ¡†æ¶ä¸­æ˜¯å¯é€‰çš„ï¼Œæ¯”å¦‚<code>is-land</code>ã€‚</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºå²›å±¿å»ºç­‘çš„çŸ¥è¯†ï¼Œæˆ‘å‘ç°GitHub <code><a href="https://github.com/lxsmnsyc/awesome-islands">awesome-islands</a></code>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ„æºï¼Œå®ƒç»„ç»‡äº†å¾ˆå¤šä¸å²›å±¿å»ºç­‘ç›¸å…³çš„å†…å®¹ã€‚</p>
<h2 id="astro-client-directives">æ‰€æœ‰Astroå®¢æˆ·æŒ‡ä»¤</h2>
<p>æŒ‡ä»¤æ˜¯ä¸€ä¸ªç»„ä»¶å±æ€§ï¼Œå®ƒå‘Šè¯‰Astroä½ çš„ç»„ä»¶åº”è¯¥å¦‚ä½•æ¸²æŸ“ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒAstroæ€»å…±æ”¯æŒ<a href="https://docs.astro.build/en/reference/directives-reference/#client-directives">äº”ç§ä¸åŒçš„å®¢æˆ·ç«¯æŒ‡ä»¤</a>ã€‚éšç€æ¡†æ¶å¢åŠ æ–°çš„ç‰¹æ€§ï¼Œè¿™ä¸ªæ•°å­—å¯èƒ½ä¼šæ”¹å˜ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æƒ³è¦å‘ˆç°åä¸º<code>MyComponent</code>çš„ç»„ä»¶ï¼Œæ ¹æ®æˆ‘ä»¬ä½¿ç”¨çš„å®¢æˆ·ç«¯æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ç”¨æˆ·ä¸ä¹‹äº¤äº’çš„æ–¹å¼:</p>
<ul>
<li><code>&lt;MyComponent client:load/&gt;</code>:åœ¨é¡µé¢åŠ è½½æ—¶ç«‹å³åˆå¹¶ç»„ä»¶JavaScript</li>
<li><code>&lt;MyComponent client:idle/&gt;</code>:å½“é¡µé¢å®Œæˆåˆå§‹åŠ è½½å¹¶ä¸”<code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback">requestIdleCallback</a></code>äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œåˆå¹¶ç»„ä»¶JavaScript</li>
<li><code>&lt;MyComponent client:visible/&gt;</code>:ä¸€æ—¦ç»„ä»¶è¿›å…¥ç”¨æˆ·çš„è§†å£ï¼Œå°±åˆå¹¶ç»„ä»¶JavaScriptã€‚è¿™åœ¨å†…éƒ¨ä½¿ç”¨äº†ä¸€ä¸ª<code><a href="https://blog.logrocket.com/lazy-loading-using-the-intersection-observer-api/">IntersectionObserver</a></code>æ¥è·Ÿè¸ªå¯è§æ€§</li>
<li><code>&lt;MyComponent client:media={string}/&gt;</code>:ä¸€æ—¦æ»¡è¶³æŸä¸ª<a href="https://blog.logrocket.com/choose-between-media-container-queries/"> CSSåª’ä½“æŸ¥è¯¢</a>ï¼Œå°±åˆå¹¶ç»„ä»¶JavaScript</li>
<li><code>&lt;MyComponent client:only={string}/&gt;</code>:è·³è¿‡HTMLæœåŠ¡å™¨æ¸²æŸ“ï¼Œåªåœ¨å®¢æˆ·ç«¯æ¸²æŸ“ã€‚è¯¥ç»„ä»¶å°†åœ¨æ„å»ºæ—¶è¢«è·³è¿‡ï¼Œè¿™å¯¹äºå®Œå…¨ä¾èµ–äºå®¢æˆ·ç«¯APIçš„ç»„ä»¶éå¸¸æœ‰ç”¨</li>
</ul>
<h2 id="working-client-directives">ä½¿ç”¨å®¢æˆ·ç«¯æŒ‡ä»¤</h2>
<p>ä¸ºäº†è¯´æ˜å®¢æˆ·ç«¯æŒ‡ä»¤çš„å¨åŠ›ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå°çš„Astroé¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨ä¸åŒçš„å®¢æˆ·ç«¯æŒ‡ä»¤æ¥æ¸²æŸ“ä¸Šé¢æ˜¾ç¤ºçš„ç›¸åŒçš„<code>Counter</code>ç»„ä»¶ï¼Œä»¥ä¾¿ä»»ä½•äººéƒ½å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹å°è¯•å®ƒä»¬ã€‚è¯·éšæ„<a href="https://astro-client-directives-test.netlify.app/">åœ¨Netlifyä¸Šçœ‹ä¸€ä¸‹ç°åœºåº”ç”¨</a>ã€‚</p>
<p><img data-attachment-id="145424" data-permalink="https://blog.logrocket.com/understanding-astro-islands-architecture/attachment/client-directives-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png" data-orig-size="730,1242" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Client-directives-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-176x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-602x1024.png" decoding="async" class="aligncenter wp-image-145424 size-full jetpack-lazy-image" src="../Images/744347d76e229a66384a106f66df97da.png" alt="Client directives demo" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-176x300.png 176w, https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-602x1024.png 602w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="145424" data-permalink="https://blog.logrocket.com/understanding-astro-islands-architecture/attachment/client-directives-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png" data-orig-size="730,1242" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Client-directives-demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-176x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-602x1024.png" decoding="async" loading="lazy" class="aligncenter wp-image-145424 size-full" src="../Images/744347d76e229a66384a106f66df97da.png" alt="Client directives demo" srcset="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-176x300.png 176w, https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo-602x1024.png 602w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/12/Client-directives-demo.png"/></noscript>
<p>ä¸‹é¢æ˜¯ä¸Šé¢æˆªå›¾ä¸­é¡µé¢çš„å…¨éƒ¨ä»£ç ã€‚é¡µé¢çš„å†…å®¹åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„<code>Counter </code>ç»„ä»¶ï¼Œæ€»å…±å‘ˆç°äº†å…­æ¬¡:ç¬¬ä¸€æ¬¡æ²¡æœ‰æŒ‡å®šä»»ä½•å®¢æˆ·ç«¯æŒ‡ä»¤(è¯¥ç»„ä»¶æ ¹æœ¬ä¸æ˜¯äº¤äº’å¼çš„)ï¼Œç„¶åå…¶ä½™çš„éƒ¨åˆ†ä½¿ç”¨äº†æˆ‘ä»¬ä¸Šé¢æåˆ°çš„æ‰€æœ‰ä¸åŒçš„å®¢æˆ·ç«¯æŒ‡ä»¤ã€‚</p>
<pre class="language-javascript hljs">// src/pages/index.astro
---
import Layout from '../layouts/Layout.astro';
import Counter from '../components/Counter';
---

&lt;Layout title="Welcome to Astro"&gt;
  &lt;main&gt;
    &lt;h1&gt;Welcome to &lt;span class="text-gradient"&gt;Astro&lt;/span&gt;&lt;/h1&gt;

    &lt;h2&gt;&lt;pre&gt;no directive&lt;/pre&gt;&lt;/h2&gt;
    &lt;p class="instructions"&gt;
      &lt;code&gt;No JS, no interactive&lt;/code&gt;
      &lt;Counter /&gt;
    &lt;/p&gt;

    &lt;h2&gt;&lt;pre&gt;client:load&lt;/pre&gt;&lt;/h2&gt;
    &lt;p class="instructions"&gt;
      &lt;code&gt;Loads JS as soon as possible&lt;/code&gt;
      &lt;Counter client:load /&gt;
    &lt;/p&gt;

    &lt;h2&gt;&lt;pre&gt;client:idle&lt;/pre&gt;&lt;/h2&gt;
    &lt;p class="instructions"&gt;
      &lt;code&gt;Loads JS when rendering is over&lt;/code&gt;
      &lt;Counter client:idle /&gt;
    &lt;/p&gt;

    &lt;h2&gt;&lt;pre&gt;client:visible&lt;/pre&gt;&lt;/h2&gt;
    &lt;p class="instructions"&gt;
      &lt;code&gt;Loads JS when the button is visible to the user&lt;/code&gt;
      &lt;Counter client:visible /&gt;
    &lt;/p&gt;

    &lt;h2&gt;&lt;pre&gt;client:media&lt;/pre&gt;&lt;/h2&gt;
    &lt;p class="instructions"&gt;
      &lt;code&gt;Loads JS when the media query (min-width: 680px) is valid&lt;/code&gt;
      &lt;Counter client:media="(min-width: 680px)" /&gt;
    &lt;/p&gt;

    &lt;h2&gt;&lt;pre&gt;client:only&lt;/pre&gt;&lt;/h2&gt;
    &lt;p class="instructions"&gt;
      &lt;code&gt;Loads JS only in client (No SSR)&lt;/code&gt;
      &lt;Counter client:only="react" /&gt;
    &lt;/p&gt;
  &lt;/main&gt;
&lt;/Layout&gt;
</pre>
<p>å®Œæ•´çš„æºä»£ç å¯ä»¥åœ¨<a href="https://github.com/EmaSuriano/astro-client-directives-test">è¿™ä¸ªGitHubåº“</a>é‡Œæ‰¾åˆ°ã€‚æˆ‘å¼ºçƒˆå»ºè®®åˆ†å‰é¡¹ç›®å¹¶åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®ï¼Œä»¥å……åˆ†ç†è§£å®¢æˆ·ç«¯æŒ‡ä»¤å¦‚ä½•ä¿®æ”¹æ‚¨çš„åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</p>
<h2>ä¸´ç»ˆé—è¨€</h2>
<p>æˆ‘è®¤ä¸ºAstroæ˜¯ä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼Œèƒ½å¤Ÿä½¿ç”¨é›¶JavaScriptä»£ç æ„å»ºè¶…è½»ç½‘ç«™ã€‚å®ƒè®©æˆ‘ä»¬æ›´åŠ æ„è¯†åˆ°ï¼Œåœ¨è¿™ä¸ªåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œä»€ä¹ˆæ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦JavaScriptï¼Œä»€ä¹ˆæ—¶å€™æˆ‘ä»¬å¯ä»¥å‘å®¢æˆ·äº¤ä»˜æ›´å°‘çš„KBã€‚</p>
<p>Astroçš„å¦ä¸€å¤§ä¼˜åŠ¿æ˜¯å®ƒæ˜¯UIä¸å¯çŸ¥çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥è‡ªå¸¦UIæ¡†æ¶(BYOF)ï¼Reactã€Preactã€Solidã€Svelteã€Vueå’ŒLitéƒ½æ˜¯Astro å®˜æ–¹æ”¯æŒçš„<a href="https://docs.astro.build/en/guides/integrations-guide/#official-integrations">ã€‚æ‚¨ç”šè‡³å¯ä»¥åœ¨åŒä¸€ä¸ªé¡µé¢ä¸Šæ··åˆæ­é…ä¸åŒçš„æ¡†æ¶ï¼Œä½¿æœªæ¥çš„è¿ç§»æ›´åŠ å®¹æ˜“ï¼Œå¹¶é˜²æ­¢é¡¹ç›®å±€é™äºå•ä¸€æ¡†æ¶ã€‚</a></p>
<p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œè®©æˆ‘ä»¬ç»§ç»­ä¸€èµ·åŠªåŠ›å§ï¼ğŸ‘·â€â™‚ï¸</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>æ‚¨æ˜¯å¦æ·»åŠ äº†æ–°çš„JSåº“æ¥æé«˜æ€§èƒ½æˆ–æ„å»ºæ–°ç‰¹æ€§ï¼Ÿå¦‚æœä»–ä»¬åå…¶é“è€Œè¡Œä¹‹å‘¢ï¼Ÿ</h2><p>æ¯«æ— ç–‘é—®ï¼Œå‰ç«¯å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚å½“æ‚¨å‘åº”ç”¨ç¨‹åºæ·»åŠ æ–°çš„JavaScriptåº“å’Œå…¶ä»–ä¾èµ–é¡¹æ—¶ï¼Œæ‚¨å°†éœ€è¦æ›´å¤šçš„å¯è§æ€§ï¼Œä»¥ç¡®ä¿æ‚¨çš„ç”¨æˆ·ä¸ä¼šé‡åˆ°æœªçŸ¥çš„é—®é¢˜ã€‚</p>
<p>LogRocket æ˜¯ä¸€ä¸ªå‰ç«¯åº”ç”¨ç¨‹åºç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è®©æ‚¨å›æ”¾JavaScripté”™è¯¯ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æ›´æœ‰æ•ˆåœ°å¯¹é”™è¯¯åšå‡ºååº”ã€‚</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>å¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ªReduxã€Vuexå’Œ@ngrx/storeçš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚æ‚¨å¯ä»¥æ±‡æ€»å¹¶æŠ¥å‘Šé—®é¢˜å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯çŒœæµ‹é—®é¢˜å‘ç”Ÿçš„åŸå› ã€‚LogRocketè¿˜å¯ä»¥ç›‘æ§åº”ç”¨çš„æ€§èƒ½ï¼ŒæŠ¥å‘Šå®¢æˆ·ç«¯CPUè´Ÿè½½ã€å®¢æˆ·ç«¯å†…å­˜ä½¿ç”¨ç­‰æŒ‡æ ‡ã€‚</p><p>è‡ªä¿¡åœ°æ„å»ºâ€” <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">å¼€å§‹å…è´¹ç›‘æ§</a>ã€‚</p></div>


</div>
<h3>å‚è€ƒ</h3>


<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>