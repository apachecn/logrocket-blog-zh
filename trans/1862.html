<html>
<head>
<title>How to use TypeScript with React 18 alpha - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>å¦‚ä½•åœ¨ React 18 alpha - LogRocket åšå®¢ä¸­ä½¿ç”¨ TypeScript</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/#0001-01-01">https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/#0001-01-01</a></blockquote><div><div class="mainheading">

<div class="row post-top-meta hidden-md-down">

<div class="col-md-10 col-xs-12">
  <a class="text-capitalize link-dark" href="https://blog.logrocket.com/author/johnreilly/">
John Reilly <span class="btn follow">Follow</span></a>
<span class="author-description d-block">MacGyver turned Dev ğŸŒ»â¤ï¸ TypeScript / ts-loader / fork-ts-checker-webpack-plugin / DefinitelyTyped: The Movie</span>
</div>
</div>
<h1 class="posttitle">å¦‚ä½•åœ¨ React 18 alpha ä¸­ä½¿ç”¨ TypeScript</h1>
<h2 class="post-subtitle"/>
<p><span class="post-date"><time class="post-date">2021 å¹´ 6 æœˆ 9 æ—¥</time> </span> <span class="dot"/> <span class="readingtime"> 2 åˆ†é’Ÿé˜…è¯»</span> <span class="wordcount"> 654 </span> <span class="logrocket_editor"/></p>
</div>
<article class="article-post">
<p><a href="https://reactjs.org/blog/2021/06/08/the-plan-for-react-18.html"> React 18 alpha å·²ç»å‘å¸ƒ</a>ï¼Œéå¸¸æ¿€åŠ¨äººå¿ƒï¼ä½†æ˜¯æˆ‘ä»¬èƒ½æŠŠå®ƒå’Œ TypeScript ä¸€èµ·ä½¿ç”¨å—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯â€œæ˜¯çš„â€ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åšä¸€äº›äº‹æƒ…æ¥å®ç°å®ƒã€‚è¿™ç¯‡æ–‡ç« å°†å‘Šè¯‰ä½ è¯¥æ€ä¹ˆåšã€‚</p>
<h2>ä½¿ç”¨ TypeScript åˆ›å»º React åº”ç”¨ç¨‹åº</h2>
<p>è®©æˆ‘ä»¬ç”¨<a href="https://blog.logrocket.com/getting-started-with-create-react-app-d93147444a27/"> Create React App </a>ä¸ºè‡ªå·±åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ React ç±»å‹è„šæœ¬åº”ç”¨ç¨‹åº:</p>
<pre class="language-shell hljs">yarn create react-app my-app --template typescript</pre>
<p>ç°åœ¨æˆ‘ä»¬æŠŠ React çš„ç‰ˆæœ¬å‡çº§åˆ°<code>@next</code>:</p>
<pre class="language-shell hljs">yarn add <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c6b4a3a7a5b286a8a3beb2">[emailÂ protected]</a> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9eecfbfffdeab3faf1f3def0fbe6ea">[emailÂ protected]</a></pre>
<p>è¿™å°†åœ¨<code>package.json</code>ä¸­ä¸ºæ‚¨ç•™ä¸‹ä½¿ç”¨ React 18 çš„æ¡ç›®ã€‚å®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre class="language-json hljs">    "react": "^18.0.0-alpha-e6be2d531",
    "react-dom": "^18.0.0-alpha-e6be2d531",</pre>
<p>å¦‚æœæˆ‘ä»¬è¿è¡Œ<code>yarn start</code>ï¼Œæˆ‘ä»¬ä¼šå‘ç°è‡ªå·±åœ¨è¿è¡Œä¸€ä¸ª React 18 åº”ç”¨ã€‚æ¿€åŠ¨äººå¿ƒï¼</p>
<h2>ä½¿ç”¨æ–°çš„ API</h2>
<p>æ‰€ä»¥è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨<code><a href="https://github.com/reactwg/react-18/discussions/5">ReactDOM.createRoot</a></code> APIã€‚æ­£æ˜¯è¿™ä¸ª API é€‰æ‹©æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä½¿ç”¨ React 18 çš„æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬å°†æ‰“å¼€<code>index.tsx</code>å¹¶è¿›è¡Œå¦‚ä¸‹æ›´æ”¹:</p>
<pre class="language-diff hljs"><span class="hljs-deletion">-ReactDOM.render(
-  &lt;React.StrictMode&gt;
-    &lt;App /&gt;
-  &lt;/React.StrictMode&gt;,
-  document.getElementById('root')
-);</span>
<span class="hljs-addition">+const root = ReactDOM.createRoot(document.getElementById('root'));
+
+root.render(
+  &lt;React.StrictMode&gt;
+    &lt;App /&gt;
+  &lt;/React.StrictMode&gt;
+);</span></pre>
<p>å¦‚æœæˆ‘ä»¬å•ç‹¬è¿è¡Œ JavaScriptï¼Œè¿™æ˜¯å¯è¡Œçš„ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿä½¿ç”¨äº† TypeScriptï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨é¢ä¸´ä¸€ä¸ªé”™è¯¯:</p>
<blockquote><p><code>Property 'createRoot' does not exist on type 'typeof import("/code/my-app/node_modules/@types/react-dom/index")'. TS2339</code></p></blockquote>
<p><img data-attachment-id="54030" data-permalink="https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/createroot-property-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="createRoot property error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png" decoding="async" class="aligncenter size-full wp-image-54030 jetpack-lazy-image" src="../Images/e15664b8889757d6fa12252f1413fefa.png" alt="TypeScript Throws an Error for the createRoot Property" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error-300x84.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="54030" data-permalink="https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/createroot-property-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="createRoot property error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-54030" src="../Images/e15664b8889757d6fa12252f1413fefa.png" alt="TypeScript Throws an Error for the createRoot Property" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error-300x84.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/createroot-property-error.png"/></noscript>
<p>è¿™æ˜¯ TypeScript ç¼–è¯‘å™¨æŠ±æ€¨å®ƒå¯¹<code>ReactDOM.createRoot</code>ä¸€æ— æ‰€çŸ¥ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å½“å‰çš„ç±»å‹å®šä¹‰æ²¡æœ‰å®šä¹‰ APIã€‚</p>
<p>è®©æˆ‘ä»¬å‡çº§æˆ‘ä»¬çš„ç±»å‹å®šä¹‰:</p>
<pre class="language-shell hljs">yarn add @types/react @types/react-dom</pre>
<p>æˆ‘ä»¬å¯èƒ½æœ‰ç†ç”±å¸Œæœ›ç°åœ¨ä¸€åˆ‡éƒ½æ­£å¸¸è¿è½¬â€”â€”å”‰ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚å‡ºç°äº†åŒæ ·çš„é”™è¯¯ã€‚TypeScript ä¸é«˜å…´äº†ã€‚</p>
<h2>å‘Šè¯‰ TypeScript æ–°çš„ API</h2>
<p>å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹å¢åŠ äº†å¯¹ API æ”¯æŒçš„<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/pull/53685"> PRï¼Œæˆ‘ä»¬ä¼šæ‰¾åˆ°ä¸€äº›æç¤ºã€‚å¦‚æœä½ çœ‹ä¸€ä¸‹<code><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/a07e9cfb005682fb6be0a2e85113eac131c3006f/types/react/next.d.ts">next.d.ts</a></code>çš„ï¼Œä½ ä¼šå‘ç°è¿™ä¸ªä¿¡æ¯ï¼Œç”±</a><a href="https://twitter.com/sebsilbermann">å¡å·´æ–¯è’‚å®‰Â·è¥¿å°”ä¼¯æ›¼</a>æä¾›:</p>
<pre class="language-typescript hljs">/**
 * These are types for things that are present in the upcoming React 18 release.
 *
 * Once React 18 is released they can just be moved to the main index file.
 *
 * To load the types declared here in an actual project, there are three ways. The easiest one,
 * if your `tsconfig.json` already has a `"types"` array in the `"compilerOptions"` section,
 * is to add `"react/next"` to the `"types"` array.
 *
 * Alternatively, a specific import syntax can to be used from a typescript file.
 * This module does not exist in reality, which is why the {} is important:
 *
 * ```ts
 * import {} from 'react/next'
 * ```
 *
 * It is also possible to include it through a triple-slash reference:
 *
 * ```ts
 * /// &lt;reference types="react/next" /&gt;
 * ```
 *
 * Either the import or the reference only needs to appear once, anywhere in the project.
 */</pre>
<p>è®©æˆ‘ä»¬è¯•è¯•å•å­ä¸Šçš„ç¬¬ä¸€é¡¹ã€‚æˆ‘ä»¬å°†ç¼–è¾‘æˆ‘ä»¬çš„<code>tsconfig.json</code>ï¼Œå¹¶å‘<code>"compilerOptions"</code>éƒ¨åˆ†æ·»åŠ ä¸€ä¸ªæ–°æ¡ç›®:</p>
<pre class="language-json hljs">    "types": ["react/next", "react-dom/next"]</pre>
<p>å¦‚æœæˆ‘ä»¬ç”¨<code>yarn start</code>é‡æ–°å¼€å§‹æ„å»ºï¼Œæˆ‘ä»¬ç°åœ¨ä¼šçœ‹åˆ°ä¸€ä¸ªä¸åŒçš„é”™è¯¯:</p>
<blockquote><p><code>Argument of type 'HTMLElement | null' is not assignable to parameter of type 'Element | Document | DocumentFragment | Comment'.<br/> Type 'null' is not assignable to type 'Element | Document | DocumentFragment | Comment'. TS2345</code></p></blockquote>
<p><img data-attachment-id="54031" data-permalink="https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/htmlelement-null-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="HTMLElement | null error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png" decoding="async" class="aligncenter size-full wp-image-54031 jetpack-lazy-image" src="../Images/904073ef0061a2c286f15221fc7473b2.png" alt="TypeScript Throws an Error for the HTMLElement | null Type" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error-300x84.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="54031" data-permalink="https://blog.logrocket.com/how-to-use-typescript-with-react-18-alpha/htmlelement-null-error/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="HTMLElement | null error" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-54031" src="../Images/904073ef0061a2c286f15221fc7473b2.png" alt="TypeScript Throws an Error for the HTMLElement | null Type" srcset="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error-300x84.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/06/htmlelement-null-error.png"/></noscript>
<p>ç°åœ¨ï¼Œè¿™å®é™…ä¸Šä¸æˆ‘ä»¬æ–°çš„ React ç±»å‹å®šä¹‰çš„é—®é¢˜æ— å…³ã€‚ä»–ä»¬å¾ˆå¥½ã€‚è¿™æ˜¯ä¸€ä¸ªæ‰“å­—ç¨¿ï¼Œä¸Šé¢å†™ç€ï¼Œâ€œä¸èƒ½ä¿è¯<code>document.getElementById('root')</code>è¿”å›ä¸æ˜¯<code>null</code>çš„ä¸œè¥¿ã€‚æ—¢ç„¶æˆ‘ä»¬å¤„äº<code>strictNullChecks</code>æ¨¡å¼ï¼Œä½ éœ€è¦ç¡®ä¿<code>root</code>ä¸ä¸ºç©ºã€‚â€</p>
<p>æˆ‘ä»¬å°†é€šè¿‡åœ¨è°ƒç”¨<code>ReactDOM.createRoot</code>ä¹‹å‰æµ‹è¯•æˆ‘ä»¬æ˜¯å¦æœ‰ä¸€ä¸ªå…ƒç´ åœ¨èµ·ä½œç”¨æ¥å¤„ç†è¿™ä¸ªé—®é¢˜:</p>
<pre class="language-diff hljs"><span class="hljs-deletion">-const root = ReactDOM.createRoot(document.getElementById('root'));</span>
<span class="hljs-addition">+const rootElement = document.getElementById('root');
+if (!rootElement) throw new Error('Failed to find the root element');
+const root = ReactDOM.createRoot(rootElement);</span></pre>
<p>ç»è¿‡è¿™äº›æ›´æ”¹ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªä½¿ç”¨ TypeScript React 18 åº”ç”¨ç¨‹åºã€‚å°½æƒ…äº«å—å§ï¼</p><div class="code-block code-block-21">
<div class="blog-plug inline-plug typescript-plug"><h2><a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>:å…¨é¢äº†è§£æ‚¨çš„ç½‘ç»œå’Œç§»åŠ¨åº”ç”¨</h2>
<a href="https://lp.logrocket.com/blg/typescript-signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p>LogRocket æ˜¯ä¸€ä¸ªå‰ç«¯åº”ç”¨ç¨‹åºç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è®©æ‚¨å›æ”¾é—®é¢˜ï¼Œå°±åƒé—®é¢˜å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ã€‚LogRocket ä¸éœ€è¦çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸éœ€è¦å‘ç”¨æˆ·è¯¢é—®æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨é‡æ”¾ä¼šè¯ä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚å®ƒå¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ª Reduxã€Vuex å’Œ@ngrx/store çš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚</p>
<p>é™¤äº†è®°å½• Redux æ“ä½œå’ŒçŠ¶æ€ï¼ŒLogRocket è¿˜è®°å½•æ§åˆ¶å°æ—¥å¿—ã€JavaScript é”™è¯¯ã€å †æ ˆè·Ÿè¸ªã€å¸¦æœ‰å¤´+æ­£æ–‡çš„ç½‘ç»œè¯·æ±‚/å“åº”ã€æµè§ˆå™¨å…ƒæ•°æ®å’Œè‡ªå®šä¹‰æ—¥å¿—ã€‚å®ƒè¿˜ä½¿ç”¨ DOM æ¥è®°å½•é¡µé¢ä¸Šçš„ HTML å’Œ CSSï¼Œç”šè‡³ä¸ºæœ€å¤æ‚çš„å•é¡µé¢å’Œç§»åŠ¨åº”ç”¨ç¨‹åºé‡æ–°åˆ›å»ºåƒç´ çº§å®Œç¾è§†é¢‘ã€‚</p>
<a class="signup" href="https://lp.logrocket.com/blg/typescript-signup" target="_blank" rel="noopener noreferrer">Try it for free</a><p>.</p></div>
</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>