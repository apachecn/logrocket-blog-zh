<html>
<head>
<title>Integrating WalletConnect into Vue.js DApps - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>å°† WalletConnect é›†æˆåˆ° Vue.js DApps - LogRocket åšå®¢ä¸­</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/#0001-01-01">https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/#0001-01-01</a></blockquote><div><article class="article-post">
<p>åˆ†æ•£å¼åº”ç”¨ç¨‹åº(DApps)çš„ä¸»è¦åŠŸèƒ½ä¹‹ä¸€æ˜¯è¿æ¥é’±åŒ…çš„èƒ½åŠ›ï¼Œè¿™åè¿‡æ¥å…è®¸ç”¨æˆ·ä¸ DApp ä¸Šçš„äº¤æ˜“è¿›è¡Œäº¤äº’ã€‚å®ƒæŠ½è±¡äº†äº¤æ¢ç½‘ç»œã€æä¾›ç­¾åè€…ç­‰åŠŸèƒ½ï¼Œä»¥åŠä¸ºç”¨æˆ·æä¾›æŸç§å½¢å¼çš„èº«ä»½éªŒè¯çš„å…¶ä»–ç‰¹æ€§ã€‚è¿æ¥é’±åŒ…ä¹Ÿå¯ä½œä¸ºç½‘å…³ï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨å…¶é’±åŒ…åœ°å€ä½œä¸ºæˆæƒèº«ä»½ï¼Œé€šè¿‡ DApp åœ¨åŒºå—é“¾ä¸Šæ‰§è¡Œå’Œè¯»å–æ“ä½œã€‚</p>
<p><a href="https://walletconnect.com/" target="_blank" rel="noopener"> WalletConnect </a>æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºåè®®ï¼Œå¯ä»¥å°†æˆ‘ä»¬çš„ DApps è¿æ¥åˆ°å¤šä¸ªé’±åŒ…ï¼ŒåŒ…æ‹¬<a href="https://blog.logrocket.com/understanding-resolving-metamask-error-codes/" target="_blank" rel="noopener"> MetaMask </a>ï¼ŒTrust Walletï¼ŒRainbow ç­‰ç­‰ã€‚è¯¥åè®®é€šè¿‡åœ¨ DApp å’Œé’±åŒ…ä¹‹é—´å»ºç«‹è¿æ¥æ¥æŠ½è±¡è¿™ä¸ªè¿‡ç¨‹ï¼Œåœ¨æ•´ä¸ªä¼šè¯æœŸé—´ä¿æŒå®ƒä»¬çš„åŒæ­¥ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ WalletConnect å°†æˆ‘ä»¬çš„é’±åŒ…åº”ç”¨ç¨‹åºé“¾æ¥åˆ°æˆ‘ä»¬çš„ DAppï¼Œåœ¨å‰ç«¯ä½¿ç”¨ Vue.jsã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒWalletConnect å¯ä»¥åœ¨ä»»ä½•å…¼å®¹ wallet-connect çš„ DAppã€é“¾å’Œé’±åŒ…(ä¿ç®¡å’Œéä¿ç®¡)ä¸Šä½¿ç”¨ã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æœ¬æ•™ç¨‹çš„<a href="https://github.com/Atanda1/vue-wallet-connect" target="_blank" rel="noopener">æºä»£ç ï¼Œä»¥åŠæˆ‘ä»¬å°†åœ¨è¿™é‡Œ</a>æ„å»ºçš„åº”ç”¨ç¨‹åºçš„<a href="https://60xdzn.csb.app/" target="_blank" rel="noopener">æ¼”ç¤ºã€‚</a></p>
<p><img data-attachment-id="114954" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/project-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo-.gif" data-orig-size="600,1333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo--135x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo--461x1024.gif" decoding="async" class="size-full wp-image-114954 aligncenter jetpack-lazy-image" src="../Images/67dc9c07ee5795a7d4d439dd2cc14e8e.png" alt="Project demo " data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo-.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo-.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114954" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/project-demo/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo-.gif" data-orig-size="600,1333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Project demo" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo--135x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo--461x1024.gif" decoding="async" loading="lazy" class="size-full wp-image-114954 aligncenter" src="../Images/67dc9c07ee5795a7d4d439dd2cc14e8e.png" alt="Project demo " data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Project-demo-.gif"/></noscript>
<h3>å†…å®¹</h3>

<h2 id="getting-started-vue-app">Vue.js åº”ç”¨ç¨‹åºå…¥é—¨</h2>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ Vue CLI æ¥å¯åŠ¨é¡¹ç›®ã€‚å¦‚æœæ‚¨çš„ç³»ç»Ÿä¸Šå·²ç»å®‰è£…äº† Vue CLIï¼Œæ‚¨å¯ä»¥ç›´æ¥åˆ›å»º Vue é¡¹ç›®ã€‚</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå…¨å±€å®‰è£…:</p>
<pre class="language-shell hljs">npm install -g @vue/cli
</pre>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ Vue CLI æ¥åˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®:</p>
<pre class="language-shell hljs">vue create vue-wallet-connect
</pre>
<p>æ‚¨éœ€è¦é€‰æ‹©ä¸€ä¸ªé¢„è®¾ã€‚é€‰æ‹©<code>Manually select features</code>ï¼Œç„¶åé€‰æ‹©å¦‚ä¸‹æ‰€ç¤ºçš„é€‰é¡¹:</p>
<p><img data-attachment-id="114957" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/vue-setup-config/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png" data-orig-size="730,278" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Vue setup config" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config-300x114.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png" decoding="async" class="size-full wp-image-114957 aligncenter jetpack-lazy-image" src="../Images/5c093a3e2b46f19d1e9852f49838d5ce.png" alt="Vue setup config" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config-300x114.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114957" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/vue-setup-config/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png" data-orig-size="730,278" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Vue setup config" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config-300x114.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png" decoding="async" loading="lazy" class="size-full wp-image-114957 aligncenter" src="../Images/5c093a3e2b46f19d1e9852f49838d5ce.png" alt="Vue setup config" srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config-300x114.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Vue-setup-config.png"/></noscript>
<p>åˆ›å»ºé¡¹ç›®åï¼Œå¯¼èˆªåˆ°æ–°é¡¹ç›®æ–‡ä»¶å¤¹:</p>
<pre class="language-shell hljs">cd vue-wallet-connect
</pre>
<p>æˆ‘ä»¬å°†åœ¨ Vue åº”ç”¨ä¸­ä½¿ç”¨<a href="https://blog.logrocket.com/building-dapp-ethers-js/" target="_blank" rel="noopener"> Ethers.js </a>æ¥ç›´æ¥ä¸åŒºå—é“¾äº’åŠ¨ï¼ŒåŒæ—¶è¿æ¥æˆ‘ä»¬çš„é’±åŒ…:</p>
<pre class="language-shell hljs">npm i ethers
</pre>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬å°† WalletConnect åº“å®‰è£…åˆ°æ‚¨çš„é¡¹ç›®ä¸­:</p>
<pre class="language-shell hljs">npm install --save web3 @walletconnect/web3-provider
</pre>
<p>æ¥ä¸‹æ¥ï¼Œè¦åœ¨ Vue 3 ä¸­ç›´æ¥ä½¿ç”¨ WalletConnect åº“ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…<code><a href="https://www.npmjs.com/package/node-polyfill-webpack-plugin" target="_blank" rel="noopener">node-polyfill-webpack-plugin</a></code>:</p>
<pre class="language-shell hljs">npm i node-polyfill-webpack-plugin
</pre>
<p>æˆ‘ä»¬æ­£åœ¨å®‰è£…å®ƒï¼Œå› ä¸ºæˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨ webpack v5ï¼Œå…¶ä¸­ polyfill èŠ‚ç‚¹æ ¸å¿ƒæ¨¡å—å·²è¢«åˆ é™¤ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®‰è£…å®ƒæ¥è®¿é—®é¡¹ç›®ä¸­çš„è¿™äº›æ¨¡å—ã€‚</p>
<p>ç°åœ¨ï¼Œæ‰“å¼€<code>vue.config.js</code>æ–‡ä»¶ï¼Œç”¨è¿™æ®µä»£ç æ›¿æ¢å®ƒ:</p>
<pre class="language-javascript hljs">const { defineConfig } = require("@vue/cli-service");
const NodePolyfillPlugin = require("node-polyfill-webpack-plugin");
module.exports = defineConfig({
  transpileDependencies: true,
  configureWebpack: {
    plugins: [new NodePolyfillPlugin()],
    optimization: {
      splitChunks: {
        chunks: "all",
      },
    },
  },
});
</pre>
<p>å®Œæˆåï¼Œæ‚¨ç°åœ¨å¯ä»¥å¯åŠ¨æœåŠ¡å™¨:</p>
<pre class="language-shell hljs">npm run serve
</pre>
<h2 id="building-ui">æ„å»ºç”¨æˆ·ç•Œé¢</h2>
<p>è®©æˆ‘ä»¬è¿›å…¥ components æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code>StatusContainer.vue</code>çš„æ–°æ–‡ä»¶ã€‚è¿™ä¸ªç»„ä»¶åŒ…å«æˆ‘ä»¬çš„ä¸»é¡µã€‚</p>
<p>It itï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„æ¬¢è¿ä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬è¿æ¥çš„<strong>è¿æ¥é’±åŒ…</strong>æŒ‰é’®ï¼Œä»¥åŠæˆ‘ä»¬çš„<strong>æ–­å¼€è¿æ¥</strong>æŒ‰é’®æ¥æ–­å¼€æˆ‘ä»¬ä¸é’±åŒ…çš„è¿æ¥ã€‚æœ€åï¼Œå½“æˆ‘ä»¬æˆåŠŸè¿æ¥åˆ°é’±åŒ…æ—¶ï¼Œä¼šæ˜¾ç¤º<strong>å·²è¿æ¥</strong>æŒ‰é’®:</p>
<pre class="language-javascript hljs">&lt;template&gt;
  &lt;div class="hello"&gt;
    &lt;h1&gt;Welcome to Your Vue.js Dapp&lt;/h1&gt;
    &lt;div &gt;
       &lt;button class="button"&gt;Connected&lt;/button&gt;
       &lt;button class="disconnect__button"&gt;Disconnect&lt;/button&gt;
    &lt;/div&gt;

    &lt;button class="button"&gt; Connect Wallet&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: 'StatusContainer'
}
&lt;/script&gt;
</pre>
<p>å®Œæˆåï¼Œæ‰“å¼€<code>App.vue</code>æ–‡ä»¶å¹¶å¯¼å…¥<code>StatusContainer</code>ç»„ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre class="language-javascript hljs">&lt;template&gt;
  &lt;status-container/&gt;
&lt;/template&gt;
&lt;script&gt;

import StatusContainer from './components/StatusContainer.vue'
export default {
  name: 'App',
  components: {
    StatusContainer
  }
}
&lt;/script&gt;
&lt;style&gt;
@import url('https://fonts.googleapis.com/css2?family=Sora:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4334242b3703727373">[emailÂ protected]</a>&amp;display=swap');
#app {
  font-family: 'Sora', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
.button {
      background-color: #1c82ff;
    border: none;
    color: #ffffff;
    font-family: "Sora";
    border-radius: 3rem;
    padding: 2rem 3rem;
    font-weight: 600;
    font-size: 2rem;
    margin: 1rem 1rem 1rem auto;
    width: 40%;
}
.disconnect__button {
     background-color: red;
    border: none;
    color: #ffffff;
    font-family: "Sora";
    border-radius: 3rem;
    padding: 1rem 1.3rem;
    font-weight: 600;
    font-size: 1rem;
    margin: 8rem 1rem 1rem auto;
    width: 20%;
}
&lt;/style&gt;
</pre>
<p>åœ¨æˆ‘ä»¬çš„æ ·å¼æ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨ä¸ºä¹‹å‰åˆ›å»ºçš„æŒ‰é’®æ·»åŠ æ ·å¼:<code>.button</code>å’Œ<code>.disconnect__button</code>ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä»è°·æ­Œå­—ä½“ä¸­å¯¼å…¥äº†é»‘è„¸ç”°é¸¡è‡ªå®šä¹‰å­—ä½“ï¼Œå¹¶å°†å…¶ç”¨ä½œæˆ‘ä»¬çš„<code>font-family</code>ã€‚</p>
<h2 id="instantiating-walletconnect">å®ä¾‹åŒ– WalletConnect</h2>
<p>æˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ª RPC æä¾›è€…æ¥å®ä¾‹åŒ–æˆ‘ä»¬çš„ WalletConnect åº“ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://blog.logrocket.com/alchemy-vs-infura-which-node-provider-best/" target="_blank" rel="noopener"> Infura </a>ã€‚æ‰“å¼€ Infuraï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¹¶æŠ“å–<strong>é¡¹ç›® ID </strong>ã€‚</p>
<p><img data-attachment-id="114960" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/infura-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png" data-orig-size="730,546" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Infura project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project--300x224.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png" decoding="async" class="size-full wp-image-114960 aligncenter jetpack-lazy-image" src="../Images/f5d9a5a59823f30de0de303f9aba3a65.png" alt="Infura project " data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project--300x224.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114960" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/infura-project/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png" data-orig-size="730,546" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Infura project" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project--300x224.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png" decoding="async" loading="lazy" class="size-full wp-image-114960 aligncenter" src="../Images/f5d9a5a59823f30de0de303f9aba3a65.png" alt="Infura project " srcset="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project--300x224.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Infura-project-.png"/></noscript>
<p>ç°åœ¨ï¼Œåœ¨ src æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„<code>walletConnect</code>æ–‡ä»¶å¤¹:<code>src/walletConnect</code>ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>provider.js</code>æ–‡ä»¶ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯¼å…¥ WalletConnect åº“ï¼Œä½¿ç”¨æˆ‘ä»¬çš„ Infura ID å®ä¾‹åŒ–å®ƒï¼Œå¹¶å¯¼å‡ºå®ƒç”¨äºå…¶ä»–æ–‡ä»¶ã€‚</p>
<p><code>src/walletConnect/provider.js</code>ä¼šæ˜¯è¿™æ ·çš„:</p>
<pre class="language-javascript hljs">import WalletConnectProvider from "@walletconnect/web3-provider";
export const provider = new WalletConnectProvider({
  infuraId: process.env.VUE_APP_INFURA_ID,
});
</pre>
<p>Infura ID åº”è¯¥ç”¨ä½œç¯å¢ƒå˜é‡ã€‚å› æ­¤ï¼Œå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ‚¨çš„<code>.env</code>æ–‡ä»¶ä¸­:</p>
<pre class="language-shell hljs">VUE_APP_INFURA_ID={{INFURA__ID}}
</pre>
<h2 id="adding-functionality-using-composables">ä½¿ç”¨ç»„ä»¶æ·»åŠ åŠŸèƒ½</h2>
<p>åˆ›å»ºæ¥å£å¹¶æˆåŠŸå®ä¾‹åŒ–åº“ä¹‹åï¼Œä¸‹ä¸€æ­¥æ˜¯å®ç°æˆ‘ä»¬çš„åŠŸèƒ½ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Vue composablesï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨æˆ‘ä»¬çš„çŠ¶æ€å’Œæ“ä½œï¼Œç±»ä¼¼äºæˆ‘ä»¬å¯¹<a href="https://blog.logrocket.com/complex-vue-3-state-management-pinia/" target="_blank" rel="noopener"> Pinia </a>å’Œ Vuex çš„ä½¿ç”¨ã€‚</p>
<h3>åˆ›å»ºå¯ç»„åˆçš„</h3>
<p>åœ¨<code>src</code>æ–‡ä»¶å¤¹å†…ï¼Œæ·»åŠ <code>src/composables/connect</code>ã€‚åœ¨<code>connect</code>æ–‡ä»¶å¤¹ä¸­ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>index.js</code>æ–‡ä»¶ã€‚</p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬å¯¼å…¥äº†<code>reactive</code>å’Œ<code>watch</code>ï¼Œæˆ‘ä»¬å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨å®ƒä»¬ã€‚è®©æˆ‘ä»¬åˆ›å»ºåä¸º<code>defaultState</code>çš„çŠ¶æ€å¯¹è±¡:</p>
<pre class="language-javascript hljs">import { reactive, watch } from "vue";

const defaultState = {
  address: "",
  chainId: "",
  status: false,
};

const state = defaultState
</pre>
<p>ä¸ºäº†ä¿æŒæˆ‘ä»¬çš„çŠ¶æ€ä¸€è‡´ï¼Œæˆ‘ä»¬å°†çŠ¶æ€ä¸æœ¬åœ°å­˜å‚¨ä¸­çš„é¡¹ç›®åŒæ­¥ã€‚è®©æˆ‘ä»¬å°†æ­¤é¡¹å‘½åä¸º<code>"userState"</code>ï¼Œå¹¶å°†å…¶èµ‹ç»™ä¸€ä¸ªåä¸º<code>STATE_NAME</code>çš„å˜é‡ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é¿å…åœ¨å¤šä¸ªåœ°æ–¹é‡å¤<code>"userState"</code>æ—¶å‡ºé”™:</p>
<pre class="language-javascript hljs">const STATE_NAME = "userState";
</pre>
<p>ç°åœ¨ï¼Œä¸€æ—¦æˆ‘ä»¬çš„çŠ¶æ€å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨<code>watch</code>æ¥æ›´æ–°æˆ‘ä»¬çš„æœ¬åœ°å­˜å‚¨:</p>
<pre class="language-javascript hljs">watch(
  () =&gt; state,
  () =&gt; {
    localStorage.setItem(STATE_NAME, JSON.stringify(state));
  },
  { deep: true }
);
</pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>getDefaultState</code>å‡½æ•°ï¼Œå®ƒæ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„<code>STATE_NAME</code>é¡¹æ˜¯å¦å­˜åœ¨ï¼Œå¹¶å°†æœ¬åœ°å­˜å‚¨é¡¹åˆ†é…ç»™çŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬çš„æœ¬åœ°å­˜å‚¨é¡¹ä¸å­˜åœ¨ï¼Œå®ƒå°†æŠŠ<code>defaultState</code>åˆ†é…ç»™<code>state</code>ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤<code>const state = defaultState</code>å¹¶ä½¿ç”¨<code>reactive</code>æ¥åˆ†é…<code>const state = reactive(getDefaultState());</code>:</p>
<pre class="language-javascript hljs">const getDefaultState = () =&gt; {
  if (localStorage.getItem(STATE_NAME) !== null) {
    return JSON.parse(localStorage.getItem(STATE_NAME));
  }
  return defaultState;
};
const state = reactive(getDefaultState());
</pre>
<p>æœ€åï¼Œæˆ‘ä»¬å¯¼å‡ºæˆ‘ä»¬çš„çŠ¶æ€ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ª<code>if</code>è¯­å¥æ¥æ£€æŸ¥æˆ‘ä»¬çš„æœ¬åœ°å­˜å‚¨é¡¹æ˜¯å¦ä¸å­˜åœ¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒä¼šåˆ›å»ºè¯¥é¡¹å¹¶å°†<code>state</code>åˆ†é…ç»™æœ¬åœ°å­˜å‚¨:</p>
<pre class="language-javascript hljs"> export default () =&gt; {
  if (localStorage.getItem(STATE_NAME) === null) {
    localStorage.setItem(STATE_NAME, JSON.stringify(state));
  }
  return {
    state,
  };
};
</pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„çŠ¶æ€æ€»æ˜¯ä¸æœ¬åœ°å­˜å‚¨åŒæ­¥ï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹<code>src/composables/connect/index.js</code>:</p>
<pre class="language-javascript hljs">import { reactive, watch } from "vue";

const defaultState = {
  address: "",
  chainId: "",
  status: false,
};

const STATE_NAME = "userState";
const getDefaultState = () =&gt; {
  if (localStorage.getItem(STATE_NAME) !== null) {
    return JSON.parse(localStorage.getItem(STATE_NAME));
  }
  return defaultState;
};
const state = reactive(getDefaultState());

watch(
  () =&gt; state,
  () =&gt; {
    localStorage.setItem(STATE_NAME, JSON.stringify(state));
  },
  { deep: true }
);
export default () =&gt; {
  if (localStorage.getItem(STATE_NAME) === null) {
    localStorage.setItem(STATE_NAME, JSON.stringify(state));
  }
  return {
    state,
  };
};
</pre>
<h2 id="creating-actions">åˆ›å»ºæ“ä½œ</h2>
<p>æˆ‘ä»¬çš„æ“ä½œåŒ…æ‹¬å°†åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸‰ä¸ªå‡½æ•°:</p>
<ul>
<li><code>connectWalletConnect</code>ï¼Œè§¦å‘ WalletConnect æ¨¡å¼è¿æ¥é’±åŒ…</li>
<li><code>autoConnect</code>ï¼Œå®ƒåœ¨ DApp è¿æ¥åå¤„ç† WalletConnect ä¼šè¯å†…çš„ä¸€è‡´æ€§ï¼Œå› æ­¤å½“ DApp è¿æ¥ä¸”æ‚¨åˆ·æ–°é¡µé¢æ—¶ï¼Œç”¨æˆ·çš„ä¼šè¯ä»å¤„äºæ´»åŠ¨çŠ¶æ€</li>
<li><code>disconnectWallet</code>ï¼Œæ–­å¼€ DApp ä¸é’±åŒ…çš„è¿æ¥ï¼Œå¹¶ç»“æŸç”¨æˆ·çš„ä¼šè¯</li>
</ul>
<p>è®©æˆ‘ä»¬ç›´æ¥è¿›å…¥ä»£ç ï¼</p>
<h3 id="connectwalletconnect"><code>connectWalletConnect</code></h3>
<p>ä»ç„¶åœ¨æˆ‘ä»¬çš„<code>connect</code>æ–‡ä»¶å¤¹(<code>src/composables/connect</code>)ä¸­ï¼Œåˆ›å»º<code>connectWalletConnect</code>æ–‡ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»<code>ethers</code>å¯¼å…¥æˆ‘ä»¬çš„ç´¢å¼•æ–‡ä»¶<code>providers</code>ï¼Œä»¥åŠæˆ‘ä»¬ä¹‹å‰åœ¨<code>src/walletConnect/provider.js</code>æ–‡ä»¶ä¸­åˆ›å»ºçš„<code>provider</code>:</p>
<pre class="language-javascript hljs">import { providers } from "ethers";
import connect from "./index";
import { provider } from "../../walletConnect/provider";

const connectWalletConnect = async () =&gt; {
  try {
    const { state } = connect();
    //  Enable session (triggers QR Code modal)
    await provider.enable();
    const web3Provider = new providers.Web3Provider(provider);
    const signer = await web3Provider.getSigner();
    const address = await signer.getAddress();
    state.status = true;
    state.address = address;
    state.chainId = await provider.request({ method: "eth_chainId" });

    provider.on("disconnect", (code, reason) =&gt; {
      console.log(code, reason);
      console.log("disconnected");
      state.status = false;
      state.address = "";
      localStorage.removeItem("userState");
    });

    provider.on("accountsChanged", (accounts) =&gt; {
       if (accounts.length &gt; 0) {
        state.address = accounts[0];
      }
    });

    provider.on("chainChanged", (chainId) =&gt; {
      state.chainId = chainId
    });
  } catch (error) {
    console.log(error);
  }
};
export default connectWalletConnect;</pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª<code>try-catch</code>è¯­å¥ã€‚åœ¨æˆ‘ä»¬çš„<code>try</code>è¯­å¥ä¸­ï¼Œæˆ‘ä»¬ä»<code>connect()</code>è·å–çŠ¶æ€ï¼Œå¹¶å¼¹å‡ºæˆ‘ä»¬çš„ QR æ¨¡å¼è¿›è¡Œè¿æ¥ã€‚ä¸€æ—¦è¿æ¥ä¸Šï¼Œæˆ‘ä»¬å°±å°†æˆ‘ä»¬çš„<code>address</code>å’Œ<code>chainId</code>åˆ†é…ç»™çŠ¶æ€å±æ€§ï¼Œå¹¶ä½¿æˆ‘ä»¬çš„<code>state.status</code>è¯»ä¸º<code>true</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬ç”¨<code>provider</code> : <code>disconnect</code>ã€<code>accountsChanged</code>å’Œ<code>chainChainged</code>è§‚çœ‹ä¸‰ä¸ªäº‹ä»¶ã€‚</p>
<ul>
<li>ä¸€æ—¦ç”¨æˆ·ç›´æ¥æ–­å¼€é’±åŒ…è¿æ¥ï¼Œå°±ä¼šè§¦å‘<code>disconnect</code></li>
<li>å¦‚æœç”¨æˆ·åˆ‡æ¢é’±åŒ…ä¸­çš„è´¦æˆ·ï¼Œåˆ™è§¦å‘<code>accountsChanged</code>ã€‚å¦‚æœ<code>account</code>æ•°ç»„çš„é•¿åº¦å¤§äºé›¶ï¼Œæˆ‘ä»¬å°†<code>state.address</code>èµ‹ç»™æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªåœ°å€(<code>accounts[0]</code>ï¼Œè¿™æ˜¯å½“å‰åœ°å€</li>
<li>å¦‚æœç”¨æˆ·åˆ‡æ¢ä»–ä»¬çš„é“¾/ç½‘ç»œï¼Œåˆ™è§¦å‘<code>chainChainged</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä»–ä»¬å°†ä»–ä»¬çš„é“¾ä»ä»¥å¤ªåŠ mainnet åˆ‡æ¢åˆ° rinkeby testnetï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¼šå°†<code>state.chainId</code>ä»<code>1</code>æ›´æ”¹ä¸º<code>4</code></li>
</ul>
<p>ç„¶åï¼Œæˆ‘ä»¬çš„<code>catch</code>è¯­å¥ç®€å•åœ°å°†ä»»ä½•é”™è¯¯è®°å½•åˆ°æ§åˆ¶å°ã€‚</p>
<p>å›åˆ°<code>connect</code>æ–‡ä»¶å¤¹ä¸­çš„<code>index.js</code>æ–‡ä»¶ï¼Œå¯¼å…¥<code>connectWalletConnect</code>åŠ¨ä½œã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>actions</code>å¯¹è±¡å¹¶ç”¨æˆ‘ä»¬çš„<code>state</code>å¯¼å‡ºå®ƒ:</p>
<pre class="language-javascript hljs">import { reactive, watch } from "vue";
import connectWalletConnect from "./connectWalletConnect";

const STATE_NAME = "userState";
const defaultState = {
  address: "",
  chainId: "",
  status: false,
};
const getDefaultState = () =&gt; {
  if (localStorage.getItem(STATE_NAME) !== null) {
    return JSON.parse(localStorage.getItem(STATE_NAME));
  }
  return defaultState;
};
const state = reactive(getDefaultState());
const actions = {
  connectWalletConnect,
};
watch(
  () =&gt; state,
  () =&gt; {
    localStorage.setItem(STATE_NAME, JSON.stringify(state));
  },
  { deep: true }
);
export default () =&gt; {
  if (localStorage.getItem(STATE_NAME) === null) {
    localStorage.setItem(STATE_NAME, JSON.stringify(state));
  }
  return {
    state,
    ...actions,
  };
};</pre>
<h3 id="autoconnect"><code>autoConnect</code></h3>
<p>è®©æˆ‘ä»¬ç»§ç»­åˆ°<code>autoConnect.js</code>ï¼Œå’Œæˆ‘ä»¬çš„<code>actions</code>ã€‚ç±»ä¼¼äº<code>connectWalletConnect</code>ï¼Œåˆ›å»ºä¸€ä¸ª<code>autoConnect.js</code>æ–‡ä»¶ã€‚æˆ‘ä»¬å¯¼å…¥ç´¢å¼•æ–‡ä»¶å¹¶ä½¿ç”¨<code>connect()</code>å¯¹å…¶è¿›è¡Œææ„ä»¥è·å¾—æˆ‘ä»¬çš„<code>state</code>å’Œ<code>connectWalletConnect</code>:</p>
<pre class="language-javascript hljs">import connect from "./index";

const autoConnect = () =&gt; {
  const { state, connectWalletConnect } = connect();
  if (state.status) {
    if (localStorage.getItem("walletconnect") == null) {
      console.log("disconnected");
      console.log("disconnected");
      state.status = false;
      state.address = "";
      localStorage.removeItem("userState");
    }
    if (localStorage.getItem("walletconnect")) {
      (async () =&gt; {
        console.log("start");
        connectWalletConnect();
      })();
    }
  }
};
export default autoConnect;
</pre>
<p>æ‚¨åº”è¯¥çŸ¥é“çš„ä¸€ä»¶äº‹æ˜¯ï¼Œä¸€æ—¦ WalletConnect æˆåŠŸè¿æ¥åˆ° DAppï¼Œæ‰€æœ‰å…³äºè¯¥é’±åŒ…çš„ä¿¡æ¯(åŒ…æ‹¬åœ°å€å’Œé“¾ ID)éƒ½å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸­ä¸€ä¸ªåä¸º<code>walletconnect</code>çš„é¡¹ç›®ä¸‹ã€‚ä¸€æ—¦ä¼šè¯æ–­å¼€ï¼Œå®ƒå°±ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</p>
<p><code>autoConnect</code>æ£€æŸ¥æˆ‘ä»¬çš„<code>state.status</code>æ˜¯å¦ä¸ºçœŸã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­æ˜¯å¦æœ‰ä¸€ä¸ª<code>walletConnect</code>é¡¹ç›®ã€‚å¦‚æœå®ƒä¸åœ¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œæˆ‘ä»¬åˆ é™¤æˆ‘ä»¬çŠ¶æ€ä¸­çš„æ‰€æœ‰ç°æœ‰æ•°æ®å’Œæœ¬åœ°å­˜å‚¨ä¸­çš„<code>userState</code>é¡¹ã€‚</p>
<p>ç„¶è€Œï¼Œå¦‚æœ<code>walletconnect</code>å­˜åœ¨äºæ‚¨çš„æœ¬åœ°å­˜å‚¨ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒé€šè¿‡è§¦å‘<code>connectWalletConnect();</code>ä¸ºæˆ‘ä»¬çš„ DAppâ€œé‡æ–°æ¿€æ´»â€ç°æœ‰ä¼šè¯ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œè¿æ¥ä»ç„¶æœ‰æ•ˆï¼Œå¯ä»¥ç›‘å¬æˆ‘ä»¬çš„<code>provider</code>äº‹ä»¶ã€‚</p>
<h3 id="disconnectwallet"><code>disconnectWallet</code></h3>
<p>å†æ¥çœ‹æˆ‘ä»¬çš„æœ€åä¸€ä¸ªåŠ¨ä½œ:<code>disconnectWallet</code>ã€‚æ­¤æ“ä½œå…è®¸æˆ‘ä»¬ä» DApp æœ¬èº«ç»“æŸä¼šè¯ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¼å…¥æä¾›è€…å’Œå·ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>provider.disconnect();</code>æ¥æ–­å¼€ä¼šè¯ï¼Œä¹‹åæˆ‘ä»¬å°†çŠ¶æ€é‡ç½®å›é»˜è®¤å€¼ï¼Œå¹¶åˆ é™¤æœ¬åœ°å­˜å‚¨ä¸­çš„<code>"userState"</code>é¡¹:</p>
<pre class="language-javascript hljs">import { provider } from "../../walletConnect/provider";
import connect from "./index";
const disconnectWallet = async () =&gt; {
    const { state } = connect();
    await provider.disconnect();
    state.status = false;
    state.address = "";
    localStorage.removeItem("userState");
  }
export default disconnectWallet;
</pre>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥å›åˆ°æˆ‘ä»¬çš„<code>src/composables/connect/index.js</code>å¹¶åƒè¿™æ ·æ›´æ–°<code>actions</code>å¯¹è±¡:</p>
<pre class="language-javascript hljs">const actions = {
  connectWalletConnect,
  autoConnect,
  disconnectWallet
};
</pre>
<h2 id="implementing-logic-components">åœ¨æˆ‘ä»¬çš„ç»„ä»¶ä¸­å®ç°é€»è¾‘</h2>
<p>è®©æˆ‘ä»¬æ‰“å¼€æˆ‘ä»¬çš„<code>StatusContainer</code>ç»„ä»¶ï¼Œå¹¶å°†ç»„ä»¶ä¸­çš„é€»è¾‘è¿æ¥åˆ°æ¥å£ã€‚åƒå¾€å¸¸ä¸€æ ·ï¼Œå¯¼å…¥æ‚¨çš„å¯ç»„åˆæ–‡ä»¶å¹¶ææ„å®ƒä»¥è·å¾—åŠ¨ä½œ(è¿æ¥å’Œæ–­å¼€)å’Œæˆ‘ä»¬çš„çŠ¶æ€:</p>
<pre class="language-javascript hljs">&lt;script&gt;
import connect from '../composables/connect/index';
export default {
  name: 'StatusContainer',
  setup: () =&gt; {
    const { connectWalletConnect, disconnectWallet, state } = connect();
    const connectUserWallet = async () =&gt; {
      await connectWalletConnect();
    };

    const disconnectUser = async() =&gt; {
      await disconnectWallet()
    }
    return {
      connectUserWallet,
      disconnectUser,
      state
    }
  }
}
&lt;/script&gt;
</pre>
<p>ç„¶åæˆ‘ä»¬è¿”å›è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨çš„å‡½æ•°(<code>disconnectUser</code>ã€<code>connectUserWallet</code>)å’Œ<code>state</code>:</p>
<pre class="language-javascript hljs"> &lt;template&gt;
  &lt;div class="hello"&gt;
    &lt;h1&gt;Welcome to Your Vue.js Dapp&lt;/h1&gt;
    &lt;div v-if="state.status"&gt;
       &lt;button  @click="connectUserWallet" class="button"&gt;Connected&lt;/button&gt;
       &lt;h3&gt;Address: {{state.address}}&lt;/h3&gt;
       &lt;h3&gt;ChainId: {{state.chainId}}&lt;/h3&gt;
       &lt;button  @click="disconnectUser" class="disconnect__button"&gt;Disconnect&lt;/button&gt;
    &lt;/div&gt;

    &lt;button v-else @click="connectUserWallet" class="button"&gt; Connect Wallet&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</pre>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨<code>v-if</code>æœ‰æ¡ä»¶åœ°æ˜¾ç¤ºäº‹ç‰©ï¼Œä½¿ç”¨<code>state.status</code>ã€‚å¦‚æœæˆ‘ä»¬å·²è¿æ¥å¹¶ä¸”<code>state.status</code>ä¸ºçœŸï¼Œæˆ‘ä»¬æ˜¾ç¤º<strong>å·²è¿æ¥</strong>æŒ‰é’®ã€ç”¨æˆ·<code>address</code>å’Œ<code>chainId</code>ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºä¸€ä¸ª<strong>æ–­å¼€</strong>æŒ‰é’®ï¼Œè¯¥æŒ‰é’®è§¦å‘æˆ‘ä»¬çš„<code>disconnectUser</code>åŠŸèƒ½ã€‚</p>
<p><img data-attachment-id="114962" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/disconnecting-the-user-from-current-session/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session..gif" data-orig-size="600,1333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Disconnecting the user from current session." data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session.-135x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session.-461x1024.gif" decoding="async" class="size-full wp-image-114962 aligncenter jetpack-lazy-image" src="../Images/fa25f84f0e1afd8a1c52ef0036586e44.png" alt="Disconnecting the user from current session." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session..gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session..gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114962" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/disconnecting-the-user-from-current-session/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session..gif" data-orig-size="600,1333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Disconnecting the user from current session." data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session.-135x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session.-461x1024.gif" decoding="async" loading="lazy" class="size-full wp-image-114962 aligncenter" src="../Images/fa25f84f0e1afd8a1c52ef0036586e44.png" alt="Disconnecting the user from current session." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Disconnecting-the-user-from-current-session..gif"/></noscript>
<p>å¦‚æœç”¨æˆ·æ²¡æœ‰è¿æ¥å¹¶ä¸”<code>state.status</code>æ˜¯<code>false</code>ï¼Œæˆ‘ä»¬åªæ˜¾ç¤º<strong>è¿æ¥é’±åŒ…</strong>æŒ‰é’®ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æ—¶è§¦å‘æˆ‘ä»¬çš„<code>connectUserWallet</code>åŠŸèƒ½ã€‚</p>
<p><img data-attachment-id="114964" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/connecting-wallet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet.gif" data-orig-size="600,1333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting wallet" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet-135x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet-461x1024.gif" decoding="async" class="size-full wp-image-114964 aligncenter jetpack-lazy-image" src="../Images/61e5933480323f145325b78987ded4a0.png" alt="Connecting wallet" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="114964" data-permalink="https://blog.logrocket.com/integrating-walletconnect-vue-js-dapps/connecting-wallet/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet.gif" data-orig-size="600,1333" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Connecting wallet" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet-135x300.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet-461x1024.gif" decoding="async" loading="lazy" class="size-full wp-image-114964 aligncenter" src="../Images/61e5933480323f145325b78987ded4a0.png" alt="Connecting wallet" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/06/Connecting-wallet.gif"/></noscript>
<h2 id="adding-auto-connect">æ·»åŠ è‡ªåŠ¨è¿æ¥</h2>
<p>è®©æˆ‘ä»¬è¿›å…¥æˆ‘ä»¬çš„<code>App.vue</code>ç»„ä»¶ï¼Œå¹¶å°†æˆ‘ä»¬çš„<code>autoConnect</code>é€»è¾‘æ·»åŠ åˆ°ç»„ä»¶ä¸­ã€‚ç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰æ‰€åšçš„ï¼Œæˆ‘ä»¬å¯¼å…¥æˆ‘ä»¬çš„å¯ç»„åˆç»„ä»¶ï¼Œç„¶åææ„å®ƒä»¥è·å¾—<code>autoConnect</code>åŠ¨ä½œã€‚ä½¿ç”¨ Vue çš„<code>onMounted</code>ï¼Œæˆ‘ä»¬å°†å¯åŠ¨<code>autoConnect()</code>åŠŸèƒ½ã€‚å¦‚å‰æ‰€è¿°ï¼Œå³ä½¿æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é’±åŒ…æ”¶å¬å®æ—¶äº‹ä»¶:</p>
<pre class="language-javascript hljs">&lt;script&gt;
import StatusContainer from './components/StatusContainer.vue'
import connect from './composables/connect/index';
import {onMounted} from "vue";
export default {
  name: 'App',
  components: {
    StatusContainer
  },
  setup: () =&gt; {
    const { autoConnect} = connect();
     onMounted(async () =&gt; {
      await autoConnect()
    })
  }
}
&lt;/script&gt;
</pre>
<h2>ç»“è®º</h2>
<p>å¦‚æœä½ ä¸€è·¯èµ°åˆ°è¿™é‡Œï¼Œæ­å–œä½ ï¼<strong>ğŸ‰</strong></p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€æ­¥ä»‹ç»äº†åœ¨ Vue DApps ä¸­å®ç° WalletConnect çš„ç»†èŠ‚ã€‚ä»ä½¿ç”¨æ­£ç¡®çš„é…ç½®è®¾ç½®æˆ‘ä»¬çš„é¡¹ç›®å’Œæ„å»ºæˆ‘ä»¬çš„ç•Œé¢ï¼Œåˆ°ç¼–å†™å¿…è¦çš„é€»è¾‘ä»¥ç¡®ä¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå§‹ç»ˆä¸é’±åŒ…åŒæ­¥ã€‚</p><div class="code-block code-block-20">
<div class="blog-plug inline-plug vue-inline"><h2>åƒç”¨æˆ·ä¸€æ ·ä½“éªŒæ‚¨çš„ Vue åº”ç”¨</h2><p>è°ƒè¯• Vue.js åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯å½“ç”¨æˆ·ä¼šè¯æœŸé—´æœ‰å‡ åä¸ª(å¦‚æœä¸æ˜¯å‡ ç™¾ä¸ª)çªå˜æ—¶ã€‚å¦‚æœæ‚¨å¯¹ç›‘è§†å’Œè·Ÿè¸ªç”Ÿäº§ä¸­æ‰€æœ‰ç”¨æˆ·çš„ Vue çªå˜æ„Ÿå…´è¶£ï¼Œ</p><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/0d269845910c723dd7df26adab9289cb.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://files.readme.io/00591d0-687474703a2f2f692e696d6775722e636f6d2f6a3049327856572e706e67.png"/></noscript></a><a href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p>LogRocket å°±åƒæ˜¯ç½‘ç»œå’Œç§»åŠ¨åº”ç”¨ç¨‹åºçš„ DVRï¼Œè®°å½•ä½ çš„ Vue åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿçš„ä¸€åˆ‡ï¼ŒåŒ…æ‹¬ç½‘ç»œè¯·æ±‚ã€JavaScript é”™è¯¯ã€æ€§èƒ½é—®é¢˜ç­‰ç­‰ã€‚æ‚¨å¯ä»¥æ±‡æ€»å¹¶æŠ¥å‘Šé—®é¢˜å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯çŒœæµ‹é—®é¢˜å‘ç”Ÿçš„åŸå› ã€‚</p><p>LogRocket Vuex æ’ä»¶å°† Vuex çªå˜è®°å½•åˆ° LogRocket æ§åˆ¶å°ï¼Œä¸ºæ‚¨æä¾›å¯¼è‡´é”™è¯¯çš„ç¯å¢ƒï¼Œä»¥åŠå‡ºç°é—®é¢˜æ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚</p><p>ç°ä»£åŒ–æ‚¨è°ƒè¯• Vue åº”ç”¨çš„æ–¹å¼- <a class="signup" href="https://lp.logrocket.com/blg/vue-signup" target="_blank" rel="noopener noreferrer">å¼€å§‹å…è´¹ç›‘æ§</a>ã€‚</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>