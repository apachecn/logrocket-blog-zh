<html>
<head>
<title>Deep dive into Laravel Livewire - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>æ·±å…¥äº†è§£ Laravel Livewire - LogRocket åšå®¢</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/deep-dive-into-laravel-livewire/#0001-01-01">https://blog.logrocket.com/deep-dive-into-laravel-livewire/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Laravel Livewire æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåŠ¨æ€ç•Œé¢çš„å…¨æ ˆ Laravel æ¡†æ¶ã€‚åœ¨ä¸ä¹…å‰ï¼Œè¦ç”¨ Laravel æ„å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½ è¦ä¹ˆå¿…é¡»:</p>
<ol>
<li>ç¼–å†™åˆ€ç‰‡æ¨¡æ¿å¹¶åœ¨æœåŠ¡å™¨ç«¯å‘ˆç°æ‚¨çš„åº”ç”¨</li>
<li>å°†åç«¯ç¼–å†™ä¸ºæ¥å—å’Œå“åº” JSON çš„ APIï¼Œç„¶åä½¿ç”¨ Vueã€React æˆ– Angular ç­‰å‰ç«¯æ¡†æ¶æ¥ä½¿ç”¨ API å’Œå®ç° UI</li>
</ol>
<p>ä½†æ˜¯ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ç¬¬ä¸‰ä¸ªé€‰æ‹©:Livewireã€‚æˆ‘å¾ˆæƒ³æ·±å…¥æ¢è®¨ä¸Šé¢é€‰é¡¹ 1 å’Œ 2 çš„åˆ©å¼Šï¼Œä½†è¿™å·²ç»åœ¨<a href="https://blog.logrocket.com/livewire-vs-vue/">è¿™ç¯‡å†™å¾—å¾ˆå¥½çš„æ–‡ç« </a>ä¸­å¾—åˆ°äº†å…¬æ­£çš„è¯„ä»·ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Livewireï¼Œçœ‹çœ‹å®ƒå¦‚ä½•åº”ç”¨äºç°å®åº”ç”¨ä¸­ã€‚</p>
<h3>æˆ‘ä»¬å°†å»ºé€ ä»€ä¹ˆ</h3>
<p>æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªç®€å•çš„åšå®¢åº”ç”¨ç¨‹åºï¼Œå…·æœ‰ä»¥ä¸‹åŠŸèƒ½:</p>
<ol>
<li>ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºå¸æˆ·å¹¶ç™»å½•</li>
<li>ç™»å½•çš„ç”¨æˆ·å¯ä»¥åˆ›å»ºå’Œæ›´æ–°ä»–ä»¬è‡ªå·±çš„å¸–å­</li>
<li>ä»»ä½•äººéƒ½å¯ä»¥é˜…è¯»å¸–å­</li>
</ol>
<h2>å…ˆå†³æ¡ä»¶å’Œè®¾ç½®</h2>
<p>æœ¬æ•™ç¨‹å‡è®¾æ‚¨å¯¹ Laravel ç›¸å½“æœ‰ç»éªŒ(æ³¨æ„ï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯ Laravel 7.x)ã€‚ä¸éœ€è¦äº‹å…ˆæœ‰ä½¿ç”¨ Livewire çš„ç»éªŒâ€”â€”æˆ‘æƒ³è¿™å°±æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œçš„åŸå› ã€‚</p>
<p>å½“ç„¶ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»å»ºç«‹æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Laravel åº”ç”¨ç¨‹åº:</p>
<pre>composer create-project --prefer-dist laravel/laravel:^7.0 blog-wire
</pre>
<p>ç„¶åç”¨ composer å®‰è£… Livewire è½¯ä»¶åŒ…:</p>
<pre>composer require livewire/livewire
</pre>
<p>åˆ›å»ºä¸€ä¸ªæ–°æ•°æ®åº“ï¼Œå¹¶å°†æ‚¨çš„æ•°æ®åº“å‡­è¯æ·»åŠ åˆ°<code>.env</code>æ–‡ä»¶ä¸­ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¼€å§‹â€œç›´æ’­è¿çº¿â€æ‰€éœ€è¦çš„ä¸€åˆ‡ï¼</p>
<h2>Livewire æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæœ€å¥½å…ˆäº†è§£ä¸€ä¸‹ Livewire æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ¦‚æ‹¬åœ°è¯´:</p>
<ul>
<li>Livewire å°†åˆå§‹ç»„ä»¶è¾“å‡ºå‘ˆç°åˆ°é¡µé¢ä¸Šâ€”â€”æ˜¯çš„ï¼Œå°±åƒå…¸å‹çš„æœåŠ¡å™¨å‘ˆç°çš„åˆ€ç‰‡æ¨¡æ¿ä¸€æ ·</li>
<li>å½“äº¤äº’å‘ç”Ÿæ—¶ï¼ŒLivewire ç”¨æ›´æ–°çš„æ•°æ®å‘æœåŠ¡å™¨å‘å‡º AJAX è¯·æ±‚</li>
<li>æœåŠ¡å™¨é‡æ–°å‘ˆç°ç»„ä»¶ï¼Œå¹¶ç”¨æ›´æ–°çš„ HTML è¿›è¡Œå“åº”</li>
<li>ç„¶åï¼ŒLivewire æ ¹æ®å˜åŒ–çš„å†…å®¹æ™ºèƒ½åœ°æ”¹å˜ DOM</li>
</ul>
<p>å¦‚ä½ æ‰€è§ï¼Œè¿™å°±åƒæŠŠä½ çš„å‰ç«¯å’Œåç«¯æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œä¸éœ€è¦é‡å¤é€»è¾‘ã€‚</p>
<h2>Livewire ä¸­çš„å…³é”®æ¦‚å¿µ</h2>
<h3>åœ¨é¡µé¢ä¸Šæ¿€æ´» Livewire</h3>
<p>è¦è®© Livewire åœ¨é¡µé¢ä¸Šå·¥ä½œï¼Œæ‚¨éœ€è¦åœ¨æ¯ä¸ªéœ€è¦çš„é¡µé¢ä¸ŠåŒ…å« Livewire æ ·å¼å’Œè„šæœ¬ã€‚é€šå¸¸ï¼Œè¿™äº›ä¼šè¿›å…¥ä½ çš„åŸºæœ¬æ¨¡æ¿ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>@livewireStyles</code>å’Œ<code>@livewireScripts</code>æ¥å®ç°:</p>
<pre>//app.blade.php
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;@yield('title')&lt;/title&gt;
    @livewireStyles
&lt;/head&gt;
&lt;body&gt;
    @yield('content')
    @livewireScripts
&lt;/body&gt;
&lt;/html&gt;
</pre>
<h3>Livewire ç»„ä»¶</h3>
<p>Livewire å›´ç»•å…¶ç»„ä»¶ç«­å°½å…¨åŠ›ã€‚Livewire ç»„ä»¶ä¸å…¸å‹çš„åŸºäº Laravel åˆ€ç‰‡ç±»çš„ç»„ä»¶éå¸¸ç›¸ä¼¼ã€‚è®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªã€‚</p>
<h4>åˆ›å»º Laravel åˆ€ç‰‡ç»„ä»¶</h4>
<p>æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª Laravel åˆ€ç‰‡ç»„ä»¶:</p>
<pre>php artisan make:component Alert
</pre>
<p>è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„<code>Alert.php</code>ç±»æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ”¾åœ¨<code>App\Views\Components</code>æ–‡ä»¶å¤¹ä¸­ã€‚ç„¶åï¼Œç›¸åº”çš„è§†å›¾æ¨¡æ¿è¢«åˆ›å»ºå¹¶æ”¾ç½®åœ¨<code>resources/views/components</code>ä¸­ã€‚ä¸ºäº†æ˜¾ç¤ºç»„ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ª Blade è¯­æ³•:<code>&lt;x-alert/&gt;</code>ã€‚</p>
<p>æ‚¨å¯ä»¥åœ¨<a href="https://laravel.com/docs/7.x/blade#components">æ–‡æ¡£</a>ä¸­è¿›ä¸€æ­¥äº†è§£ Laravel åˆ€ç‰‡ç»„ä»¶ã€‚</p>
<h4>åˆ›å»º Livewire ç»„ä»¶</h4>
<p>è¦åˆ›å»º Livewire ç»„ä»¶ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre>php artisan make:livewire Alert
</pre>
<p>è¯¥å‘½ä»¤è¿˜å°†åˆ›å»ºä¸¤ä¸ªæ–°æ–‡ä»¶:<code>app\Http\Livewire\Alert.php</code>å’Œä¸€ä¸ªè§†å›¾æ¨¡æ¿<code>resources/views/livewire/alert.php</code>ã€‚</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨<code>&lt;livewire:alert /&gt;</code>æˆ–<code>@livewire('alert')</code>æ¸²æŸ“ Livewire ç»„ä»¶ã€‚</p>
<p>å¦‚æ‚¨æ‰€è§ï¼Œè¿™äº›å‘½ä»¤çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ã€‚å”¯ä¸€çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¯¹äº Livewire ç»„ä»¶ï¼Œåœ¨ç»„ä»¶ç±»å’Œå®ƒçš„è§†å›¾æ¨¡æ¿ä¹‹é—´æœ‰ä¸€ä¸ªå®æ—¶åŒæ­¥(ä¸éœ€è¦åˆ·æ–°é¡µé¢)ã€‚æˆ‘ä»¬å°†å¾ˆå¿«çœ‹åˆ°è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h3>Livewire å±æ€§</h3>
<p>ç»„ä»¶æ¨¡æ¿è§†å›¾å¯ä»¥ä½¿ç”¨ç»„ä»¶ç±»çš„å…¬å…±å±æ€§ã€‚ä¸æ­¢äºæ­¤â€”â€”å±æ€§çš„å€¼ä¸è§†å›¾å®æ—¶åŒæ­¥ï¼Œå› æ­¤å½“æ‚¨åœ¨è§†å›¾ä¸­æ›´æ–°å±æ€§çš„å€¼æ—¶ï¼Œå®ƒä¼šåœ¨ç»„ä»¶ç±»ä¸­è‡ªåŠ¨æ›´æ–°ã€‚</p>
<pre>//App\Http\Livewire\Alert.php
&lt;?php
class Alert extends Component{
  public $message = "Our alert message";
}

// livewire/alert.blade.php
&lt;div&gt;
  &lt;input wire:model="message"&gt;
  &lt;br/&gt;
  {{ $message }}
&lt;/div&gt;
</pre>
<p>è¦å°†ç»„ä»¶å±æ€§ç»‘å®šåˆ° html input å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ sytax:</p>
<pre>wire:model="property name"
</pre>
<p>åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ï¼Œå°±ä¼šçœ‹åˆ°<code>$message</code>çš„å€¼å®æ—¶æ›´æ–°ã€‚è¿™ä¸ Vue.jsã€Reactã€Angular ç­‰æ¡†æ¶ä¸­çš„æ•°æ®ç»‘å®šæ¦‚å¿µéå¸¸ç›¸ä¼¼ã€‚ç‚¹å‡»äº†è§£æ›´å¤šå…³äº Livewire å±æ€§<a href="https://laravel-livewire.com/docs/2.x/properties">çš„ä¿¡æ¯ã€‚</a></p>
<h3>Livewire åŠ¨ä½œ</h3>
<p>æ­£å¦‚æ‚¨å¯ä»¥å°†è§†å›¾æ¨¡æ¿ä¸­çš„æ•°æ®ç»‘å®šåˆ°ç»„ä»¶çš„å…¬å…±å±æ€§ä¸€æ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†å®¢æˆ·ç«¯äº‹ä»¶æ˜ å°„åˆ°ç»„ä»¶ä¸­çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å“åº” click äº‹ä»¶ã€keyup å’Œ keydown äº‹ä»¶ç­‰ã€‚ä½¿ç”¨ç»„ä»¶ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­:</p>
<pre>&lt;?php

use Livewire\Component;
class PostAlert extends Component{
  public $liked = true;
  public function render(){
    return view('livewire.post-alert');
  }

  public function toggleLike(){
    $this-&gt;liked = !$this-&gt;liked;
  }
}


// livewire/post-alert.blade.php
&lt;div&gt;
    &lt;h4&gt;Seeing livewire action in action ğŸ˜œ&lt;/h4&gt;
    &lt;button class="btn btn-primary" wire:click="toggleLike()"&gt;
        Like
    &lt;/button&gt;
    @if ($liked)
        &lt;i class="fa fa-heart text-danger h4"&gt;&lt;/i&gt;
    @else
        &lt;i class="fa fa-heart text-secondary h4"&gt;&lt;/i&gt;
    @endif
&lt;/div&gt;
</pre>
<p>åœ¨ä¸Šé¢çš„ç»„ä»¶ç±»ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–¹æ³•<code>toggleLike()</code>,è¯¥æ–¹æ³•å°†<code>liked</code>å±æ€§çš„å€¼åˆ‡æ¢åˆ°å…¶ç›¸åçš„å¸ƒå°”å€¼ã€‚åœ¨æ¨¡æ¿è§†å›¾ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®å’Œä¸€ä¸ªå¿ƒå½¢å›¾æ ‡ï¼Œæ ¹æ®<code>liked</code>å±æ€§çš„å€¼ï¼Œè¯¥å›¾æ ‡è¢«æŸ“æˆçº¢è‰²æˆ–ç°è‰²ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨äº†<code>wire:click=[action name]</code>è¯­æ³•å°†<code>toggleLike</code>æ–¹æ³•ç»‘å®šåˆ°ç‚¹å‡»äº‹ä»¶ã€‚</p>
<figure id="attachment_34979" aria-describedby="caption-attachment-34979" class="wp-caption aligncenter"><img data-attachment-id="34979" data-permalink="https://blog.logrocket.com/deep-dive-into-laravel-livewire/livewire-action-togglelike-event/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif" data-orig-size="500,181" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Livewire-Action-ToggleLike-Event" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event-300x109.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif" decoding="async" class="wp-image-34979 size-full jetpack-lazy-image" src="../Images/ff02f6bee7bda7235052eec0e9da8e24.png" alt="Livewire Action ToggleLike Event" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif"/><noscript><img data-lazy-fallback="1" data-attachment-id="34979" data-permalink="https://blog.logrocket.com/deep-dive-into-laravel-livewire/livewire-action-togglelike-event/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif" data-orig-size="500,181" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Livewire-Action-ToggleLike-Event" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event-300x109.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif" decoding="async" loading="lazy" class="wp-image-34979 size-full" src="../Images/ff02f6bee7bda7235052eec0e9da8e24.png" alt="Livewire Action ToggleLike Event" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/Livewire-Action-ToggleLike-Event.gif"/></noscript><figcaption id="caption-attachment-34979" class="wp-caption-text">Livewire action toggling a button.</figcaption></figure>
<p>è®¸å¤š Livewire çš„ç”¨ä¾‹éƒ½å›´ç»•ç€å±æ€§å’ŒåŠ¨ä½œï¼Œå› æ­¤ï¼Œç†è§£å®ƒä»¬éå¸¸é‡è¦ã€‚è¿™äº›æ¦‚å¿µå¯ä»¥é€‚ç”¨äº<code>create form</code>ã€<code>edit form</code>ã€<code>delete form</code>ç­‰äº‹ç‰©ã€‚ç‚¹å‡»é˜…è¯»æ›´å¤šå…³äº Livewire è¡ŒåŠ¨<a href="https://laravel-livewire.com/docs/2.x/actions">çš„ä¿¡æ¯ã€‚</a></p>
<h3>æ•°æ®æœ‰æ•ˆæ€§</h3>
<p>Livewire ä½¿æ•°æ®éªŒè¯æ— ç¼åŒ–ã€‚è¦éªŒè¯æ¥è‡ªè¡¨å•æ¨¡æ¿è§†å›¾çš„æ•°æ®ï¼Œæ‚¨éœ€è¦ç¼–å†™ä¸€ä¸ªåŒ…å«éªŒè¯è§„åˆ™çš„<code>$rules</code>å±æ€§ï¼Œå°±åƒåœ¨ Laravel ä¸­ä¸€æ ·ã€‚æ­¤åï¼Œæ‚¨è°ƒç”¨æ–¹æ³•ä¸­çš„<code>$thisâ†’validate()</code>è¿›è¡ŒéªŒè¯ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåˆ›å»ºåšå®¢å¸–å­çš„è¡¨å•:</p>
<pre>...
class CreatePost extends Component
{
    public $title, $body;
    public $success;
    protected $rules = [
        'title' =&gt; 'required|string|max:220',
        'body' =&gt; 'required'
    ];

    public function render()
    {
        return view('livewire.create-post')
            -&gt;extends('layouts.app')
            -&gt;section('content');
    }
    public function create(){
        $this-&gt;validate();
        Post::create([
            'title' =&gt; $this-&gt;title,
            'slug' =&gt; Str::slug($this-&gt;title),
            'body' =&gt; $this-&gt;body,
            'author_id' =&gt; auth()-&gt;id()
        ]);

        $this-&gt;success = true;
    }
}


// livewire/create-post
&lt;div class="container"&gt;
    @if ($success)
        &lt;div class="alert alert-success"&gt;
            Post has been created successfully
        &lt;/div&gt;
    @endif
    &lt;form wire:submit.prevent="create"&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="Post title"&gt;Post title&lt;/label&gt;
            &lt;input wire:model="title" type="text" name="title" id="title" class="form-control" placeholder="Title of the post"&gt;
            @error('title') &lt;span class="error"&gt;{{ $message }}&lt;/span&gt; @enderror
        &lt;/div&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="Post body"&gt;Post Body&lt;/label&gt;
            &lt;textarea name="body" id="body" placeholder="Body of post here..." wire:model="body" class="form-control"&gt;&lt;/textarea&gt;
            @error('body') &lt;span class="error"&gt;{{ $message }}&lt;/span&gt; @enderror
        &lt;/div&gt;
        &lt;div&gt;
            &lt;button class="btn btn-primary" type="submit"&gt;Publish&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;
</pre>
<p>åœ¨ä¸Šé¢çš„è¡¨å•ä»£ç ä¸­ï¼Œå½“ç”¨æˆ·æäº¤å¸–å­æ—¶ï¼Œå¦‚æœå¸–å­æ²¡æœ‰é€šè¿‡éªŒè¯ï¼Œå°±ä¼šæ˜¾ç¤ºéªŒè¯é”™è¯¯ï¼Œå¹¶ä¸”ä¸ä¼šåˆ·æ–°é¡µé¢ã€‚</p>
<h2>Laravel Livewire å…¥é—¨</h2>
<p>è¯´å¾—å¤Ÿå¤šäº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹è¡ŒåŠ¨å§ã€‚å½“æˆ‘ä»¬æ„å»ºæˆ‘ä»¬çš„æ¼”ç¤ºåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨å¯ä»¥åœ¨<a href="https://github.com/sdkcodes/laravel-livewire-tutorial"> GitHub repo </a>ä¸­è·Ÿéšæˆ‘ä»¬ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å¸Œæœ›ç™»å½•çš„ç”¨æˆ·èƒ½å¤Ÿç®¡ç†ä»–ä»¬è‡ªå·±çš„å¸–å­ï¼Œä»–ä»¬å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ªå¸æˆ·ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Laravel çš„å†…ç½®<a href="https://laravel.com/docs/7.x/authentication">è®¤è¯ç³»ç»Ÿ</a>ã€‚</p>
<p>é¦–å…ˆï¼Œå®‰è£… laravel/ui composer åŒ…:</p>
<pre>composer require laravel/ui
</pre>
<p>ç„¶åè¿è¡Œ<code>php artisan ui vue --auth</code>æ¥æ­å»ºæ•´ä¸ªè®¤è¯ç³»ç»Ÿï¼Œæ¥ç€è¿è¡Œ<code>php artisan migrate</code>æ¥è¿›è¡Œæ•°æ®åº“è¿ç§»ã€‚</p>
<blockquote><p><strong>æ³¨æ„äº‹é¡¹</strong>ã€‚ï¼Œæˆ‘ä»¬è¿‡å»ç”¨æ§åˆ¶å™¨åšçš„å¤§å¤šæ•°äº‹æƒ…ç°åœ¨å°†ä½¿ç”¨ Livewire ç»„ä»¶æ¥å®Œæˆã€‚</p></blockquote>
<p>è®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºæˆ‘ä»¬çš„åšå®¢å¸–å­åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ¨¡å‹ï¼Œ<code>App\Post</code>:</p>
<pre>&lt;?php
namespace App;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
class Post extends Model
{
    use SoftDeletes;

    protected $guarded = [];
    public function author(){
        return $this-&gt;belongsTo(User::class, 'author_id', 'id');
    }
}
</pre>
<p>ç°åœ¨æˆ‘ä»¬å°†åˆ›å»ºæˆ‘ä»¬çš„è¿ç§»æ–‡ä»¶ï¼Œ<br/> <code>php artisan make:migration create_posts_table--table=posts:</code></p>
<pre>Schema::create('posts', function (Blueprint $table) {
            $table-&gt;id();
            $table-&gt;string('title');
            $table-&gt;string('slug')-&gt;unique();
            $table-&gt;longText('body');
            $table-&gt;integer('author_id');
            $table-&gt;timestamps();
            $table-&gt;softDeletes();
});
</pre>
<h3>åˆ›å»ºç»„ä»¶</h3>
<p>æˆ‘ä»¬å°†ä¸ºæˆ‘ä»¬æƒ³è¦çš„æ¯ä¸ªåšå®¢æ“ä½œåˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œå³åˆ›å»ºå¸–å­ã€ç¼–è¾‘å¸–å­ã€åˆ—å‡ºå¸–å­å’ŒæŸ¥çœ‹å¸–å­ã€‚è®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºç»„ä»¶:</p>
<ul>
<li><code>php artisan make:livewire CreatePost</code></li>
<li><code>php artisan make:livewire EditPost</code></li>
<li><code>php artisan make:livewire ListPost</code></li>
<li><code>php artisan make:livewire HomePost</code></li>
<li><code>php artisan make:livewire ReadPost</code></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·ç›´æ¥ä»è·¯çº¿ä¸­å‘ˆç° Livewire ç»„ä»¶:</p>
<pre>Route::get('/posts/create', [\App\Http\Livewire\CreatePost::class, '__invoke'])-&gt;middleware('auth');
</pre>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å°†è·¯ç”±åˆ° Livewire ç»„ä»¶ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ§åˆ¶å™¨åŠ¨ä½œã€‚ç°åœ¨è®©æˆ‘ä»¬åœ¨<code>web.php</code>ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰è·¯çº¿:</p>
<pre>Route::get('/', function () {
    return view('index');
});
Auth::routes();
Route::get('/post/{slug}', [\App\Http\Livewire\ReadPost::class, '__invoke']);
Route::get('/home', '<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2f6740424a6c40415b5d4043434a5d6f46414b4a57">[emailÂ protected]</a>')-&gt;name('home');
Route::get('/posts/create', [\App\Http\Livewire\CreatePost::class, '__invoke'])-&gt;middleware('auth');
Route::get('/posts/{id}/edit', [\App\Http\Livewire\EditPost::class, '__invoke'])-&gt;middleware('auth');
</pre>
<p>å‘ˆç°æ–‡ç« åˆ—è¡¨çš„ç»„ä»¶å°†å¦‚ä¸‹æ‰€ç¤º:</p>
<pre>//ListPost.php
&lt;?php
namespace App\Http\Livewire;
use Livewire\Component;
class ListPost extends Component
{
    public function render()
    {
        $posts = \App\Post::latest()-&gt;paginate(20);
        return view('livewire.list-post', ['posts' =&gt; $posts])
            -&gt;extends('layouts.app')
            -&gt;section('content');
    }
}



//livewire/list-post.blade.php
&lt;div&gt;
    &lt;h4&gt;My Posts &lt;a href="{{ url('posts/create') }}" class="btn btn-primary"&gt;&lt;i class="fa fa-plus"&gt;&lt;/i&gt; Add new&lt;/a&gt;&lt;/h4&gt;
    &lt;ul class="list-group list-group-flush"&gt;
        @forelse ($posts as $post)
            &lt;li class="list-group-item"&gt;

                &lt;div class="float-right"&gt;
                    &lt;a href='{{ url("posts/{$post-&gt;id}/edit") }}' class="btn btn-primary"&gt;&lt;i class="fa fa-edit"&gt;&lt;/i&gt; Edit&lt;/a&gt;
                &lt;/div&gt;
                &lt;div&gt;
                    &lt;h5&gt;{{ $post-&gt;title }}&lt;/h5&gt;
                    &lt;p&gt;{!! substr(strip_tags($post-&gt;body), 0, 200) !!}&lt;/p&gt;
                    &lt;small class="text-muted"&gt;Published {{ $post-&gt;created_at }}&lt;/small&gt;
                &lt;/div&gt;

            &lt;/li&gt;    
        @empty
            &lt;li&gt;You have not written any posts yet, write one now&lt;/li&gt;
        @endforelse

    &lt;/ul&gt;
&lt;/div&gt;
</pre>
<p>ç„¶åï¼Œä¸ºäº†åˆ›å»ºå¸–å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹ä»£ç :</p>
<pre>//CreatePost.php
&lt;?php
namespace App\Http\Livewire;
use App\Post;
use Livewire\Component;
use Illuminate\Support\Str;
class CreatePost extends Component
{
    public $title, $body;
    public $success;
    protected $rules = [
        'title' =&gt; 'required|string|max:220',
        'body' =&gt; 'required'
    ];

    public function render()
    {
        return view('livewire.create-post')
            -&gt;extends('layouts.app')
            -&gt;section('content');
    }
    public function create(){
        $this-&gt;validate();
        Post::create([
            'title' =&gt; $this-&gt;title,
            'slug' =&gt; Str::slug($this-&gt;title),
            'body' =&gt; $this-&gt;body,
            'author_id' =&gt; auth()-&gt;id()
        ]);

        $this-&gt;success = true;
    }
}
</pre>
<p>åœ¨ä¸Šé¢çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å…¬å…±å˜é‡æ¥ä¿å­˜åšå®¢æ–‡ç« çš„æ ‡é¢˜å’Œæ­£æ–‡å†…å®¹ï¼Œè¿˜åˆ›å»ºäº†ä¸€ä¸ª<code>success</code>å˜é‡æ¥æŒ‡ç¤ºæ–‡ç« åˆ›å»ºæ˜¯å¦æˆåŠŸã€‚</p>
<p>åœ¨<code>render()</code>æ–¹æ³•ä¸­ï¼ŒLivewire å…è®¸æˆ‘ä»¬åˆ†åˆ«é€šè¿‡<code>extends()</code>å’Œ<code>section()</code>æ–¹æ³•æŒ‡å®šç”¨äºå‘ˆç°ç»„ä»¶çš„å¸ƒå±€æ–‡ä»¶å’Œæˆ‘ä»¬å¸Œæœ›å®ƒæ˜¾ç¤ºçš„éƒ¨åˆ†ã€‚</p>
<p>ç°åœ¨æ¨¡æ¿è§†å›¾å¦‚ä¸‹æ‰€ç¤º:</p>
<pre>&lt;div class="container"&gt;
    @if ($success)
        &lt;div&gt;
            &lt;div class="alert alert-success"&gt;
                Post has been created successfully. &lt;a href="{{ url('/home') }}"&gt;View all posts&lt;/a&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    @endif

    &lt;form wire:submit.prevent="create"&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="Post title"&amp;gt;Post title&lt;/label&gt;
            &lt;input wire:model="title" type="text" name="title" id="title" class="form-control" placeholder="Title of the post"&gt;
            @error('title') &lt;span class="error"&gt;{{ $message }}&lt;/span&gt; @enderror
        &lt;/div&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="Post body"&gt;Post Body&lt;/label&gt;
            &lt;textarea name="body" id="body" placeholder="Body of post here..." wire:model="body" class="form-control"&gt;&lt;/textarea&gt;
            @error('body') &lt;span class="error"&gt;{{ $message }}&lt;/span&gt; @enderror
        &lt;/div&gt;
        &lt;div&gt;
            &lt;button class="btn btn-primary" type="submit"&gt;Publish&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;
</pre>
<p>å¦‚æœæ‚¨å°†æµè§ˆå™¨å¯¼èˆªåˆ°<code>/posts/create</code>ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ˜¾ç¤ºçš„åˆ›å»ºè¡¨å•:</p>
<p><img data-attachment-id="34980" data-permalink="https://blog.logrocket.com/deep-dive-into-laravel-livewire/creation-form-display/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png" data-orig-size="730,323" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creation-Form-Display" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display-300x133.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png" decoding="async" class="aligncenter wp-image-34980 size-full jetpack-lazy-image" src="../Images/521cf39439a34b5fe1396bccbe1b3735.png" alt="Creation Form Display" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display-300x133.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="34980" data-permalink="https://blog.logrocket.com/deep-dive-into-laravel-livewire/creation-form-display/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png" data-orig-size="730,323" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Creation-Form-Display" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display-300x133.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png" decoding="async" loading="lazy" class="aligncenter wp-image-34980 size-full" src="../Images/521cf39439a34b5fe1396bccbe1b3735.png" alt="Creation Form Display" srcset="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png 730w, https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display-300x133.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2021/02/Creation-Form-Display.png"/></noscript>
<p>è¿™æ˜¯ Livewire åœ¨ç°å®ä¸–ç•Œä¸­åº”ç”¨çš„ä¸€ä¸ªç›¸å½“åŸºæœ¬çš„ä¾‹å­ã€‚</p>
<h2>ç»“è®º</h2>
<p>Livewire åœ¨åç«¯å’Œå‰ç«¯ä¹‹é—´æ¶èµ·äº†ä¸€åº§æ¡¥æ¢ã€‚æ‚¨å¯ä»¥è·å¾—å®æ—¶äº¤äº’æ€§çš„å¥½å¤„ï¼Œè€Œä¸å¿…è‡ªå·±ç¼–å†™å¤§é‡çš„ JavaScriptã€‚å¦‚æœä½ ä»¥å‰ç”¨è¿‡ Vue.jsï¼Œä½ ä¼šå¾ˆå®¹æ˜“çœ‹åˆ° Livewire çš„å¥½å¤„ã€‚</p>
<p>Livewire å¯¹äºå¯¹å®¢æˆ·ç«¯è¦æ±‚å¾ˆé«˜çš„åº”ç”¨æ¥è¯´å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³è¦ä¸€ä¸ªæœåŠ¡å™¨æ¸²æŸ“çš„åº”ç”¨ç¨‹åºï¼Œå¸¦æœ‰ä¸€ç‚¹ååº”ï¼ŒLivewire å°†ä¼šå¾ˆå¥½åœ°ä¸ºä½ æœåŠ¡ã€‚</p>
<p>è¿˜æ˜¯é‚£å¥è¯ï¼Œæˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­æ­å»ºçš„ app å¯ä»¥åœ¨<a href="https://github.com/sdkcodes/laravel-livewire-tutorial">G</a><a href="https://github.com/sdkcodes/laravel-livewire-tutorial">it</a><a href="https://github.com/sdkcodes/laravel-livewire-tutorial">H</a><a href="https://github.com/sdkcodes/laravel-livewire-tutorial">ub</a>ä¸Šæ‰¾åˆ°ã€‚</p><div class="code-block code-block-1">
<div class="blog-plug base-cta"><h2>ä½¿ç”¨<a class="signup" href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>æ¶ˆé™¤ä¼ ç»Ÿé”™è¯¯æŠ¥å‘Šçš„å¹²æ‰°</h2>
<a href="https://lp.logrocket.com/blg/signup" class="signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/></noscript></a>
<p><a href="https://lp.logrocket.com/blg/signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>æ˜¯ä¸€ä¸ªæ•°å­—ä½“éªŒåˆ†æè§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿æŠ¤æ‚¨å…å—æ•°ç™¾ä¸ªå‡é˜³æ€§é”™è¯¯è­¦æŠ¥çš„å½±å“ï¼Œåªé’ˆå¯¹å‡ ä¸ªçœŸæ­£é‡è¦çš„é¡¹ç›®ã€‚LogRocket ä¼šå‘Šè¯‰æ‚¨åº”ç”¨ç¨‹åºä¸­å®é™…å½±å“ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„ bug å’Œ UX é—®é¢˜ã€‚</p>
<p>ç„¶åï¼Œä½¿ç”¨å…·æœ‰æ·±å±‚æŠ€æœ¯é¥æµ‹çš„ä¼šè¯é‡æ”¾æ¥ç¡®åˆ‡åœ°æŸ¥çœ‹ç”¨æˆ·çœ‹åˆ°äº†ä»€ä¹ˆä»¥åŠæ˜¯ä»€ä¹ˆå¯¼è‡´äº†é—®é¢˜ï¼Œå°±åƒä½ åœ¨ä»–ä»¬èº«åçœ‹ä¸€æ ·ã€‚</p>
<p>LogRocket è‡ªåŠ¨èšåˆå®¢æˆ·ç«¯é”™è¯¯ã€JS å¼‚å¸¸ã€å‰ç«¯æ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·äº¤äº’ã€‚ç„¶å LogRocket ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥å‘Šè¯‰ä½ å“ªäº›é—®é¢˜æ­£åœ¨å½±å“å¤§å¤šæ•°ç”¨æˆ·ï¼Œå¹¶æä¾›ä½ éœ€è¦ä¿®å¤å®ƒçš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>å…³æ³¨é‡è¦çš„ bugâ€”<a class="signup" href="https://lp.logrocket.com/blg/signup-issue-free" target="_blank" rel="noopener noreferrer">ä»Šå¤©å°±è¯•è¯• LogRocketã€‘ã€‚</a></p></div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>