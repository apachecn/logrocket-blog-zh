<html>
<head>
<title>Build an SSG blog with Capri </title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>ä¸å¡æ™®é‡Œä¸€èµ·åˆ›å»ºä¸€ä¸ªSSGåšå®¢</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/build-ssg-blog-capri/#0001-01-01">https://blog.logrocket.com/build-ssg-blog-capri/#0001-01-01</a></blockquote><div><article class="article-post">
<p>ä½¿ç”¨é™æ€ç«™ç‚¹ç”Ÿæˆå™¨(SSG)çš„ä¸€ä¸ªæœ‰è¶£çš„åœ°æ–¹æ˜¯èƒ½å¤Ÿè½»æ¾åœ°è¿è¡Œåº”ç”¨ç¨‹åºå¹¶å¯¹å…¶è¿›è¡Œæ·»åŠ å’Œæ›´æ”¹ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆæ„å»ºåšå®¢ï¼Œå› ä¸ºåšå®¢ä¼šä¸æ–­åœ°æ·»åŠ å’Œç¼–è¾‘æ–‡ç« ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://capri.build/"> Capri </a>ï¼Œä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œå®ƒä½¿ç”¨islandsæ¶æ„æ¨¡å‹ç”Ÿæˆé™æ€ç«™ç‚¹ã€‚</p>
<p><em>å‘å‰è·³è½¬:</em></p>

<h2 id="capri-work">å¡æ™®é‡Œå²›æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ</h2>
<p>é€šå¸¸ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒCapriä¸å‘å‰ç«¯å‘é€ä»»ä½•JavaScriptï¼Œåªå‘é€é™æ€HTMLå’ŒCSSã€‚ä¸ºäº†å¤„ç†Capriåšå®¢ä¸Šçš„äº¤äº’æ€§å’ŒåŠ¨æ€æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä½¿ç”¨ä¸€ä¸ª<code>*island.*</code>åç¼€æ¥å¢åŠ å®ƒçš„æ°´åˆ†ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨æ­£åœ¨è·å–æ•°æ®æˆ–å¤„ç†ä¸ç»„ä»¶çš„äº¤äº’ï¼Œæ‚¨å¯ä»¥å°†å…¶å‘½åä¸º<code>componentname.island.jsx</code>ã€‚è¿™ä¸ªåç§°æ ¼å¼å–å†³äºæˆ‘ä»¬ä½¿ç”¨çš„æ¡†æ¶/åº“â€”â€”ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨Vueï¼Œå®ƒå°†æ˜¯<code>componentname.island.vue</code>ã€‚</p>
<p>åœ¨æˆ‘ä»¬éœ€è¦åœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶å‘ˆç°é™æ€å’ŒåŠ¨æ€å†…å®¹çš„æƒ…å†µä¸‹ï¼Œæˆ–è€…å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªå°†å±æ€§ä¼ é€’ç»™é™æ€ç»„ä»¶çš„åŠ¨æ€ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>*lagoon.*</code>åç¼€ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿ç°åœºé€Ÿåº¦æ›´å¿«ï¼Œä»…åœ¨å¿…è¦æ—¶å¯¹åŠ¨æ€æˆåˆ†è¿›è¡Œæ°´åˆã€‚</p>
<h2 id="getting-started">å…¥é—¨æŒ‡å—</h2>
<p>è®©æˆ‘ä»¬ä½¿ç”¨Reactå’ŒCapriæ¥æå‡æˆ‘ä»¬çš„åšå®¢ã€‚è¦è§¦å‘å¿«é€Ÿå¯åŠ¨ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre class="language-bash hljs">npm init capri my-capri-site -- -e react
</pre>
<p>å®ƒåœ¨Reactä¸­å»ºç«‹äº†ä¸€ä¸ªæ ·æœ¬Capriç«™ç‚¹ã€‚æˆ‘ä»¬å°†ä¸å¾—ä¸åˆ é™¤æ ·æ¿ä»£ç ï¼Œå¹¶ä¸ºæˆ‘ä»¬çš„é¡¹ç›®æ·»åŠ è‡ªå®šä¹‰ç»„ä»¶ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†Capriä¸å…¶ä»–æ”¯æŒSSRçš„æµè¡ŒUIæ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œæ¯”å¦‚Vueã€Svelteã€Preactç­‰ã€‚ï¼š</p>
<p><img data-attachment-id="141241" data-permalink="https://blog.logrocket.com/build-ssg-blog-capri/attachment/capri-frameworks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png" data-orig-size="730,392" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="capri-frameworks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png" decoding="async" class="aligncenter wp-image-141241 size-full jetpack-lazy-image" src="../Images/6fdd109cacb533bb8f1ee3f733245f23.png" alt="Capri frameworks" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks-300x161.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141241" data-permalink="https://blog.logrocket.com/build-ssg-blog-capri/attachment/capri-frameworks/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png" data-orig-size="730,392" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="capri-frameworks" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png" decoding="async" loading="lazy" class="aligncenter wp-image-141241 size-full" src="../Images/6fdd109cacb533bb8f1ee3f733245f23.png" alt="Capri frameworks" srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks-300x161.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/capri-frameworks.png"/></noscript>
<p>ä½ åº”è¯¥çŸ¥é“ï¼ŒCapriæä¾›äº†ä¸€ä¸ªé¢„è§ˆæ¨¡å¼ï¼Œå¯ä»¥åœ¨æœ¬åœ°è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ—¶è¿›è¡Œçƒ­é‡è£…ã€‚å®ƒåœ¨æœ¬åœ°å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå‘ˆç°ä¸ºä¸€ä¸ªSPAã€‚</p>
<pre class="language-typescript hljs">import { Navigate } from "react-router-dom";
/**
 * Handle preview requests like `/preview?slug=/about` by redirecting
 * to the given slug parameter.
 */
export default function Preview() {
  const url = new URL(window.location.href);
  const slug = url.searchParams.get("slug") ?? "/";
  return &lt;Navigate to={slug} /&gt;;
}
/**
 * Component to display a banner when the site is viewed as SPA.
 */
export function PreviewBanner() {
  return &lt;div className="banner"&gt;Preview Mode&lt;/div&gt;;
}

// src/preview.tsx
</pre>
<p>æˆ‘ä»¬å°†é¢„è§ˆç»„ä»¶åŒ…è£…åœ¨<code>&lt;App/&gt;</code>ç»„ä»¶å‘¨å›´:</p>
<pre class="language-typescript hljs">import { StrictMode } from "react";
import ReactDOM from "react-dom/client";
import { BrowserRouter } from "react-router-dom";
import { App } from "./App";
import { PreviewBanner } from "./Preview.jsx";
ReactDOM.createRoot(document.getElementById("app")!).render(
  &lt;StrictMode&gt;
    &lt;BrowserRouter basename={import.meta.env.BASE_URL}&gt;
      &lt;PreviewBanner /&gt;
      &lt;App /&gt;
    &lt;/BrowserRouter&gt;
  &lt;/StrictMode&gt;
);

// src/main.tsx
</pre>
<p>å› æ­¤ï¼Œå¯¹äºæˆ‘ä»¬çš„æœåŠ¡å™¨æ¸²æŸ“ï¼Œæ¡ç›®æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤º:</p>
<pre class="language-typescript hljs">import { RenderFunction, renderToString } from "@capri-js/react/server";
import { StrictMode } from "react";
import { StaticRouter } from "react-router-dom/server.js";
import { App } from "./App";
export const render: RenderFunction = async (url: string) =&gt; {
  return {
    "#app": await renderToString(
      &lt;StrictMode&gt;
        &lt;StaticRouter location={url} basename={import.meta.env.BASE_URL}&gt;
          &lt;App /&gt;
        &lt;/StaticRouter&gt;
      &lt;/StrictMode&gt;
    ),
  };
};

// src/main.server.tsx
</pre>
<p>å¦ä¸€ä»¶è¦æ³¨æ„çš„äº‹æƒ…æ˜¯Capriä½¿ç”¨Viteå¼€ç®±å³ç”¨è¿›è¡Œé…ç½®ã€‚</p>
<pre class="language-typescript hljs">import capri from "@capri-js/react";
import react from "@vitejs/plugin-react";
import { defineConfig } from "vite";
export default defineConfig({
  plugins: [
    react(),
    capri({
      spa: "/preview",
    }),
  ],
});
</pre>
<p>æœ€åï¼Œåœ¨æˆ‘ä»¬çš„æ ¹æ–‡ä»¶å¤¹ä¸­æœ‰æ ¹æ–‡ä»¶<code>index.html</code>:</p>
<pre class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
    &lt;link rel="icon" type="image/svg+xml" href="/src/capri.svg" /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="app"&gt;&lt;/div&gt;
    &lt;script type="module" src="/src/main.tsx"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
<h2 id="building-blog">å»ºç«‹æˆ‘ä»¬çš„åšå®¢</h2>
<p>æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªRickå’ŒMortyçš„åšå®¢ï¼Œæ¯ä¸ªå¸–å­éƒ½åŒ…å«äº†è¿™ä¸ªç³»åˆ—ä¸­è§’è‰²çš„ä¿¡æ¯ã€‚</p>
<p><img data-attachment-id="141245" data-permalink="https://blog.logrocket.com/build-ssg-blog-capri/attachment/rick-morty-blog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif" data-orig-size="730,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="rick-morty-blog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-300x172.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif" decoding="async" class="aligncenter wp-image-141245 size-full jetpack-lazy-image" src="../Images/b924e1836b52094e9046c32cda5987fa.png" alt="Rick and Morty blog." data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141245" data-permalink="https://blog.logrocket.com/build-ssg-blog-capri/attachment/rick-morty-blog/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif" data-orig-size="730,419" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="rick-morty-blog" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-300x172.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif" decoding="async" loading="lazy" class="aligncenter wp-image-141245 size-full" src="../Images/b924e1836b52094e9046c32cda5987fa.png" alt="Rick and Morty blog." data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog.gif"/></noscript>
<h3 id="scaffolding-home-page">æ­å»ºä¸»é¡µ</h3>
<p>è®©æˆ‘ä»¬å»ºç«‹æˆ‘ä»¬çš„åšå®¢ä¸»é¡µã€‚åœ¨æˆ‘ä»¬çš„<code>src</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª<code>Home.tsx</code>æ–‡ä»¶ã€‚è¿™æ˜¯ç”¨æˆ·ç™»é™†åšå®¢åçœ‹åˆ°çš„ç¬¬ä¸€é¡µã€‚è¿™å°†æ˜¯ä¸€ä¸ªé™æ€ç»„ä»¶ã€‚</p>
<pre class="language-typescript hljs">export default function Home() {
  return (
    &lt;main&gt;
      &lt;h1&gt;Welcome To Our Rick and Morty Blog&lt;/h1&gt;
      &lt;h5&gt;
        Each blog post contains information about individual characters in the
        series.
      &lt;/h5&gt;
      &lt;Posts /&gt;
    &lt;/main&gt;
  );
}

// src/Home.tsx
</pre>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥è¿›å…¥æˆ‘ä»¬çš„<code>App.tsx</code>æ–‡ä»¶å¹¶å¯¼å…¥æˆ‘ä»¬çš„<code>Home.tsx</code>æ–‡ä»¶ã€‚</p>
<pre class="language-typescript hljs">import "./App.css";
import { Suspense } from "react";
import Preview from "./Preview.jsx";
import { Route, Routes } from "react-router-dom";
import Home from "./Home";

export function App() {
  return (
    &lt;Suspense fallback={&lt;div&gt;loading...&lt;/div&gt;}&gt;
      &lt;Routes&gt;
        &lt;Route index element={&lt;Home /&gt;} /&gt;
        &lt;Route path="/preview" element={&lt;Preview /&gt;} /&gt;
      &lt;/Routes&gt;
    &lt;/Suspense&gt;
  );
}

// src/App.tsx
</pre>
<p>æˆ‘ä»¬ä½¿ç”¨<a href="https://blog.logrocket.com/migrating-react-router-v6-complete-guide/"> Reactè·¯ç”±å™¨</a>å’Œ<code><a href="https://17.reactjs.org/docs/concurrent-mode-suspense.html">Suspense</a></code>åŒ…è£…æˆ‘ä»¬çš„ç»„ä»¶ï¼Œåˆ†åˆ«å¤„ç†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„è·¯ç”±å’Œæ•°æ®è·å–ã€‚</p>
<h3 id="displaying-list-posts">æ˜¾ç¤ºå¸–å­åˆ—è¡¨</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨ã€‚ä¸ºæ­¤ï¼Œè®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåä¸º<code>Posts.lagoon.tsx</code>çš„æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ª<code>Posts</code>ç»„ä»¶:</p>
<pre class="language-typescript hljs">import { Link } from "react-router-dom";

export default function Posts() {
  const container = {
    display: "grid",
  };
  const containerItem = {
    paddingBottom: "3rem",
  };
  return (
    &lt;div style={container}&gt;
      {[...Array(10)].map((x, i) =&gt; (
        &lt;div style={containerItem}&gt;
          &lt;Link to={`/post/${i + 1}`}&gt;
            Post/{i + 1}
          &lt;/Link&gt;
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
}

// Posts.lagoon.tsx
</pre>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬éå†ä¸€ä¸ªæ•°ç»„ä¸­çš„10ä¸ªæ¡ç›®ï¼Œæ˜¾ç¤º10ç¯‡æ–‡ç« ã€‚æ¯ä¸ªæ¡ç›®éƒ½æœ‰ä¸€ä¸ª<code>Link</code>(æ¥è‡ªReact Router)ï¼Œå®ƒä½¿ç”¨åŠ¨æ€å‚æ•°å°†ä¸€ä¸ª<code>id</code>ä¼ é€’ç»™é¡µé¢ã€‚æˆ‘ä»¬å°†åœ¨æœ¬æ–‡çš„åé¢è®¨è®ºè¿™ä¸ª<code>id</code>ã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†<code>Posts.lagoon.tsx</code>ç»„ä»¶å¯¼å…¥åˆ°<code>Home.tsx</code>ç»„ä»¶ä¸­ã€‚</p>
<pre class="language-typescript hljs">import Posts from "./Posts.lagoon";

export default function Home() {
  return (
    &lt;main&gt;
      &lt;h1&gt;Welcome To Our Rick and Morty Blog&lt;/h1&gt;
      &lt;h5&gt;
        Each blog post contains information about individual characters in the
        series.
      &lt;/h5&gt;
      &lt;Posts /&gt;
    &lt;/main&gt;
  );
}
</pre>
<p>æˆ‘ä»¬åˆ—å‡ºäº†åä¸ªé‚®ä»¶é¡¹ç›®ã€‚å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬ç›®å‰å¤„äºé¢„è§ˆæ¨¡å¼ï¼Œå› ä¸ºæˆ‘ä»¬ä»ç„¶åœ¨æœ¬åœ°è¿è¡Œåº”ç”¨ç¨‹åºã€‚</p>
<p><img data-attachment-id="141249" data-permalink="https://blog.logrocket.com/build-ssg-blog-capri/attachment/rick-morty-blog-welcome-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png" data-orig-size="730,392" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="rick-morty-blog-welcome-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png" decoding="async" class="aligncenter wp-image-141249 size-full jetpack-lazy-image" src="../Images/9127fc407f9099b704df0c192632bec7.png" alt="Rick and Morty blog welcome page." data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page-300x161.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="141249" data-permalink="https://blog.logrocket.com/build-ssg-blog-capri/attachment/rick-morty-blog-welcome-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png" data-orig-size="730,392" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="rick-morty-blog-welcome-page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png" decoding="async" loading="lazy" class="aligncenter wp-image-141249 size-full" src="../Images/9127fc407f9099b704df0c192632bec7.png" alt="Rick and Morty blog welcome page." srcset="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page-300x161.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/11/rick-morty-blog-welcome-page.png"/></noscript>
<p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º<code>PostItem.lagoon.tsx</code>æ–‡ä»¶çš„æ–°ç»„ä»¶æ¥æ˜¾ç¤ºæ¯ç¯‡æ–‡ç« ã€‚</p>
<pre class="language-typescript hljs">import { Link, useParams } from "react-router-dom";
import axios from "axios";
import useSWR from "swr";
export default function PostItem() {
  let { id } = useParams();
  const url = `https://rickandmortyapi.com/api/character/${id}`;
  const fetcher = (url: string) =&gt;
axios.get(url).then((res: any) =&gt; res.data);
  const { data, error } = useSWR(url, fetcher, { suspense: true });
  if (error) return &lt;div&gt;failed to load&lt;/div&gt;;
  return (
    &lt;main&gt;
      &lt;h1&gt;{data.name}&lt;/h1&gt;
      &lt;img src={data.image}&gt;&lt;/img&gt;
      &lt;section&gt;Status: {data.status}&lt;/section&gt;
      &lt;section&gt;Species: {data.species}&lt;/section&gt;
      &lt;section&gt;Number of episodes featured: {data.episode.length}&lt;/section&gt;
      &lt;section&gt;
        &lt;h5&gt;Location: {data.location.name}&lt;/h5&gt;
        &lt;h5&gt;Gender: {data.gender}&lt;/h5&gt;
      &lt;/section&gt;
      &lt;Link to="/"&gt;Back Home&lt;/Link&gt;
    &lt;/main&gt;
  );
}
</pre>
<p>åœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†ä»<code>Posts.lagoon.tsx</code>ä¸­æ£€ç´¢<code>id</code>ã€‚æˆ‘ä»¬å°†åˆ©ç”¨Reactè·¯ç”±å™¨å®ä¾‹ä¸­çš„<code>useParams</code>é’©å­ä»URLå‚æ•°ä¸­è·å–å½“å‰çš„<code>id</code>ã€‚ç„¶åæˆ‘ä»¬å°†æŠŠè¿™ä¸ª<code>id</code>æ·»åŠ åˆ°æˆ‘ä»¬çš„Rickå’ŒMortyç«¯ç‚¹ã€‚</p>
<p>ä¸ºäº†è°ƒç”¨è¿™ä¸ªç«¯ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code><a href="https://blog.logrocket.com/swr-vs-tanstack-query-react/">useSWR</a></code>å’Œ<a href="https://blog.logrocket.com/how-to-make-http-requests-like-a-pro-with-axios/">è½´</a>ã€‚è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¿…é¡»å®‰è£…ä¸¤ä¸ªè½¯ä»¶åŒ…:</p>
<pre class="language-bash hljs">yarn add swr

yarn add axios
</pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ¥æ”¶ç«¯ç‚¹çš„<code>fetcher</code>å‡½æ•°ï¼Œä½¿ç”¨<code>axios</code>å‘å‡ºä¸€ä¸ª<code>GET</code>è¯·æ±‚ï¼Œå¹¶è¿”å›å“åº”ã€‚</p>
<pre class="language-typescript hljs">const fetcher = (url: string) =&gt;
axios.get(url).then((res: any) =&gt; res.data);
const { data, error } = useSWR(url, fetcher, { suspense: true });
</pre>
<p>ç„¶åæˆ‘ä»¬ä½¿ç”¨<code>useSWR</code>å‘å‡ºå®é™…çš„è¯·æ±‚ã€‚æˆ‘ä»¬ä¼ å…¥<code>fetcher</code>å‡½æ•°ï¼Œå¹¶å°†<code>suspense</code>æŒ‡å®šä¸º<code>true</code>æ¥å¤„ç†æˆ‘ä»¬çš„åŠ è½½çŠ¶æ€ã€‚</p>
<p>åŠ è½½çŠ¶æ€æ˜¯æˆ‘ä»¬ç­‰å¾…ç«¯ç‚¹å“åº”æ—¶çš„ä¸´æ—¶æ—¶é—´èŒƒå›´ã€‚å¦‚æœæˆ‘ä»¬çš„è¯·æ±‚æŒ‰é¢„æœŸå·¥ä½œï¼Œæˆ‘ä»¬å°†å“åº”åˆ†é…ç»™<code>data</code>ã€‚å¦‚æœæœ‰é”™è¯¯ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤º<code>&lt;div&gt;failed to load&lt;/div&gt;</code>ã€‚</p><div class="code-block code-block-54">
<hr/>
<h3>æ›´å¤šæ¥è‡ªLogRocketçš„ç²¾å½©æ–‡ç« :</h3>

<hr/></div>
<p>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾ç¤ºç»„ä»¶ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚æˆ‘ä»¬è¿˜å°†æ·»åŠ ä¸€ä¸ª<code>Link</code>ï¼Œå®ƒå°†æŠŠæˆ‘ä»¬å¸¦å›åˆ°ä¸»é¡µã€‚</p>
<pre class="language-html hljs">&lt;main&gt;
  &lt;h1&gt;{data.name}&lt;/h1&gt;
  &lt;img src={data.image}&gt;&lt;/img&gt;
  &lt;section&gt;Status: {data.status}&lt;/section&gt;
  &lt;section&gt;Species: {data.species}&lt;/section&gt;
  &lt;section&gt;Number of episodes featured: {data.episode.length}&lt;/section&gt;
  &lt;section&gt;
    &lt;h5&gt;Location: {data.location.name}&lt;/h5&gt;
    &lt;h5&gt;Gender: {data.gender}&lt;/h5&gt;
  &lt;/section&gt;
  &lt;Link to="/"&gt;Back Home&lt;/Link&gt;
&lt;/main&gt;
</pre>
<p>ç°åœ¨è®©æˆ‘ä»¬å°†è¿™ä¸ª<code>PostItem.lagoon.tsx</code>ç»„ä»¶ä½œä¸ºè·¯ç”±å¯¼å…¥åˆ°æˆ‘ä»¬çš„<code>App.tsx</code>ä¸­ã€‚</p>
<pre class="language-typescript hljs">import "./App.css";
import { Suspense } from "react";
import { Route, Routes } from "react-router-dom";
import Home from "./Home";
import Preview from "./Preview.jsx";
import PostItem from "./PostItem.lagoon";
export function App() {
  return (
    &lt;Suspense fallback={&lt;div&gt;loading...&lt;/div&gt;}&gt;
      &lt;Routes&gt;
        &lt;Route index element={&lt;Home /&gt;} /&gt;
        &lt;Route path="/preview" element={&lt;Preview /&gt;} /&gt;
        &lt;Route path="/post/:id" element={&lt;PostItem /&gt;} /&gt;
      &lt;/Routes&gt;
    &lt;/Suspense&gt;
  );
}

// App.tsx
</pre>
<p>ç°åœºæ¼”ç¤ºå°±åœ¨è¿™é‡Œï¼Œè€Œä»£ç åˆ™åœ¨æˆ‘çš„å‰æ–¯ <a href="https://github.com/Atanda1/capriblog"> ub </a>ä¸Š<a href="https://github.com/Atanda1/capriblog">æ‰˜ç®¡ã€‚</a></p>
<h2 id="conclusion">ç»“è®º</h2>
<p>æ­å–œğŸ‰ã€‚æˆ‘ä»¬å·²ç»æˆåŠŸåœ°ä»Capriå¼€å§‹ï¼Œå¹¶åœ¨åˆ›çºªå½•çš„æ—¶é—´å†…å»ºç«‹äº†æˆ‘ä»¬è‡ªå·±çš„åšå®¢ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾å¦ä¸€ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥å°†Capriçš„è¶…èƒ½åŠ›ä¸æ— å¤´å†…å®¹ç®¡ç†ç³»ç»Ÿ(CMS)åˆå¹¶ï¼Œå¦‚<a href="https://www.contentful.com/"> Contentful </a>æˆ–<a href="https://www.storyblok.com/home"> Storyblok </a>ã€‚è¿™äº›CMSå……å½“æˆ‘ä»¬æ•°æ®çš„æ¥æºã€‚æ‚¨å¯ä»¥å°†æ•°æ®ä¸Šä¼ åˆ°æ‚¨é¦–é€‰çš„CMSï¼Œå¹¶å°†å…¶æ‹‰å…¥æ‚¨çš„Capriåº”ç”¨ç¨‹åºã€‚</p><div class="code-block code-block-28">
<div class="blog-plug inline-plug js-libraries-plug"><h2>æ‚¨æ˜¯å¦æ·»åŠ äº†æ–°çš„JSåº“æ¥æé«˜æ€§èƒ½æˆ–æ„å»ºæ–°ç‰¹æ€§ï¼Ÿå¦‚æœä»–ä»¬åå…¶é“è€Œè¡Œä¹‹å‘¢ï¼Ÿ</h2><p>æ¯«æ— ç–‘é—®ï¼Œå‰ç«¯å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚å½“æ‚¨å‘åº”ç”¨ç¨‹åºæ·»åŠ æ–°çš„JavaScriptåº“å’Œå…¶ä»–ä¾èµ–é¡¹æ—¶ï¼Œæ‚¨å°†éœ€è¦æ›´å¤šçš„å¯è§æ€§ï¼Œä»¥ç¡®ä¿æ‚¨çš„ç”¨æˆ·ä¸ä¼šé‡åˆ°æœªçŸ¥çš„é—®é¢˜ã€‚</p>
<p>LogRocket æ˜¯ä¸€ä¸ªå‰ç«¯åº”ç”¨ç¨‹åºç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è®©æ‚¨å›æ”¾JavaScripté”™è¯¯ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æ›´æœ‰æ•ˆåœ°å¯¹é”™è¯¯åšå‡ºååº”ã€‚</p><a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"><img class="alignnone size-full wp-image-46 jetpack-lazy-image" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/><noscript><img data-lazy-fallback="1" class="alignnone size-full wp-image-46" src="../Images/e8a0ab42befa3b3b1ae08c1439527dc6.png" alt="LogRocket Dashboard Free Trial Banner" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/10/errors-screenshot.png"/></noscript></a>
<a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">https://logrocket.com/signup/</a><p><a href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer"> LogRocket </a>å¯ä»¥ä¸ä»»ä½•åº”ç”¨ç¨‹åºå®Œç¾é…åˆï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ¡†æ¶ï¼Œå¹¶ä¸”æœ‰æ’ä»¶å¯ä»¥è®°å½•æ¥è‡ªReduxã€Vuexå’Œ@ngrx/storeçš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚æ‚¨å¯ä»¥æ±‡æ€»å¹¶æŠ¥å‘Šé—®é¢˜å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯çŒœæµ‹é—®é¢˜å‘ç”Ÿçš„åŸå› ã€‚LogRocketè¿˜å¯ä»¥ç›‘æ§åº”ç”¨çš„æ€§èƒ½ï¼ŒæŠ¥å‘Šå®¢æˆ·ç«¯CPUè´Ÿè½½ã€å®¢æˆ·ç«¯å†…å­˜ä½¿ç”¨ç­‰æŒ‡æ ‡ã€‚</p><p>è‡ªä¿¡åœ°æ„å»ºâ€” <a class="signup" href="https://lp.logrocket.com/blg/javascript-signup" target="_blank" rel="noopener noreferrer">å¼€å§‹å…è´¹ç›‘æ§</a>ã€‚</p></div>


</div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>