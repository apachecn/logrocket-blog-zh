<html>
<head>
<title>How to build faster animation transitions in React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>å¦‚ä½•åœ¨ React - LogRocket åšå®¢ä¸­æ„å»ºæ›´å¿«çš„åŠ¨ç”»è¿‡æ¸¡</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/how-build-faster-animation-transitions-react/#0001-01-01">https://blog.logrocket.com/how-build-faster-animation-transitions-react/#0001-01-01</a></blockquote><div><article class="article-post">
<p>åœ¨ä½ çš„ç½‘ç«™çš„ç»„ä»¶å’Œå…ƒç´ ä¸­æ·»åŠ åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœå¯ä»¥æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›ç‰¹è‰²ã€‚ç„¶è€Œï¼Œä½¿ç”¨å¤§é‡åŠ¨ç”»åº“åˆ›å»ºçš„è¿‡æ¸¡å¾€å¾€å¾ˆæ…¢ï¼Œå› ä¸ºè¿™äº›åº“ä¼šå¢åŠ åº”ç”¨ç¨‹åºçš„å¼€é”€ã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬ä¸èƒ½å®Œå…¨æ¶ˆé™¤ç”±åŠ¨ç”»é€ æˆçš„æ€§èƒ½ä¸‹é™ï¼Œå³ä½¿åœ¨è¾ƒå°çš„åº“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é€‰æ‹©æ­£ç¡®çš„åŒ…æ¥å‡å°‘å®ƒã€‚</p>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<a href="https://github.com/iamyoki/transition-hook" target="_blank" rel="noopener">è¿‡æ¸¡é’©å­</a>åœ¨ React ä¸­åˆ›å»ºå¿«é€Ÿè¿‡æ¸¡åŠ¨ç”»ã€‚</p>
<p>æœ¬æ–‡å°†æ¶µç›–ä»¥ä¸‹å†…å®¹:</p>

<p>åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œtransition-hook è¿˜æ²¡æœ‰å‡†å¤‡å¥½æŠ•å…¥ç”Ÿäº§ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨äºå®é™…åº”ç”¨ã€‚ç„¶è€Œï¼Œå®ƒå·²ç»è¾¾åˆ°äº† v1.5.1 å‘å¸ƒçŠ¶æ€ï¼Œå› æ­¤ä¸€ä¸ªç¨³å®šçš„ã€å¯ç”¨äºç”Ÿäº§çš„ç‰ˆæœ¬å¯èƒ½æŒ‡æ—¥å¯å¾…ï¼</p>
<h2 id="getting-started">å…¥é—¨æŒ‡å—</h2>
<p>æŒ‰ç…§æœ¬æ–‡ä¸­ä½¿ç”¨çš„ç¤ºä¾‹ï¼Œè®¾ç½®ä¸€ä¸ª React é¡¹ç›®å¹¶å®‰è£…å¸¦æœ‰ Yarn æˆ– npm çš„è¿‡æ¸¡æŒ‚é’©:</p>
<pre>/*yarn*/
yarn add transition-hook

/*npm*/
npm install transition-hook --save
</pre>
<h2 id="what-is-transition-hook">ä»€ä¹ˆæ˜¯è¿‡æ¸¡é’©ï¼Ÿ</h2>
<p>transition-hook æ˜¯ React ä¸­è®¸å¤šå¯ç”¨äºåˆ›å»ºåŠ¨ç”»çš„æŒ‚é’©ä¹‹ä¸€ã€‚å®ƒç±»ä¼¼äºæµè¡Œçš„<a href="https://github.com/reactjs/react-transition-group" target="_blank" rel="noopener"> react-transition-group </a>ï¼Œä½†æ˜¯å®ƒæ˜¯è½»é‡çº§çš„ï¼Œè¯­æ³•æ›´ç®€å•ï¼Œæ€§èƒ½æ›´é«˜ã€‚</p>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œtransition-hook å¹¶ä¸æ˜¯ä¸€ä¸ªåƒ<a href="https://www.framer.com/motion/" target="_blank" rel="noopener">æˆå¸§å™¨åŠ¨ä½œ</a>æˆ–<a href="https://react-spring.io" target="_blank" rel="noopener">ååº”å¼¹ç°§</a>é‚£æ ·çš„å…¨èƒ½åŠ¨ç”»åº“ã€‚å®ƒä¸ä¼šè‡ªåŠ¨æ¿€æ´»å…ƒç´ ã€‚ç›¸åï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨ CSS ç±»å’Œæ ·å¼çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†åŠ¨ç”»æ·»åŠ åˆ°å…ƒç´ çš„ DOM å…¥å£å’Œå‡ºå£ã€‚</p>
<p>ç”¨<a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener"> React Hooks </a>ä¸ºä½ çš„åº”ç”¨ç¨‹åºæ·»åŠ åŠ¨ç”»çš„å¼€é”€æ˜¯å¯ä»¥å¿½ç•¥çš„ï¼Œå› ä¸ºä¸å®Œæ•´çš„åŠ¨ç”»åº“ç›¸æ¯”ï¼ŒHooks æ˜¯ç›¸å½“å°çš„ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç¼©å°ç‰ˆçš„<a href="https://github.com/reactjs/react-transition-group" target="_blank" rel="noopener"> react-transition-group </a>ä¸ºåº”ç”¨ç¨‹åºå¢åŠ äº† 13.5kB çš„åŒ…é‡é‡ï¼Œåœ¨ 4G ç½‘ç»œä¸ŠåŠ è½½å¤§çº¦éœ€è¦ 5 æ¯«ç§’ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œtransition-hook åªå¢åŠ äº† 4.3kB çš„åŒ…é‡é‡ï¼ŒåŠ è½½æ—¶é—´ä»…ä¸º 1 æ¯«ç§’ã€‚å®ƒçš„è½»é‡çº§æœ¬è´¨å’Œæ¸²æŸ“å¿«é€Ÿã€ä¼˜åŒ–åŠ¨ç”»çš„èƒ½åŠ›ä½¿ transition-hook æ¯”å®ƒçš„å‰è¾ˆæ›´å…·æ€§èƒ½ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸¤ä¸ªåº“çš„åŒ…å¤§å°çš„å¯¹æ¯”:</p>
<figure id="attachment_104591" aria-describedby="caption-attachment-104591" class="wp-caption aligncenter"><img data-attachment-id="104591" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/bundle-size-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png" data-orig-size="730,268" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bundle size graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph-300x110.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png" decoding="async" class="wp-image-104591 size-full jetpack-lazy-image" src="../Images/8d42368f176848c6fac59703e100ab73.png" alt="Bundle Size Graph" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph-300x110.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="104591" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/bundle-size-graph/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png" data-orig-size="730,268" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Bundle size graph" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph-300x110.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png" decoding="async" loading="lazy" class="wp-image-104591 size-full" src="../Images/8d42368f176848c6fac59703e100ab73.png" alt="Bundle Size Graph" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph-300x110.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/bundle-size-graph.png"/></noscript><figcaption id="caption-attachment-104591" class="wp-caption-text">Source: <a href="https://bundlephobia.com/package/react-transition-group@4.4.2" target="_blank" rel="noopener">bundlephobia</a>.</figcaption></figure>
<figure id="attachment_104594" aria-describedby="caption-attachment-104594" class="wp-caption aligncenter"><img data-attachment-id="104594" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/transition-hook-bundle-size/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png" data-orig-size="630,423" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Transition-hook bundle size" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size-300x201.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png" decoding="async" class="wp-image-104594 size-full jetpack-lazy-image" src="../Images/39ffcc6f929bae9fc5fafa004020f8ec.png" alt="Transition-hook Bundle Size" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png 630w, https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size-300x201.png 300w" data-lazy-sizes="(max-width: 630px) 100vw, 630px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="104594" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/transition-hook-bundle-size/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png" data-orig-size="630,423" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Transition-hook bundle size" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size-300x201.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png" decoding="async" loading="lazy" class="wp-image-104594 size-full" src="../Images/39ffcc6f929bae9fc5fafa004020f8ec.png" alt="Transition-hook Bundle Size" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png 630w, https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size-300x201.png 300w" sizes="(max-width: 630px) 100vw, 630px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/transition-hook-bundle-size.png"/></noscript><figcaption id="caption-attachment-104594" class="wp-caption-text">Source: <a href="https://bundlephobia.com/package/transition-hook@1.5.2" target="_blank" rel="noopener">bundlephobia</a>.</figcaption></figure>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒï¼Œæ˜¾ç¤ºäº†è¿‡æ¸¡é’©æŸå¤§å°ä¸å…¶ä»– React åŠ¨ç”»åº“çš„æ¯”è¾ƒ:react-springã€framer-motionã€<a href="https://github.com/chenglou/react-motion" target="_blank" rel="noopener"> react-motion </a>å’Œ<a href="https://github.com/sghall/react-move" target="_blank" rel="noopener"> react-move </a>:</p>
<figure id="attachment_104596" aria-describedby="caption-attachment-104596" class="wp-caption aligncenter"><img data-attachment-id="104596" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/similar-packages-react/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png" data-orig-size="730,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Similar packages React" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png" decoding="async" class="wp-image-104596 size-full jetpack-lazy-image" src="../Images/a55106454c50201afebca42232bdf158.png" alt="Similar Packages for React Animations" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react-300x89.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="104596" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/similar-packages-react/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png" data-orig-size="730,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Similar packages React" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react-300x89.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png" decoding="async" loading="lazy" class="wp-image-104596 size-full" src="../Images/a55106454c50201afebca42232bdf158.png" alt="Similar Packages for React Animations" srcset="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png 730w, https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react-300x89.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/similar-packages-react.png"/></noscript><figcaption id="caption-attachment-104596" class="wp-caption-text">Source: <a href="https://bundlephobia.com/package/transition-hook@1.5.2" target="_blank" rel="noopener">bundlephobia</a>.</figcaption></figure>
<h2 id="how-does-transition-hook-work">è¿‡æ¸¡æŒ‚é’©æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<p>transition-hook åˆ©ç”¨äº†å½“ç»„ä»¶è¿›å…¥å’Œé€€å‡º DOM æ—¶è°ƒç”¨çš„ä¸€ç³»åˆ—ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚transition-hook ä½¿ç”¨è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥åˆ›å»ºè¿‡æ¸¡é˜¶æ®µï¼Œå…è®¸æˆ‘ä»¬æ ¹æ®ç»„ä»¶çš„å®‰è£…å’Œå¸è½½æ—¶é—´ï¼Œä½¿ç”¨ CSS ç±»å’Œæ ·å¼å‘ç»„ä»¶æ·»åŠ åŠ¨ç”»ã€‚</p>
<p>å½“ä¸€ä¸ªç»„ä»¶è¢«æŒ‚è½½æ—¶ï¼Œå®ƒä½œä¸ºä¸€ä¸ªå…ƒç´ è¢«æ’å…¥åˆ° DOM ä¸­ã€‚å½“ä¸€ä¸ªç»„ä»¶è¢«å¸è½½æ—¶ï¼Œæƒ…å†µæ­£å¥½ç›¸åï¼›å®ƒä¼šä» DOM ä¸­ç§»é™¤ã€‚ä½†æ˜¯ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¯ä»¥è¢«è¦†ç›–ï¼Œä»¥ä¾¿åœ¨æµç¨‹ä¸­çš„ç‰¹å®šæ—¶é—´è¿è¡Œæ‰€éœ€çš„é€»è¾‘ã€‚</p>
<p>transition-hook å…¬å¼€äº†ä¸‰ä¸ª React æŒ‚é’©:</p>
<ul>
<li><code>useTransition</code></li>
<li><code>useSwitchTransition</code></li>
<li><code>listTransition</code></li>
</ul>
<p>è¿™äº›æŒ‚é’©å°†å¸ƒå°”çŠ¶æ€è½¬æ¢ä¸ºè½¬æ¢é˜¶æ®µï¼Œå½“ç»„ä»¶åœ¨æŒ‡å®šçš„æŒç»­æ—¶é—´åå®‰è£…æˆ–å¸è½½æ—¶ï¼Œå¯ä»¥è°ƒç”¨è¿™äº›è½¬æ¢é˜¶æ®µã€‚è¿™å…è®¸æˆ‘ä»¬æ ¹æ®ä¸åŒçš„é˜¶æ®µæ·»åŠ  CSS æ ·å¼æ¥åˆ›å»ºåŠ¨ç”»è¿‡æ¸¡ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ transition-hook çš„è¿‡æ¸¡é˜¶æ®µ:</p>
<ul>
<li><code>from</code>:å…ƒç´ è¿›å…¥å‰</li>
<li><code>enter</code>:å…ƒç´ è¿›å…¥æ—¶</li>
<li><code>leave</code>:å…ƒç´ é€€å‡ºå‰</li>
</ul>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€äº›å®é™…çš„ä¾‹å­æ¥æ¸…æ¥šåœ°äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h2 id="using-usetransition">ä½¿ç”¨<code>useTransition</code></h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•ç»„ä»¶çš„ä¾‹å­ï¼Œä½¿ç”¨<code>useTransition</code>é’©å­å®ç°æ·¡å…¥æ·¡å‡ºåŠ¨ç”»:</p>
<pre class="language-javascript hljs">const [onOff, setOnOff] = useState(true)
const {stage, shouldMount} = useTransition(onOff, 300) // (state, timeout)
return &lt;div&gt;
  {shouldMount &amp;&amp; (
    &lt;p style={{
      â€¦.
      transition: '.3s',
      opacity: stage === 'enter' ? 1 : 0
    }}&gt;
      I will fade
    &lt;/p&gt;
  )}
  &lt;button onClick={()=&gt;setOnOff(!onOff)}&gt;toggle&lt;/button&gt;
&lt;/div&gt;
</pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆç”¨<code>useState</code>é’©å­åˆ›å»ºä¸€ä¸ª<code>onOff</code>çŠ¶æ€å˜é‡ï¼Œç„¶åå°†å®ƒä½œä¸ºä¸€ä¸ªé“å…·ä¼ é€’ç»™<code>useTransition</code>é’©å­ï¼Œé™„å¸¦ä¸€ä¸ª 3 æ¯«ç§’çš„è¶…æ—¶æ—¶é—´ã€‚</p>
<p><code>onOff</code>çŠ¶æ€å˜é‡é€šè¿‡æ§åˆ¶æ¥è‡ª<code>useTransition</code>é’©å­çš„è¢«ææ„çš„<code>shouldMount</code>å˜é‡çš„å¸ƒå°”å€¼æ¥æŒ‡ç¤ºç»„ä»¶æ˜¯å¦åº”è¯¥è¿›å…¥ DOMã€‚å¦‚æœè¯¥å€¼è®¾ç½®ä¸º trueï¼Œåˆ™ç»„ä»¶å°†è¢«è£…è½½ï¼Œå¹¶ä¸”åœ¨æŒ‡å®šçš„è¶…æ—¶æ—¶é—´å†…å°†è°ƒç”¨è½¬æ¢é˜¶æ®µï¼Œç›´åˆ°ç»„ä»¶è¢«å¸è½½ã€‚</p>
<pre class="language-javascript hljs">const {stage, shouldMount} = useTransition(onOff, 300)
</pre>
<p><code>stage</code>å˜é‡è®©æˆ‘ä»¬å¯ä»¥è®¿é—®å‰é¢æåˆ°çš„è½¬æ¢é˜¶æ®µã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>stage</code>å˜é‡æ¥æ”¹å˜ç»„ä»¶çš„ CSS æ ·å¼å’ŒåŠ¨ç”»ç»„ä»¶ã€‚</p>
<p>ä½†æ˜¯é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥ç»„ä»¶æ˜¯å¦å·²ç»å®‰è£…ã€‚æˆ‘ä»¬ä½¿ç”¨é€»è¾‘ AND ( <code>&amp;&amp;</code>)æ“ä½œç¬¦åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­æ‰§è¡Œè¿™ä¸ªæ£€æŸ¥ã€‚åªæœ‰å½“<code>shouldMount</code>å˜é‡çš„å¸ƒå°”å€¼ä¸ºçœŸæ—¶ï¼Œ<code>&amp;&amp;</code>å³è¾¹çš„å…ƒç´ æ‰ä¼šè¢«è®¡ç®—(å®‰è£…)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>onOff</code>çŠ¶æ€å˜é‡çš„å€¼è¢«é»˜è®¤è®¾ç½®ä¸º trueï¼Œå› æ­¤ç»„ä»¶å°†è¢«æŒ‚è½½ï¼Œä»è€Œå…è®¸æˆ‘ä»¬è®¿é—®è½¬æ¢é˜¶æ®µã€‚</p>
<pre class="language-javascript hljs">  {shouldMount &amp;&amp; (
    &lt;p style={{
      â€¦.
      transition: '.3s',
      opacity: stage === 'enter' ? 1 : 0
    }}&gt;
      I will fade
    &lt;/p&gt;
  )}
</pre>
<p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œè´Ÿè´£åŠ¨ç”»çš„ CSS æ ·å¼å†…è”åº”ç”¨äºæ®µè½å…ƒç´ ã€‚å±æ€§æ˜¯é­”æ³•å‘ç”Ÿçš„åœ°æ–¹ï¼</p>
<p>ç”¨ CSS åˆ›å»ºåŠ¨ç”»å°±åƒç»™å…ƒç´ æ·»åŠ ä¸€ä¸ªè¿‡æ¸¡å±æ€§ï¼Œç„¶åæœ‰æ¡ä»¶åœ°åˆ‡æ¢<code>opacity</code>æˆ–å˜æ¢å€¼ä¸€æ ·ç®€å•ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­æ‰€åšçš„ï¼›æ®µè½å…ƒç´ ä¸Šçš„<code>opacity</code>å±æ€§çš„å€¼åŸºäº<code>transition</code>é˜¶æ®µæœ‰æ¡ä»¶åœ°åº”ç”¨ã€‚</p>
<pre class="language-javascript hljs">&lt;p style={{
      â€¦.
      transition: 'all 3s',
      opacity: stage === 'enter' ? 1 : 0
    }}&gt;
      I will fade
&lt;/p&gt;</pre>
<p>å½“ç»„ä»¶åˆ°è¾¾<code>enter</code>è½¬æ¢é˜¶æ®µæ—¶ï¼Œæ®µè½çš„<code>opacity</code>å€¼å°†è¢«è®¾ç½®ä¸º 1ï¼Œå¦åˆ™ï¼Œå®ƒå°†è¢«è®¾ç½®ä¸ºé›¶ã€‚</p>
<pre class="language-javascript hljs">opacity: stage === 'enter' ? 1 : 0</pre>
<p>ç”±äºä¸€ä¸ª<code>transition</code>å±æ€§ä¹Ÿè¢«åº”ç”¨åˆ°å…ƒç´ ï¼Œå½“ç»„ä»¶è¢«å®‰è£…å’Œå¸è½½æ—¶ï¼Œæ·¡å…¥å’Œæ·¡å‡ºæ•ˆæœå°†è¢«åˆ›å»ºï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<p><img data-attachment-id="104598" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/toggle-fade/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif" data-orig-size="511,338" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toggle fade" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade-300x198.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif" decoding="async" class="aligncenter size-full wp-image-104598 jetpack-lazy-image" src="../Images/0765d90f3df4bbf7aa91896ad7b4d523.png" alt="Toggle Fade" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104598" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/toggle-fade/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif" data-orig-size="511,338" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toggle fade" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade-300x198.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-104598" src="../Images/0765d90f3df4bbf7aa91896ad7b4d523.png" alt="Toggle Fade" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-fade.gif"/></noscript>
<p>è¿˜å¯ä»¥é€šè¿‡å°†æ ·å¼åº”ç”¨äºå…·æœ‰ç±»çš„å…ƒç´ æ¥åˆ›å»ºåŠ¨ç”»ã€‚ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>className</code>æ˜¯æœ‰æ¡ä»¶åº”ç”¨çš„:</p>
<pre class="language-javascript hljs">&lt;p className={stage === 'enter' ? 'fade-in' : 'fade-out'}&gt;
      I will fade
&lt;/p&gt;
</pre>
<p><code>useTransition</code>æŒ‚é’©å¯¹äºåˆ›å»ºç®€å•çš„çº¿æ€§åŠ¨ç”»å¾ˆæœ‰ç”¨ã€‚ç„¶è€Œï¼Œå½“åŠ¨ç”»åŸºäºç‰¹å®šçš„æ ‡å‡†å’Œå¤æ‚çš„åŠŸèƒ½æ—¶ï¼Œ<code>useSwitchTransition</code>å’Œ<code>listTransition</code>æŒ‚é’©æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å›é¡¾å‡ ä¸ªå¯ç”¨äºåŠ¨ç”»å…ƒç´ çš„ React æŒ‚é’©ï¼Œå¹¶æŸ¥çœ‹æ¯ä¸ªæŒ‚é’©çš„å…·ä½“ç”¨ä¾‹ã€‚</p>
<h2 id="using-useswitchtransition">ä½¿ç”¨<code>useSwitchTransition</code></h2>
<p><code>useSwitchTransition</code>é’©å­æ ¹æ®çŠ¶æ€å˜åŒ–æ¥æ¿€æ´»å…ƒç´ ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒåœ¨ä¸¤ç§çŠ¶æ€ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œå¹¶éœ€è¦æ”¹å˜å¦ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>useSwitchTransition</code>æ˜¯æœ€å¥½çš„é’©å­ã€‚</p><div class="code-block code-block-54">
<hr/>
<h3>æ›´å¤šæ¥è‡ª LogRocket çš„ç²¾å½©æ–‡ç« :</h3>

<hr/></div>
<p>useSwitchTransition æŒ‚é’©æ¥å—ä¸‰ä¸ªå±æ€§ï¼›<code>state</code>ã€<code>timeout</code>å’Œ<code>mode</code>ã€‚æˆ‘ä»¬å·²ç»åœ¨å‰é¢çš„ç« èŠ‚ä¸­è®¨è®ºäº†å‰ä¸¤ä¸ªé“å…·ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹<code>mode</code>é“å…·ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®é™…ä¾‹å­æ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p>
<p><code>mode</code>é“å…·æŒ‡ç¤ºç»„ä»¶çš„çŠ¶æ€å¦‚ä½•æ”¹å˜ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•è¿›å…¥æˆ–é€€å‡ºåœºæ™¯ã€‚å½“ç»„ä»¶çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œè¯¥ç»„ä»¶é€€å‡ºï¼Œå…·æœ‰æ–°çŠ¶æ€çš„æ–°ç»„ä»¶è¿›å…¥ã€‚</p>
<p><code>mode</code>å±æ€§æ¥å—ä¸‰ä¸ªå€¼ä¹‹ä¸€:<code>default</code>ã€<code>out-in</code>æˆ–<code>in-out</code>ã€‚<code>out-in</code>å€¼è¡¨ç¤ºåœ¨æ–°çŠ¶æ€è¿›å…¥ä¹‹å‰ï¼Œæ—§çŠ¶æ€å°†é¦–å…ˆé€€å‡ºåœºæ™¯ã€‚ç›¸åï¼Œ<code>in-out</code>å€¼è¡¨ç¤ºæ–°çŠ¶æ€å°†åœ¨æ—§çŠ¶æ€é€€å‡ºä¹‹å‰è¿›å…¥åœºæ™¯ã€‚</p>
<p>ä¸‹é¢ä¸€ä¸ªè¡¨æƒ…åˆ‡æ¢å™¨çš„ä¾‹å­æ°å½“åœ°å±•ç¤ºäº†<code>useSwitchTransition</code>é’©å­çš„ç»¼åˆç”¨é€”:</p>
<pre class="language-javascript hljs">export function EmojiSwitchTransition() {
  const [isHappy, setIsHappy] = useState(false)
  const transition = useSwitchTransition(isHappy, 300)

  return (
    &lt;div className="EmojiSwitchTransition"&gt;
      &lt;Button
        onClick={() =&gt; {
          setIsHappy(!isHappy)
        }}
      &gt;
        Toggle
      &lt;/Button&gt;

      &lt;div
        style={{
          display: 'flex',
          justifyContent: 'center',
        }}
      &gt;
        {transition((state, stage) =&gt; (
          &lt;h1
            style={{
              transition: '.3s',
              marginTop: 40,
              fontSize: '5em',
              position: 'absolute',
              opacity: stage === 'enter' ? 1 : 0,
              transformOrigin: 'center bottom',
              transform: {
                from: 'translateX(-100%) rotate(-90deg)',
                enter: 'translateX(0%)',
                leave: 'translateX(100%) rotate(90deg)',
              }[stage],
            }}
          &gt;
            {state ? 'ğŸ¤£' : 'ğŸ˜'}
          &lt;/h1&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
</pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª<code>isHappy</code>çŠ¶æ€å˜é‡å’Œä¸€ä¸ª<code>transition</code>å˜é‡ï¼Œå®ƒå­˜å‚¨äº†å¸¦æœ‰<code>isHappy</code>çŠ¶æ€å˜é‡çš„<code>useSwitchTransition</code>å‡½æ•°ã€ä¸€ä¸ª 3 æ¯«ç§’è¶…æ—¶å’Œä¸€ä¸ªä¼ é€’ç»™å®ƒçš„<code>default</code>æ¨¡å¼å±æ€§ã€‚</p>
<pre class="language-javascript hljs">  const [isHappy, setIsHappy] = useState(false)
  const transition = useSwitchTransition(isHappy, 300, "default")
</pre>
<p>åœ¨å‰é¢çš„<code>useTransition</code>ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»<code>useTransition</code>é’©å­ä¸­ææ„äº† stage å’Œ<code>shouldMount</code>å˜é‡ï¼Œè€Œä¸æ˜¯åƒè¿™ä¸ªä¾‹å­é‚£æ ·å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ã€‚</p>
<p>åœ¨ç»„ä»¶ä¸»ä½“ä¸­ï¼Œæœ‰ä¸€ä¸ªå¸¦æœ‰äº‹ä»¶ç›‘å¬å™¨çš„æŒ‰é’®ï¼Œç”¨äºåœ¨ true å’Œ false ä¹‹é—´åˆ‡æ¢<code>isHappy</code>å˜é‡çš„çŠ¶æ€ï¼Œè¿˜æœ‰ä¸€ä¸ªåŒ…è£…è½¬æ¢å‘ˆç°å‡½æ•°çš„ div å…ƒç´ ã€‚</p>
<pre class="language-javascript hljs">{transition((state, stage) =&gt; (
          &lt;h1
            style={{
              transition: '.3s',
              marginTop: 40,
              fontSize: '5em',
              position: 'absolute',
              opacity: stage === 'enter' ? 1 : 0,
              transformOrigin: 'center bottom',
              transform: {
                from: 'translateX(-100%) rotate(-90deg)',
                enter: 'translateX(0%)',
                leave: 'translateX(100%) rotate(90deg)',
              }[stage],
            }}
          &gt;
            {state ? 'ğŸ¤£' : 'ğŸ˜'}
          &lt;/h1&gt;
        ))}       
</pre>
<p>åœ¨ render å‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°:<code>state</code>å’Œ<code>stage</code>ã€‚è¿™äº›å‚æ•°åˆ†åˆ«ä»£è¡¨<code>isHappy</code>çŠ¶æ€å’Œ<code>transition</code>é˜¶æ®µã€‚</p>
<p>å›è°ƒå‡½æ•°ä¸­æœ‰ä¸€ä¸ª<code>h1</code>å…ƒç´ ï¼Œæ ¹æ®å½“å‰çŠ¶æ€æ˜¾ç¤ºä¸¤ä¸ªè¡¨æƒ…ç¬¦å·ä¸­çš„ä¸€ä¸ªã€‚</p>
<pre class="language-javascript hljs">{state ? 'ğŸ¤£' : 'ğŸ˜'}
</pre>
<p>è¿™äº›è¡¨æƒ…ç¬¦å·ç”±åº”ç”¨äº<code>h1</code>å…ƒç´ çš„å†…åµŒæ ·å¼æ¿€æ´»ã€‚<code>opacity</code>å’Œ<code>transform</code>å±æ€§è´Ÿè´£åŠ¨ç”»ï¼Œå®ƒä»¬æ˜¯åŸºäºè¿‡æ¸¡é˜¶æ®µè®¾ç½®çš„ã€‚</p>
<pre class="language-javascript hljs">style={{
              ...
              opacity: stage === 'enter' ? 1 : 0,
              ...
          }}          
</pre>
<p>æ¯ä¸ªè¡¨æƒ…ç¬¦å·çš„<code>opacity</code>é»˜è®¤è®¾ç½®ä¸º 0ï¼Œå½“çŠ¶æ€å˜åŒ–åˆ°è¿›å…¥é˜¶æ®µæ—¶ï¼Œ<code>opacity</code>ä¼šè®¾ç½®ä¸º 1ï¼Œä¼‘å‡æ—¶è®¾ç½®ä¸º 0ã€‚è¿™å°†åœ¨å…ƒç´ è¿›å…¥å’Œé€€å‡ºåœºæ™¯æ—¶å‘å…ƒç´ æ·»åŠ æ·¡å…¥å’Œæ·¡å‡ºåŠ¨ç”»ã€‚</p>
<p><code>transform</code>æ–¹æ³•æ ¹æ®è¿‡æ¸¡é˜¶æ®µå‘å…ƒç´ æ·»åŠ å¹³ç§»å’Œæ—‹è½¬åŠ¨ç”»ã€‚</p>
<pre class="language-javascript hljs">style={{
              ...
              â€¦
              transform: {
                from: 'translateX(-100%) rotate(-90deg)',
                enter: 'translateX(0%)',
                leave: 'translateX(100%) rotate(90deg)',
              }[stage],
          }}          
</pre>
<p>å½“å¤„äº<code>from</code>è¿‡æ¸¡é˜¶æ®µæ—¶ï¼Œè¡¨æƒ…ç¬¦å·ä» x è½´çš„è´Ÿå¹³é¢(å³ä»å·¦ä¾§)ç§»åŠ¨ï¼Œå¹¶åœ¨è¿›å…¥åœºæ™¯æ—¶é€†æ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚</p>
<p>åœ¨<code>enter</code>è¿‡æ¸¡é˜¶æ®µï¼Œtranslate æ–¹æ³•è¢«è®¾ç½®ä¸ºé›¶ï¼Œä»è€Œä½¿è¡¨æƒ…ç¬¦å·é‡‡ç”¨å…¶é»˜è®¤çš„å˜æ¢ä½ç½®ã€‚ç¦»å¼€è¿‡æ¸¡é˜¶æ®µé€šè¿‡å°†è¡¨æƒ…ç¬¦å·ä»é»˜è®¤ä½ç½®ç§»åŠ¨åˆ° x è½´çš„æ­£å¹³é¢(å³å‘å³)å¹¶å°†å…¶é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦æ¥å¯åŠ¨é€€å‡ºåŠ¨ç”»ã€‚</p>
<p><img data-attachment-id="104600" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/toggle-emojis/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif" data-orig-size="530,295" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toggle emojis" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis-300x167.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif" decoding="async" class="aligncenter size-full wp-image-104600 jetpack-lazy-image" src="../Images/5bc6986b05aa9ea41c5b2071b4f2157e.png" alt="Toggle Emojis" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="104600" data-permalink="https://blog.logrocket.com/how-build-faster-animation-transitions-react/toggle-emojis/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif" data-orig-size="530,295" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Toggle emojis" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis-300x167.gif" data-large-file="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif" decoding="async" loading="lazy" class="aligncenter size-full wp-image-104600" src="../Images/5bc6986b05aa9ea41c5b2071b4f2157e.png" alt="Toggle Emojis" data-original-src="https://blog.logrocket.com/wp-content/uploads/2022/04/toggle-emojis.gif"/></noscript>
<h2 id="using-listtransition">ä½¿ç”¨<code>listTransition</code></h2>
<p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ï¼Œå¹¶ä¸”æƒ³è¦åœ¨åˆ—è¡¨ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼Œé‚£ä¹ˆ<code>listTransition</code>æŒ‚é’©æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p>
<p>è¿™ä¸ªé’©å­æ¥å—æ•°ç»„åˆ—è¡¨å’Œ<code>useRef</code>é’©å­çš„å½“å‰å±æ€§ä½œä¸ºè¶…æ—¶å±æ€§ã€‚åœ¨ç»„ä»¶ä½“ä¸­ï¼Œå°è£…äº†ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°:<code>item</code>å’Œ<code>stage</code>ã€‚<code>item</code>å‚æ•°è¡¨ç¤ºå°†åŸºäºè¿‡æ¸¡é˜¶æ®µä½¿ç”¨<code>stage</code>å‚æ•°è¿›è¡ŒåŠ¨ç”»å¤„ç†çš„é¡¹ç›®æ•°ç»„ã€‚</p>
<p>ä¸‹é¢æ˜¯æ¥è‡ª CodeSandbox çš„<code>listTransition</code>é’©å­<a href="https://codesandbox.io/embed/transition-hook-examples-o3f41?codemirror=1" target="_blank" rel="noopener">çš„ä¸€ä¸ªå®é™…åº”ç”¨:</a></p>
<pre class="language-javascript hljs">export function ListShifting() {
  const [list, setList] = useState([1])
  const timeoutRef = useRef(300)
  const transition = useListTransition(list, timeoutRef.current)

  return (
    &lt;div className="ListShifting"&gt;
      &lt;div
        style={{
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          gap: 20,
          marginBottom: 50,
        }}
      &gt;
        &lt;Button onClick={() =&gt; setList((prev) =&gt; prev.concat(prev.length + 1))}&gt;
          Add Item
        &lt;/Button&gt;
        &lt;Button
          variant="danger"
          onClick={() =&gt; {
            setList([])
            timeoutRef.current = list.length * 50
          }}
        &gt;
          Remove All
        &lt;/Button&gt;
      &lt;/div&gt;
      {transition((item, stage) =&gt; (
        &lt;h1
          style={{
            transition: '.3s',
            ...(stage === 'leave' &amp;&amp; { transitionDelay: item * 50 + 'ms' }),
            opacity: stage === 'enter' ? 1 : 0,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            gap: 20,
            transformOrigin: 'center right',
            transform: {
              from: 'translateX(-100%) rotate(90deg)',
              enter: 'translateX(0%)',
              leave: 'translateX(100%) rotate(-90deg)',
            }[stage],
          }}
        &gt;
          Item: {item}
          &lt;Button
            variant="danger"
            size="sm"
            onClick={() =&gt;
              setList((prev) =&gt; prev.filter((pitem) =&gt; pitem !== item))
            }
          &gt;
            &lt;RiSubtractLine /&gt;
          &lt;/Button&gt;
        &lt;/h1&gt;
      ))}
    &lt;/div&gt;
  )
}
</pre>
<h2 id="using-an-facc-pattern">ä½¿ç”¨ FaCC æ¨¡å¼</h2>
<p>transition-hook æä¾›äº†ä½¿ç”¨å‡½æ•°ä½œä¸ºå­ç»„ä»¶(FaCC)æ¨¡å¼åˆ›å»ºåŠ¨ç”»çš„é€‰é¡¹ã€‚è¯¥æ¨¡å¼å…è®¸æ‚¨å°†æ¸²æŸ“å‡½æ•°ä½œä¸ºå­é“å…·ä¼ é€’ç»™ç»„ä»¶ã€‚</p>
<p>è¿™æ˜¯ä¸€ç§æ›´ç®€æ´ã€æ›´å…¨é¢çš„ç”¨è¿‡æ¸¡é’©å­åˆ›å»ºåŠ¨ç”»çš„æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼å°†è½¬æ¢å‡½æ•°å®šä¹‰ä¸ºç»„ä»¶ï¼Œå¹¶å°†<code>state</code>ã€<code>timeout</code>å’Œ<code>mode</code>ä½œä¸ºé“å…·ä¼ é€’ç»™å®ƒä»¬ã€‚</p>
<h3 id="facc-pattern-with-usetransition">å¸¦<code>useTransition</code>çš„ FaCC æ¨¡å¼</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª JSX çš„<code>Transition</code>å‡½æ•°çš„ä¾‹å­:</p>
<pre class="language-javascript hljs">const [onOff, setOnOff] = useState(true);
const {stage, shouldMount} = useTransition(onOff, 300);
...
{shouldMount &amp;&amp; (
   {...}  
)}
</pre>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨å¸¦æœ‰<code>useTransition</code>çš„ FaCC æ¨¡å¼çš„åŒä¸€ä¸ªä¾‹å­:</p>
<pre class="language-javascript hljs">const [onOff, setOnOff] = useState(true);
...
&lt;Transition state={onOff} timeout={300}&gt;
    {...}
&lt;/Transition&gt;
</pre>
<h3 id="facc-pattern-with-useswitchtransition">å¸¦<code>useSwitchTransition</code>çš„ FaCC æ¨¡å¼</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª JSX çš„<code>SwitchTransition</code>å‡½æ•°çš„ä¾‹å­:</p>
<pre class="language-javascript hljs">const [isHappy, setIsHappy] = useState(false);
const transition = useSwitchTransition(isHappy, 300, "default");
...
{transition((state, stage) =&gt; (
     {...}     
  )}
</pre>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨å¸¦æœ‰<code>useSwitchTansition</code>çš„ FaCC æ¨¡å¼çš„åŒä¸€ä¸ªä¾‹å­:</p>
<pre class="language-javascript hljs">const [isHappy, setIsHappy] = useState(false);
...
&lt;SwitchTransition state={isHappy} timeout={300} mode='default'&gt;
    {...}
&lt;/SwitchTransition&gt;
</pre>
<h3 id="facc-pattern-with-listtransition">å¸¦<code>listTransition</code>çš„ FaCC æ¨¡å¼</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª JSX çš„<code>listTransition</code>å‡½æ•°çš„ä¾‹å­:</p>
<pre class="language-javascript hljs">const [list, setList] = useState([1]);
  const timeoutRef = useRef(300);
  const transition = useListTransition(list, timeoutRef.current);
...
{transition((item, stage) =&gt; (
    {...}
  )
}
</pre>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨å¸¦æœ‰<code>listTransition</code>çš„ FaCC æ¨¡å¼çš„åŒä¸€ä¸ªä¾‹å­:</p>
<pre class="language-javascript hljs">const [list, setList] = useState([1]);
const timeoutRef = useRef(300);
...
&lt;listTransition state={list} timeout={timeoutRef.current}&gt;
 {...}
&lt;/listTransition&gt;
</pre>
<h2 id="conclusion">ç»“è®º</h2>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº† transition-hook çš„ç‰¹æ€§åŠå…¶å·¥ä½œåŸç†ã€‚æˆ‘ä»¬è¿˜æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ transition-hook åœ¨ React ç»„ä»¶è¿›å…¥æˆ–é€€å‡º DOM æ—¶å¯¹å…¶è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼Œå¹¶æŸ¥çœ‹äº†è¯¥åº“å…¬å¼€çš„æ¯ä¸ªé’©å­çš„å…·ä½“ç”¨ä¾‹ã€‚</p>
<p>è¦äº†è§£æ›´å¤šå…³äº transition-hook çš„ä¿¡æ¯ï¼Œè¯·è®¿é—®<a href="https://github.com/iamyoki/transition-hook#useswitchtransitionstate-timeout-mode" target="_blank" rel="noopener"> GitHub </a>ã€‚å¦‚éœ€æ›´å¤šç¤ºä¾‹å’Œç”¨ä¾‹ï¼Œè¯·è®¿é—®è¿™ä¸ª<a href="https://codesandbox.io/embed/transition-hook-examples-o3f41?codemirror=1" target="_blank" rel="noopener">ä»£ç æ²™ç®±</a>ã€‚</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:å…¨é¢äº†è§£æ‚¨çš„ç”Ÿäº§ React åº”ç”¨</h2><p>è°ƒè¯• React åº”ç”¨ç¨‹åºå¯èƒ½å¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯å½“ç”¨æˆ·é‡åˆ°éš¾ä»¥é‡ç°çš„é—®é¢˜æ—¶ã€‚å¦‚æœæ‚¨å¯¹ç›‘è§†å’Œè·Ÿè¸ª Redux çŠ¶æ€ã€è‡ªåŠ¨æ˜¾ç¤º JavaScript é”™è¯¯ä»¥åŠè·Ÿè¸ªç¼“æ…¢çš„ç½‘ç»œè¯·æ±‚å’Œç»„ä»¶åŠ è½½æ—¶é—´æ„Ÿå…´è¶£ï¼Œ</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket ç»“åˆäº†ä¼šè¯å›æ”¾ã€äº§å“åˆ†æå’Œé”™è¯¯è·Ÿè¸ªï¼Œä½¿è½¯ä»¶å›¢é˜Ÿèƒ½å¤Ÿåˆ›å»ºç†æƒ³çš„ web å’Œç§»åŠ¨äº§å“ä½“éªŒã€‚è¿™å¯¹ä½ æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>LogRocket ä¸æ˜¯çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸æ˜¯è¦æ±‚ç”¨æˆ·æä¾›æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨å›æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ï¼Œä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚</p>
<p>ä¸å†æœ‰å˜ˆæ‚çš„è­¦æŠ¥ã€‚æ™ºèƒ½é”™è¯¯è·Ÿè¸ªå…è®¸æ‚¨å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç„¶åä»ä¸­å­¦ä¹ ã€‚è·å¾—æœ‰å½±å“çš„ç”¨æˆ·é—®é¢˜çš„é€šçŸ¥ï¼Œè€Œä¸æ˜¯è¯¯æŠ¥ã€‚è­¦æŠ¥è¶Šå°‘ï¼Œæœ‰ç”¨çš„ä¿¡å·è¶Šå¤šã€‚</p>
<p vwo-el-id="28675660750">LogRocket Redux ä¸­é—´ä»¶åŒ…ä¸ºæ‚¨çš„ç”¨æˆ·ä¼šè¯å¢åŠ äº†ä¸€å±‚é¢å¤–çš„å¯è§æ€§ã€‚LogRocket è®°å½• Redux å­˜å‚¨ä¸­çš„æ‰€æœ‰æ“ä½œå’ŒçŠ¶æ€ã€‚</p>
<p vwo-el-id="28675661060">ç°ä»£åŒ–æ‚¨è°ƒè¯• React åº”ç”¨çš„æ–¹å¼â€” <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">å¼€å§‹å…è´¹ç›‘æ§</a>ã€‚</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>