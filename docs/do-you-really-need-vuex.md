# çœŸçš„éœ€è¦ Vuex å—ï¼Ÿ- LogRocket åšå®¢

> åŸæ–‡ï¼š<https://blog.logrocket.com/do-you-really-need-vuex/>

Vue å·²ç»æˆä¸ºä¸»æµçš„ JavaScript æ¡†æ¶ã€‚è¿™æ˜¯ç”±äºå¤šç§åŸå› ï¼Œä»å…¶æµç•…çš„å¼€å‘è€…ä½“éªŒåˆ°å…¶å¹¿æ³›çš„ç”Ÿæ€ç³»ç»Ÿã€‚Vue çš„æ ¸å¿ƒç”Ÿæ€ç³»ç»Ÿå’Œå·¥å…·å°¤å…¶ä»¤äººé’¦ä½©ï¼Œè¿™ä¹Ÿæ˜¯å®ƒæœ‰èµ„æ ¼è¢«ç§°ä¸ºæˆç†Ÿæ¡†æ¶çš„åŸå› ã€‚

Vue è¢«è®¾è®¡æˆå¤šåŠŸèƒ½çš„ï¼Œç„¶è€Œï¼Œè¿™ç§å¤šåŠŸèƒ½æ€§ç»å¸¸è¢«æ–°æ‰‹å’ŒæŸäº›ç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜è¯¯è§£ï¼Œä»–ä»¬å€¾å‘äºåŒ…æ‹¬è®¸å¤šå·¥å…·ï¼Œå› ä¸ºä»–ä»¬è®¤ä¸ºä»–ä»¬å¯èƒ½â€œä»¥åéœ€è¦å®ƒä»¬â€ã€‚äº‹å®ä¸Šï¼Œè¿™äº›å·¥å…·å¹¶ä¸æ€»æ˜¯éœ€è¦çš„ã€‚å› æ­¤ï¼Œåœ¨æ·»åŠ ä¸€ä¸ªå·¥å…·ä¹‹å‰ï¼Œäº†è§£å®ƒå¦‚ä½•èƒ½è®©æˆ‘ä»¬å—ç›Šæ˜¯éå¸¸é‡è¦çš„ï¼Œå¦åˆ™å®ƒå¯èƒ½ä¼šå˜æˆä¸€ä¸ªç¼ºç‚¹è€Œä¸æ˜¯æœ‰å¸®åŠ©çš„ä¸œè¥¿ã€‚

æˆ‘ä»¬ç°åœ¨æ¥çœ‹çœ‹ Vue.js: Vuex ä¸­çš„æ ¸å¿ƒ flux åº“ã€‚

Vuex æ˜¯ Vue.js ä¸­çš„çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚å®ƒæ˜¯ä¸€ä¸ªéµå¾ªä¸¥æ ¼è§„åˆ™çš„é›†ä¸­å­˜å‚¨ï¼Œä»¥ä¾¿å¸®åŠ©ç®¡ç† Vue åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ã€‚

å¬èµ·æ¥éå¸¸é‡è¦ã€‚å¯¹å—ï¼Ÿå®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œæ ¹æ®ä½¿ç”¨æƒ…å†µï¼Œå¯èƒ½æœ‰å¸®åŠ©ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰å¸®åŠ©ã€‚

## ä½ ä¸ºä»€ä¹ˆéœ€è¦ Vuexï¼Ÿ

Vuex æ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚å› æ­¤ï¼Œè¦ç†è§£ Vuex åšä»€ä¹ˆï¼Œæ‚¨é¦–å…ˆåº”è¯¥å¾ˆå¥½åœ°ç†è§£ SPA ä¸­çš„çŠ¶æ€æ¦‚å¿µï¼Œä»¥åŠå®ƒå¦‚ä½•ä¸å…¶ä»–å…ƒç´ äº¤äº’ã€‚

![Actions, State, and View Have a Circular Relationship](img/bf3aaeff2be04339152acab9e6007d7b.png)

åŸºæœ¬ä¸Šï¼ŒçŠ¶æ€å°±æ˜¯ç»„ä»¶æ‰€ä¾èµ–çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¾…åŠäº‹é¡¹åˆ—è¡¨ä¸Šçš„å¾…åŠäº‹é¡¹ï¼Œæˆ–è€…åšå®¢ä¸Šçš„å¸–å­ã€‚è¿™ä¸ªæ•°æ®ç§°ä¸ºçŠ¶æ€ï¼Œæ¯ä¸ª Vue ç»„ä»¶éƒ½å…è®¸æœ‰ä¸€ä¸ªçŠ¶æ€ã€‚

éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œç»„ä»¶å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨åƒ Vuex è¿™æ ·çš„çŠ¶æ€ç®¡ç†åº“ï¼Œè¿™äº›ç»„ä»¶ä¸­çš„æ¯ä¸€ä¸ªéƒ½å°†é€šè¿‡åˆ©ç”¨ä¸“é—¨è®¾è®¡çš„ Vue.js APIs æ¥ç®¡ç†å®ƒä»¬è‡ªå·±çš„çŠ¶æ€ã€‚

![The Vue.js Component Tree](img/c8e878d73b4feb6fd6dcb486208dcfc6.png)

è¯·è®°ä½ï¼ŒVue ä¿æŒäº†å¦‚ä¸Šå›¾æ‰€ç¤ºçš„æ ‘çŠ¶ç»„ä»¶æ¶æ„ï¼Œå¹¶ä¸”è¿˜é€šè¿‡`props`å®ç°äº†çˆ¶å­é€šä¿¡ï¼Œé€šè¿‡`events`å®ç°äº†çˆ¶å­é€šä¿¡ã€‚æ‚¨å¯ä»¥æƒ³è±¡ï¼Œå¦‚æœä¸¤ä¸ªç›¸è·é¥è¿œçš„å…„å¼Ÿç»„ä»¶éœ€è¦å¯¹ç›¸åŒçš„æ•°æ®æ›´æ”¹åšå‡ºååº”ï¼Œä¼šæœ‰å¤šå›°éš¾â€”â€”æˆ‘ä»¬éœ€è¦å°†æ•°æ®ä»å­ç»„ä»¶ä¼ é€’åˆ°çˆ¶ç»„ä»¶ï¼Œç›´åˆ°åˆ°è¾¾æœ€è¿‘çš„ç¥–å…ˆï¼Œç„¶åä»è¯¥ç¥–å…ˆä¼ é€’åˆ°ç‰¹å®šçš„å­ç»„ä»¶(å‚è§ä¸Šå›¾ä¸­çªå‡ºæ˜¾ç¤ºçš„ç»„ä»¶)ã€‚

è¿™éå¸¸è´¹åŠ›ä¸”å®¹æ˜“å‡ºé”™ã€‚

è¿™æ­£æ˜¯ Vuex çš„ç”¨æ­¦ä¹‹åœ°ã€‚Vuex è´Ÿè´£æå–æ•´ä¸ªæ¨¡å—çš„çŠ¶æ€ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ä¸­ï¼Œå®ƒéµå¾ª Vuex çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œå¹¶ç›¸åº”åœ°ä¸æ‚¨çš„ç»„ä»¶è¿›è¡Œé€šä¿¡ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒç»å¸¸è¢«ç§°ä¸ºâ€œçœŸç†çš„å”¯ä¸€æ¥æºâ€ã€‚å°½ç®¡ Vuex çš„åˆ«åæ˜¯è¿™æ ·çš„ï¼Œä½†è¿™å¹¶ä¸èƒ½æ”¹å˜ç»„ä»¶ä»ç„¶å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€è¿™ä¸€äº‹å®ã€‚æ‚¨å¯ä»¥å†³å®šä¸å…¶ä»–ç»„ä»¶å…±äº«è¿™äº›çŠ¶æ€ã€‚

![Sharing States With Components in Vuex](img/bcc93d2e5cc55e06bbd162200356e342.png)

æ—¢ç„¶ä½ å·²ç»ç†è§£äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåƒ Vuex è¿™æ ·çš„çŠ¶æ€ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­åšè¿™ä¸ªå¤§èƒ†çš„å‡è®¾:åªæœ‰ä¸¤ä¸ªä¸»è¦å› ç´ å†³å®šä½ æ˜¯å¦åº”è¯¥ä½¿ç”¨ Vue æ¥ç®¡ç†çŠ¶æ€ã€‚

## åº”ç”¨ç¨‹åºå¤§å°

äººä»¬ç»å¸¸è¯´â€œéšç€åº”ç”¨çš„å¢é•¿ï¼Œä½ å°†éœ€è¦ Vuexâ€ã€‚å…¶å®è¦çœ‹å®ƒç”Ÿé•¿çš„æ–¹å¼ã€‚ä½ çš„åº”ç”¨å¯èƒ½ä¼šå¢é•¿ï¼Œä½†ä½ çš„æ•°æ®æµä»ç„¶æ˜¯æ ¸å¿ƒçš„(å³äº²å­å…³ç³»å’Œå…„å¼Ÿå§å¦¹å…³ç³»)ã€‚

æœ€ç»ˆï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ to props å’Œ events æ¥å…±äº«è¿™äº›æ•°æ®ï¼Œè€Œä¸å¿…æ·»åŠ  Vuex å’Œé™„å¸¦çš„æ ·æ¿æ–‡ä»¶ã€‚

å¦ä¸€æ–¹é¢ï¼Œä¸€æ—¦ä½ æ³¨æ„åˆ°ä½ çš„ç»„ä»¶éœ€è¦ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®æºï¼Œæ˜æ™ºçš„åšæ³•æ˜¯åœæ­¢ä½¿ç”¨é“å…·å’Œäº‹ä»¶ï¼Œè½¬è€Œæ±‚åŠ©äº Vuexã€‚è¿™ä¸ºæ‚¨èŠ‚çœäº†å¤§é‡æ—¶é—´ï¼Œå› ä¸ºæ‚¨è¶Šæ™šåˆ‡æ¢åˆ° Vuexï¼Œå°±è¶Šéœ€è¦é‡æ„ã€‚

## é€»è¾‘å’Œæ•°æ®å¤æ‚æ€§

æœ‰æ—¶æˆ‘ä»¬éœ€è¦å°†æŸä¸ªå¤æ‚é€»è¾‘çš„å®ç°ä»æˆ‘ä»¬çš„ç»„ä»¶ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œç‰¹åˆ«æ˜¯å½“è¿™ä¸ªé€»è¾‘ä¸æˆ‘ä»¬ç³»ç»Ÿä¸­çš„å…¶ä»–ç»„ä»¶ç›¸å…³æ—¶ã€‚è¿™ä¸ªç”¨ä¾‹çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯èº«ä»½éªŒè¯ã€‚

Vuex æ˜¯åœ¨ Vue ä¸­å¤„ç†å¤æ‚åº”ç”¨è®¤è¯çš„ä¸€ç§æµè¡Œæ–¹å¼ã€‚å€ŸåŠ© Vuexï¼Œæ‚¨å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ä¸­å¤„ç†ä»¤ç‰Œçš„å¯ç”¨æ€§å’Œè®¿é—®æ§åˆ¶ä»¥åŠè·¯ç”±å—ã€‚çªå˜ã€getters å’Œ setters å¸®åŠ©å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚

è¯¥æ¨¡å¼å…è®¸æ‚¨å°†èº«ä»½éªŒè¯é€»è¾‘ä¸åº”ç”¨ç¨‹åºé€»è¾‘å®Œå…¨åˆ†ç¦»ï¼ŒåŒæ—¶ä¿æŒèº«ä»½éªŒè¯æµç¨‹çš„å¯è·Ÿè¸ªæ€§å’Œæ•°æ®çš„å¯è®¿é—®æ€§ã€‚

Vuex è¿˜ç®€åŒ–äº†å¯¹æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å•å…ƒæµ‹è¯•ï¼Œå¦‚æœä½ çš„åº”ç”¨ç¨‹åºè¶Šæ¥è¶Šå¤æ‚ï¼Œä½¿ä½ çš„çŠ¶æ€éš¾ä»¥ç®¡ç†ï¼Œè¿™å¯èƒ½æ˜¯æœ‰å¸®åŠ©çš„ã€‚ç„¶è€Œï¼Œä½ å®Œå…¨å¯ä»¥åœ¨ä¸ä½¿ç”¨ Vuex çš„æƒ…å†µä¸‹å®Œæˆæµ‹è¯•ã€‚

## æˆ‘ä»€ä¹ˆæ—¶å€™éœ€è¦ Vuexï¼Ÿ

ä¸¹Â·é˜¿å¸ƒæ‹‰è«å¤«å¼•ç”¨äº†ä¸€å¥æœ‰è¶£çš„è¯:

> é€šé‡åº“å°±åƒçœ¼é•œ:ä½ ä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒä»¬ã€‚

è¿™æ˜¯ä¸€ä¸ªéå¸¸çœŸå®çš„è¯´æ³•ã€‚ç„¶è€Œï¼Œæœ‰äººè¯´ï¼Œä½ éœ€è¦ä¸€ä¸ªé€šé‡åº“çš„æ—¶å€™å¯èƒ½ä¼šå‘ç°å¾—å¤ªæ™šäº†ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™å°†è¿«ä½¿æ‚¨å‘ä¸€ä¸ªå·²ç»å¾ˆå¤æ‚çš„åº”ç”¨ç¨‹åºå¼•å…¥ä¸€ä¸ªå¤æ‚çš„æµç¨‹ã€‚

åŸºäºæˆ‘ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªä¸»è¦å› ç´ (åº”ç”¨ç¨‹åºå¤§å°å’Œæ•°æ®å¤æ‚æ€§)ï¼Œæˆ‘åˆ›å»ºäº†è¿™ä¸ªå°æµç¨‹å›¾ï¼Œä»¥å¸®åŠ©å¼€å‘äººå‘˜ä»é¡¹ç›®è§„åˆ’é˜¶æ®µå°±å†³å®šä»–ä»¬æ˜¯å¦éœ€è¦ Vuex æ¥å¢å¼ºä»–ä»¬çš„åº”ç”¨ç¨‹åº:

![The Vuex Decision Map](img/ebf44ae976ef15f83565bbd3871dd749.png)

Vuex æ–‡æ¡£ä¸­è¿˜æœ‰ä¸€èŠ‚ç®€è¦è§£é‡Šäº†ä½•æ—¶åº”è¯¥ä½¿ç”¨ Vuexã€‚

## ä½ ä¸ºä»€ä¹ˆè¦ç¦»å¼€ Vuexï¼Ÿ

å½“æ‚¨ä½¿ç”¨ Vue-CLI åˆ›å»ºæ–°çš„ Vue.js åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¸ä¼šè¯¢é—®æ‚¨æ˜¯å¦éœ€è¦çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚åªæ˜¯ä¸åŒ…æ‹¬è€Œå·²ã€‚è™½ç„¶ Vue.js éå¸¸é€šç”¨ï¼Œä½†å®ƒçš„ç›®æ ‡æ˜¯éå¸¸å¹³æ˜“è¿‘äººï¼Œå¹¶è¯•å›¾è®©ä½ çš„æ–°é¡¹ç›®å°½å¯èƒ½ç®€å•ã€‚

äººä»¬é¿å…ä½¿ç”¨ Vuex çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯ Vuex è¿‡äºå†—é•¿ã€‚å®ƒéœ€è¦â€”â€”å®ƒå¿…é¡»éµå¾ªä¸€ç§æ¨¡å¼ï¼Œä»¥ç¡®ä¿ä½ çš„çŠ¶æ€çš„æ”¹å˜æ˜¯æœ‰æ„å‘ç”Ÿçš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ Vuex çš„åŸºæœ¬ todo ç»„ä»¶ï¼Œä¸å¦ä¸€ä¸ªä¸ä½¿ç”¨ Vuex çš„ç»„ä»¶è¿›è¡Œäº†æ¯”è¾ƒ:

![Comparing Todo component With and Without Vuex](img/78088e734e972c2247d8b2655f946bcd.png)

ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºäº†åœ¨ä¸€ä¸ªéå¸¸ç®€å•çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Vuex æ¥ç®¡ç†æ‚¨çš„çŠ¶æ€æ—¶ï¼Œæ‚¨çš„ä»£ç ä¼šå˜å¾—å¤šä¹ˆéº»çƒ¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½è·³è¿‡ Vuexï¼Œæ±‚åŠ©äºé“å…·å’Œäº‹ä»¶æˆ–å…¶ä»–ç®€å•çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚

## å¦‚ä½•è·³è¿‡ Vuex

åœ¨å¼€å‘ä¸­å°å‹åº”ç”¨ç¨‹åºæ—¶ï¼Œå¦‚æœä½ ä¸æƒ³çº ç¼ äº Vuex çš„å†—é•¿ï¼Œä½ å¯ä»¥æ¢ç´¢ä¸€äº›é€‰é¡¹ã€‚å…¶ä¸­ä¸€äº›æ–¹æ³•è¦æ±‚æ‚¨ä»å¤´å¼€å§‹ç¼–å†™ç®€å•çš„çŠ¶æ€ç®¡ç†ï¼Œå…¶ä»–æ–¹æ³•è¦æ±‚ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚ä½ å¯ä»¥æ ¹æ®ä½ æƒ³è¦æ„å»ºä»£ç çš„æ–¹å¼æ¥é€‰æ‹©æœ€é€‚åˆä½ çš„æ–¹å¼ã€‚

### å…¶ä»–åŠ©ç„Šå‰‚åº“

é™¤äº† Vuex ä¹‹å¤–ï¼Œä½¿ç”¨å¦ä¸€ä¸ªé€šé‡åº“ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½ä¸»æ„ã€‚è™½ç„¶å®ƒä»¬å¯èƒ½æœåŠ¡äºç›¸åŒçš„ç›®çš„ï¼Œä½†å®ƒä»¬åœ¨ç”¨æ³•ä¸Šç»å¸¸ä¸åŒã€‚ä¸ Vuex ç›¸æ¯”ï¼Œæœ‰äº›å¯èƒ½æä¾›è¾ƒå°‘çš„æ ·æ¿æ–‡ä»¶ï¼Œè¿™å¯èƒ½é€‚åˆæ‚¨çš„ä½¿ç”¨æ¡ˆä¾‹ã€‚

> ç›´è§‚ã€ç±»å‹å®‰å…¨ä¸”çµæ´»çš„ Vue Pinia å•†åº—é€‚ç”¨äº Vue 2 å’Œ Vue 3ã€‚Pinia æ˜¯è èä¸€è¯åœ¨è¥¿ç­ç‰™è¯­ä¸­æœ€ç›¸ä¼¼çš„è‹±è¯­å‘éŸ³:piaã€‚è èå®é™…ä¸Šæ˜¯ä¸€ç»„ç‹¬ç«‹çš„èŠ±ï¼Œå®ƒä»¬ç»“åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå¤šé‡çš„æœå®ã€‚

> ä¸€ä¸ªå— Redux & Vuex å¯å‘çš„å¾®å‹åº“ï¼Œå¸®åŠ©ä½ ç®¡ç†ä½ çš„ JavaScript åº”ç”¨ç¨‹åºçš„çŠ¶æ€â€”â€”GitHubâ€”â€”Andy-set-studio/beedle:ä¸€ä¸ªå— Redux & Vuex å¯å‘çš„å¾®å‹åº“ï¼Œå¸®åŠ©ä½ ç®¡ç†ä½ çš„ JavaScript åº”ç”¨ç¨‹åºçš„çŠ¶æ€

> å— Vuex å¯å‘çš„ VueJS çš„ Redux ç»‘å®šã€‚Redux å’Œ vuex çœŸçš„å¾ˆéš¾æ¯”ã€‚Vuex æ˜¯ä¸€ç§çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œå®ƒæ¸…æ¥šåœ°å®šä¹‰äº†çŠ¶æ€ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªä¸»ä½“ã€‚å¯¹äºå¤§å¤šæ•°é¡¹ç›®æ¥è¯´ï¼Œè¿™æœ‰åŠ©äºæ„å»ºæ‚¨çš„åº”ç”¨ç¨‹åºï¼Œä½†ä¹Ÿç•™ä¸‹äº†å¤§é‡çš„æ¶æ„è¶³è¿¹ã€‚

> Vue 3 å¼ºå¤§è€Œç®€å•çš„å…¨å±€çŠ¶æ€ç®¡ç†ã€‚å‰å¾€ harlemjs.com å¼€å§‹å§ï¼Œæˆ–è€…çœ‹ä¸€ä¸‹æ¼”ç¤ºï¼Œçœ‹çœ‹å®ƒçš„å®é™…æ•ˆæœã€‚Harlem æœ‰ä¸€ä¸ªç®€å•çš„å‡½æ•°å¼ API æ¥åˆ›å»ºã€è¯»å–å’Œæ”¹å˜çŠ¶æ€ã€‚ä»æœ€åŸºæœ¬çš„å…¨çƒå›½å®¶ç®¡ç†éœ€æ±‚åˆ°æœ€å¤æ‚çš„éœ€æ±‚ï¼Œå“ˆè±å§†åŒºéƒ½èƒ½æ»¡è¶³ã€‚

> NPM åœ°ä½:ğŸ“¦Vue 3.0 çš„å¿«é€Ÿã€ç®€å•å’Œè½»é‡çº§çŠ¶æ€ç®¡ç†ï¼Œé‡‡ç”¨å¤åˆ API æ„å»ºï¼Œçµæ„Ÿæ¥è‡ª Vuexã€‚è¿è¡Œç¤ºä¾‹:ä» NPM å®‰è£…è¿™ä¸ªåŒ…:ï¼„NPM install @ mediv 0/v-bucket æˆ– yarn:ï¼„yarn add @ mediv 0/v-bucket é¦–å…ˆéœ€è¦åˆ›å»ºæ‚¨çš„ bucketã€‚

ä»å¤´å¼€å§‹é€šé‡

### æˆ‘å»ºè®®ä»»ä½•äººé€‰æ‹© Vuexï¼Œè€Œä¸æ˜¯éµå¾ªè¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå®é™…ä¸Šä½ æœ€ç»ˆåªä¼šé‡æ–°åˆ›å»º Vuexã€‚ç„¶è€Œï¼Œå¦‚æœæ‚¨éœ€è¦ä¸€ä¸ªâ€œå®šåˆ¶â€çš„çœŸå®æ¥æºï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨`Vue.reactive`æ–¹æ³•è‡ªå·±å®ç°ä¸€ä¸ªã€‚

è¯·è®°ä½ï¼Œä¸ºäº†è®©å®ƒæˆä¸ºå¯é çš„çœŸç†æ¥æºï¼Œå˜åŒ–åº”è¯¥åªå‘ç”Ÿåœ¨çªå˜çš„åŸºç¡€ä¸Šï¼Œå¦åˆ™ä½ ä¼šå‘ç°è‡ªå·±æœ‰æ— æ³•è¿½è¸ªçš„é”™è¯¯ã€‚

![Shared State Built From Scratch](img/03f01d7a886c6864803a593edd0b25ee.png)

åœ¨å®ƒçš„æ–‡æ¡£ä¸­ï¼ŒVue æä¾›äº†ä¸€ä¸ª[å°æŒ‡å—](https://v3.vuejs.org/guide/state-management.html#simple-state-management-from-scratch)æ¥å¸®åŠ©å¼€å‘è€…åˆ›å»ºä»–ä»¬è‡ªå·±çš„é›†ä¸­å¼çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚

äº‹ä»¶æ€»çº¿

### Vue è¿˜æ”¯æŒæ‚¨é€šè¿‡å…¨å±€äº‹ä»¶æ€»çº¿åœ¨æ•´ä¸ªåº”ç”¨ä¸­ä¼ é€’æ•°æ®ã€‚ä½ å¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« æ¥è·å¾—å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„è¯¦ç»†æ•™ç¨‹:[https://blog . log rocket . com/using-event-bus-in-vue-js-to-pass-data-between-components/](https://blog.logrocket.com/using-event-bus-in-vue-js-to-pass-data-between-components/)ã€‚

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Vue 3ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ä½œä¸ºä½ çš„æ´»åŠ¨ä¸­å¿ƒæ˜¯ä¸ªå¥½ä¸»æ„ï¼Œæ¯”å¦‚[å¾®å‹å‘å°„å™¨](https://github.com/scottcorgan/tiny-emitter)æˆ–[ç±³ç‰¹](https://github.com/developit/mitt)ï¼Œæ­£å¦‚[æ–‡æ¡£](https://v3.vuejs.org/guide/migration/events-api.html#migration-strategy)ä¸­æ‰€å»ºè®®çš„ã€‚

ç»„åˆ API

### Vue çš„ composition API çš„åŠ¨æœºæ˜¯åœ¨ Vue åº”ç”¨ä¸­å®ç°æ›´å¥½çš„é€»è¾‘é‡ç”¨å’Œä»£ç ç»„ç»‡ã€‚composition API åœ¨ Vue ä¸­å¼•å…¥äº†æ¨¡å—åŒ–æ¨¡å¼ï¼Œä½¿æ‚¨èƒ½å¤Ÿçµæ´»åœ°ç»„åˆç»„ä»¶çš„é€»è¾‘ã€‚

æ­£å¦‚ Andrej Galuf æ‰€è§£é‡Šçš„ï¼Œæœ‰äº†è¿™ä¸ªä¼˜é›…çš„æ¨¡å¼ï¼Œå°±æœ‰å¯èƒ½å°†ç»„åˆ API ç”¨ä½œå­˜å‚¨ã€‚æ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œç¨åç”¨ä½œæ‚¨çš„å…±äº«å­˜å‚¨ã€‚ä¸ Vuex å¯èƒ½å¸¦æ¥çš„ç›¸æ¯”ï¼Œè¿™å°†å¤§å¤§å‡å°‘è¾ƒå°åº”ç”¨ç¨‹åºä¸Šçš„æ ·æ¿æ–‡ä»¶ã€‚

æ’ä»¶

```
// @/services/counter.js
import { ref, computed } from '@vue/composition-api'
const count = ref(0)
export const getCount = computed(() => count.value)
export const increment = () => count.value += 1
```

```
// @/components/ComponentA.vue
<template>
    <div id="component-a">
        <button @click="increment()">Increment Counter</button>
    </div>
</template>

<script>
import { createComponent } from '@vue/composition-api'
import { increment } from '@/services/click-counter'

export default createComponent({
    setup() {
        return {
            increment
        }
    }
})
</script>

```

```
// @/components/ComponentB.vue
<template>
    <div id="component-b">
        Clicks: {{ getCount }}
    </div>
</template>

<script lang="ts">
import { createComponent } from '@vue/composition-api'
import { getCount } from '@/services/click-counter'

export default createComponent({
    setup() {
        return {
            getCount
        }
    }
})
</script>

```

### Vuex ä¹Ÿæœ‰æ’ä»¶å¯ä»¥å¸®åŠ©ç®€åŒ–æ ·æ¿æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ Vuex-pathify æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨åœ¨ä¸ä½¿ç”¨ getters å±æ€§çš„æƒ…å†µä¸‹è®¿é—®çŠ¶æ€ä¸­çš„æ·±å±‚å±æ€§â€”â€”æ‚¨å¯ä»¥ä½¿ç”¨è·¯å¾„æ¥è¿™æ ·åšã€‚æ¯”å¦‚å¯ä»¥ç”¨`[[emailÂ protected]](/cdn-cgi/l/email-protection)`ã€‚Vuex pathify è¿˜ä½¿æ‚¨èƒ½å¤Ÿç”¨å•ä¸€è·¯å¾„è®¾ç½®çªå˜ã€‚

Pathify é€šè¿‡å£°æ˜æ€§çš„ã€åŸºäºçŠ¶æ€çš„è·¯å¾„è¯­æ³•ä½¿ä½¿ç”¨ Vuex å˜å¾—ç®€å•:è·¯å¾„å¯ä»¥å¼•ç”¨ä»»ä½•æ¨¡å—ã€å±æ€§æˆ–å­å±æ€§:Pathify çš„ç›®æ ‡æ˜¯é€šè¿‡æŠ½è±¡å‡º Vuex çš„å¤æ‚è®¾ç½®å’Œå¯¹æ‰‹åŠ¨ç¼–å†™ä»£ç çš„ä¾èµ–æ¥ç®€åŒ–æ•´ä½“ Vuex å¼€å‘ä½“éªŒã€‚

> ç»“è®º

æ¯«æ— ç–‘é—®ï¼ŒVuex æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·ã€‚ç„¶è€Œï¼ŒæƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚å…¶ä¸­ä¸€é¡¹èŒè´£æ˜¯äº†è§£å®ƒçš„åŠŸèƒ½ï¼Œå¹¶å†³å®šæ˜¯å¦ä»¥æ‹¥æœ‰æ›´å¤æ‚çš„ä»£ç åº“ä¸ºä»£ä»·æ¥åˆ©ç”¨å®ƒã€‚

## å¤§å¤šæ•°ç®€å•çš„åº”ç”¨ç¨‹åºéƒ½å¾ˆé€‚åˆ Vue çš„äº‹ä»¶å’Œé“å…·æ•°æ®é€šä¿¡æ¨¡å¼ã€‚å¦‚æœæˆ‘ä»¬åŠ å…¥ Vuexï¼Œè¿™äº›åº”ç”¨å°†å˜å¾—æ›´åŠ å¤æ‚ã€‚æ­¤å¤–ï¼ŒVue.js æä¾›äº†å¾ˆæ£’çš„å·¥å…·ï¼Œå¦‚ composition API å’Œ top tier reactivityï¼Œå®ƒä»¬å¯ä»¥ä»¥æ¯” Vuex æ›´å¥½ã€æ›´ç®€å•çš„æ–¹å¼å®Œæˆè¿™é¡¹å·¥ä½œã€‚

ä¸‹ä¸€æ¬¡ä½ åœ¨åšä½ çš„è¶…æ£’çš„ Vue é¡¹ç›®æ—¶ï¼Œç¡®ä¿ä½ åœ¨æ·»åŠ å®ƒä¹‹å‰ç¡®å®éœ€è¦ Vuexã€‚

åƒç”¨æˆ·ä¸€æ ·ä½“éªŒæ‚¨çš„ Vue åº”ç”¨

è°ƒè¯• Vue.js åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯å½“ç”¨æˆ·ä¼šè¯æœŸé—´æœ‰å‡ åä¸ª(å¦‚æœä¸æ˜¯å‡ ç™¾ä¸ª)çªå˜æ—¶ã€‚å¦‚æœæ‚¨å¯¹ç›‘è§†å’Œè·Ÿè¸ªç”Ÿäº§ä¸­æ‰€æœ‰ç”¨æˆ·çš„ Vue çªå˜æ„Ÿå…´è¶£ï¼Œ

## .

LogRocket å°±åƒæ˜¯ç½‘ç»œå’Œç§»åŠ¨åº”ç”¨ç¨‹åºçš„ DVRï¼Œè®°å½•ä½ çš„ Vue åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿçš„ä¸€åˆ‡ï¼ŒåŒ…æ‹¬ç½‘ç»œè¯·æ±‚ã€JavaScript é”™è¯¯ã€æ€§èƒ½é—®é¢˜ç­‰ç­‰ã€‚æ‚¨å¯ä»¥æ±‡æ€»å¹¶æŠ¥å‘Šé—®é¢˜å‘ç”Ÿæ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯çŒœæµ‹é—®é¢˜å‘ç”Ÿçš„åŸå› ã€‚

[try LogRocket](https://lp.logrocket.com/blg/vue-signup)

LogRocket Vuex æ’ä»¶å°† Vuex çªå˜è®°å½•åˆ° LogRocket æ§åˆ¶å°ï¼Œä¸ºæ‚¨æä¾›å¯¼è‡´é”™è¯¯çš„ç¯å¢ƒï¼Œä»¥åŠå‡ºç°é—®é¢˜æ—¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚

[![LogRocket Dashboard Free Trial Banner](img/0d269845910c723dd7df26adab9289cb.png)](https://lp.logrocket.com/blg/vue-signup)[https://logrocket.com/signup/](https://lp.logrocket.com/blg/vue-signup)

ç°ä»£åŒ–æ‚¨è°ƒè¯• Vue åº”ç”¨çš„æ–¹å¼- [å¼€å§‹å…è´¹ç›‘æ§](https://lp.logrocket.com/blg/vue-signup)ã€‚

The LogRocket Vuex plugin logs Vuex mutations to the LogRocket console, giving you context around what led to an error, and what state the application was in when an issue occurred.

Modernize how you debug your Vue apps - [Start monitoring for free](https://lp.logrocket.com/blg/vue-signup).