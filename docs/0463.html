<html>
<head>
<title>Creating a full-stack MERN application using JWT authentication: Part 3 - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>ä½¿ç”¨JWTè®¤è¯åˆ›å»ºå…¨æ ˆMERNåº”ç”¨ç¨‹åº:ç¬¬3éƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/#0001-01-01">https://blog.logrocket.com/mern-app-jwt-authentication-part-3/#0001-01-01</a></blockquote><div><article class="article-post">
<p>è¿™æ˜¯æˆ‘ä»¬å…³äºä½¿ç”¨JWTè®¤è¯åˆ›å»ºå…¨æ ˆMERNåº”ç”¨ç¨‹åºç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†çš„ç»§ç»­ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»ç¬¬äºŒéƒ¨åˆ†<a href="https://blog.logrocket.com/mern-app-jwt-authentication-part-2/"/>ï¼Œè¯·é˜…è¯»é¢å¤–çš„ä¸Šä¸‹æ–‡ä»¥ä¾¿ä½ èƒ½æ›´å¥½åœ°ç†è§£è¿™ç¯‡æ–‡ç« ã€‚ä½ ä¹Ÿå¯ä»¥<a href="https://blog.logrocket.com/mern-app-jwt-authentication-part-1/">åœ¨è¿™é‡Œé˜…è¯»ç¬¬ä¸€éƒ¨åˆ†</a>ã€‚</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ç”ŸæˆJSON Webä»¤ç‰Œçš„ç³»ç»Ÿã€‚è®©æˆ‘ä»¬é€šè¿‡åœ¨å‰ç«¯æ„å»ºä¸€ä¸ªReactå•é¡µé¢åº”ç”¨ç¨‹åºæ¥å¼€å§‹ä½¿ç”¨å®ƒã€‚</p>
<h2>åˆ›å»ºReactåº”ç”¨ç¨‹åº</h2>
<p>æˆ‘é¦–å…ˆæ¨èçš„æ˜¯ç¯å¢ƒè®¾ç½®ã€‚åœ¨ç»å†äº†Wes Bos çš„<a href="https://wesbos.com/courses/">è¯¾ç¨‹åï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨Visual Studioä»£ç (æˆ‘ä¸€å¼€å§‹å¾ˆè®¨åŒå®ƒï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ª</a><a href="https://blog.praveen.science/my-personal-development-environment/">å®Œå…¨ä¸åŒçš„å¼€å‘ç¯å¢ƒ</a>ï¼Œå¿ å®äºSublime Text)ã€‚</p>
<p>åˆ›å»ºæ–°çš„Reactåº”ç”¨ç¨‹åºæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç®€å•çš„<a href="https://facebook.github.io/create-react-app/"> <code>create-react-app</code> </a>ã€‚å¯¼èˆªåˆ°ç»ˆç«¯ä¸­çš„å®¢æˆ·ç«¯ç›®å½•ï¼Œç„¶åè¿è¡Œ:</p>
<pre>âœ  FrontEnd git:(master) $ npx create-react-app .</pre>
<p>è¿™é‡Œçš„<code><a href="https://www.npmjs.com/package/npx">npx</a></code>ä¸æ˜¯è¾“å…¥é”™è¯¯ï¼Œè€Œæ˜¯æ­£ç¡®çš„å‘½ä»¤ã€‚<code>create-react-app</code>åº”ç”¨ç¨‹åºå®‰è£…åƒ<code>react</code>ã€<code>react-dom</code>å’Œ<code>react-scripts</code>è¿™æ ·çš„åŒ…ã€‚ä¸€æ—¦å®Œæˆï¼Œæ‚¨å°±æœ‰äº†å…¨æ–°çš„Reactåº”ç”¨ç¨‹åºã€‚</p>
<h2>ç¡®ä¿HTTPSçš„å®‰å…¨</h2>
<p>æˆ‘ä»¬ä»Šå¤©è®¿é—®çš„å‡ ä¹æ‰€æœ‰ç½‘ç«™éƒ½å—åˆ°HTTPSçš„ä¿æŠ¤ã€‚å¦‚æœä½ çš„è¿˜æ²¡æœ‰ï¼Œ<a href="https://developers.google.com/web/fundamentals/security/encrypt-in-transit/why-https">åº”è¯¥æ˜¯</a>ã€‚ä½¿ç”¨HTTPSä¿æŠ¤æ‚¨çš„æœåŠ¡å™¨è¿˜å°†ç¡®ä¿æ‚¨æ— æ³•ä»ä¸å—HTTPSä¿æŠ¤çš„æœåŠ¡å™¨å‘æ­¤æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚è¿™ç»™ä½¿ç”¨æœ¬åœ°å¼€å‘ç¯å¢ƒçš„å¼€å‘äººå‘˜å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºä»–ä»¬éƒ½æ˜¯åœ¨å¼€ç®±å³ç”¨çš„<code><a href="http://localhost" rel="nofollow">http://localhost</a></code>ä¸Šè¿è¡Œçš„ã€‚</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„è®¤è¯æœºåˆ¶ã€æ”¯ä»˜ç½‘å…³å’Œç±»ä¼¼çš„æŠ€æœ¯æ—¶ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦ç”¨HTTPSä¿æŠ¤æˆ‘ä»¬çš„æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œä¸ä»…è¦ä½¿å®ƒä»¬å·¥ä½œï¼Œè¿˜è¦æ¨¡æ‹Ÿç”Ÿäº§æœåŠ¡å™¨ã€‚ä½ æœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•ä½¿ç”¨Reactæ¥ä½¿ç”¨HTTPSï¼Œä½ å¯ä»¥åœ¨"<a href="https://blog.praveen.science/using-reacts-proxy-to-get-ahead-of-cors/">ä½¿ç”¨Reactçš„ä»£ç†æ¥è¶…è¶ŠCORS &amp;ä½¿ç”¨HTTPSè¿›è¡ŒAPIè°ƒç”¨</a>"</p>
<h2>å®‰è£…ä¾èµ–é¡¹</h2>
<p>å› ä¸ºåº”ç”¨ç¨‹åºæ˜¯ä½¿ç”¨<code>create-react-app</code>æ„å»ºçš„ï¼Œæ‰€ä»¥æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯é»˜è®¤å®‰è£…çš„ã€‚ä¸»è¦ä¾èµ–å…³ç³»åŒ…æ‹¬:</p>
<ul>
<li><code>react</code></li>
<li><code>react-dom</code></li>
<li><code>react-scripts</code></li>
</ul>
<p><code>react-scripts</code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®Œæ•´çš„åŒ…ï¼ŒåŒ…å«äº†å°†React JSXå’ŒES6+è½¬æ¢æˆåŸºäºES5çš„JavaScriptæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹(æ¯”å¦‚<code>webpack</code>å’Œ<code>babel</code>)ã€‚é™¤äº†ä¸Šé¢çš„ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦ä¸€äº›ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨çš„ä¸€ä¸ªä¸»è¦çš„æ ·å¼ç›¸å…³çš„åŒ…æ˜¯<a href="https://www.npmjs.com/package/node-sass"> <code>node-sass</code> </a>ï¼Œç”¨äºå°†<a href="https://sass-lang.com/"> SCSS </a>ç¼–è¯‘æˆCSSã€‚å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„æ˜¯ç”¨äºè§¦å‘HTTP <code>GET</code>ã€<code>POST</code>ã€<code>PUT</code>å’Œ<code>DELETE</code>è°ƒç”¨çš„<a href="https://github.com/axios/axios"> <code>axios</code> AJAXåº“</a>ã€‚è¿™åªæ˜¯ä¸€ä¸ªæ¼‚äº®çš„<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"> <code>fetch()</code> API </a>çš„åŒ…è£…å™¨ã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨æˆ‘ä»¬æœ€å–œæ¬¢çš„<code>npm install</code>å‘½ä»¤æ¥å®‰è£…ä¸Šé¢ä¸¤ä¸ªä¾èµ–é¡¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>npm install</code>å®‰è£…å¤šä¸ªåŒ…ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨ç©ºæ ¼åˆ†éš”çš„åº“åæ¥æŒ‡å®šå®ƒä»¬ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre>âœ  FrontEnd git:(master) $ npm install axios node-sass
npm WARN <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2e5a5d035e405e6e1f001e001f">[emailÂ protected]</a> requires a peer of <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a3d7dad3c6d0c0d1cad3d7e3">[emailÂ protected]</a>* but none is installed. You must install peer dependencies yourself.

+ <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a7c6dfcec8d4e79789969f8997">[emailÂ protected]</a>
installed 1 package and audited 36854 packages in 8.074s</pre>
<h3>åŒè¡Œè¦æ±‚</h3>
<p>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨ä¸ºReactåº”ç”¨ç¨‹åºä½¿ç”¨TypeScriptï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨<code>npm</code>ä¸º<code><a href="https://www.npmjs.com/package/ts-pnp">ts-pnp</a></code>å®‰è£…<code><a href="https://www.npmjs.com/package/typescript">typescript</a></code>åŒ…ï¼Œè¿™æ˜¯ä¸€ä¸ªä½çº§åŒ…ï¼Œå®ƒå¯¼å‡ºä¸€ä¸ªå‡½æ•°æ¥å®ç°æ¥è‡ª<code>CompilerHost</code> çš„<a href="https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API%23customizing-module-resolution"> <code>resolveModuleName</code>é’©å­:</a></p>
<pre>âœ  FrontEnd git:(master) npm install typescript
+ <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="cbbfb2bbaeb8a8b9a2bbbf8bf8e5ffe5">[emailÂ protected]</a>5
added 1 package from 1 contributor, updated 1 package and audited 36855 packages in 8.982s
âœ  FrontEnd git:(master) npm install axios
+ <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="98f9e0f1f7ebd8a8b6a9a0b6a8">[emailÂ protected]</a>
updated 1 package and audited 36855 packages in 8.959s</pre>
<p>æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œä¸€æ—¦å®‰è£…äº†<code>typescript</code>åŒ…ï¼Œé”™è¯¯å°±æ¶ˆå¤±äº†ã€‚</p>
<h2>ä½¿ç”¨Reactçš„ä»£ç†</h2>
<p>åœ¨å¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨React webåº”ç”¨ç¨‹åºä¸­è®¾ç½®ä¸€ä¸ªç®€å•çš„ä»£ç†æœåŠ¡å™¨æ¥æ¨¡æ‹ŸAPIè°ƒç”¨çš„çœŸå®ç¯å¢ƒã€‚è¿™éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å°†åªä½¿ç”¨åŸŸçš„ç›¸å¯¹URLæ¥è¿›è¡ŒAPIè°ƒç”¨ï¼Œæ‰€æœ‰è°ƒç”¨éƒ½å°†ä½¿ç”¨å‰ç¼€<code>/api/</code>è¿›è¡Œè·¯ç”±ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨æˆ‘ä»¬çš„<code>package.json</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°è¡Œæ¥è·å¾—è¿™ä¸ªç‰¹æ€§ã€‚è€ƒè™‘åˆ°æˆ‘ä»¬çš„Express.js APIæœåŠ¡å™¨â€”â€”æˆ‘ä»¬åœ¨<a href="/">çš„ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­æ„å»ºçš„â€”â€”è¿è¡Œåœ¨ç«¯å£<code>3100</code>ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä»¥ä¸‹æ›´æ”¹è®©React devæœåŠ¡å™¨(CRA/webpack)çŸ¥é“:</p>
<pre>{
  "name": "client",
  "version": "0.1.0",
  "proxy": "http://localhost:3100/",    // Set the proxy this way. All the unrouted requests will go here.
  "private": true,
  // Other stuff.
}</pre>
<h2>è®¾ç½®AJAXè°ƒç”¨</h2>
<p>è¿™æ˜¯æ–‡ç« ç°åœ¨çš„ä¸»è¦ç—‡ç»“ã€‚æˆ‘ä»¬éœ€è¦ä¸ºæ‰€æœ‰AJAXè°ƒç”¨è®¾ç½®ä¸€ä¸ªåŒ…è£…å™¨ï¼Œç„¶åæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªæœåŠ¡è®¾ç½®åŒ…è£…å™¨ã€‚ä½œä¸ºæœåŠ¡è°ƒç”¨æ–¹ï¼Œä½ å¯ä»¥æ›´å¥½åœ°è°ƒç”¨å®ƒä»¬â€”â€”è¿™å°†æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚</p>
<p>ä¸ºäº†äº†è§£å¦‚ä½•ç”¨Axioså¯åŠ¨AJAXè°ƒç”¨ï¼Œè®©æˆ‘ä»¬åªå…³æ³¨æœ€å¸¸è§çš„<code>GET</code>å’Œ<code>POST</code>è¯·æ±‚ã€‚è¯·è®°ä½ï¼ŒAxiosè¿”å›äº†ä¸€ä¸ªæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥å¤„ç†çš„æ‰¿è¯ºã€‚</p>
<h3>å¯¼å…¥Axios</h3>
<p>ä½ å¯ä»¥é€šè¿‡å®ƒçš„åŒ…å¯¼å…¥Axiosã€‚ç®€å•çš„å¯¼å…¥å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦åˆ°å¤„å¯¼å…¥ï¼›è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æœ‰æœåŠ¡è°ƒç”¨è€…åŒ…è£…å™¨ã€‚</p>
<pre>import Axios from "axios";</pre>
<p>è®¸å¤šäººä½¿ç”¨<code>Axios</code>æˆ–<code>axios</code>ï¼Œä½†è¿™çœŸçš„æ— å…³ç´§è¦ï¼Œå› ä¸ºè¿™æ˜¯é»˜è®¤å¯¼å…¥ã€‚é»˜è®¤å¯¼å…¥æ²¡æœ‰å‘½åï¼Œæ‰€ä»¥æ‚¨å¯ä»¥æ‹¥æœ‰ä»»ä½•ä¸œè¥¿ã€‚ä½ ç”šè‡³å¯ä»¥æœ‰è¿™æ ·çš„ä¸œè¥¿:</p>
<pre>import Praveen from "axios";</pre>
<p>å®ƒå·¥ä½œèµ·æ¥å®Œç¾æ— ç¼ºã€‚æˆ‘ä»¬æš‚æ—¶ç”¨<code>Axios</code>å§ã€‚ğŸ˜‡</p>
<h3>HTTP <code>GET</code>å’Œ<code>POST</code>è¯·æ±‚</h3>
<p>HTTP <code>GET</code>å’Œ<code>POST</code>è¯·æ±‚æ˜¯APIè¯·æ±‚çš„ä¸¤ä¸ªåŸºæœ¬æ–¹æ³•(æˆ–åŠ¨è¯)ã€‚æ‰§è¡ŒHTTP <code>GET</code>è¯·æ±‚çš„æœ€ç®€å•æ–¹æ³•å¦‚ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æ­£åœ¨ç‚¹å‡»<code>/user</code> APIç«¯ç‚¹æ¥æ£€ç´¢å…³äºä»¥<code>name</code>ä¸º<code>praveen</code>çš„ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯:</p>
<pre>// Make a request for a user with a given name.
axios.get("/user?name=praveen")
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });</pre>
<p>ä¸Šé¢çš„è¯·æ±‚ä¹Ÿå¯ä»¥è¿™æ ·å†™:</p>
<pre>// Optionally, the request above could also be done as:
axios.get("/user", {
  params: {
    name: "praveen"
  }
})
  .then(function (response) {
    console.log(response);
  })
    .catch(function (error) {
    console.log(error);
  });</pre>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>data</code>å‚æ•°ã€‚æ— è®ºå¦‚ä½•ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªè¦å‘é€çš„å¯¹è±¡ï¼Œä½ å¯ä»¥è¿™æ ·å‘é€ã€‚</p>
<p><code>POST</code>è¯·æ±‚æ˜¯ç±»ä¼¼çš„ã€‚é¦–å…ˆä½ éœ€è¦å°†æ–¹æ³•æ”¹ä¸º<code>axios.post()</code>ï¼Œå¹¶ä¸”ä½ å°†ç»™å‡º<code>data</code>å‚æ•°ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬å°è¯•ç”¨<code>name</code>å‚æ•°åˆ›å»ºä¸€ä¸ªç”¨æˆ·:</p>
<pre>axios.post("/user", {
  firstName: "Praveen",
  lastName: "Kumar",
  name: "praveen"
})
  .then(function(response) {
    console.log(response);
  })
  .catch(function(error) {
    console.log(error);
  });</pre>
<p>å¾ˆæ£’ï¼Œå¯¹å§ï¼Ÿä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹Axioså’Œ<code>fetch()</code>ä¹‹é—´çš„ä¸€äº›<a href="https://blog.logrocket.com/axios-or-fetch-api/">å·®å¼‚ã€‚</a></p>
<h2>JSON Webä»¤ç‰Œè®¤è¯</h2>
<p>ç»§ç»­ï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºçš„ä¸»è¦åŸå› æ˜¯æ¼”ç¤ºå®¢æˆ·ç«¯çš„<a href="https://jwt.io/"> JSON Web Token (JWT) </a>è®¤è¯ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹JWTè®¤è¯å·¥ä½œæµã€‚</p>
<p>é¦–å…ˆï¼Œå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘å‡ºä¸€ä¸ªHTTP <code>POST</code>è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªJSON Webä»¤ç‰Œå¹¶å‘é€ç»™å®¢æˆ·æœºã€‚å®¢æˆ·ç«¯ç„¶ååœ¨æœ¬åœ°å­˜å‚¨JWT(ä½¿ç”¨ä¸€ä¸ª<code>localStorage</code>æˆ–å˜é‡)å¹¶åœ¨<code>Authorization</code>å¤´ä¸Šå‘é€å®ƒã€‚</p>
<p>å½“å‘æœåŠ¡å™¨å‘å‡ºä¸€ä¸ª<code>POST</code>è¯·æ±‚æ—¶ï¼ŒJWTä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ä»¤ç‰Œä»¥å¦‚ä¸‹æ ¼å¼å‘é€:</p>
<p><img data-attachment-id="6745" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/jwt-string-format-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png" data-orig-size="730,198" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="JWT string format" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format-300x81.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png" decoding="async" class="aligncenter size-full wp-image-6745 jetpack-lazy-image" src="../Images/671993af75e831f54e97ed94f57dd20f.png" alt="JWT String Format" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format-300x81.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6745" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/jwt-string-format-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png" data-orig-size="730,198" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="JWT string format" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format-300x81.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6745" src="../Images/671993af75e831f54e97ed94f57dd20f.png" alt="JWT String Format" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format-300x81.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/jwt-string-format.png"/></noscript>
<p>æœ‰ä¸‰ä¸ªéƒ¨åˆ†â€”â€”æŠ¥å¤´ã€æœ‰æ•ˆè½½è·å’Œç­¾åã€‚ç­¾åéƒ¨åˆ†ä»…ç”¨äºéªŒè¯JWTï¼Œç”±äºæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ï¼ŒéªŒè¯éœ€è¦<code>secret-key</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†<strong>è€Œä¸æ˜¯</strong>åœ¨å®¢æˆ·ç«¯éªŒè¯ä»¤ç‰Œâ€”â€”å°½ç®¡è¿™æ˜¯å¯èƒ½çš„ã€‚æˆ‘ä»¬åªéœ€è¦æœ‰æ•ˆè½½è·éƒ¨åˆ†ã€‚</p>
<h3>å®‰è£…JWTå›¾ä¹¦é¦†</h3>
<p>ä¸ºäº†è§£æJWTï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯ç”¨æ¥ç”ŸæˆJWTçš„åŒä¸€ä¸ªåº“ã€‚<code><a href="https://www.npmjs.com/package/jsrsasign">jsrsasign</a></code>åœ¨å®¢æˆ·ç«¯ä¹Ÿè¿è¡Œè‰¯å¥½ã€‚è®©æˆ‘ä»¬ä½¿ç”¨<code>npm install</code>å°†å®ƒå®‰è£…åœ¨å®¢æˆ·ç«¯Reactåº”ç”¨ç¨‹åºä¸Šï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre>âœ  FrontEnd git:(master) npm install jsrsasign
npm WARN <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e39790ce938d93a3d2cdd3cdd2">[emailÂ protected]</a> requires a peer of <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="24505d54415747564d545064">[emailÂ protected]</a>* but none is installed. You must install peer dependencies yourself.

+ <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5f352c2d2c3e2c3638311f67716f716e6d">[emailÂ protected]</a>
added 1 package from 1 contributor and removed 1 package in 18.476s</pre>
<p>ä»¥ä¸Šæ˜¯è½¯ä»¶åŒ…çš„å…¸å‹å®‰è£…ã€‚æ‚¨å¯èƒ½ä¼šé‡åˆ°åŒæ ·çš„<code><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="52262b22372131203b222612">[emailÂ protected]</a>*</code>å¯¹ç­‰ä¾èµ–é—®é¢˜ï¼Œå¦‚æœæ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨TypeScriptï¼Œæœ€å¥½å®‰è£…ä»»ä½•ç‰ˆæœ¬çš„<code>typescript</code>ã€‚</p>
<h3>å°†<code>jsrsasign</code>å¯¼å…¥Reactåº”ç”¨ç¨‹åº</h3>
<p>å®‰è£…å®Œæˆåï¼Œåªéœ€åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ™®é€šå¯¼å…¥å³å¯ä½¿ç”¨è¯¥åº“:</p>
<pre>import JSRSASign from "jsrsasign";</pre>
<p>æ‚¨å°†ä»è¯¥åº“ä¸­ä½¿ç”¨çš„æœ€å¸¸è§çš„å‡½æ•°æœ‰:</p>
<ul>
<li><strong><code><a href="https://kjur.github.io/jsrsasign/api/symbols/global__.html#b64utos">b64utos()</a></code>:</strong><code>b64utos()</code>å‡½æ•°ç”¨äºå°†Base64URLç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºASCIIå­—ç¬¦ä¸²ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°ä¸èƒ½ç”¨äºBase64URLç¼–ç çš„éASCIIå­—ç¬¦ã€‚</li>
<li><strong><code><a href="https://kjur.github.io/jsrsasign/api/symbols/KJUR.jws.JWS.html#.readSafeJSONString">WS.readSafeJSONString()</a></code>:</strong><code>JWS.readSafeJSONString()</code>å‡½æ•°è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²<code>"s"</code>ä½œä¸ºJSONå¯¹è±¡ï¼Œå¦‚æœå®ƒæ˜¯å®‰å…¨çš„ã€‚å¦‚æœå­—ç¬¦ä¸²<code>"s"</code>æ˜¯ä¸€ä¸ªæ ¼å¼é”™è¯¯çš„JSONå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä¸æ˜¯JSONå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›nullå¦åˆ™ï¼Œå®ƒè¿”å›ä¸€ä¸ªJSONå¯¹è±¡ã€‚</li>
</ul>
<h2>ä»åˆ›å»ºReactåº”ç”¨ç¨‹åºä¸­æ¸…é™¤</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¾ç½®å¥½äº†å¤§éƒ¨åˆ†ç¯å¢ƒå’Œä¾èµ–é¡¹ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä»è‡ªåŠ¨ç”Ÿæˆçš„CRAå­˜å‚¨åº“ä¸­åˆ é™¤å¹¶æ›´æ”¹ä¸€äº›å†…å®¹ã€‚æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯<a href="https://github.com/praveenscience/JWT-MERN-FullStack/commit/2952aef355d1adf2979738c300555e009a0f0b39">åˆ é™¤æ‰€æœ‰çš„CSSæ–‡ä»¶å’Œé»˜è®¤çš„Reactæ ‡å¿—</a>ï¼Œå¹¶åˆ é™¤å·²åˆ é™¤æ–‡ä»¶çš„å¯¼å…¥ã€‚</p>
<h3>ç»„ç»‡æ–‡ä»¶</h3>
<p>æˆ‘ä¹Ÿéµå¾ªæˆ‘è‡ªå·±ä¸ºæˆ‘çš„Reactåº”ç”¨ç¨‹åºè®¾è®¡çš„æ¨¡å¼ï¼Œè¿™å°†æ˜¯â€œç±»åˆ«ä¼˜å…ˆâ€çš„æ¨¡å‹ã€‚æˆ‘å°†æ‰€æœ‰å†…å®¹æŒ‰ç…§å®ƒä»¬åœ¨Reactä¸­çš„ä½ç½®è¿›è¡Œåˆ†ç±»ï¼Œå¹¶å°†<code>src</code>æ–‡ä»¶å¤¹ç®€åŒ–ä¸º:</p>
<ul>
<li><code>actions</code>:åŒ…å«æ‰€æœ‰çš„ReduxåŠ¨ä½œã€‚<em>(å½“å‰é¡¹ç›®æœªå®æ–½â€¦) </em></li>
<li><code>components</code>:åŒ…å«æ‰€æœ‰çš„Reactç»„ä»¶ã€‚å¦‚æœç»„ä»¶æœ‰ä¾èµ–ç»„ä»¶ï¼Œå®ƒä»¬ä»¥åˆ†å±‚çš„æ–¹å¼é©»ç•™åœ¨è¿™é‡Œã€‚</li>
<li>å¯èƒ½ä¼šä½¿ä¸»è¦ç»„ä»¶æ··ä¹±çš„å®ç”¨åŠŸèƒ½ã€‚<em>(å½“å‰é¡¹ç›®æœªå®æ–½â€¦) </em></li>
<li><code>reducers</code>:åŒ…å«æ‰€æœ‰çš„Redux Reducersã€‚<em>(å½“å‰é¡¹ç›®æœªå®æ–½â€¦) </em></li>
<li><code>services</code>:åŒ…å«æ‰€æœ‰ä½¿ç”¨Axiosçš„AJAX URLså’ŒæœåŠ¡è°ƒç”¨ã€‚</li>
<li>åŒ…å«æ‰€æœ‰ç”¨äºé€ å‹çš„SCSSæ–‡ä»¶ã€‚åœ¨<code>index.js</code>ä¸­åªå¯¼å…¥äº†ä¸€ä¸ªæ–‡ä»¶</li>
<li><code>tests</code>:åŒ…å«æ‰€æœ‰ä¸æµ‹è¯•ç›¸å…³çš„æ–‡ä»¶ã€‚<em>(ä¸åœ¨å½“å‰é¡¹ç›®èŒƒå›´å†…â€¦â€¦)</em></li>
<li><code>index.js</code>:æœåŠ¡å™¨å¯åŠ¨æ—¶åŠ è½½çš„ä¸»æ–‡ä»¶ï¼ŒåŒ…å«æ ·å¼å’ŒAppç»„ä»¶ã€‚</li>
</ul>
<h3>æ›´æ–°ä¸»åº”ç”¨ç¨‹åºç»„ä»¶</h3>
<p>æˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„<code>App.js</code>ä»<code>src</code>æ–‡ä»¶å¤¹ç§»åˆ°<code>components/App.js</code>ã€‚è®©æˆ‘ä»¬ä¹Ÿä»<code>App.js</code>ä¸­åˆ é™¤ä¸å¿…è¦å’Œæœªä½¿ç”¨çš„å¯¼å…¥ï¼Œå°†å…¶ç²¾ç®€ä¸ºä»¥ä¸‹å†…å®¹:</p>
<pre>import React from "react";

function App() {
  return (
    &lt;div className="App"&gt;
      &lt;p&gt;Hello World!&lt;/p&gt;
    &lt;/div&gt;
  );
}

export default App;</pre>
<h3>æ›´æ–°å…¬å…±HTML</h3>
<p>æœ‰äº†ä¸Šé¢çš„æ–‡ä»¶ç»„ç»‡ï¼Œæˆ‘ä»¬åº”è¯¥åšçš„ä¸‹ä¸€ä¸ªæ›´æ”¹æ˜¯ä¸»<code>public/index.html</code>æ–‡ä»¶ï¼Œå®ƒé¦–å…ˆåœ¨æµè§ˆå™¨ä¸ŠåŠ è½½ï¼Œå¹¶åŠ è½½æˆ‘ä»¬çš„Reactåº”ç”¨ç¨‹åºã€‚ä¿®æ”¹åŒ…æ‹¬æ”¹å˜æ ‡é¢˜ï¼ŒåŒ…æ‹¬å­—ä½“ï¼ŒCSSæ¡†æ¶ï¼Œä»¥åŠæˆ‘ä»¬é¡¹ç›®ä¸­çš„å¼•å¯¼ç­‰ç­‰ã€‚<a href="https://github.com/praveenscience/JWT-MERN-FullStack/blob/master/client/public/index.html">æœ€ç»ˆæ–‡ä»¶</a>å¦‚ä¸‹æ‰€ç¤º(æ— æ³¨é‡Š):</p>
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
    &lt;meta name="theme-color" content="#000000" /&gt;
    &lt;meta name="description" content="Creating a Full Stack MERN Application using JWT Authentication" /&gt;
    &lt;link rel="apple-touch-icon" href="logo512.png" /&gt;
    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" /&gt;
    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /&gt;
    &lt;link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i&amp;display=swap" /&gt;
    &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt;
    &lt;title&gt;Creating a Full Stack MERN Application using JWT Authentication&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;
    &lt;div id="root"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>
<h3>é£æ ¼</h3>
<p>æ›´æ–°HTMLæ–‡ä»¶åï¼Œæ¥ä¸‹æ¥æ˜¯CSSéƒ¨åˆ†ã€‚æˆ‘ä»¬å»æ‰äº†æ‰€æœ‰çš„CSSæ–‡ä»¶ï¼Œåªæœ‰ä¸€ä¸ªä¸»<code>styles/App.scss</code>ã€‚æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªSCSSæ–‡ä»¶ï¼Œæ‰€ä»¥æ²¡æœ‰å®‰è£…<code>node-sass</code>å®ƒä¸ä¼šè¿è¡Œã€‚ä¸€æ—¦æˆ‘ä»¬åœ¨<code>styles</code>ç›®å½•ä¸­åˆ›å»ºäº†<code>App.scss</code>ï¼Œè®©æˆ‘ä»¬å°†<code>index.js</code>æ”¹ä¸ºä½¿ç”¨SCSSæ–‡ä»¶è€Œä¸æ˜¯CSSæ–‡ä»¶:</p>
<pre>- import './index.css';
+ import "./styles/App.scss";</pre>
<p>åŒ…å«åœ¨<code>index.js</code>ä¸­çš„<code>styles/App.scss</code>æ–‡ä»¶æœ€åˆçœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre>body {
  margin: 0;
  padding: 0;
  list-style: none;
}
.App {
  &amp;,
  * {
    margin: 0;
    padding: 0;
    list-style: none;
  }
}</pre>
<p>å°½ç®¡æˆ‘ä»¬ä¸åŒ…æ‹¬æœ¬æ–‡ä¸­çš„æµ‹è¯•ï¼Œä½†è¯·ç¡®ä¿ä»<code>tests/App.test.js</code>ä¸­ç§»é™¤æœªä½¿ç”¨å’Œè¿‡æ—¶çš„å¯¼å…¥ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å¿˜è®°åº”ç”¨ç¨‹åºå…¶ä½™éƒ¨åˆ†çš„<code>tests</code>ç›®å½•ã€‚</p>
<h2>ç™»å½•è¡¨å•</h2>
<p>è®©æˆ‘ä»¬å¿«é€Ÿæ„å»ºä¸€ä¸ªç®€å•çš„è¡¨å•æ¥å¸®åŠ©æˆ‘ä»¬è·å–ç”¨æˆ·åå’Œå¯†ç ã€‚æœ‰å¤šç§æ–¹æ³•å¯ä»¥è·å–è¿™äº›ä¿¡æ¯ï¼›æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ç»„ä»¶çŠ¶æ€æ¥å­˜å‚¨è¾“å…¥çš„å½“å‰å€¼ï¼Œå¹¶ä¸”åŸºäºæ­¤ï¼Œæˆ‘ä»¬å°†æ›´æ–°å®ƒä»¬ã€‚åœ¨Reactä¸­æœ‰è®¸å¤šæ„å»ºè¡¨å•çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯æˆ‘å°†åœ¨åé¢ä»‹ç»å®ƒä»¬ã€‚</p>
<h3>æ„å»ºè¡¨å•</h3>
<p>å› ä¸ºè¡¨å•å°†æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè€ŒReactå°±æ˜¯å…³äºç»„ä»¶çš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨<code>App.js</code>æ—è¾¹åˆ›å»ºä¸€ä¸ªç™»å½•ç»„ä»¶ï¼Œæ¯”å¦‚è¯´<code>components/Login.js</code>ã€‚è®©æˆ‘ä»¬ä½¿ç”¨Bootstrapçš„<a href="https://getbootstrap.com/docs/4.3/components/forms/">è¡¨å•</a>å’Œ<a href="https://getbootstrap.com/docs/4.3/components/card/">å¡ç‰‡</a>å¸ƒå±€æ„å»ºä¸€ä¸ªæ¼‚äº®çš„è¡¨å•ã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç”¨å¦‚ä¸‹æ‰€ç¤ºçš„åŸºæœ¬æ¡†æ¶åˆ›å»ºç™»å½•ç»„ä»¶:</p>
<pre>import React, { Component } from "react";

class Login extends Component {
  render() {
    return (
      &lt;div className="login"&gt;

      &lt;/div&gt;
    );
  }
}
export default Login;</pre>
<p>ç°åœ¨è®©æˆ‘ä»¬å°†å®ƒå¯¼å…¥åˆ°<code>App.js</code>ä¸­å¹¶ä½¿ç”¨å®ƒã€‚æ‚¨ä¸éœ€è¦æ·»åŠ <code>.js</code>æ‰©å±•åï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªJavaScriptæ–‡ä»¶ã€‚</p>
<pre>import React from "react";
// Importing the Login Component
import Login from "./Login";

function App() {
  return (
    &lt;div className="App"&gt;
      {/* Import the Login */}
      &lt;Login /&gt;
    &lt;/div&gt;
  );
}</pre>
<p>åœ¨Bootstrapçš„<a href="https://getbootstrap.com/docs/4.3/layout/grid/">ç½‘æ ¼ç³»ç»Ÿ</a>çš„å¸®åŠ©ä¸‹ï¼Œä¸ºè¡¨å•åˆ›å»ºä¸€ä¸ªæ¼‚äº®çš„å±…ä¸­å¸ƒå±€å˜å¾—æ›´åŠ å®¹æ˜“ã€‚æˆ‘åšäº†ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre>import React, { Component } from "react";

class Login extends Component {
  render() {
    return (
      &lt;div className="login"&gt;
        &lt;div className="container"&gt;
          &lt;div className="row"&gt;
            &lt;div className="col-6 offset-3"&gt;
              &lt;div className="card"&gt;
                &lt;div className="card-body"&gt;
                  &lt;h5 className="card-title"&gt;Sign In&lt;/h5&gt;
                  &lt;h6 className="card-subtitle mb-2 text-muted"&gt;
                    Please sign in to continue.
                  &lt;/h6&gt;
                  &lt;form&gt;
                    &lt;div className="form-group"&gt;
                      &lt;label htmlFor="exampleInputEmail1"&gt;Email address&lt;/label&gt;
                      &lt;input
                        type="email"
                        className="form-control"
                        id="exampleInputEmail1"
                        aria-describedby="emailHelp"
                        placeholder="Enter email"
                      /&gt;
                    &lt;/div&gt;
                    &lt;div className="form-group"&gt;
                      &lt;label htmlFor="exampleInputPassword1"&gt;Password&lt;/label&gt;
                      &lt;input
                        type="password"
                        className="form-control"
                        id="exampleInputPassword1"
                        placeholder="Password"
                      /&gt;
                    &lt;/div&gt;
                    &lt;button type="submit" className="btn btn-success"&gt;
                      Submit
                    &lt;/button&gt;
                  &lt;/form&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}
export default Login;</pre>
<p>ä¸Šé¢çš„å®Œæ•´è¡¨æ ¼æ˜¯ä»Reactçš„å®˜æ–¹æ–‡æ¡£ä¸­æˆªå–çš„ã€‚æˆ‘å·²ç»æŠŠæ‰€æœ‰çš„<code>class=</code>æ”¹æˆäº†<code>className=</code>ï¼ŒæŠŠ<code>for=</code>æ”¹æˆäº†<code>htmlFor=</code>ï¼Œå› ä¸º<code>class</code>å’Œ<code>for</code>æ˜¯JavaScriptä¸­çš„ä¿ç•™å…³é”®å­—ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢çš„è¡¨æ ¼åšå¾ˆå¤šä¿®æ”¹ã€‚è®©æˆ‘ä»¬ä¹Ÿå¼€å§‹ç»„ç»‡ä¸€äº›é€ å‹ã€‚main <code>App.scss</code>çœ‹èµ·æ¥å¾ˆå°ï¼Œå› ä¸ºå¤§å¤šæ•°é‡ç½®CSSç°åœ¨å°†ç”±Bootstrapå¤„ç†ã€‚</p>
<pre>body {
  font-family: "Open Sans", "Segoe UI", sans-serif;
}
.App {
  @import "login";
}</pre>
<p>åˆ›å»ºæ–‡ä»¶<code>_login.scss</code>å°†å…è®¸æˆ‘ä»¬å°†å†…å®¹å¯¼å…¥åˆ°<code>.App</code>ç±»ä¸‹çš„<code>App.scss</code>ä¸­ã€‚æˆ‘ä»¬å°†æŠŠä¸è¡¨å•ç›¸å…³çš„æ ·å¼æ”¾åœ¨<code>_login.scss</code>ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre>.login {
  margin-top: 50px;
  .card {
    border-radius: 10px;
    &amp;-body {
      overflow: hidden;
      padding-top: 10px;
      border-radius: 10px;
      background-color: rgba(#f90, 0.15);
      form {
        margin: 10px -20px -20px;
        padding: 15px;
        background-color: #fff;
        border-top: 1px solid rgba(#000, 0.125);
      }
    }
  }
}</pre>
<p>ä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œè¡¨å•çœ‹èµ·æ¥ä½äºé¡µé¢çš„ä¸­å¿ƒï¼Œç±»ä¼¼äºä¸‹å›¾ã€‚</p>
<p><img data-attachment-id="6746" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png" data-orig-size="549,321" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Our appâ€™s sign-in form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png" decoding="async" class="aligncenter size-full wp-image-6746 jetpack-lazy-image" src="../Images/e1926bfe4cd1ad9d344aa3a228236137.png" alt="Our App's Sign-In Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png 549w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-300x175.png 300w" data-lazy-sizes="(max-width: 549px) 100vw, 549px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6746" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png" data-orig-size="549,321" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Our appâ€™s sign-in form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-300x175.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6746" src="../Images/e1926bfe4cd1ad9d344aa3a228236137.png" alt="Our App's Sign-In Form" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png 549w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-300x175.png 300w" sizes="(max-width: 549px) 100vw, 549px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form.png"/></noscript>
<h3>è·Ÿè¸ªçŠ¶æ€</h3>
<p>é€šè¿‡ä½¿ç”¨<a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi"> Reactå¼€å‘å·¥å…·</a>æ¥æ£€æŸ¥ç»„ä»¶çš„çŠ¶æ€ä¼šæ›´å®¹æ˜“ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨è¡¨å•çš„å³è¾¹æœ‰ä¸€ä¸ªæ¼‚äº®çš„è·Ÿè¸ªå™¨ä¼šæ›´å¥½ã€‚æˆ‘æƒ³è®©Reactåº”ç”¨ç¨‹åºä½¿ç”¨<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify()</a></code>å’Œ<code>&lt;pre&gt;</code>ä»¥æ¼‚äº®çš„æ ¼å¼æ˜¾ç¤º<code>state</code>çš„å†…å®¹ã€‚</p>
<p>é™¤äº†<code>App.scss</code>ï¼Œ<code>Login</code>è¿˜æœ‰ä¸€ä¸ªä¸é”™çš„æ ·å¼ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre>pre {
  font-family: "Monaco", "Consolas", monospace;
  border: 1px solid #ccc;
  background-color: #f5f5f5;
  padding: 3px;
  border-radius: 3px;
  line-height: 1;
  height: 100%;
}
&lt;div className="login"&gt;
  &lt;div className="container"&gt;
    &lt;div className="row"&gt;
      {/* Removed the Offset */}
      &lt;div className="col-6"&gt;
        &lt;div className="card"&gt;
          &lt;div className="card-body"&gt;
            &lt;h5 className="card-title"&gt;Sign In&lt;/h5&gt;
            {/************************/}
            {/* That unchanged form! */}
            {/************************/}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div className="col-6"&gt;
        &lt;pre&gt;
          State Data
          &lt;br /&gt;
          &lt;br /&gt;
          {JSON.stringify(this.state, null, 2)}
        &lt;/pre&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p>é¡µé¢ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<p><img data-attachment-id="6747" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/state-data-sign-in-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png" data-orig-size="730,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="State data alongside sign-in form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png" decoding="async" class="aligncenter size-full wp-image-6747 jetpack-lazy-image" src="../Images/29db884e73fc2fe2f93758088b266140.png" alt="State Data Alongside Sign-In Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form-300x86.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6747" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/state-data-sign-in-form/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png" data-orig-size="730,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="State data alongside sign-in form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6747" src="../Images/29db884e73fc2fe2f93758088b266140.png" alt="State Data Alongside Sign-In Form" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form-300x86.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/state-data-sign-in-form.png"/></noscript>
<p>æˆ‘ä»¬å®Œå…¨å¿˜äº†æŠŠå®ƒå’Œ<code>state</code>è”ç³»èµ·æ¥ï¼æˆ‘ä»¬éœ€è¦åƒè¿™æ ·è®¾ç½®å…ƒç´ çš„<code>value</code>å’Œ<code>onChange</code>äº‹ä»¶ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆå§‹åŒ–<code>Login</code>ç»„ä»¶ä¸­çš„<code>state</code>ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºè¡¨å•å…ƒç´ æ›´æ”¹æ­£ç¡®çš„åç§°ã€‚</p>
<pre>import React, { Component } from "react";

class Login extends Component {
  state = {
    Username: "",
    Password: ""
  };
  render() {
    return (
      &lt;div className="login"&gt;
        &lt;div className="container"&gt;
          &lt;div className="row"&gt;
            &lt;div className="col-6"&gt;
              &lt;div className="card"&gt;
                &lt;div className="card-body"&gt;
                  &lt;h5 className="card-title"&gt;Sign In&lt;/h5&gt;
                  &lt;h6 className="card-subtitle mb-2 text-muted"&gt;
                    Please sign in to continue.
                  &lt;/h6&gt;
                  &lt;form&gt;
                    &lt;div className="form-group"&gt;
                      &lt;label htmlFor="Username"&gt;Username&lt;/label&gt;
                      &lt;input
                        type="Username"
                        className="form-control"
                        id="Username"
                        placeholder="Username"
                      /&gt;
                    &lt;/div&gt;
                    &lt;div className="form-group"&gt;
                      &lt;label htmlFor="Password"&gt;Password&lt;/label&gt;
                      &lt;input
                        type="password"
                        className="form-control"
                        id="Password"
                        placeholder="Password"
                      /&gt;
                    &lt;/div&gt;
                    &lt;button type="submit" className="btn btn-success"&gt;
                      Submit
                    &lt;/button&gt;
                  &lt;/form&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div className="col-6"&gt;
              &lt;pre&gt;
                State Data
                &lt;br /&gt;
                &lt;br /&gt;
                {JSON.stringify(this.state, null, 2)}
              &lt;/pre&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    );
  }
}
export default Login;</pre>
<h3>å¤„ç†è¾“å…¥æ›´æ”¹</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹å†™<code>handleChange()</code>å‡½æ•°ã€‚æˆ‘ä»¬ä¸æ‰“ç®—åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ç»‘å®šï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬ä½¿ç”¨èƒ–ç®­å¤´å‡½æ•°å°±æ²¡æœ‰å¿…è¦äº†ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç”¨å®ƒä»¬æ¥å®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºã€‚</p>
<pre>handleChange = e =&gt; {
  // Here, e is the event.
  // e.target is our element.
  // All we need to do is to update the current state with the values here.
  this.setState({
    [e.target.name]: e.target.value
  });
};</pre>
<p>è¿™å°†æ›´æ–°åŒåçš„çŠ¶æ€å˜é‡ã€‚</p>
<h3>ç§»é™¤é‡å¤å’Œä¸çŠ¶æ€çš„åŒå‘ç»‘å®š</h3>
<p>æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ä»£ç ä¸­æœ‰é‡å¤ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¯èƒ½ç±»å‹çš„æ•°ç»„ï¼Œå¹¶å°è¯•ä½¿ç”¨ä¸€ä¸ªå¾ªç¯å®Œæ•´åœ°å‘ˆç°å®ƒã€‚æˆ‘ä»¬å¯ä»¥æ›¿æ¢è¿™ä¸¤ä¸ªè¾“å…¥ï¼Œå¹¶å°†è¾“å…¥å€¼ç»‘å®šåˆ°çŠ¶æ€ï¼Œä»è€Œä½¿å®ƒä»¬æˆä¸ºå—æ§ç»„ä»¶ã€‚</p>
<pre>{["Username", "Password"].map((i, k) =&gt; (
  &lt;div className="form-group" key={k}&gt;
    &lt;label htmlFor={i}&gt;{i}&lt;/label&gt;
    &lt;input
      type={i === "Password" ? "password" : "text"}
      name={i}
      className="form-control"
      id={i}
      placeholder={i}
      value={this.state[i]}
      onChange={this.handleChange}
    /&gt;
  &lt;/div&gt;
))}</pre>
<p>ç›®å‰ä¸Šé¢çš„ä»£ç æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œé™¤äº†å½“æ‚¨å°è¯•åœ¨è¡¨å•ä¸Šé”®å…¥ä¸€äº›å†…å®¹æ—¶ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®ƒä¹Ÿåæ˜ åœ¨å³ä¾§çš„çŠ¶æ€æ•°æ®ä¸­ã€‚</p>
<p>ä½ å¯ä»¥çœ‹åˆ°æˆ‘å†™äº†<code>Praveen Kumar</code>å’Œ<code>$uper$ecretPa$$w0rd</code>ï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å®ƒåæ˜ åœ¨æˆ‘ä»¬ä¸‹é¢çš„<code>&lt;pre&gt;</code>æ ‡ç­¾ä¸­ã€‚</p>
<p><img data-attachment-id="6758" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form-entry-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png" data-orig-size="730,212" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sign-in form entry reflected in state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state-300x87.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png" decoding="async" class="aligncenter size-full wp-image-6758 jetpack-lazy-image" src="../Images/771942760d4feb80b4574392172078bc.png" alt="From Entry Reflected In State" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state-300x87.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6758" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form-entry-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png" data-orig-size="730,212" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sign-in form entry reflected in state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state-300x87.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6758" src="../Images/771942760d4feb80b4574392172078bc.png" alt="From Entry Reflected In State" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state-300x87.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-entry-state.png"/></noscript>
<h3>é˜²æ­¢é»˜è®¤æäº¤</h3>
<p>å½“ä½ ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œè¡¨å•åšçš„ä¸‹ä¸€ä»¶äº‹éœ€è¦è¢«é˜»æ­¢ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨AJAXè°ƒç”¨ä¸æˆ‘ä»¬çš„REST APIé€šä¿¡ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨<a href="https://blog.logrocket.com/mern-app-jwt-authentication-part-2/">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­æ„å»ºçš„ã€‚è®©æˆ‘ä»¬ä¸ºæ­¤ç¼–å†™ä¸€ä¸ªè¡¨å•å¤„ç†ç¨‹åº:</p>
<pre>handleSubmit = e =&gt; {
  // Here, e is the event.
  // Let's prevent the default submission event here.
  e.preventDefault();
  // We can do something when the button is clicked.
  // Here, we can also call the function that sends a request to the server.
};</pre>
<p>è®©æˆ‘ä»¬ä¹Ÿå°†å®ƒæ·»åŠ åˆ°<code>&lt;form&gt;</code>çš„<code>onSubmit</code>äº‹ä»¶å¤„ç†ç¨‹åºä¸­:</p>
<pre>&lt;form onSubmit={this.handleSubmit}&gt;</pre>
<p>ç°åœ¨ï¼Œæäº¤è¡¨å•å’Œé‡æ–°åŠ è½½é¡µé¢çš„é»˜è®¤æ“ä½œè¢«é˜»æ­¢ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨Axioså‘æˆ‘ä»¬åˆ›å»ºçš„REST APIç«¯ç‚¹å‘é€ä¸€ä¸ªAJAXè¯·æ±‚ã€‚è®©æˆ‘ä»¬ç»§ç»­ä¸ºæˆ‘ä»¬çš„å‰ç«¯åº”ç”¨ç¨‹åºåˆ›å»ºæœåŠ¡è°ƒç”¨ã€‚</p>
<h2>åˆ›å»ºæœåŠ¡å‘¼å«</h2>
<p>æ‰€æœ‰çš„æœåŠ¡è°ƒç”¨éƒ½åº”è¯¥åœ¨<code>services</code>ç›®å½•ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥åªåœ¨è¿™ä¸ªç›®å½•ä¸­ä½¿ç”¨æˆ‘ä»¬çš„Axiosåº“ã€‚ç›®å‰ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¸­æ²¡æœ‰ä»»ä½•ç«¯ç‚¹æ¥å¤„ç†ç”¨æˆ·èº«ä»½éªŒè¯ã€‚æˆ‘ä»¬ç›®å‰ä»…æœ‰çš„ç«¯ç‚¹æ˜¯JWTå‡½æ•°ï¼Œå¦‚<code>GenerateJWT</code>ã€<code>DecodeJWT</code>å’Œ<code>ValidateJWT</code>ï¼Œåˆ†åˆ«ç”¨äºç”Ÿæˆã€è§£ç å’ŒéªŒè¯jwtã€‚</p>
<p>è®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€ä¸ªå…·æœ‰ä»¥ä¸‹æ¡†æ¶çš„<code>services/JWTService.js</code>æ–‡ä»¶æ¥ä½¿ç”¨å®ƒä»¬ï¼Œè¯¥æ–‡ä»¶å¯¼å…¥Axioså¹¶å¯¼å‡ºä¸Šè¿°è°ƒç”¨çš„å‡½æ•°:</p>
<pre>import axios from "axios";

export const GenerateJWT = (header, claims, key, cb) =&gt; {
  // Send request to /api/GenerateJWT
};
export const DecodeJWT = (sJWS, cb) =&gt; {
  // Send request to /api/DecodeJWT
};
export const ValidateJWT = (header, token, key, cb) =&gt; {
  // Send request to /api/ValidateJWT
};</pre>
<p>ä½¿ç”¨Axiosï¼Œä¸€ä¸ª<code>POST</code>è¯·æ±‚è°ƒç”¨çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre>axios
  .post(URL, {
    postData
  })
  .then(function(res) {
    // Log the response.
    console.log(res);
  })
  .catch(function(err) {
    // Log the error.
    console.log(err);
  });</pre>
<h3>JWTå‡½æ•°çš„æœåŠ¡è°ƒç”¨</h3>
<p>å®Œæˆä»¥ä¸Šå·¥ä½œåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ä»¥è¿™ç§æ–¹å¼å‘æ­£ç¡®çš„ç«¯ç‚¹å‘é€è¯·æ±‚:</p>
<pre>import axios from "axios";

export const GenerateJWT = (header, claims, key, cb) =&gt; {
  // Send POST request to /api/GenerateJWT
  axios
    .post("/api/GenerateJWT", {
      header,
      claims,
      key
    })
    .then(function(res) {
      cb(res);
    })
    .catch(function(err) {
      console.log(err);
    });
};
export const DecodeJWT = (sJWS, cb) =&gt; {
  // Send POST request to /api/DecodeJWT
  axios
    .post("/api/DecodeJWT", {
      sJWS
    })
    .then(function(res) {
      cb(res);
    })
    .catch(function(err) {
      console.log(err);
    });
};
export const ValidateJWT = (header, token, key, cb) =&gt; {
  // Send POST request to /api/ValidateJWT
  axios
    .post("/api/ValidateJWT", {
      header,
      token,
      key
    })
    .then(function(res) {
      cb(res);
    })
    .catch(function(err) {
      console.log(err);
    });
};</pre>
<p>è¯·æ³¨æ„ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½æ˜¯ç›¸å¯¹äºå½“å‰åŸŸçš„ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šé‡åˆ°CORSé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å°†è¯·æ±‚ä»£ç†åˆ°æœåŠ¡å™¨ã€‚</p>
<h3>æœåŠ¡å™¨å¯†é’¥çš„é»˜è®¤å€¼</h3>
<p>æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼ŒJWTçš„å¯†é’¥æ˜¯æ•æ„Ÿçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä»å®¢æˆ·ç«¯å‘é€å¯†é’¥ã€‚å°†å¯†é’¥å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ä»»ä½•åœ°æ–¹(æ— è®ºæ˜¯JavaScriptã€HTMLã€cookiesè¿˜æ˜¯æœ¬åœ°å­˜å‚¨)ç»å¯¹æ˜¯ä¸€ä»¶è’è°¬çš„äº‹æƒ…ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“è¢«å‘ç°å’Œæ³„éœ²ã€‚</p>
<p>è®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„æœåŠ¡å™¨ç«¯<code>server.js</code>æ¥ä½¿ç”¨ä¸€äº›é»˜è®¤å€¼ï¼Œæ¯”å¦‚<code>key = "$PraveenIsAwesome!"</code>ï¼Œä»¥é˜²å®¢æˆ·ç«¯ä¸å‘é€å¯†é’¥ã€‚</p>
<pre>app.post("/api/GenerateJWT", (req, res) =&gt; {
  let { header, claims, key } = req.body;
  // In case, due to security reasons, if the client doesn't send a key,
  // use our default key.
  key = key || "$PraveenIsAwesome!";
  res.json(GenerateJWT(header, claims, key));
});
app.post("/api/DecodeJWT", (req, res) =&gt; {
  res.json(DecodeJWT(req.body.sJWS));
});
app.post("/api/ValidateJWT", (req, res) =&gt; {
  let { header, token, key } = req.body;
  // In case, due to security reasons, if the client doesn't send a key,
  // use our default key.
  key = key || "$PraveenIsAwesome!";
  res.json(ValidateJWT(header, token, key));
});</pre>
<h2>æœåŠ¡å™¨ç«¯æ—¥å¿—è®°å½•</h2>
<p>è®©æ‰€æœ‰çš„æ—¥å¿—éƒ½å°±ä½æ€»æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ï¼Œå°¤å…¶æ˜¯åœ¨æœåŠ¡å™¨ç«¯ã€‚æˆ‘ä»¬å¿…é¡»ç¡®å®šå‘å‡ºäº†ä»€ä¹ˆè¯·æ±‚ï¼Œè¯·æ±‚åˆ°è¾¾äº†å“ªé‡Œã€‚</p>
<p>åœ¨ä¸Apacheå’Œnginxç›¸åŒçš„æ ‡å‡†ä¸­ä¸ºæˆ‘ä»¬åšè¿™ä»¶äº‹çš„ä¸€ä¸ªåŒ…æ˜¯<a href="https://www.npmjs.com/package/morgan"> <code>morgan</code> </a>ã€‚æ˜¯Node.jsçš„HTTPè¯·æ±‚è®°å½•å™¨ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨<code>npm</code>å®‰è£…<code>morgan</code>:</p>
<pre>âœ  Server git:(master) $ npm install morgan</pre>
<h3><code>morgan</code>å’Œrequiring with Expressçš„è¯­æ³•</h3>
<p>æˆ‘ä»¬å°†èƒ½å¤Ÿé€šè¿‡è¦æ±‚æ¨¡å—æ¥åŒ…å«ä¸­é—´ä»¶:</p>
<pre>var morgan = require('morgan')</pre>
<p>ç”±äºæˆ‘ä»¬æ­£å¤„äºå¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>"dev"</code>æ ¼å¼ã€‚</p>
<pre>app.use(morgan("dev"));</pre>
<p>ä½¿ç”¨ç»™å®šçš„<code>format</code>å’Œ<code>options</code>åˆ›å»ºä¸€ä¸ªæ–°çš„morgan loggerä¸­é—´ä»¶å‡½æ•°ã€‚<code>format</code>å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªé¢„å®šä¹‰åç§°çš„å­—ç¬¦ä¸²(å‚è§ä¸‹é¢çš„åç§°)ï¼Œä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²ï¼Œæˆ–è€…ä¸€ä¸ªå°†äº§ç”Ÿæ—¥å¿—æ¡ç›®çš„å‡½æ•°ã€‚</p>
<p>å°†ä½¿ç”¨ä¸‰ä¸ªå‚æ•°è°ƒç”¨<code>format</code>å‡½æ•°ï¼Œ<code>tokens</code>ã€<code>req</code>å’Œ<code>res</code>ï¼Œå…¶ä¸­<code>tokens</code>æ˜¯å…·æœ‰æ‰€æœ‰å·²å®šä¹‰ä»¤ç‰Œçš„å¯¹è±¡ï¼Œ<code>req</code>æ˜¯HTTPè¯·æ±‚ï¼Œ<code>res</code>æ˜¯HTTPå“åº”ã€‚è¯¥å‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªä½œä¸ºæ—¥å¿—è¡Œçš„å­—ç¬¦ä¸²æˆ–<code>undefined</code> / <code>null</code>æ¥è·³è¿‡æ—¥å¿—è®°å½•ã€‚</p>
<p><code>dev</code>æ ¼å¼ç»™å‡ºäº†ä¸€ä¸ªç®€æ˜çš„è¾“å‡ºï¼Œç”¨å“åº”çŠ¶æ€æ¥è¡¨ç¤ºï¼Œä¾›å¼€å‘ä½¿ç”¨ã€‚å¯¹äºæœåŠ¡å™¨é”™è¯¯ä»£ç ,<code>:status</code>ä»¤ç‰Œå°†æ˜¾ç¤ºä¸ºçº¢è‰²ï¼Œå¯¹äºå®¢æˆ·ç«¯é”™è¯¯ä»£ç æ˜¾ç¤ºä¸ºé»„è‰²ï¼Œå¯¹äºé‡å®šå‘ä»£ç æ˜¾ç¤ºä¸ºé’è‰²ï¼Œå¯¹äºæ‰€æœ‰å…¶ä»–ä»£ç æ˜¾ç¤ºä¸ºæ— è‰²ã€‚</p>
<pre>:method :url :status :response-time ms - :res[content-length]</pre>
<h2>å›åˆ°å®¢æˆ·ç«¯</h2>
<p>æˆ‘ä»¬å¿…é¡»å¿«é€Ÿæ›´æ”¹æœåŠ¡å™¨ç«¯çš„ä¸€äº›å…ƒç´ ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œè®©æˆ‘ä»¬è®©å‰ç«¯ä¸REST APIå¯¹è¯ã€‚</p>
<h3>å‘¼å«JWTæœåŠ¡</h3>
<p>è®©æˆ‘ä»¬è°ƒç”¨<code>GenerateJWT</code>æœåŠ¡å¹¶åœ¨å®¢æˆ·ç«¯æ˜¾ç¤ºå®ƒã€‚è¿™é‡Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä»<code>services/JWTService.js</code>å¯¼å…¥æœåŠ¡ã€‚ä½ ä¸éœ€è¦æ·»åŠ <code>.js</code>æ‰©å±•åï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªJavaScriptæ–‡ä»¶ã€‚</p>
<pre>import { GenerateJWT } from "../services/JWTService";</pre>
<p>ç°åœ¨è®©æˆ‘ä»¬æ›´æ–°<code>handleSubmit</code>å‡½æ•°ï¼Œä»<code>JWTService</code>è°ƒç”¨<code>GenerateJWT</code>å‡½æ•°ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å‘å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å‘é€äº†ä¸€ä¸ª<code>null</code>å€¼ï¼Œå®ƒå®é™…ä¸Šæ¥æ”¶äº†å¯†é’¥ã€‚ç”±äºéšç§é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ‰“ç®—å­˜å‚¨ä»»ä½•å¯†é’¥ï¼Œæˆ‘ä»¬å°†è®©æœåŠ¡å™¨å¤„ç†è¿™äº›å¯†é’¥ã€‚</p>
<pre>handleSubmit = e =&gt; {
  // Here, e is the event.
  // Let's prevent the default submission event here.
  e.preventDefault();
  // We can do something when the button is clicked.
  // Here, we can also call the function that sends a request to the server.
  // Get the username and password from the state.
  const { Username, Password } = this.state;
  const claims = {
    Username,
    Password
  };
  const header = {
    alg: "HS512",
    typ: "JWT"
  };
  GenerateJWT(header, claims, null, res =&gt; {
    if (res.status === 200) {
      this.setState({ Response: res.data });
    } else {
      this.setState({ Response: "Error!" });
    }
  });
};</pre>
<p>æ¥ä¸‹æ¥è¦åšçš„æ˜¯åœ¨æˆ‘ä»¬çš„<code>&lt;pre&gt;</code>ä¸­æ·»åŠ å¦ä¸€ä¸ªéƒ¨åˆ†ï¼Œä»¥æ¸…æ¥šåœ°æ˜¾ç¤º<code>LoginData</code>å’Œ<code>ResponseData</code>(ä»…å½“æ”¶åˆ°å“åº”æ—¶):</p>
<pre>&lt;pre&gt;
  State Data
  &lt;br /&gt;
  &lt;br /&gt;
  {JSON.stringify(
    {
      Username: this.state.Username,
      Password: this.state.Password
    },
    null,
    2
  )}
  {this.state.Response &amp;&amp; (
    &lt;&gt;
      &lt;br /&gt;
      &lt;br /&gt;
      Response Data (JWT)
      &lt;br /&gt;
      &lt;br /&gt;
      {this.state.Response}
     &lt;/&gt;
  )}
&lt;/pre&gt;</pre>
<p>æ›´æ–°<code>&lt;pre&gt;</code>æ ‡ç­¾çš„æ ·å¼æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºå“åº”æ˜¯ä¸€ä¸ªéœ€è¦åˆ†è§£çš„å·¨å¤§çš„JWTå­—ç¬¦ä¸²ã€‚è®©æˆ‘ä»¬æ·»åŠ <code>white-space: pre-wrap;</code>å’Œ<code>word-break: break-all;</code>æ¥æ‰“æ–­å®ƒæ˜¾ç¤ºçš„çº¿æ¡ã€‚</p>
<pre>pre {
  font-family: "Monaco", "Consolas", monospace;
  white-space: pre-wrap;
  word-break: break-all;
  border: 1px solid #ccc;
  background-color: #f5f5f5;
  padding: 3px;
  border-radius: 3px;
  line-height: 1;
  height: 100%;
}</pre>
<p>ä¸€æ—¦ä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶æŒ‰ä¸‹<strong>æäº¤</strong>ï¼Œä½ å°†ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p>
<p><img data-attachment-id="6759" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form-jwt-generated-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png" data-orig-size="730,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sign-in form with generated JWT in state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png" decoding="async" class="aligncenter size-full wp-image-6759 jetpack-lazy-image" src="../Images/a8e1e7b9a358d0bf595be0af634bc7bb.png" alt="Sign-In Form With Generated JWT" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state-300x86.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6759" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form-jwt-generated-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png" data-orig-size="730,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sign-in form with generated JWT in state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6759" src="../Images/a8e1e7b9a358d0bf595be0af634bc7bb.png" alt="Sign-In Form With Generated JWT" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state-300x86.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-generated-state.png"/></noscript>
<h3>è§£ç JWTæ•°æ®</h3>
<p>è§£ç æ¥æ”¶åˆ°çš„JWTå¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å®Œæˆã€‚å› ä¸ºæˆ‘ä»¬å¤„ç†çš„æ˜¯REST APIsï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å°è¯•åœ¨æœåŠ¡å™¨ç«¯è§£ç å¹¶é€šè¿‡AJAXæ¥æ”¶å®ƒã€‚æˆ‘ä»¬å°†å†æ¬¡æ”¹å˜<code>handleSubmit</code>äº‹ä»¶æ¥å¤„ç†JWTçš„è§£ç ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä»åŒä¸€ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥<code>DecodeJWT</code>å‡½æ•°:</p>
<pre>import { GenerateJWT, DecodeJWT } from "../services/JWTService";</pre>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„<code>handleSubmit</code>å‡½æ•°æ¥ä½¿ç”¨ä¸Šé¢çš„å‡½æ•°:</p>
<pre>handleSubmit = e =&gt; {
  // Here, e is the event.
  // Let's prevent the default submission event here.
  e.preventDefault();
  // We can do something when the button is clicked.
  // Here, we can also call the function that sends a request to the server.
  // Get the username and password from the state.
  const { Username, Password } = this.state;
  const claims = {
    Username,
    Password
  };
  const header = {
    alg: "HS512",
    typ: "JWT"
  };
  GenerateJWT(header, claims, null, res =&gt; {
    if (res.status === 200) {
      this.setState({ Response: res.data }, () =&gt; {
        // Once we get the data, let us decode the data.
        DecodeJWT(this.state.Response, data =&gt;
          this.setState({ Data: data.data })
        );
      });
    } else {
      this.setState({ Response: "Error!" });
    }
  });
};</pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ ä»¥ä¸‹å†…å®¹æ¥æ˜¾ç¤ºæ¥è‡ªçŠ¶æ€æŸ¥çœ‹å™¨<code>&lt;pre&gt;</code>æ ‡ç­¾ä¸­çŠ¶æ€çš„<code>Data</code>ä¸­çš„æ•°æ®:</p>
<pre>{this.state.Data &amp;&amp; (
  &lt;&gt;
    &lt;br /&gt;
    &lt;br /&gt;
    Decoded Data
    &lt;br /&gt;
    &lt;br /&gt;
    {JSON.stringify(this.state.Data, null, 2)}
  &lt;/&gt;
)}</pre>
<p>é…·ï¼ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•è¾“å…¥ç›¸åŒçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åæŒ‰å›è½¦é”®æˆ–æäº¤è¡¨å•ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p>
<p><img data-attachment-id="6761" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form-jwt-decoded-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png" data-orig-size="730,209" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sign-in form with JWT decoded in state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png" decoding="async" class="aligncenter size-full wp-image-6761 jetpack-lazy-image" src="../Images/0ad49cce74c46d41fce77313a34355af.png" alt="SIgn-In Form With JWT Decoded In State" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data-300x86.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6761" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/sign-in-form-jwt-decoded-data/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png" data-orig-size="730,209" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Sign-in form with JWT decoded in state" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6761" src="../Images/0ad49cce74c46d41fce77313a34355af.png" alt="SIgn-In Form With JWT Decoded In State" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data-300x86.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/sign-in-form-jwt-decoded-data.png"/></noscript>
<h2>ç™»å½•åå±å¹•</h2>
<p>ç™»å½•å±å¹•å’Œæ³¨é”€å±å¹•ä¹‹é—´è‚¯å®šæ˜¯æœ‰åŒºåˆ«çš„ã€‚åœ¨<code>state</code>ä¸­ï¼Œæˆ‘ä»¬å°†è§£ç åçš„æ•°æ®å­˜å‚¨åœ¨<code>Data</code>ä¸‹ã€‚å¦‚æœè®¾ç½®äº†å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥<em>å‡è®¾</em>ç”¨æˆ·å·²ç»æˆåŠŸå®Œæˆäº†ç™»å½•è¿‡ç¨‹ï¼Œå¹¶ä¸ºä»–ä»¬æ˜¾ç¤ºä¸€ä¸ªä¸åŒçš„å±å¹•ã€‚æœ‰äº†ä¸€ä¸ªç®€å•çš„<code>if ... else ...</code>æ¡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹äº†:</p>
<pre>&lt;div className="col-6"&gt;
  &lt;div className="card"&gt;
    {this.state.Data ? (
      &lt;div className="card-body"&gt;
        {/* Show the signed in screen */}
      &lt;/div&gt;
    ) : (
      &lt;div className="card-body"&gt;
        {/* Show the original signed out form */}
      &lt;/div&gt;
    )}
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p>æœ‰äº†ä¸Šé¢çš„æŒ‡å¯¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ–°çš„ç»„ä»¶ï¼Œæˆ–è€…åªæ˜¯ä½¿ç”¨æ¡ä»¶å¹¶ä½¿å…¶æ›´å®¹æ˜“ï¼Œå› ä¸ºæœ‰ä¸€äº›<code>setState</code>å’Œ<code>state</code>å‡½æ•°è¦ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªç®€å•çš„å±å¹•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸Šé¢å†™ç€<code>Hello {Username}! How are you?</code>ã€‚</p>
<pre>&lt;div className="col-6"&gt;
  &lt;div className="card"&gt;
    {this.state.Data ? (
      &lt;div className="card-body"&gt;
        &lt;h5 className="card-title"&gt;Successfully Signed In&lt;/h5&gt;
        &lt;p className="text-muted"&gt;
          Hello {this.state.Data.Username}! How are you?
        &lt;/p&gt;
      &lt;/div&gt;
    ) : (
      &lt;div className="card-body"&gt;
        &lt;h5 className="card-title"&gt;Sign In&lt;/h5&gt;
        &lt;h6 className="card-subtitle mb-2 text-muted"&gt;
          Please sign in to continue.
        &lt;/h6&gt;
        &lt;form onSubmit={this.handleSubmit}&gt;
          {["Username", "Password"].map((i, k) =&gt; (
            &lt;div className="form-group" key={k}&gt;
              &lt;label htmlFor={i}&gt;{i}&lt;/label&gt;
              &lt;input
                type={i === "Password" ? "password" : "text"}
                name={i}
                className="form-control"
                id={i}
                placeholder={i}
                value={this.state[i]}
                onChange={this.handleChange}
              /&gt;
            &lt;/div&gt;
          ))}
          &lt;button type="submit" className="btn btn-success"&gt;
            Submit
          &lt;/button&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    )}
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p>å½“ç”¨æˆ·ä½¿ç”¨ä»»ä½•ç”¨æˆ·åå’Œå¯†ç ç™»å½•æ—¶ï¼Œä¸Šé¢çš„ä»£ç å‘ˆç°åœ¨æˆ‘ä»¬çš„æµè§ˆå™¨ä¸Šï¼Œå°±åƒè¿™æ ·ã€‚è¿™é‡Œæ²¡æœ‰è¿›è¡Œèº«ä»½éªŒè¯ï¼›æˆ‘ä»¬åªæ˜¯æ ¹æ®ç”¨æˆ·åˆ›å»ºçš„ç”¨æˆ·åå’Œå¯†ç ç”Ÿæˆä¸€ä¸ª<code>claim</code>ã€‚æˆ‘å·²ç»ç»™å‡ºäº†<code>Dummy User</code>å’Œ<code>Dummy Password</code>ä½œä¸ºç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ‘çš„ç™»å½•ç•Œé¢å¦‚ä¸‹:</p>
<p><img data-attachment-id="6753" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-in-form-with-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png" data-orig-size="730,203" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-in form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png" decoding="async" class="aligncenter size-full wp-image-6753 jetpack-lazy-image" src="../Images/393141f50e2efa0500acbcbbd0bae889.png" alt="Signed-In Form" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state-300x83.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6753" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-in-form-with-state/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png" data-orig-size="730,203" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-in form" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state-300x83.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6753" src="../Images/393141f50e2efa0500acbcbbd0bae889.png" alt="Signed-In Form" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state-300x83.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-with-state.png"/></noscript>
<h3>æ³¨é”€æµç¨‹</h3>
<p>åœ¨æ‚¨å®ç°äº†ç™»å½•è¿‡ç¨‹ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¿…é¡»ä¸ºç”¨æˆ·æä¾›ä¸€ç§é€€å‡ºçš„æ–¹æ³•ã€‚æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ä½¿ç”¨<code>setState</code>æ¸…é™¤æˆ‘ä»¬<code>state</code>çš„<code>Respose</code>å’Œ<code>Data</code>ï¼Œç”¨æˆ·å°±è¢«æ³¨é”€äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„<code>&lt;button&gt;</code>ï¼Œå¹¶ä½¿ç”¨<code>btn-link</code>ç±»å°†å…¶æ ·å¼åŒ–ä¸ºä¸€ä¸ªå¸¦æœ‰Bootstrapçš„é“¾æ¥ã€‚å½“ä½¿ç”¨ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œè¯·ä¸è¦å¿˜è®°é˜»æ­¢é‡æ–°åŠ è½½é¡µé¢çš„é»˜è®¤äº‹ä»¶:</p>
<pre>&lt;p className="mb-0"&gt;
  You might want to{" "}
  &lt;button
    className="btn btn-link"
    onClick={e =&gt; {
      e.preventDefault();
      this.setState({ Response: null, Data: null });
    }}
    &gt;
    sign out
  &lt;/button&gt;
  .
&lt;/p&gt;</pre>
<p>ç°åœ¨å±å¹•çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œæœ‰ä¸€ä¸ªæ®µè½å’Œé€€å‡ºé“¾æ¥:</p>
<p><img data-attachment-id="6748" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-in-form-sign-out-option/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-in form with sign-out option" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png" decoding="async" class="aligncenter size-full wp-image-6748 jetpack-lazy-image" src="../Images/60cbcdbb69aa62541c348f04e0675abf.png" alt="Signed-In Form With Sign-Out Option" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option-300x84.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6748" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-in-form-sign-out-option/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-in form with sign-out option" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6748" src="../Images/60cbcdbb69aa62541c348f04e0675abf.png" alt="Signed-In Form With Sign-Out Option" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option-300x84.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-form-sign-out-option.png"/></noscript>
<h2>æŒä¹…æ•°æ®</h2>
<p>ç›®å‰æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªåŸºäºJavaScriptçš„åº”ç”¨ç¨‹åºã€‚å½“æ‚¨é‡æ–°åŠ è½½å±å¹•æ—¶ï¼Œå®ƒå¾ˆå¯èƒ½ä¼šæ¸…é™¤ä¼šè¯æ•°æ®å’Œå­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä»»ä½•æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼ä¿å­˜è¿™äº›æ•°æ®ï¼Œå¦åˆ™æˆ‘ä»¬å°†ä¸¢å¤±çŠ¶æ€ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¸¦æœ‰<code>httpOnly</code>æ ‡å¿—çš„<code>httpOnly</code>cookieæ¥é¿å…æœ‰äººåŠ«æŒä¼šè¯ä¿¡æ¯çš„é£é™©ã€‚è¿™å°†ä½¿æµè§ˆå™¨æ— æ³•è¯»å–ä»»ä½•cookieï¼Œè€Œæ˜¯å…è®¸æ‚¨ä½¿ç”¨æœåŠ¡å™¨ç«¯cookieè€Œä¸æ˜¯<code>localStorage</code>ã€‚å¦‚æœä½ æƒ³æ›´å¤šåœ°äº†è§£è¿™ç§æ–¹æ³•ï¼Œè¯·é˜…è¯»æ°å¤«Â·é˜¿ç‰¹ä¼å¾·çš„è¿™ç¯‡<a href="https://blog.codinghorror.com/protecting-your-cookies-httponly/">å¥½æ–‡ç« ã€‚</a></p>
<p>ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨ä¸­ä¸´æ—¶å­˜å‚¨åƒJWTè¿™æ ·çš„å†…å®¹ï¼Œå°½ç®¡å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬ä¸å»ºè®®è¿™æ ·åšã€‚é¦–å…ˆéœ€è¦åšçš„æ˜¯æ£€æŸ¥æµè§ˆå™¨ä¸­çš„å­˜å‚¨æ”¯æŒã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥å®Œæˆ:</p>
<pre>if (typeof Storage !== "undefined") {
  localStorage.setItem( key, value );
  localStorage.getItem( key );
}</pre>
<p>å› æ­¤ï¼Œä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œè®©æˆ‘ä»¬æ·»åŠ ç”¨äºåœ¨æœ¬åœ°å­˜å‚¨ä¸­ä¿å­˜JWTçš„ä»£ç :</p>
<pre>GenerateJWT(header, claims, null, res =&gt; {
  if (res.status === 200) {
    this.setState({ Response: res.data }, () =&gt; {
      // Check if local storage is supported.
      if (typeof Storage !== "undefined") {
        localStorage.setItem("JWT", res.data);
      }
      DecodeJWT(this.state.Response, data =&gt;
        this.setState({ Data: data.data })
      );
    });
  } else {
    this.setState({ Response: "Error!" });
  }
});</pre>
<h3>ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®</h3>
<p>æ­£å¦‚æˆ‘ä»¬æœ‰æ–‡æ¡£'<code>ready()</code>äº‹ä»¶æˆ–<code>window</code> s' <code>load()</code>äº‹ä»¶ä¸€æ ·ï¼Œå¯¹äºReactä¸­çš„æ¯ä¸ªç»„ä»¶ï¼Œéƒ½æœ‰ä¸€ä¸ªåä¸º<code>[componentDidMount()](<a href="https://reactjs.org/docs/react-component.html#componentdidmount" rel="nofollow">https://reactjs.org/docs/react-component.html#componentdidmount</a>)</code>çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå®ƒåœ¨ç»„ä»¶è¢«æŒ‚è½½(æ’å…¥åˆ°æ ‘ä¸­)æ—¶æ‰§è¡Œã€‚</p>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦ä»è¿œç¨‹ç«¯ç‚¹åŠ è½½æ•°æ®ï¼Œè¿™æ˜¯å®ä¾‹åŒ–ç½‘ç»œè¯·æ±‚çš„å¥½åœ°æ–¹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æœ¬åœ°å­˜å‚¨æ¥åŠ è½½æ•°æ®ã€‚</p>
<pre>componentDidMount() {
  if (typeof Storage !== "undefined") {
    // When this component loads, check if JWT is already saved in the local storage.
    if (localStorage.getItem("JWT") !== null) {
      // If there's something, try to parse and sign the current user in.
      this.setState({ Response: localStorage.getItem("JWT") });
      DecodeJWT(localStorage.getItem("JWT"), data =&gt;
        this.setState({ Data: data.data })
      );
    }
  }
}</pre>
<p>åœ¨è¿™é‡Œï¼Œé™¤äº†<code>Username</code>å’Œ<code>Password</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¢å¤ä¼šè¯ã€‚ä½†æ˜¯æ­£å¦‚æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•åŠ è½½æ•°æ®ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»åœ¨é€€å‡ºç³»ç»Ÿæ—¶æ¸…é™¤æ•°æ®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¿æŒå‡½æ•°åˆ†ç¦»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä¸è¦åƒæˆ‘ä»¬ä»¥å‰ä½¿ç”¨çš„é‚£æ ·ä½¿ç”¨å†…è”å‡½æ•°æ¥é€€å‡ºåº”ç”¨ç¨‹åºã€‚ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>SignOutUser</code>å‡½æ•°:</p>
<pre>SignOutUser = e =&gt; {
  e.preventDefault();
  this.setState({ Response: null, Data: null });
  if (typeof Storage !== "undefined") {
    // When this component loads, check if JWT is already saved in the local storage.
    if (localStorage.getItem("JWT") !== null) {
      localStorage.removeItem("JWT");
    }
  }
};</pre>
<p>å¹¶å°†å…¶ç»‘å®šåˆ°æ³¨é”€æŒ‰é’®:</p>
<pre>&lt;button
  className="btn btn-link"
  onClick={this.SignOutUser}
&gt;
  sign out
&lt;/button&gt;</pre>
<p>ç°åœ¨ï¼Œå½“ä½ åˆ·æ–°æˆ–é‡æ–°åŠ è½½æµè§ˆå™¨æ—¶ï¼Œå”¯ä¸€ä¸¢å¤±çš„æ˜¯<code>Username</code>å’Œ<code>Password</code> <code>Response</code>æ•°æ®ã€‚æ‚¨å¯ä»¥æ¯”è¾ƒç™»å½•é¡µé¢å’Œé‡æ–°åŠ è½½é¡µé¢ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<figure id="attachment_6764" aria-describedby="caption-attachment-6764" class="wp-caption aligncenter"><img data-attachment-id="6764" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-in-page-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-in page" data-image-description="" data-image-caption="&lt;p&gt;Signed-in page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png" decoding="async" class="size-full wp-image-6764 jetpack-lazy-image" src="../Images/e999dfb4460f20ff925eb8c7d3811c9d.png" alt="Signed-In Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1-300x84.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="6764" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-in-page-2/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-in page" data-image-description="" data-image-caption="&lt;p&gt;Signed-in page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png" decoding="async" loading="lazy" class="size-full wp-image-6764" src="../Images/e999dfb4460f20ff925eb8c7d3811c9d.png" alt="Signed-In Page" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1-300x84.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-in-page-1.png"/></noscript><figcaption id="caption-attachment-6764" class="wp-caption-text">Signed-in page.</figcaption></figure>
<figure id="attachment_6765" aria-describedby="caption-attachment-6765" class="wp-caption aligncenter"><img data-attachment-id="6765" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/reloaded-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reloaded page" data-image-description="" data-image-caption="&lt;p&gt;Reloaded page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png" decoding="async" class="size-full wp-image-6765 jetpack-lazy-image" src="../Images/0fc6290ea354bd42564c5d71ab4706db.png" alt="Reloaded Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page-300x84.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="6765" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/reloaded-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png" data-orig-size="730,205" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Reloaded page" data-image-description="" data-image-caption="&lt;p&gt;Reloaded page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page-300x84.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png" decoding="async" loading="lazy" class="size-full wp-image-6765" src="../Images/0fc6290ea354bd42564c5d71ab4706db.png" alt="Reloaded Page" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page-300x84.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/reloaded-page.png"/></noscript><figcaption id="caption-attachment-6765" class="wp-caption-text">Reloaded page.</figcaption></figure>
<p>ç¬¬äºŒä¸ªå›¾åƒä¸­å”¯ä¸€ç¼ºå°‘çš„æ˜¯ç”¨æˆ·è¾“å…¥çš„çŠ¶æ€æ•°æ®ã€‚ä¸€æ—¦ä½ ç‚¹å‡»é€€å‡ºé“¾æ¥ï¼Œä½ å°†å›åˆ°åº”ç”¨ç¨‹åºçš„åŸå§‹çŠ¶æ€ã€‚</p>
<figure id="attachment_6767" aria-describedby="caption-attachment-6767" class="wp-caption aligncenter"><img data-attachment-id="6767" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-out-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png" data-orig-size="730,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-out page" data-image-description="" data-image-caption="&lt;p&gt;Signed-out page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png" decoding="async" class="size-full wp-image-6767 jetpack-lazy-image" src="../Images/2cd3fd7598b9174b02d6d63fbb436ff8.png" alt="Signed-Out Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page-300x86.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png"/><noscript><img data-lazy-fallback="1" data-attachment-id="6767" data-permalink="https://blog.logrocket.com/mern-app-jwt-authentication-part-3/signed-out-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png" data-orig-size="730,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Signed-out page" data-image-description="" data-image-caption="&lt;p&gt;Signed-out page.&lt;/p&gt;&#10;" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page-300x86.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png" decoding="async" loading="lazy" class="size-full wp-image-6767" src="../Images/2cd3fd7598b9174b02d6d63fbb436ff8.png" alt="Signed-Out Page" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page-300x86.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/signed-out-page.png"/></noscript><figcaption id="caption-attachment-6767" class="wp-caption-text">Signed-out page.</figcaption></figure>
<h2>è®¤è¯çš„éªŒè¯</h2>
<p>åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä¹‹å‰éªŒè¯ç”¨æˆ·è¾“å…¥æ€»æ˜¯ä¸€ä¸ªæ›´å¥½çš„ä¸»æ„ã€‚åœ¨æˆ‘ä»¬å‘å‡ºAJAXè¯·æ±‚ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æ£€æŸ¥æœ‰æ•ˆçš„æ¡ˆä¾‹ï¼Œç„¶åå‘å‡ºè¯·æ±‚ã€‚è¿™æœ‰åŠ©äºå‡å°‘å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºçš„è¯·æ±‚æ•°é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™é‡Œï¼Œè®©æˆ‘ä»¬ç¡®ä¿ä¸¤ä¸ªè¾“å…¥éƒ½è‡³å°‘æœ‰ä¸‰ä¸ªå­—ç¬¦é•¿ã€‚</p>
<pre>handleSubmit = e =&gt; {
  // Here, e is the event.
  // Let's prevent the default submission event here.
  e.preventDefault();
  // We can do something when the button is clicked.
  // Here, we can also call the function that sends a request to the server.
  // Get the username and password from the state.
  const { Username, Password } = this.state;
  // Right now it even allows empty submissions.
  // At least we shouldn't allow empty submission.
  if (Username.trim().length &lt; 3 || Password.trim().length &lt; 3) {
    // If either of Username or Password is empty, set an error state.
    this.setState({ Error: "You have to enter both username and password." });
    // Stop proceeding.
    return false;
  }
  const claims = {
    Username,
    Password
  };
  const header = {
    alg: "HS512",
    typ: "JWT"
  };
  GenerateJWT(header, claims, null, res =&gt; {
    if (res.status === 200) {
      this.setState({ Response: res.data }, () =&gt; {
        if (typeof Storage !== "undefined") {
          localStorage.setItem("JWT", res.data);
        }
        DecodeJWT(this.state.Response, data =&gt;
          this.setState({ Data: data.data })
        );
      });
    } else {
      this.setState({ Response: "Error!" });
    }
  });
};</pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥å‘ç”¨æˆ·æ˜¾ç¤ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œè®©ä»–ä»¬çŸ¥é“é˜»æ­¢ä»–ä»¬ç»§ç»­æ“ä½œçš„é”™è¯¯ã€‚åœ¨æˆ‘ä»¬è¿™é‡Œåº”è¯¥æ˜¯ï¼Œ<code>"You have to enter both username and password."</code>ã€‚</p>
<pre>{this.state.Error &amp;&amp; (
  &lt;div className="alert alert-danger text-center"&gt;
    &lt;p className="m-0"&gt;{this.state.Error}&lt;/p&gt;
  &lt;/div&gt;
)}</pre>
<h2>ç»“è®º</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªåŸºæœ¬ç³»ç»Ÿï¼Œå®ƒä¸RESTç«¯ç‚¹å¯¹è¯å¹¶æä¾›å“åº”ï¼Œæ ¹æ®éœ€è¦æ”¹å˜çŠ¶æ€ï¼Œå¹¶æ˜¾ç¤ºæ­£ç¡®çš„å†…å®¹ã€‚å®ƒä¹Ÿæœ‰ä¸€ä¸ªæŒä¹…çš„ç™»å½•ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« å°†è®¨è®ºå¦‚ä½•åˆ›å»ºç”¨æˆ·ï¼Œåœ¨æœåŠ¡å™¨ç«¯éªŒè¯ç”¨æˆ·ï¼Œå¹¶ç”Ÿæˆä¸åŒç±»å‹çš„å“åº”ï¼Œå¦‚æ‰¾ä¸åˆ°ç”¨æˆ·ã€æ— æ•ˆå‡­è¯ç­‰ã€‚æˆ‘ä»¬å°†ä»æœåŠ¡å™¨çš„ç¤ºä¾‹å­˜å‚¨å’ŒéªŒè¯ç”¨æˆ·å¼€å§‹ã€‚åˆ«å¿˜äº†å›æ¥çœ‹çœ‹æœ€åçš„éƒ¨åˆ†ï¼</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">ä½¿ç”¨LogRocketæ¶ˆé™¤ä¼ ç»Ÿååº”é”™è¯¯æŠ¥å‘Šçš„å™ªéŸ³</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>æ˜¯ä¸€æ¬¾React analyticsè§£å†³æ–¹æ¡ˆï¼Œå¯ä¿æŠ¤æ‚¨å…å—æ•°ç™¾ä¸ªè¯¯æŠ¥é”™è¯¯è­¦æŠ¥çš„å½±å“ï¼Œåªé’ˆå¯¹å°‘æ•°çœŸæ­£é‡è¦çš„é¡¹ç›®ã€‚LogRocketå‘Šè¯‰æ‚¨Reactåº”ç”¨ç¨‹åºä¸­å®é™…å½±å“ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„bugå’ŒUXé—®é¢˜ã€‚</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>è‡ªåŠ¨èšåˆå®¢æˆ·ç«¯é”™è¯¯ã€ååº”é”™è¯¯è¾¹ç•Œã€è¿˜åŸçŠ¶æ€ã€ç¼“æ…¢çš„ç»„ä»¶åŠ è½½æ—¶é—´ã€JSå¼‚å¸¸ã€å‰ç«¯æ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·äº¤äº’ã€‚ç„¶åï¼ŒLogRocketä½¿ç”¨æœºå™¨å­¦ä¹ æ¥é€šçŸ¥æ‚¨å½±å“å¤§å¤šæ•°ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„é—®é¢˜ï¼Œå¹¶æä¾›æ‚¨ä¿®å¤å®ƒæ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚</p><p vwo-el-id="28675661060">å…³æ³¨é‡è¦çš„React bugâ€”<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">ä»Šå¤©å°±è¯•è¯•LogRocketã€‘ã€‚</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>