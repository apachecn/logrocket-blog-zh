# å¦‚ä½•æ„å»ºè‡ªå®šä¹‰çš„ GatsbyJS ä¸»é¢˜- LogRocket åšå®¢

> åŸæ–‡ï¼š<https://blog.logrocket.com/how-to-build-a-custom-gatsbyjs-theme-e9b9529f217b/>

### ç›–èŒ¨æ¯”ç®€ä»‹

[Gatsby](https://www.gatsbyjs.org/) æ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œç”± [React.js](https://reactjs.org/) ã€ [Webpack](https://webpack.js.org/) å’Œ [GraphQL](https://graphql.org/) æ„å»ºè€Œæˆã€‚å®ƒç”¨äºæ„å»ºé€Ÿåº¦éå¸¸å¿«ã€å†…å®¹ç›¸å¯¹é™æ€çš„ç½‘ç«™ï¼Œä¾‹å¦‚åšå®¢ã€ç”µå­å•†åŠ¡ç½‘ç«™ï¼Œç”šè‡³å…¬å¸ç½‘ç«™ã€‚

> æ³¨æ„:static site generator æ˜¯ä¸€ä¸ªå¹³å°ï¼Œå®ƒå…è®¸æ‚¨è·å¾—é™æ€ HTML ä¸­çš„æ‰€æœ‰è¯·æ±‚ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ¯æ¬¡ç”¨æˆ·å‘å‡ºè¯·æ±‚æ—¶æœåŠ¡å™¨å’Œæ¨¡æ¿(ä»£ç )çš„äº¤äº’ã€‚

> ![](img/a9dc26f7fc11e20fb3ffe997ce4d709f.png)
> 
> How GatsbyÂ works.

#### **TL:DR**

ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°†åœ¨è¿™ç¯‡æ–‡ç« ä¸­çœ‹åˆ°çš„å†…å®¹çš„ç®€è¦æ¦‚è¿°:

1.  åˆ›å»ºä¸»é¢˜ç›®å½•å¹¶å®‰è£…ä¾èµ–é¡¹
2.  å°†ç½‘ç«™è¿æ¥åˆ°è‡ªå®šä¹‰ä¸»é¢˜
3.  å¯¼å‡ºç«™ç‚¹è¦ä½¿ç”¨çš„ä¸€äº›ç»„ä»¶
4.  é€šè¿‡å®ç°ç»„ä»¶éšè—æ¥é‡å†™ç«™ç‚¹çš„ä¸€äº›è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½

å…ˆå†³æ¡ä»¶

### åœ¨æˆ‘ä»¬è¿›ä¸€æ­¥è®¨è®ºä¹‹å‰ï¼Œæœ¬æ–‡å‡è®¾:

[Node.js â‰¥ v6](https://nodejs.org/en/) å®‰è£…åœ¨æ‚¨çš„æœºå™¨ä¸Š

*   [NPM](https://www.npmjs.com/get-npm) å·²å®‰è£…åœ¨æ‚¨çš„æœºå™¨ä¸Š
*   å…¨çƒå®‰è£… Gatsby CLI
*   ä½ å¯¹ [React.js](https://reactjs.org/) æœ‰äº†åŸºæœ¬çš„äº†è§£
*   æ–‡ä»¶å¤¹è®¾ç½®

### åœ¨å®Œæˆä»¥ä¸‹æ‰€æœ‰æ­¥éª¤åï¼Œæ–‡ä»¶ç»“æ„çœ‹èµ·æ¥ä¼šåƒè¿™æ ·:

ç®€å•-ç›–èŒ¨æ¯”ä¸»é¢˜>>å¥—é¤> >è‹æ ¼å…°ä¸»é¢˜

*   ä½ç½®
*   ç›®å½•æ˜¯æˆ‘ä»¬é¡¹ç›®çš„æ–‡ä»¶å¤¹ã€‚packages ç›®å½•åŒ…å«ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå®ƒçš„åå­—å°±æ˜¯æˆ‘ä»¬å°†è¦åˆ›å»ºçš„ä¸»é¢˜ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„ä¸»é¢˜æ–‡ä»¶ã€‚æœ€åï¼Œç«™ç‚¹ç›®å½•åŒ…å«äº†æˆ‘ä»¬çš„ Gatsby ç«™ç‚¹ï¼Œå½“æˆ‘ä»¬å¼€å‘å®ƒæ—¶ï¼Œå®ƒä½¿ç”¨äº†æˆ‘ä»¬çš„ä¸»é¢˜ã€‚

æ„å»ºç›–èŒ¨æ¯”ä¸»é¢˜

### åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œä¸»é¢˜ä¸åŒäºå¯åŠ¨å™¨ï¼Œå› ä¸ºæ‚¨å¯ä»¥å°†ä¸»é¢˜æ„å»ºä¸ºåº“ã€‚ç„¶åï¼Œå®ƒå˜æˆä¸€ä¸ªå¯ä»¥æ›´æ–°çš„åŒ…ï¼Œé€šè¿‡éšè—å¤æ‚æ€§ï¼Œå¯ä»¥è®©æ‚¨æ›´å¿«åœ°å¯åŠ¨å’Œè¿è¡Œã€‚å› æ­¤ï¼Œé€šè¿‡æ„å»ºä¸»é¢˜ï¼Œæˆ‘ä»¬å…è®¸å¯¼å…¥è¯¥ä¸»é¢˜çš„ç”¨æˆ·ä»ä¸»é¢˜ä¸­è·å¾—ä¸€äº›çµæ„Ÿï¼Œå¹¶æ›´å¿«åœ°å»ºç«‹ç”¨æˆ·ç•Œé¢ã€‚

**è®¾ç½®é¡¹ç›®é…ç½®**

é¦–å…ˆï¼Œåœ¨æœ¬åœ°è®¾å¤‡ä¸Šä¸º Gatsby ä¸»é¢˜åˆ›å»ºä¸€ä¸ªç›®å½•

1.  `$ mkdir simple-gatsby-theme`

ç„¶åè¿è¡Œ`npm init`æ¥è®¾ç½®`package.json`:

![](img/c6040e83cd4ae4c15dbbd156c7c0a58d.png)

2.åœ¨åˆ›å»ºçš„`package.jsonÂ `ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ª[å·¥ä½œåŒº](https://yarnpkg.com/lang/en/docs/workspaces/)ï¼Œè¿™å°†å…è®¸æˆ‘ä»¬ä»ç”¨æˆ·ç«¯ç®¡ç†ä¸»é¢˜çš„æ›´æ–°ï¼Œæˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªâ€œpackages/*â€æ¥å¸®åŠ©æˆ‘ä»¬å°† Gatsby ä¸»é¢˜é“¾æ¥åˆ°è¿™ä¸ªæœ€ç»ˆç”¨æˆ·å·¥ä½œåŒºä¸»é¢˜ç®¡ç†åŒ…:

```
{ "private": true,  "name": "simple-gatsby-theme",  "version": "1.0.0",  "workspace": [ "site", "packages/*" ]  }
```

> åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ï¼Œå°†å…¶å‘½åä¸º packagesï¼Œåœ¨è¯¥ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸»é¢˜ç›®å½•ï¼Œå¹¶ä½¿ç”¨ `yarn init` bash å‘½ä»¤åˆ›å»ºä¸€ä¸ª`package.jsonÂ ` :

1.  ![](img/32b0ce635451555d855e1cb4fd03b397.png)

4.æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å»ç°åœºæ€»ç›‘é‚£é‡Œè¿è¡Œ`$ yarn workspace simple-site add gatsby`ã€‚è¿™ä½¿ç”¨ Yarn çš„å·¥ä½œåŒºç‰¹æ€§å°† Gatsby æ·»åŠ ä¸ºæˆ‘ä»¬é¡¹ç›®çš„ä¾èµ–é¡¹ã€‚

æ³¨æ„:ä¸Šé¢çš„å‘½ä»¤æŒ‡å‘ç«™ç‚¹ç›®å½•ä¸­çš„ package.json åç§°â€œsimple-siteâ€ã€‚

> æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨æ·»åŠ ä¸»é¢˜çš„é…ç½®ä½œä¸ºé¡¹ç›®çš„ä¾èµ–é¡¹ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥è®¿é—®ä¸»é¢˜:`"[THEME NAME]"Â : "*"`

```
{ 
 "name": "simple-site",
 "version": "0.0.1",
 "description": "A simple site built for a Gatsby Theme ", 
 "main": "gatsby-config.js", 
 "license": "MIT", 
 "private": true,
 "scripts": { "develop": "gastby develop", "build": "gatsby build" },
 "dependencies": { "gatsby": "^2.1.19", "simple-theme":"*" }
 }
```

è®¾ç½®ä¸»é¢˜ä¾èµ–å…³ç³»

### åœ¨æˆ‘ä»¬çš„ä¸»é¢˜ç›®å½•ä¸­ï¼Œæˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯é€šè¿‡è¿è¡Œ`$ yarn workspace simple-site add gatsby -D`å®‰è£… Gatsbyï¼Œä½œä¸ºä¸€ä¸ªå¼€å‘ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬çš„`package.jsonÂ `ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·:

è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ª peer ä¾èµ–é¡¹å’Œä¸€ä¸ª dev ä¾èµ–é¡¹é›†ï¼Œè¿™æ ·å¦‚æœç”¨æˆ·å®‰è£…äº†ä¸»é¢˜ï¼Œå®ƒä¼šç¡®ä¿ Gatsby è¢«å®‰è£…ã€‚å¦‚æœä»–ä»¬è¿˜æ²¡æœ‰å®‰è£…ç›–èŒ¨æ¯”ï¼Œå®ƒä¼šè­¦å‘Šä»–ä»¬ã€‚æˆ‘ä»¬è¿˜é€šè¿‡è¿è¡Œ`$ yarn workspace simple-theme react react-dom -D`ä¸ºä¸»é¢˜å®‰è£…äº† React å’Œ react-domã€‚

```
{ 
 "name": "simple-theme", 
"version": "0.0.1", "description": "A Simple gatsby theme", 
"main": "index.js",
 "license": "MIT",
 "devDependencies": { 
 "gatsby": "^2.1.19",
 "react": "^16.8.3", 
"react-dom": "^16.8.3" 
}, 
"peerDependencies": { 
"gatsby": "^2.1.19", 
"react": "^16.8.3",
 "react-dom": "^16.8.3" 
 } 
}
```

æ„å»ºä¸»é¢˜

### æˆ‘ä»¬ä¼šä½¿ç”¨ã€‚mdx æ‰©å±•ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨ç¼–å†™å†…åµŒåœ¨ markdown ä¸­çš„ JSXã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç»„åˆï¼Œå› ä¸ºå®ƒå…è®¸ä½ å¯¹å°ä¸œè¥¿ä½¿ç”¨ markdown çš„è¯­æ³•(æ¯”å¦‚`# heading `),å¯¹æ›´é«˜çº§çš„ç»„ä»¶ä½¿ç”¨ JSXã€‚å¦å¤–ï¼ŒMDX æ²¡æœ‰è¿è¡Œæ—¶ï¼Œæ‰€æœ‰ç¼–è¯‘éƒ½å‘ç”Ÿåœ¨æ„å»ºé˜¶æ®µã€‚

è¿™åœ¨ Mac ä¸Šè¿è¡Œè‰¯å¥½:

å¯¹äº windows è®¾å¤‡ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤(æˆ‘å°†åœ¨ä¸‹é¢çš„ä¸€èŠ‚ä¸­è§£é‡ŠåŸå› ):

```
$ yarn workspace simple-theme add gatsby-mdx @mdx-js/mdx @mdx-js/tag
```

ç”±äº Gatsby åœ¨é»˜è®¤æƒ…å†µä¸‹åªä¼šåœ¨ src/pages/index.mdx ç›®å½•ä¸­æŸ¥æ‰¾ç«™ç‚¹ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯åœ¨æˆ‘ä»¬çš„ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­åˆ›å»ºè¿™ä¸ªç›®å½•ã€‚å¦å¤–ï¼Œè®°å¾—åœ¨ä¸»é¢˜ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª index.jsã€‚

```
$ yarn workspace simple-theme add [emailÂ protected]
```

ä¸ºä¸»é¢˜è®¾ç½® Gatsby-config.js

### æˆ‘ä»¬å°†ä»åœ¨ä¸»é¢˜ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª`gatsby-config.js`æ–‡ä»¶å¼€å§‹ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹:

æˆ‘ä»¬å®‰è£…äº†[gastby-content-page-creator](https://www.gatsbyjs.org/packages/gatsby-plugin-page-creator/)æ’ä»¶ï¼Œè¿™æ ·å½“ä¸»é¢˜æ„å»ºæ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥é€šè¿‡è¯»å–æˆ‘ä»¬çš„åŒ…æ¥æŸ¥çœ‹ä¸»é¢˜çš„`src/pages/index.mdx`ã€‚è¿™ç¡®ä¿äº†å½“æˆ‘ä»¬è¿è¡Œä»£ç æ—¶ï¼Œå®ƒä»æˆ‘ä»¬çš„åŒ…ä¸­è¯»å–ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæŸ¥çœ‹ç«™ç‚¹ç›®å½•ä¸­çš„é¡µé¢ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›å®ƒä»ä¸»é¢˜ä¸­åŠ è½½é¡µé¢ï¼Œæˆ‘ä»¬å°†åœ¨ bash ä¸­è¿è¡Œä»¥ä¸‹ä»£ç :

```
module.exports= { plugins : [ 
{ 
  resolve : 'gatsby-mdx', 
  options:{} 
},
 { 
  resolve : 'gatsby-plugin-page-creator',
  options:{ path: ${__dirname}/src/pages, 
      }
    }
  ]
}
```

ä¸ºç«™ç‚¹è®¾ç½® gatsby-config.js

```
$ yarn workspace simple-theme add gatsby-plugin-page-creator
```

### è¿™é‡Œæˆ‘ä»¬æŒ‡å®šä½¿ç”¨ä¸€ä¸ªä¸»é¢˜:

**æ³¨æ„:**ä¸€ä¸ªå¿«é€Ÿæ£€æŸ¥ä½ çš„ç«™ç‚¹æ˜¯å¦çœŸçš„æœ‰ä¸»é¢˜ä½œä¸ºä¾èµ–é¡¹çš„æ–¹æ³•æ˜¯è¿è¡Œ$ yarn workspace info

```
module.exports = { 
  __experimentalThemes : [ 'simple-theme' ] 
};
```

> ![](img/648a2e7e3e97b16d3522e25bcf3c435a.png)

ä»ä¸Šé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç®€å•çš„ç½‘ç«™æœ‰ç®€å•çš„ä¸»é¢˜ä½œä¸ºä¾èµ–ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ˜¯é“¾æ¥çš„ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½äº†ã€‚

ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡è¿è¡Œ`$ yarn workspace simple-site develop`æ¥è¿è¡Œæ¼”ç¤ºä»¥è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä»¥ä¸‹å†…å®¹:

![](img/264ecf89b6c75093e0adc2db35c633df.png)

å‘ç®€å•ä¸»é¢˜æ·»åŠ å¸ƒå±€

### æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [gatsby MDX layouts](https://gatsby-mdx.netlify.com/api-reference/options/default-layouts/) æ¥å®šä½æˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºçš„å®é™…å¸ƒå±€ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨ç«™ç‚¹çš„ src ä¸­åˆ›å»ºä¸€ä¸ªç»„ä»¶ç›®å½•å’Œä¸€ä¸ª layout.js ç»„ä»¶ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ react ç»„ä»¶:

ä¸ºäº†è®©ä¸Šé¢çš„ä»£ç åœ¨ç®€å•ä¸»é¢˜ä¸­å¯ç”¨ï¼Œæˆ‘ä»¬å¿…é¡»å‘Šè¯‰ MDX è§£æè¿™ä¸ªå¸ƒå±€:

```
import React from 'react' 

export default 
({children}) => ( 
  <section style = 
{{
   display: 'block', 
   maxWidth : '650px',
   margin: '2rem auto'
 }}>
     {children}
   </section>
 );
```

æ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ï¼ŒMDX ä¼šå¯»æ‰¾`layout.js`å¹¶å¯¹æ•´ä¸ª MDX å®ç°æ ·å¼ã€‚

```
module.exports = { 
plugins : [ 
  { 
    resolve : 'gatsby-mdx', 
    options:{ defaultLayouts:{
     default: require.resolve('./src/components/layout.js') 
         }
       }
     }
   ]
 }
```

å°†ç»„ä»¶æ ·å¼å¯¼å…¥ index.mdx

### æˆ‘ä»¬å¯ä»¥å†™æ™®é€šçš„ã€‚mdxï¼Œå¹¶å¯¼å…¥ React ç»„ä»¶ï¼Œå¯¹è¿™äº›ç»„ä»¶è¿›è¡Œå¦‚ä¸‹æ ·å¼åŒ–:

é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`info.jsÂ `æ–‡ä»¶å¹¶å¯¼å…¥ React å’Œä¸€äº›æœè£…æ ·å¼:

ç„¶åæˆ‘ä»¬è½¬åˆ°æˆ‘ä»¬çš„`info.mdxÂ `å¹¶å¯¼å…¥ç»„ä»¶ï¼Œå°±åƒæˆ‘ä»¬åœ¨å¸¸è§„ååº”ä¸­ä¸€æ ·:

```
import React from 'react' 
const Info = ({children}) =>{ 
return( 
    <div 
      style = {{
                 padding: "1rem", 
                 backgroundColor: "blue" 
              }} > 
              {children} 
          </div>
           ); 
  }
   export default Info
```

æˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªè“è‰²èƒŒæ™¯çš„æ˜¾ç¤ºï¼ŒæŒ‡ç¤ºåŒ…è£¹åœ¨ info æ ‡ç­¾å‘¨å›´çš„éƒ¨åˆ†:

```
import Info from "./../components/info" 

<Info>
   My name is obinna  welcome to my simple theme
 </Info>

```

å°†ç»„ä»¶ä»ç®€å•ä¸»é¢˜å¯¼å…¥åˆ°ç«™ç‚¹

```
export {default as Info} from './src/components/info' 
export {default as color} from './src/tokens/color'
```

### æ„å»ºä¸»é¢˜çš„æ•´ä¸ªç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨ç«™ç‚¹ä¸­ä½¿ç”¨å®ƒçš„å±æ€§ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨ç«™ç‚¹ä¸­åˆ›å»ºä¸€äº›é¡µé¢ï¼Œå¹¶æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å°†ä¸»é¢˜çš„å¸ƒå±€å¯¼å…¥åˆ°æ ·å¼ä¸­:

1.åˆ›å»ºä¸€ä¸ª`src/pages/info.mdx`ç›®å½•

2.ä»ç®€å•ä¸»é¢˜çš„`index.js`ä¸­å¯¼å‡ºä¿¡æ¯ç»„ä»¶

3.å¯¼å…¥åˆ°`info.mdx`ç«™ç‚¹ç›®å½•ä¸­

```
export {default as Info} from './src/components/info'
```

å°±è¿™æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸»é¢˜ä¸­çš„ç»„ä»¶ã€‚

```
import {Info} from 'simple-theme' 
#More Information about me 
<Info> 
  I like to write a lot of poetry
 </Info>
```

åœ¨ä½ çš„ä¸»é¢˜ä¸­ä½¿ç”¨è®¾è®¡ç¬¦å·

### å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›ä¸»é¢˜è‡ªå®šä¹‰æ ·å¼ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨é»˜è®¤æƒ…å†µä¸‹è¢«æˆ‘ä»¬çš„ä¸»é¢˜è¯†åˆ«ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›ç»™ç”¨æˆ·è¦†ç›–è¿™äº›æ ·å¼çš„èƒ½åŠ›ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸»é¢˜ä¸­åˆ›å»ºä¸€ä¸ªä»¤ç‰Œç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æœ‰æˆ‘ä»¬çš„é»˜è®¤é¢œè‰²é…ç½®:

ä¸ºäº†å°†æ ·å¼å¯¼å…¥åˆ°`index.jsÂ `ç»„ä»¶ï¼Œæˆ‘ä»¬é‡æ„äº†ç»„ä»¶ä»¥å®ç°å¯¼å…¥:

```
export default {
primary : 'blue'
}
```

ç»„ä»¶é˜´å½±

```
import React from 'react' 
import color from '../tokens/color';
 const Info = ({children}) =>{
   return( 
      <div 
          style = {{ 
              padding: "1rem", 
              backgroundColor: color.primary 
            }} > 
        {children} 
          </div> ); 
      }
   export default Info
```

### è¿™ä¸ªæ¦‚å¿µå…è®¸æˆ‘ä»¬æ ¹æ®è‡ªå·±çš„å–œå¥½ä¿®æ”¹éƒ¨åˆ†ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæœ¬åœ°æ–‡ä»¶(ä»¥æ­£åœ¨ä½¿ç”¨çš„ä¸»é¢˜å‘½å)åœ¨æˆ‘ä»¬çš„ç«™ç‚¹ç›®å½•ä¸­è¿›è¡Œæ¸²æŸ“ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬æ”¾å…¥æ–‡ä»¶å¤¹çš„ä»»ä½•æ–‡ä»¶éƒ½å°†ä¼˜å…ˆäºä¸»é¢˜é»˜è®¤å€¼ã€‚

åœ¨ç«™ç‚¹çš„`srcÂ `ä¸­åˆ›å»ºä¸€ä¸ªç®€å•ä¸»é¢˜æ–‡ä»¶å¤¹

*   åœ¨æ–°åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­å¯¼å‡ºæ‚¨å–œæ¬¢çš„é¢œè‰²
*   å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªé¡µé¢å‘ˆç°æ–‡æœ¬ï¼ŒåŒ…è£¹åœ¨ä¿¡æ¯æ–‡æœ¬å‘¨å›´çš„éƒ¨åˆ†ä¸ºæ£•è‰²ã€‚

```
export default {
primary: 'brown'
};

```

æˆ‘ä»¬ç”šè‡³å¯ä»¥è¦†ç›–ç½‘ç«™ä¸Šçš„ç»„ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æˆ‘ä»¬çš„ç«™ç‚¹ç›®å½•ä¸­åˆ›å»ºç›¸åŒçš„ç»„ä»¶æ–‡ä»¶å¤¹ã€‚å§‘ä¸”ç§°ä¹‹ä¸º`simple-theme/components/info.js`ã€‚

æ›´å¤šæ¥è‡ª LogRocket çš„ç²¾å½©æ–‡ç« :

* * *

### *æ³¨æ„:è¦è®¿é—®è¦ä¿®æ”¹çš„å®šåˆ¶ç»„ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»ä»ä¸»é¢˜*çš„ index.js å¯¼å‡º

* * *

> æˆ‘ä»¬çš„`index.jsÂ `å˜æˆäº†:

```
export {default as Info} from './src/components/info'
export {default as color} from './src/tokens/color'
```

åœ¨åŒä¸€ä¸ªç½‘ç«™ä¸Šä½¿ç”¨ä¸¤ä¸ªä¸»é¢˜

```
import React from 'react' 
import {color} from 'simple-theme'
 const Info = ({children}) =>{
  return( 
      <div style = {{ 
                padding: "10rem",
                 background : color.primary,
                 fontSize : '30px' 
        }} > 
            {children} 
        </div> ); 
 } 
 export default Info
```

### ä¹‹å‰ï¼Œæˆ‘æåˆ°è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸æ­¢ä¸€ä¸ªä¸»é¢˜ï¼›å› æ­¤ï¼Œæˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªå­ä¸»é¢˜ï¼Œå®ƒä¹Ÿä¾èµ–äºç®€å•ä¸»é¢˜ã€‚æˆ‘å°†è°ƒç”¨æˆ‘çš„â€œbat-themeâ€ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡è¿è¡Œ`yarn init`åˆå§‹åŒ– yarnï¼Œå¹¶ç”¨æ‰€éœ€çš„ä¸»é¢˜ä¾èµ–è®¾ç½®`package.json`ã€‚

æˆ‘ä»¬æ·»åŠ äº† simple-theme ä½œä¸º bat-theme çš„ä¾èµ–é¡¹ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å®ƒè¿æ¥åˆ°çˆ¶ä¸»é¢˜ï¼Œè¿™æ ·å³ä½¿ç”¨æˆ·å®‰è£…äº† bat-themeï¼Œä»–ä»¬ä¹Ÿå¯ä»¥è®¿é—® simple-theme çš„ç‰¹æ€§ã€‚

```
{ 
"name": "bat-theme", 
"version": "0.0.1", 
"main": "index.js", 
"dependencies": {
 "gatsby-plugin-page-creator": "^2.0.9", 
 "simple-theme": "*"
 },
 "devDependencies": { 
  "gatsby": "^2.1.19",
 "react": "^16.8.3",
 "react-dom": "^16.8.3"
 }, 
"peerDependencies": { 
  "gatsby": "^2.1.19", 
  "react": "^16.8.3", 
  "react-dom": "^16.8.3" 
}, 
"license": "MIT" 
}
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª gatsby-config.js æ¥å°†çˆ¶ä¸»é¢˜å¯¼å…¥åˆ°å­ä¸»é¢˜ä¸­ï¼Œå°±åƒæˆ‘ä»¬è¿æ¥åˆ°ç«™ç‚¹å¹¶è§£æ index.js ä¸­çš„ package.json ä¸€æ ·:

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ç«™ç‚¹çš„`gatsby-config.js`å’Œ`package.json`æ¥æµ‹è¯•å­ä¸»é¢˜æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œä»¥ä½¿ç”¨é“¾æ¥åˆ°ç®€å•ä¸»é¢˜çš„ bat-cave ä¸»é¢˜ã€‚ä¸ºäº†æ£€æŸ¥è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•ç›¸äº’ä½œç”¨çš„ï¼Œæˆ‘ä»¬è¿è¡Œ`yarn workspaces infoÂ `,æˆ‘ä»¬åº”è¯¥æœ‰è¿™æ ·çš„æ˜¾ç¤º:

```
module.exports = {
__experimentalThemes:[â€˜simple-themeâ€™]
};

```

![](img/3f10c043b0b44816e5b67df003dbe600.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è™è ä¸»é¢˜ä¾èµ–äºç®€å•ä¸»é¢˜ï¼Œè€Œç®€å•ä¸»é¢˜åˆæ˜¯ç½‘ç«™æ‰€ä¾èµ–çš„ã€‚

åˆ›å»ºä¸»é¢˜çš„å¸¸è§é”™è¯¯

### åœ¨å‡†å¤‡è¿™ç¯‡æ–‡ç« æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é”™è¯¯:

**é”™åˆ«å­—**:åœ¨é™ˆè¿°åƒâ€œ_ _ experimental themesâ€â€œpluginsâ€è¿™æ ·çš„å…³é”®è¯æ—¶è¦å°å¿ƒã€‚æˆ‘è”ç³»äº†ç›–èŒ¨æ¯”å›¢é˜Ÿï¼Œ[åœ¨ GitHub ä¸Šå‘å¸ƒäº†ä¸€ä¸ªé—®é¢˜](https://github.com/gatsbyjs/gatsby/issues/12291)ï¼Œä»¥å¸®åŠ©åœ¨å‡ºç°é”™åˆ«å­—æ—¶çªå‡ºæ˜¾ç¤ºè¿™äº›é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ç›¸ä¿¡ä½ ä¼šæ²¡äº‹çš„

*   æˆ‘è¿˜é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ã€‚mdx æ–‡ä»¶æ²¡æœ‰æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸Šï¼Œç»“æœæ˜¯ Gatsby æœ‰ä¸€äº›ç‰¹å®šäº windows æ“ä½œç³»ç»Ÿçš„é”™è¯¯ã€‚é—®é¢˜åœ¨äºï¼Œç”±äº windows å’Œ unix æ–‡ä»¶è·¯å¾„çš„å·®å¼‚ï¼Œwebpack åŠ è½½å™¨è§„åˆ™å¹¶ä¸é€‚ç”¨ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°è¡¥ä¸
*   åœ¨è¿™é‡Œæ‰¾åˆ° windows é”™è¯¯[çš„ä¿®å¤æ–¹æ³•](https://github.com/ChristopherBiscardi/gatsby-mdx/commit/c672ef5b9a80f69a81aed9672e187fefc461b5b5)
*   åœ¨ä¸ä¹…çš„å°†æ¥ä¼šæœ‰æ›´å¤šçš„ Gatsby è¿›å±•

### ä»ç›–èŒ¨æ¯”ä¸»é¢˜ä¸­æˆ‘ä»¬åº”è¯¥æœŸå¾…çš„äº‹æƒ…:

ä¸éœ€è¦ä¸€ç›´æ¸…ç†ç¼“å­˜

*   ç»„ä»¶é˜´å½±å¯ä»¥ä¸ä¸»é¢˜åˆå¹¶
*   ç»“è®º

### æˆ‘çœŸçš„å¾ˆå–œæ¬¢è§£é‡Šç›–èŒ¨æ¯”ä¸»é¢˜æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä¸»é¢˜çš„ä¼—å¤šä¼˜ç‚¹ä¹‹ä¸€æ˜¯ä½ å¯ä»¥ä¸€æ¬¡å®‰è£…å¤šä¸ªä¸»é¢˜åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚æ‚¨è¿˜å¯ä»¥æ„å»ºè®¸å¤šä¸»é¢˜æ¥å¸®åŠ©å…¶ä»–å¼€å‘äººå‘˜æ”¹è¿›å·¥ä½œæµç¨‹ã€‚

æ„å»ºä¸»é¢˜æœ€ä»¤äººå…´å¥‹çš„éƒ¨åˆ†æ˜¯ç¼–å†™ MDXï¼Œå®ƒç¡®å®åå‰¯å…¶å®ã€‚æˆ‘å¸Œæœ›å’Œç›–èŒ¨æ¯”å»ºç«‹ä¸€äº›ä¸»é¢˜ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä½ è¿™æ ·åšğŸ™‚å¦‚æœä½ å¯¹æ­¤æ„Ÿå…´è¶£ï¼Œæˆ‘å»ºè®®ä½ è§‚çœ‹æ°æ£®å’Œçº¦ç¿°çš„å®Œæ•´è§†é¢‘ã€‚[è¿™é‡Œçš„](https://github.com/Ekwuno/Scotch-gastby-theme-demo)æ˜¯æœ¬æ–‡å›è´­çš„é“¾æ¥ã€‚ç¼–ç å¿«ä¹ï¼

[LogRocket](https://lp.logrocket.com/blg/react-signup-general) :å…¨é¢äº†è§£æ‚¨çš„ç”Ÿäº§ React åº”ç”¨

## è°ƒè¯• React åº”ç”¨ç¨‹åºå¯èƒ½å¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯å½“ç”¨æˆ·é‡åˆ°éš¾ä»¥é‡ç°çš„é—®é¢˜æ—¶ã€‚å¦‚æœæ‚¨å¯¹ç›‘è§†å’Œè·Ÿè¸ª Redux çŠ¶æ€ã€è‡ªåŠ¨æ˜¾ç¤º JavaScript é”™è¯¯ä»¥åŠè·Ÿè¸ªç¼“æ…¢çš„ç½‘ç»œè¯·æ±‚å’Œç»„ä»¶åŠ è½½æ—¶é—´æ„Ÿå…´è¶£ï¼Œ

.

[try LogRocket](https://lp.logrocket.com/blg/react-signup-general)

LogRocket ç»“åˆäº†ä¼šè¯å›æ”¾ã€äº§å“åˆ†æå’Œé”™è¯¯è·Ÿè¸ªï¼Œä½¿è½¯ä»¶å›¢é˜Ÿèƒ½å¤Ÿåˆ›å»ºç†æƒ³çš„ web å’Œç§»åŠ¨äº§å“ä½“éªŒã€‚è¿™å¯¹ä½ æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ

[![](img/f300c244a1a1cf916df8b4cb02bec6c6.png) ](https://lp.logrocket.com/blg/react-signup-general) [![LogRocket Dashboard Free Trial Banner](img/d6f5a5dd739296c1dd7aab3d5e77eeb9.png)](https://lp.logrocket.com/blg/react-signup-general) 

LogRocket ä¸æ˜¯çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸æ˜¯è¦æ±‚ç”¨æˆ·æä¾›æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨å›æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ï¼Œä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚

ä¸å†æœ‰å˜ˆæ‚çš„è­¦æŠ¥ã€‚æ™ºèƒ½é”™è¯¯è·Ÿè¸ªå…è®¸æ‚¨å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç„¶åä»ä¸­å­¦ä¹ ã€‚è·å¾—æœ‰å½±å“çš„ç”¨æˆ·é—®é¢˜çš„é€šçŸ¥ï¼Œè€Œä¸æ˜¯è¯¯æŠ¥ã€‚è­¦æŠ¥è¶Šå°‘ï¼Œæœ‰ç”¨çš„ä¿¡å·è¶Šå¤šã€‚

LogRocket Redux ä¸­é—´ä»¶åŒ…ä¸ºæ‚¨çš„ç”¨æˆ·ä¼šè¯å¢åŠ äº†ä¸€å±‚é¢å¤–çš„å¯è§æ€§ã€‚LogRocket è®°å½• Redux å­˜å‚¨ä¸­çš„æ‰€æœ‰æ“ä½œå’ŒçŠ¶æ€ã€‚

ç°ä»£åŒ–æ‚¨è°ƒè¯• React åº”ç”¨çš„æ–¹å¼â€” [å¼€å§‹å…è´¹ç›‘æ§](https://lp.logrocket.com/blg/react-signup-general)ã€‚

Modernize how you debug your React apps â€” [start monitoring for free](https://lp.logrocket.com/blg/react-signup-general).