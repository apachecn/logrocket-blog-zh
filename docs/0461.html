<html>
<head>
<title>Building a photo gallery app from scratch with Chakra UI - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>ä½¿ç”¨Chakra UIä»å¤´å¼€å§‹æ„å»ºç…§ç‰‡åº“åº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/#0001-01-01">https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Reactç°åœ¨æ˜¯ä¸–ç•Œä¸Šæœ€æˆç†Ÿçš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼ŒExpress.jsæ˜¯å®ƒåœ¨åç«¯/æœåŠ¡å™¨æ¡†æ¶ä¸­çš„å¯¹æ‰‹ã€‚å¦‚æœä½ ç°åœ¨æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½ ä¸å¯èƒ½æ‰¾åˆ°æ¯”è¿™æ›´å¥½çš„ç»„åˆäº†ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦é¢†ä½ ä½¿ç”¨è¿™ä¸¤ä¸ªæ¡†æ¶æ„å»ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œå†åŠ ä¸Šç”¨äºç»„ä»¶æ ·å¼çš„Chakra UIã€‚</p>
<p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå¯¹äºåƒæˆ‘è¿™æ ·çš„ç—…äººï¼Œè¿™é‡Œæ˜¯GitHub çš„å®Œæ•´ä»£ç åº“ã€‚ä½ å¯ä»¥éšæ„å…‹éš†å®ƒï¼Œå¸¦å®ƒå»å…œé£ã€‚</p>
<h2>è¿™æ˜¯ç»™æˆ‘çš„é‚®ä»¶å—ï¼Ÿ</h2>
<p>ä½œä¸ºä¸€åè‡ªå­¦æˆæ‰çš„å…¨æ ˆå¼€å‘äººå‘˜ï¼Œæˆ‘æ€»æ˜¯åœ¨ç½‘ä¸Šæœç´¢åšå®¢å¸–å­/æ•™ç¨‹ï¼Œä»å¤´å¼€å§‹æ„å»ºæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶æ¼”ç¤ºä¸€ä¸ªæˆ–å‡ ä¸ªç°å®ç”Ÿæ´»ä¸­å¸¸è§çš„åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚è¿™ç§å¸–å­æœ‰åŠ©äºå¼€å‘äººå‘˜è·å¾—å¹¿æ³›çš„æŠ€èƒ½å’Œç»éªŒã€‚</p>
<p>æ–°æ‰‹å­¦ä¹ å¦‚ä½•æŠŠæœ€è¿‘å­¦çš„æ–°æ¦‚å¿µç²˜åœ¨ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªå®Œæ•´å¯ç”¨çš„appã€‚å…·æœ‰ä¸­çº§çŸ¥è¯†æ°´å¹³çš„å¼€å‘äººå‘˜å¯ä»¥å­¦ä¹ å¦‚ä½•åœ¨æ„å»ºå…¨æ ˆåº”ç”¨ç¨‹åºæ—¶ç»„ç»‡ã€æ„å»ºå’Œåº”ç”¨æœ€ä½³å®è·µã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœä½ åˆšåˆšè¿›å…¥JSç”Ÿæ€ç³»ç»Ÿâ€”â€”æˆ–è€…å¦‚æœä½ å·²ç»å¼€å‘äº†ä¸€ä¸¤ä¸ªåº”ç”¨ç¨‹åºï¼Œä½†æœ‰æ—¶å¯¹è‡ªå·±çš„åšæ³•æ˜¯å¦æ­£ç¡®æ„Ÿåˆ°å›°æƒ‘â€”â€”è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</p>
<p>è¯è™½å¦‚æ­¤ï¼Œè¦ä¸€å£æ°”é˜…è¯»å¹¶å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦å…·å¤‡:</p>
<ul>
<li>å¯¹åŸºæœ¬çš„JSæ¦‚å¿µæœ‰æ¸…æ™°çš„ç†è§£ï¼Œå¹¶å¯¹ES6è¯­æ³•æœ‰æ‰€ç†Ÿæ‚‰</li>
<li>è‡³å°‘ç”¨è¿‡ä¸€æ¬¡Reactï¼Œå¹¶å¯¹çŠ¶æ€ã€ç»„ä»¶ã€æ¸²æŸ“ç­‰å¸¸è§æ¦‚å¿µæœ‰æ‰€äº†è§£ã€‚</li>
<li>ç†Ÿæ‚‰REST APIsçš„æ¦‚å¿µ</li>
<li>ä½¿ç”¨å…³ç³»æ•°æ®åº“</li>
<li>å°†Node.jså’ŒExpress.jsç”¨äºwebæœåŠ¡å™¨åº”ç”¨ç¨‹åº</li>
<li>åœ¨æ‚¨çš„æœºå™¨ä¸Šå»ºç«‹ä¸€ä¸ªå·¥ä½œçš„JSç”Ÿæ€ç³»ç»Ÿï¼Œå³npmã€Node.jsç­‰çš„æœ€æ–°ç‰ˆæœ¬ã€‚å®‰è£…</li>
</ul>
<p>å¦‚æœä½ å‘ç°è‡ªå·±ç¼ºå°‘ä»¥ä¸Šä»»ä½•ä¸€é¡¹ï¼Œä¸è¦æ‹…å¿ƒï¼ç½‘ç»œä¸Šæœ‰å¤§é‡çš„å†…å®¹å¯ä»¥å¸®åŠ©ä½ å¼€å§‹å‡†å¤‡è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæˆ‘çš„ä¸»è¦æ“ä½œç³»ç»Ÿæ˜¯Ubuntuï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½å‡è®¾ä½ æœ‰ä¸€ä¸ª*nixç³»ç»Ÿã€‚</p>
<h2>å¥ å®šåŸºç¡€</h2>
<p>åœ¨å¼€å§‹ä»»ä½•æ–°é¡¹ç›®ä¹‹å‰ï¼Œå¾ˆå®¹æ˜“å˜å¾—ä¸è€çƒ¦å¹¶ç«‹å³å¼€å§‹ç¼–å†™ä»£ç ã€‚ç„¶è€Œï¼Œé¦–å…ˆè§„åˆ’å‡ºä½ çš„åŠŸèƒ½å’Œå·¥ä½œæµç¨‹æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„â€”â€”è‡³å°‘æˆ‘æ€»æ˜¯è¿™ä¹ˆåšã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¦‚ä½•å·¥ä½œåˆ¶å®šä¸€ä¸ªè®¡åˆ’ã€‚</p>
<p>æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†æœ‰ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ã€‚ä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯Reactåº”ç”¨ç¨‹åºï¼Œè®©æˆ‘é€šè¿‡æµè§ˆå™¨ä¸Šä¼ ç…§ç‰‡ã€‚ä¸Šä¼ çš„ç…§ç‰‡ä¼šæ˜¾ç¤ºåœ¨å›¾åº“è§†å›¾ä¸­ã€‚</p>
<p>å¦ä¸€éƒ¨åˆ†æ˜¯æœåŠ¡å™¨ç«¯APIï¼Œå®ƒæ¥æ”¶ç…§ç‰‡ä¸Šä¼ ï¼Œå°†å…¶å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ï¼Œå¹¶è®©æˆ‘ä»¬æŸ¥è¯¢å’Œæ˜¾ç¤ºæ‰€æœ‰ä¸Šä¼ çš„ç…§ç‰‡ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨æ‰€æœ‰çš„ç¼–ç¨‹åºŸè¯ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç»™æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºèµ·ä¸€ä¸ªå¸å¼•äººçš„åå­—ã€‚æˆ‘æŠŠå®ƒå«åš<em> photato </em>ï¼Œä½†æ˜¯ä½ å¯ä»¥éšæ„ç»™å®ƒå–ä¸€ä¸ªæ›´å¥½çš„åå­—ï¼Œå¹¶ä¸”è®©æˆ‘çŸ¥é“ä½ æƒ³åˆ°äº†ä»€ä¹ˆã€‚ğŸ™‚</p>
<p>å¥½äº†ï¼Œè¯¥ç¼–ç äº†ã€‚è®©æˆ‘ä»¬é¦–å…ˆä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ›å»ºå®¹å™¨æ–‡ä»¶å¤¹:</p>
<pre>mkdir photato &amp;&amp; cd $_
mkdir web
mkdir api</pre>
<p>æˆ‘ä»¬å°†ä»åˆ›å»ºå‰ç«¯Reactåº”ç”¨ç¨‹åºå¼€å§‹ã€‚Reacté™„å¸¦äº†ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œå¯ä»¥è®©æ‚¨å¿«é€Ÿå¯åŠ¨Reactåº”ç”¨ç¨‹åº:</p>
<pre>cd web
npx create-react-app web</pre>
<p>ç°åœ¨ä½ åº”è¯¥åœ¨<code>web/</code>æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€å †æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œè¾“å‡ºä¼šå‘Šè¯‰ä½ è¿›å…¥ç›®å½•å¹¶è¿è¡Œ<code>yarn start</code>ï¼Œä½ å¯ä»¥åœ¨<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>ä½¿ç”¨ä½ çš„åº”ç”¨ã€‚</p>
<p><img data-attachment-id="6645" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/create-react-app-generated-files/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png" data-orig-size="205,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create React App default files" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files-154x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png" decoding="async" class="aligncenter size-full wp-image-6645 jetpack-lazy-image" src="../Images/cdd502ed744c3a39c825f4db2a96ecd6.png" alt="Create React App Default Files" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png 205w, https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files-154x300.png 154w" data-lazy-sizes="(max-width: 205px) 100vw, 205px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6645" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/create-react-app-generated-files/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png" data-orig-size="205,400" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Create React App default files" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files-154x300.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6645" src="../Images/cdd502ed744c3a39c825f4db2a96ecd6.png" alt="Create React App Default Files" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png 205w, https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files-154x300.png 154w" sizes="(max-width: 205px) 100vw, 205px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/create-react-app-generated-files.png"/></noscript>
<p>å¦‚æœä½ ä»¥å‰å»ºç«‹è¿‡ç½‘ç«™/ç½‘ç»œåº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½ç†Ÿæ‚‰ç”¨åŸå§‹çš„HTMLå’ŒCSSå»ºç«‹ç”¨æˆ·ç•Œé¢çš„å›°éš¾ã€‚åƒBootstrapã€Semantic UIã€Material Kitç­‰æ— æ•°çš„UIåº“ï¼Œé•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯æ— æ³•äº§ç”Ÿâ€œdribbbleåå®¶â€å“è´¨è®¾è®¡çš„å…¨æ ˆdevçš„æ•‘æ˜Ÿã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è¿œç¦»ä¸Šé¢æåˆ°çš„æ›´å¸¸è§çš„ä¼ ç»ŸUIåº“ï¼Œä½¿ç”¨<a href="https://chakra-ui.com/"> Chakra UI </a>ï¼Œå®ƒæ˜¯åœ¨å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶<a href="https://tailwindcss.com/"> Tailwind CSS </a>ä¸Šæ„å»ºçš„ï¼Œè€ƒè™‘äº†å¯è®¿é—®æ€§ã€‚</p>
<p>æŒ‰ç…§Chakra UIå…¥é—¨æŒ‡å—ï¼Œåœ¨Reactåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre>yarn add @chakra-ui/core @emotion/core @emotion/styled emotion-theming</pre>
<p>Chakra UIå…è®¸ä½ é€šè¿‡ä¸»é¢˜åŒ–éå¸¸å®¹æ˜“åœ°å®šåˆ¶å®ƒçš„å¤–è§‚å’Œæ„Ÿè§‰ï¼Œä½†æ˜¯å¯¹äºè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†åšæŒå®ƒçš„é»˜è®¤é£æ ¼ã€‚</p>
<p>åœ¨æˆ‘ä»¬å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯å¢åŠ ä¸€ä¸ªåº“æ¥è·å¾—ä¸€ä¸ª<a href="https://github.com/neptunian/react-photo-gallery">æ¼‚äº®çš„å›¾åº“</a>:</p>
<pre>yarn add react-photo-gallery</pre>
<p>æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„ä»£ç å°†è¢«å°è£…åœ¨<code>src/</code>ç›®å½•ä¸­ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚create-react-appç»™äº†æˆ‘ä»¬ä¸€å †æ–‡ä»¶ï¼Œåœ¨Chakra UIçš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå¯ä»¥å»æ‰æ‰€æœ‰CSSçš„ä¸œè¥¿ã€‚åˆ é™¤<code>App.css</code>ã€<code>index.css</code>å’Œ<code>logo.svg</code>æ–‡ä»¶:</p>
<pre>cd src
rm -r App.css index.css logo.svg</pre>
<p>è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¹²å‡€çš„åŸºç¡€æ¥å¼€å§‹å»ºè®¾ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹æœåŠ¡å™¨APIåº”ç”¨ç¨‹åºçš„è®¾ç½®ã€‚å¯¼èˆªå›<code>api/</code>æ–‡ä»¶å¤¹ï¼Œé€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶:</p>
<pre>cd ../../api
touch package.json</pre>
<p>ç°åœ¨å°†ä»¥ä¸‹ä»£ç å¤åˆ¶å¹¶ç²˜è´´åˆ°<code>package.json</code>æ–‡ä»¶ä¸­:</p>
<pre>{
  "name": "api",
  "version": "1.0.0",
  "description": "Server api for photato",
  "main": "dist",
  "author": "Foysal Ahamed",
  "license": "ISC",
  "entry": "src/index.js",
  "scripts": {
    "dev": "NODE_ENV=development nodemon src/index.js --exec babel-node",
    "start": "node dist",
    "build": "./node_modules/.bin/babel src --out-dir dist --copy-files",
    "prestart": "npm run -s build"
  },
  "eslintConfig": {
    "extends": "eslint:recommended",
    "parserOptions": {
      "ecmaVersion": 7,
      "sourceType": "module"
    },
    "env": {
      "node": true
    },
    "rules": {
      "no-console": 0,
      "no-unused-vars": 1
    }
  },
  "dependencies": {
    "cors": "^2.8.4",
    "express": "^4.13.3",
    "mysql2": "^1.6.1",
    "sequelize": "^5.18.4"
  },
  "devDependencies": {
    "@babel/cli": "^7.1.2",
    "@babel/core": "^7.1.2",
    "@babel/node": "^7.0.0",
    "@babel/plugin-proposal-class-properties": "^7.1.0",
    "@babel/preset-env": "^7.1.0",
    "eslint": "^3.1.1",
    "eslint-config-airbnb": "^17.1.0",
    "eslint-plugin-jsx-a11y": "^6.2.1",
    "nodemon": "^1.9.2"
  }
}</pre>
<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æœ‰ç›¸å½“å¤šçš„å¼€å‘ä¾èµ–é¡¹ï¼Œå®ƒä»¬æ˜¯ä½¿ç”¨æœ€æ–°çš„ES6è¯­æ³•ç¼–å†™æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ‰€å¿…éœ€çš„ã€‚</p>
<p>å·´åˆ«å¡”æ˜¯ä¸€ä¸ªå®ä¼Ÿçš„å·¥å…·ï¼Œå……æ»¡äº†ç²¾å½©çš„åŠŸèƒ½ï¼Œä½†å¯¹äºæˆ‘ä»¬çš„ç›®çš„ï¼Œä½ éœ€è¦çŸ¥é“å®ƒå‡ ä¹ä¸€æ— æ‰€çŸ¥ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨<code>package.json</code>æ–‡ä»¶æ—è¾¹åˆ›å»ºä¸€ä¸ª<code>.babelrc</code>æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹é…ç½®æ”¾å…¥å…¶ä¸­:</p>
<pre>{
    "presets": [[
        "@babel/preset-env",
        {
            "targets": {
                "node": "current"
            }
        }
    ]],
    "plugins": [
        "@babel/plugin-proposal-class-properties"
    ]
}</pre>
<p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¾èµ–é¡¹ï¼Œæ¯”å¦‚<a href="https://expressjs.com/"> Express </a>å’Œ<a href="https://sequelize.org/"> Sequelize </a>ï¼Œæˆ‘ä»¬ç¨åä¼šçœ‹åˆ°å®ƒä»¬çš„ç”¨æ³•ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰è®¾ç½®ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é€šè¿‡åœ¨<code>api/</code>æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸­è¿è¡Œ<code>npm install</code>å‘½ä»¤æ¥å®‰è£…æ‰€æœ‰çš„åŒ…ã€‚è¯¥å‘½ä»¤å°†ç”Ÿæˆä¸€ä¸ª<code>node_modules/</code>æ–‡ä»¶å¤¹å’Œä¸€ä¸ª<code>package.lock.json</code>æ–‡ä»¶ã€‚</p>
<h2>å¸¦æœ‰Chakra UIå’ŒReactçš„ç…§ç‰‡åº“</h2>
<p>æˆ‘ä»¬å°†ä»<code>App.js</code>æ–‡ä»¶å¼€å§‹ã€‚è®©æˆ‘ä»¬æ¸…ç†ç”Ÿæˆçš„ä»£ç ï¼Œå¹¶ç”¨ä¸‹é¢çš„ä»£ç å¡«å……å®ƒ:</p>
<pre>import React from 'react';
import { ThemeProvider } from '@chakra-ui/core';

import AppContainer from './app.container';

function App() {
    return (
        &lt;div&gt;
            &lt;ThemeProvider&gt;
                &lt;AppContainer /&gt;
            &lt;/ThemeProvider&gt;
        &lt;/div&gt;
    );
}

export default App;</pre>
<p>è¿™ç®€åŒ–äº†æˆ‘ä»¬çš„å…¥å£ç»„ä»¶ï¼Œå¹¶å°†å®é™…çš„é€»è¾‘å§”æ‰˜ç»™å¦ä¸€ä¸ªåä¸º<code>AppContainer</code>çš„å®¹å™¨ï¼Œè¯¥å®¹å™¨è¢«åŒ…è£…åœ¨Chakra UIçš„<code>ThemeProvider</code>ä¸­ã€‚<code>ThemeProvider</code>ç»„ä»¶ç¡®ä¿å®ƒçš„æ‰€æœ‰å­ç»„ä»¶éƒ½å¯ä»¥è¢«è®¾è®¡æˆæŸ¥å…‹æ‹‰UIä¸»é¢˜æˆ–è€…ä»»ä½•ä½ æƒ³è¦ä¼ é€’ç»™å®ƒçš„è‡ªå®šä¹‰ä¸»é¢˜ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å†ä¹Ÿä¸ç”¨ç¢°<code>App.js</code>äº†ã€‚è®©æˆ‘ä»¬åˆ›å»ºæ–°æ–‡ä»¶<code>touch src/app.container.js</code>ï¼Œå¹¶ç”¨ä»¥ä¸‹ä»£ç å¡«å……å®ƒ:</p>
<pre>import React from 'react';
import PhotoGallery from 'react-photo-gallery';

import Header from './header.component';

function AppContainer() {
    const photos = [{
            src: 'http://placekitten.com/200/300',
            width: 3,
            height: 4,
        },
        {
            src: 'http://placekitten.com/200/200',
            width: 1,
            height: 1,
        },
        {
            src: 'http://placekitten.com/300/400',
            width: 3,
            height: 4,
        },
    ];

    return (
        &lt;&gt;
            &lt;Header/&gt;
            &lt;PhotoGallery
                photos={photos}
            /&gt;
        &lt;/&gt;
    );
}

export default App;
</pre>
<p>è¯¥ç»„ä»¶å‘ˆç°å¦å¤–ä¸¤ä¸ªç»„ä»¶ï¼Œ<code>Header</code>å’Œ<code>PhotoGallery</code>ï¼Œå…¶ä¸­<code>PhotoGallery</code>ç”±npmç…§ç‰‡åº“libæä¾›ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬å°†åŒ…å«å ä½ç¬¦å›¾åƒçš„photosæ•°ç»„ä¼ é€’ç»™äº†<code>PhotoGallery</code>ç»„ä»¶ã€‚æˆ‘ä»¬å°†åœ¨ç¨åçš„å¸–å­ä¸­å›åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ç”¨æˆ‘ä»¬è‡ªå·±ä¸Šä¼ çš„ç…§ç‰‡æ›¿æ¢é‚£äº›æ¸©æš–äººå¿ƒçš„å°çŒ«ç…§ç‰‡ã€‚</p>
<p>å¦ä¸€ä¸ªç»„ä»¶<code>Header</code>æ­£åœ¨ä»ä¸€ä¸ªå°šä¸å­˜åœ¨çš„æ–‡ä»¶ä¸­å¯¼å…¥ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºå®ƒ:<code>touch src/header.component.js</code>ã€‚å°†ä»¥ä¸‹ä»£ç æ”¾å…¥æ–‡ä»¶ä¸­:</p>
<pre>import React from 'react';
import { Flex, Button, Text } from '@chakra-ui/core';

function Header ({
    isUploading = false, 
    onPhotoSelect,
}) {
    return (
        &lt;Flex 
            px="4"
            py="4"
            justify="space-between"
        &gt;
            &lt;Text 
                as="div"
                fontSize="xl" 
                fontWeight="bold" 
            &gt;
                &lt;span 
                    role="img" 
                    aria-labelledby="potato"
                &gt;
                    ğŸ¥” 
                &lt;/span&gt; 
                &lt;span 
                    role="img" 
                    aria-labelledby="potato"
                &gt;
                    ğŸ  
                &lt;/span&gt; 
                Photato
            &lt;/Text&gt;

            &lt;Flex align="end"&gt;
                &lt;Button 
                    size="sm"
                    variant="outline"
                    variantColor="blue"
                    isLoading={isUploading}
                    loadingText="Uploading..."
                &gt;
                    Upload Photo     
                &lt;/Button&gt;
            &lt;/Flex&gt;
        &lt;/Flex&gt;
    );
};

export default Header;</pre>
<p>å¦‚æœæ‚¨éµå¾ªäº†ä¸Šè¿°æ‰€æœ‰æ­¥éª¤ï¼Œæµè§ˆå™¨ä¸­çš„åº”ç”¨ç¨‹åºåº”è¯¥ä¼šå‘ˆç°å¦‚ä¸‹å†…å®¹:</p>
<p><img data-attachment-id="6646" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/first-look-with-kittens/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png" data-orig-size="730,449" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First look at the app, with kitten photos" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens-300x185.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png" decoding="async" class="aligncenter size-full wp-image-6646 jetpack-lazy-image" src="../Images/104c25ee8a9ad8012f0e72f088c2330b.png" alt="First Look At The App: Kitten Photos" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens-300x185.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6646" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/first-look-with-kittens/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png" data-orig-size="730,449" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First look at the app, with kitten photos" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens-300x185.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6646" src="../Images/104c25ee8a9ad8012f0e72f088c2330b.png" alt="First Look At The App: Kitten Photos" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens-300x185.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/first-look-with-kittens.png"/></noscript>
<p>è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ç›®å‰ä¸ºæ­¢æˆ‘ä»¬æ‰€åšçš„äº‹æƒ…ã€‚</p>
<p>ç»„ä»¶<code>Header</code>å°†å®ƒçš„æ‰€æœ‰å­ç»„ä»¶åŒ…è£…åœ¨ä¸€ä¸ªChakra UI <code>Flex</code>ç»„ä»¶ä¸­ï¼Œè¯¥ç»„ä»¶ä½¿ç”¨CSSæ ·å¼<code>display: flex</code>å‘ˆç°ä¸€ä¸ªHTML <code>div</code>å…ƒç´ ã€‚ä½œä¸ºä¸€ä¸ªåŸºäºå®ç”¨ç¨‹åºçš„CSSæ¡†æ¶ï¼ŒChakra UIå…è®¸ä½ å°†å„ç§é“å…·ä¼ é€’ç»™å®ƒçš„ç»„ä»¶ï¼Œä½¿å®ƒä»¬ç¬¦åˆä½ çš„å–œå¥½ï¼Œä½ ä¼šçœ‹åˆ°è¿™åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„åŒ…è£…å™¨<code>Flex</code>ç»„ä»¶ä¸­ï¼Œ<code>px</code>å’Œ<code>py</code>é“å…·(åˆ†åˆ«)ä¸ºå…¶æä¾›äº†è‰¯å¥½çš„æ°´å¹³å’Œå‚ç›´å¡«å……ï¼Œ<code>justify="space-between"</code>é“å…·ç¡®ä¿å…¶å†…éƒ¨çš„å…ƒç´ ä»¥ç›¸ç­‰çš„é—´è·å‘ˆç°ã€‚å¦‚æœä½ å¯¹CSS flexboxä¸å¤ªç†Ÿæ‚‰ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ å¤šäº†è§£ä¸€ä¸‹è¿™ä¸ªç¥å¥‡çš„å¸ƒå±€å·¥å…·ã€‚</p>
<p>åœ¨<code>Flex</code>å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬åœ¨å±å¹•çš„å·¦è¾¹æœ‰ä¸€ä¸ª<code>Text</code>ï¼Œåœ¨å±å¹•çš„å³è¾¹æœ‰ä¸€ä¸ªç”¨äºä¸Šä¼ æ–°ç…§ç‰‡çš„<code>Button</code>ã€‚è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¿™é‡Œçš„<code>Button</code>ã€‚</p>
<p>æˆ‘ä»¬ç”¨<code>size="sm"</code>ç»™å®ƒä¸€ä¸ªæ›´å°çš„å°ºå¯¸ï¼Œä½†æ˜¯ä½ å¯ä»¥ç”¨<code>lg</code>ã€<code>xs</code>ç­‰ç­‰æ¥ç©ã€‚å€¼æ¥æ›´æ”¹å¤§å°ã€‚<code>variant="outline"</code>é“å…·ä½¿å®ƒæˆä¸ºä¸€ä¸ªæœ‰è¾¹æ¡†çš„æŒ‰é’®ï¼Œè€Œä¸æ˜¯å¡«å……é¢œè‰²â€”â€”è¯´åˆ°é¢œè‰²ï¼Œ<code>variantColor="blue"</code>ä½¿è¾¹æ¡†å’Œæ–‡æœ¬ä¸ºè“è‰²ã€‚Chakra UIè¿˜æœ‰å…¶ä»–å‡ ç§é¢œè‰²å¯ä¾›é€‰æ‹©ï¼Œæˆ‘å¼ºçƒˆæ¨è<a href="https://chakra-ui.com/color-mode">ä»”ç»†é˜…è¯»</a>ã€‚</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´ä¸“æ³¨äºå¤–è§‚ã€‚å…ˆè¯´åŠŸèƒ½æ€§ã€‚è¿™ä¸ªç»„ä»¶æ˜¯ç¼–å†™å¹²å‡€ä¸”æ˜“äºç»´æŠ¤çš„å‰ç«¯ä»£ç çš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚å®ƒæ˜¯ä¸€ä¸ª<em>å“‘ç»„ä»¶</em>ï¼Œåªå‘ˆç°æ ‡è®°ï¼Œæ²¡æœ‰é€»è¾‘è¢«å¤„ç†ã€‚ä¸ºäº†ä½¿å®ƒèµ·ä½œç”¨ï¼Œæˆ‘ä»¬ä»çˆ¶èŠ‚ç‚¹ä¼ é€’é“å…·ç»™å®ƒã€‚å®ƒéœ€è¦ä¸¤ä¸ªé“å…·:</p>
<ul>
<li><code>isUploading</code>ï¼Œä¸ºå¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚è¿™ä¸ªé“å…·å†³å®šäº†<strong>ä¸Šä¼ ç…§ç‰‡</strong>æŒ‰é’®çš„çŠ¶æ€ã€‚å½“å®ƒä¸ºçœŸæ—¶ï¼ŒæŒ‰é’®å°†è¿›å…¥<code>loading</code>çŠ¶æ€ï¼Œç»™ç”¨æˆ·ä¸€ä¸ªåå°æ­£åœ¨ä¸Šä¼ çš„åé¦ˆã€‚</li>
<li><code>onPhotoSelect</code>ï¼Œæ˜¯ç”¨æˆ·é€‰æ‹©æ–°ç…§ç‰‡ä¸Šä¼ æ—¶è§¦å‘çš„åŠŸèƒ½ã€‚æˆ‘ä»¬ç¨åå°†å›å¤´è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚</li>
</ul>
<p>è¿™ç§ç¼–å†™ç»„ä»¶çš„æ–¹å¼ç¡®å®æœ‰åŠ©äºæ‚¨ä¸€æ¬¡è§„åˆ’ä¸€å°å—åŠŸèƒ½å’Œæ¶æ„ã€‚åœ¨æ²¡æœ‰å®ç°å®é™…é€»è¾‘çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å·²ç»æ ¹æ®æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„è¦æ±‚è®¡åˆ’å¥½äº†æŒ‰é’®çš„å·¥ä½œæ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬çš„å‰ç«¯åº”ç”¨ç¨‹åºç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªåšå®çš„åŠŸèƒ½åŸºç¡€ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨è¿™é‡Œæš‚åœä¸€ä¼šå„¿ï¼Œå¼€å§‹è®¾ç½®æˆ‘ä»¬çš„åç«¯ã€‚</p>
<h2>æœåŠ¡å™¨API</h2>
<p>æˆ‘ä»¬çš„æœåŠ¡å™¨apiçš„å…¥å£ç‚¹å°†æ˜¯<code>src/index.js</code>æ–‡ä»¶ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºå®ƒ:</p>
<pre>mkdir src
touch index.js</pre>
<p>ç„¶åå°†ä»¥ä¸‹ä»£ç æ”¾å…¥è¯¥æ–‡ä»¶:</p>
<pre>import http from 'http';
import cors from 'cors';
import express from 'express';
import { Sequelize } from 'sequelize';

const config = {
    port: 3001,
    database: {
        username: "root",
        password: "admin",
        host: "localhost",
        port: "3306",
        dialect: "mysql",
        database: "photato",
    }
};

let app = express();
app.server = http.createServer(app);

// 3rd party middlewares
app.use(cors({}));

// connect to db
const database = new Sequelize(config.database);

database.sync().then(() =&gt; {
    app.get('/', (req, res) =&gt; {
        res.json({app: 'photato'});
    });

    app.server.listen(config.port, () =&gt; {
        console.log(`Started on port ${app.server.address().port}`);
    });
});

export default app;</pre>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è®¾ç½®ï¼›è®©æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçš„åˆ†è§£ã€‚</p>
<pre>import http from 'http';
import cors from 'cors';
import express from 'express';
import { Sequelize } from 'sequelize';
</pre>
<p>ä»èŠ‚ç‚¹çš„å†…ç½®HTTPåŒ…å’Œé€šè¿‡npmå®‰è£…çš„å…¶ä»–ç¬¬ä¸‰æ–¹åŒ…ä¸­å¯¼å…¥å¿…è¦çš„æ¨¡å—ã€‚</p>
<pre>const config = {
    port: 3001,
    database: {
        username: "root",
        password: "admin",
        host: "localhost",
        port: "3306",
        dialect: "mysql",
        database: "photato",
    }
};</pre>
<p>è¿™å®šä¹‰äº†åº”ç”¨ç¨‹åºå¯ç”¨çš„æ•°æ®åº“å’ŒæœåŠ¡å™¨ç«¯å£çš„é…ç½®ã€‚æ‚¨éœ€è¦æ ¹æ®æ‚¨çš„MySQLæ•°æ®åº“è®¾ç½®æ›´æ”¹æ•°æ®åº“å¯†ç å’Œç”¨æˆ·åã€‚å¦å¤–ï¼Œç¡®ä¿åœ¨dbä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>photato</code>çš„æ–°æ•°æ®åº“æ¨¡å¼ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œåœ¨ç”Ÿäº§å°±ç»ªçš„åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å°†ä»env varä¼ é€’é…ç½®ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç å®ƒä»¬ã€‚</p>
<pre>let app = express();
app.server = http.createServer(app);

// 3rd party middlewares
app.use(cors({}));</pre>
<p>è¿™å°†åˆå§‹åŒ–Expressåº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨Nodeçš„<code>http.createServer</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ã€‚Expresså…è®¸é€šè¿‡ä¸­é—´ä»¶æ’å…¥å„ç§åŠŸèƒ½ã€‚æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„ä¸€ä¸ªè¿™æ ·çš„ä¸­é—´ä»¶æ”¯æŒCORSå¯¹æˆ‘ä»¬çš„APIçš„è¯·æ±‚ã€‚</p>
<p>ç›®å‰ï¼Œæˆ‘ä»¬å…è®¸æ¥è‡ªä»»ä½•æ¥æºçš„CORSè¯·æ±‚ï¼Œä½†å‡ºäºå®‰å…¨ç›®çš„ï¼Œæ‚¨å¯ä»¥æ·»åŠ æ›´ç»†ç²’åº¦çš„é…ç½®ï¼Œä»…å…è®¸æ¥è‡ªæ‚¨çš„å‰ç«¯åº”ç”¨ç¨‹åºåŸŸåçš„è¯·æ±‚ã€‚</p>
<pre>// connect to db
const database = new Sequelize(config.database);

database.sync().then(() =&gt; {
    app.get('/', (req, res) =&gt; {
        res.json({app: 'photato'});
    });

    app.server.listen(config.port, () =&gt; {
        console.log(`Started on port ${app.server.address().port}`);
    });
});</pre>
<p>è¿™å°†åˆå§‹åŒ–ä¸€ä¸ªSequelizeå®ä¾‹ï¼Œå®ƒæ ¹æ®æˆ‘ä»¬çš„é…ç½®è¿æ¥åˆ°æˆ‘ä»¬çš„MySQLæ•°æ®åº“ã€‚ä¸€æ—¦å»ºç«‹äº†è¿æ¥ï¼Œå®ƒå°±ä¸ºæˆ‘ä»¬çš„APIçš„<code>/</code>ç«¯ç‚¹æ·»åŠ ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œè¿”å›ä¸€ä¸ªJSONæ ¼å¼çš„å“åº”ã€‚ç„¶åé€šè¿‡é…ç½®ä¸­æŒ‡å®šçš„æœåŠ¡å™¨ç«¯å£æ‰“å¼€åº”ç”¨ç¨‹åºã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥å¯åŠ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œçœ‹çœ‹æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢å–å¾—äº†ä»€ä¹ˆæˆå°±ã€‚è¿è¡Œ<code>api/</code>æ–‡ä»¶å¤¹ä¸­çš„<code>npm run dev</code>ï¼Œç„¶åè½¬åˆ°<code><a href="http://localhost:3001" rel="nofollow">http://localhost:3001</a></code>ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:</p>
<p><img data-attachment-id="6647" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/api-first-look/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png" data-orig-size="520,128" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First look at the API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look-300x74.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png" decoding="async" class="aligncenter size-full wp-image-6647 jetpack-lazy-image" src="../Images/64734444bc97844106dc03cc2cc0aee7.png" alt="First Look At Our API" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png 520w, https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look-300x74.png 300w" data-lazy-sizes="(max-width: 520px) 100vw, 520px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6647" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/api-first-look/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png" data-orig-size="520,128" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First look at the API" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look-300x74.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6647" src="../Images/64734444bc97844106dc03cc2cc0aee7.png" alt="First Look At Our API" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png 520w, https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look-300x74.png 300w" sizes="(max-width: 520px) 100vw, 520px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/api-first-look.png"/></noscript>
<p>å¤„ç†æ–‡ä»¶ä¸Šä¼ æœ‰å¾ˆå¤šè¾¹ç¼˜æƒ…å†µå’Œå®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä»å¤´æ„å»ºå®ƒä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º<a href="https://github.com/expressjs/multer"> Multer </a>çš„npmåŒ…ï¼Œè®©å®ƒå˜å¾—è¶…çº§ç®€å•ã€‚é€šè¿‡è¿è¡Œ<code>npm i --save multer</code>æ¥å®‰è£…è¯¥åŒ…ï¼Œç„¶ååœ¨<code>src/index.js</code>æ–‡ä»¶ä¸­è¿›è¡Œä»¥ä¸‹æ›´æ”¹:</p>
<pre>import http from 'http';
import cors from 'cors';
import multer from 'multer';
import { resolve } from 'path';

//previously written code here

const config = {
    port: 3001,
    uploadDir: `${resolve(__dirname, '..')}/uploads/`,
    database: {
        username: "root",
        password: "admin",
        host: "localhost",
        port: "3306",
        dialect: "mysql",
        database: "photato",
    }
};

//previously written code here

// connect to db
const database = new Sequelize(config.database);

// setup multer
const uploadMiddleware = multer({ 
    dest: config.uploadDir,
    fileFilter: function (req, file, cb) {
        if (!file.originalname.match(/\.(jpg|jpeg|png|gif)$/)) {
            return cb(new Error('Only image files are allowed!'));
        }
        cb(null, true);
    }, 
}).single('photo');

//previously written code here

    app.get('/', (req, res) =&gt; {
        res.json({app: 'photato'});
    });

    app.post('/photo', uploadMiddleware, async (req, res) =&gt; {
        try {
            const photo = await Photo.create(req.file);
            res.json({success: true, photo});
        } catch (err) {
            res.status(422).json({success: false, message: err.message});
        }
    });

//previously written code here</pre>
<p>æ–°å¢å†…å®¹æ¦‚è¿°:</p>
<ul>
<li>è¿›å£å¤šåŒ…</li>
<li>æ·»åŠ å°†å­˜å‚¨ä¸Šä¼ æ–‡ä»¶çš„ç›®æ ‡ç›®å½•ã€‚ç°åœ¨è®¾å®šä¸º<code>api/upload/</code>ï¼Œè¿˜ä¸å­˜åœ¨ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ä¹Ÿåˆ›å»ºæ–‡ä»¶å¤¹:<code>mkdir upload</code></li>
<li>åˆå§‹åŒ–Multerä¸­é—´ä»¶ï¼Œè¯¥ä¸­é—´ä»¶æ¥å—ä¸€ä¸ªå¸¦æœ‰å¯†é’¥<code>photo</code>çš„æ–‡ä»¶ï¼Œå¹¶å°†è¯¥æ–‡ä»¶ä¿å­˜åœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸­</li>
<li>ä»…å…è®¸é€šè¿‡Multerä¸Šä¼ å›¾åƒæ–‡ä»¶</li>
<li>æ·»åŠ ä¸€ä¸ªä½¿ç”¨ä¸Šä¼ ä¸­é—´ä»¶çš„æ–°POSTè¯·æ±‚ç«¯ç‚¹ã€‚ä¸€æ—¦æ–‡ä»¶è¢«ä¸­é—´ä»¶å¤„ç†ï¼Œå®ƒå°±é™„åŠ æ–‡ä»¶ä¿¡æ¯ï¼Œæ¯”å¦‚ç›®æ ‡è·¯å¾„ã€å¤§å°ã€mimetypeç­‰ç­‰ã€‚ï¼Œä¼ é€’ç»™ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºçš„Express reqå¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åº<em>å°è¯•</em>åœ¨æ•°æ®åº“ä¸­ä¿å­˜æ–‡ä»¶ç»†èŠ‚(æˆ‘ä»¬å°†å¾ˆå¿«è®¨è®ºè¿™ä¸€ç‚¹)ï¼Œå¦‚æœæˆåŠŸï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåŒ…å«æ–‡ä»¶ç»†èŠ‚çš„JSONå“åº”ï¼Œå¦‚æœå¤±è´¥ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯æ¶ˆæ¯çš„JSONå“åº”</li>
</ul>
<p>ç„¶è€Œï¼Œè¿™ä¸€è¡Œ<code>const photo = await Photo.create(req.file);</code>éœ€è¦æ›´å¤šçš„è§£é‡Šã€‚<code>ModelName.create(modelData)</code>æ˜¯ä½ å¦‚ä½•é€šè¿‡Sequelizeåœ¨æ•°æ®åº“è¡¨ä¸­åˆ›å»ºæ–°è¡Œï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æœŸæœ›ä¸€ä¸ªåä¸º<code>Photo</code>çš„Sequelizeæ¨¡å‹å­˜åœ¨ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åˆ›å»ºå®ƒã€‚è®©æˆ‘ä»¬é€šè¿‡è¿è¡Œ<code>touch src/photo.model.js</code>å¹¶å°†ä»¥ä¸‹ä»£ç æ”¾å…¥è¯¥æ–‡ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p>
<pre>import { Model, DataTypes } from 'sequelize';

const PhotoSchema = {
    originalname: {
        type: DataTypes.STRING,
        allowNull: false,
    },
    mimetype: {
        type: DataTypes.STRING,
        allowNull: false,
    },
    size: {
        type: DataTypes.INTEGER,
        allowNull: false,
    },
    filename: {
        type: DataTypes.STRING,
        allowNull: false,
    },
    path: {
        type: DataTypes.STRING,
        allowNull: false,
    },
};

class PhotoModel extends Model {
    static init (sequelize) {
        return super.init(PhotoSchema, { sequelize });
    }
};

export default PhotoModel;</pre>
<p>è¿™æœ‰å¾ˆå¤šä»£ç ï¼Œä½†è¦ç‚¹æ˜¯æˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªSequelizeæ¨¡å‹ç±»ï¼Œå®ƒæœ‰ä¸€ä¸ªæ¨¡å¼å®šä¹‰ï¼Œå…¶ä¸­çš„å­—æ®µ(è¡¨åˆ—)éƒ½æ˜¯å­—ç¬¦ä¸²(åœ¨MySQLä¸­è½¬æ¢ä¸ºVARCHAR ),é™¤äº†sizeå­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¯¥æ¨¡å¼çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºåœ¨å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ä¹‹åï¼ŒMulteræä¾›äº†ç¡®åˆ‡çš„æ•°æ®å¹¶å°†å…¶é™„åŠ åˆ°<code>req.file</code>ã€‚</p>
<p>å›åˆ°å¦‚ä½•åœ¨æˆ‘ä»¬çš„è·¯ç”±å¤„ç†å™¨ä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Sequelizeå°†è¿™ä¸ªæ¨¡å‹ä¸MySQLè¿æ¥èµ·æ¥ã€‚åœ¨æˆ‘ä»¬çš„<code>src/index.js</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å‡ è¡Œ:</p>
<pre>// previously written code
import { Sequelize } from 'sequelize';
import PhotoModel from './photo.model';

// previously written code

// connect to db
const database = new Sequelize(config.database);

// initialize models
const Photo = PhotoModel.init(database);

// previously written code</pre>
<p>æ—¢ç„¶æˆ‘ä»¬å·²ç»æ‹¼å‡‘å‡ºäº†<code>Photo</code>çš„ç¼ºå¤±æ¡ˆä¾‹ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å‘æˆ‘ä»¬çš„APIæ·»åŠ ä¸€ä¸ªç«¯ç‚¹ï¼Œå¹¶æŸ¥çœ‹è¯¥æ¨¡å‹çš„å¦ä¸€ç§ç”¨æ³•:</p>
<pre>// previously written code

    app.get('/', (req, res) =&gt; {
        res.json({app: 'photato'});
    });

    app.get('/photo', async (req, res) =&gt; {
        const photos = await Photo.findAndCountAll();
        res.json({success: true, photos});
    });

// previously written code
</pre>
<p>è¿™å°†åœ¨<code>/photo</code>è·¯å¾„ä¸­æ·»åŠ ä¸€ä¸ªGETè¯·æ±‚å¤„ç†ç¨‹åºï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ˆå‰ä¸Šä¼ çš„ç…§ç‰‡çš„JSONå“åº”ã€‚æ³¨æ„ï¼Œ<code>Photo.findAndCountAll()</code>è¿”å›ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å¯¹è±¡:</p>
<pre>{
    count: &lt;number of entries in the model/table&gt;,
    rows: [
        {&lt;object containing column data from the table&gt;},
        {&lt;object containing column data from the table&gt;},
        ....
    ]
}
</pre>
<p>ç»è¿‡ä»¥ä¸Šæ‰€æœ‰çš„æ›´æ”¹ï¼Œæ‚¨çš„<code>src/index.js</code>æ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p>
<pre>import http from 'http';
import cors from 'cors';
import multer from 'multer';
import express from 'express';
import { resolve } from 'path';
import { Sequelize } from 'sequelize';

import PhotoModel from './photo.model';

const config = {
    port: 3001,
    uploadDir: `${resolve(__dirname, '..')}/uploads/`,
    database: {
        username: "root",
        password: "admin",
        host: "localhost",
        port: "3306",
        dialect: "mysql",
        database: "photato",
    }
};

let app = express();
app.server = http.createServer(app);

// 3rd party middlewares
app.use(cors({}));

// connect to db
const database = new Sequelize(config.database);

// initialize models
const Photo = PhotoModel.init(database);

// setup multer
const uploadMiddleware = multer({ 
    dest: config.uploadDir,
    fileFilter: function (req, file, cb) {
        if (!file.originalname.match(/\.(jpg|jpeg|png|gif)$/)) {
            return cb(new Error('Only image files are allowed!'));
        }
        cb(null, true);
    },
}).single('photo');

database.sync().then(() =&gt; {
    app.get('/', (req, res) =&gt; {
        res.json({app: 'photato'});
    });

    app.get('/photo', async (req, res) =&gt; {
        const photos = await Photo.findAndCountAll();
        res.json({success: true, photos});
    });

    app.post('/photo', uploadMiddleware, async (req, res) =&gt; {
        try {
            const photo = await Photo.create(req.file);
            res.json({success: true, photo});
        } catch (err) {
            res.status(400).json({success: false, message: err.message});
        }
    });

    app.server.listen(process.env.PORT || config.port, () =&gt; {
        console.log(`Started on port ${app.server.address().port}`);
    });
});

export default app;
</pre>
<p>ä½ å·²ç»èµ°äº†è¿™ä¹ˆè¿œï¼Œæ­å–œä½ ï¼å»å–æ¯å’–å•¡æˆ–å…¶ä»–æç¥çš„ä¸œè¥¿ï¼Œå‡†å¤‡å¥½æ½‡æ´’åœ°è·¨è¿‡ç»ˆç‚¹çº¿ã€‚</p>
<h2>å°†å›¾åº“ä¸æœåŠ¡å™¨APIè¿æ¥</h2>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªåº”ç”¨:ä¸€ä¸ªæ˜¯è¿è¡Œåœ¨<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code>ä¸Šçš„åŸºäºæµè§ˆå™¨çš„Reactåº”ç”¨ï¼Œå¦ä¸€ä¸ªæ˜¯è¿è¡Œåœ¨<code><a href="http://localhost:3001" rel="nofollow">http://localhost:3001</a></code>ä¸Šçš„æœåŠ¡å™¨ç«¯Node.jsåº”ç”¨ã€‚</p>
<p>ç„¶è€Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»–ä»¬å½¼æ­¤éƒ½æ˜¯é™Œç”Ÿäººï¼Œè¿‡ç€å„è‡ªçš„ç”Ÿæ´»ã€‚æ‰€ä»¥ï¼Œå¾ˆè‡ªç„¶çš„ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ä¸¤äººç»“å©šï¼Œå¸Œæœ›ä»–ä»¬ä»æ­¤å¹¸ç¦å¿«ä¹çš„ç”Ÿæ´»åœ¨ä¸€èµ·ï¼</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨æµè§ˆå™¨çš„<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">è·å–API </a>ä»Reactåº”ç”¨ç¨‹åºä¸æˆ‘ä»¬çš„æœåŠ¡å™¨åº”ç”¨ç¨‹åºå¯¹è¯ã€‚ä¸ºäº†å°è£…æˆ‘ä»¬çš„æœåŠ¡å™¨é€šä¿¡ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶:</p>
<pre>cd ../web/
touch src/api.js
</pre>
<p>ç„¶åï¼Œè®©æˆ‘ä»¬åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å‡½æ•°:</p>
<pre>const API_URL = 'http://localhost:3001';

export async function getPhotos () {
    const response = await fetch(`${API_URL}/photo`);
    return response.json();
};

export async function uploadPhoto (file) {
    if (!file)
        return null; 

    const photoFormData = new FormData();

    photoFormData.append("photo", file);


    const response = await fetch(`${API_URL}/photo`, {
        method: 'POST',
        body: photoFormData,
    });

    return response.json();
};</pre>
<p>è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹:</p>
<ul>
<li>æˆ‘ä»¬æœ‰ä¸€ä¸ªå˜é‡<code>API_URL</code>æŒ‡å‘æˆ‘ä»¬çš„æœåŠ¡å™¨åº”ç”¨ç¨‹åºå¯ç”¨çš„URL</li>
<li><code>getPhotos</code>å‘æœåŠ¡å™¨çš„<code>/photo</code>ç«¯ç‚¹å‘å‡ºGETè¯·æ±‚ï¼Œå¹¶åœ¨è¿”å›ä¹‹å‰å°†å“åº”è§£æä¸ºJSON</li>
<li><code>uploadPhoto</code>æ¥æ”¶ä¸€ä¸ª<code>file</code>å‚æ•°å¹¶æ„å»ºä¸€ä¸ª<code>FormData</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ç”¨äºå°†æ–‡ä»¶å‘é€åˆ°æˆ‘ä»¬æœåŠ¡å™¨çš„<code>/photo</code>ç«¯ç‚¹ã€‚å‘é€è¯·æ±‚åï¼Œå®ƒå°†å“åº”è§£æä¸ºJSONå¹¶è¿”å›</li>
</ul>
<p>è®©æˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¼‚äº®çš„å°åŠŸèƒ½ï¼Œå¥½å—ï¼Ÿæ‰“å¼€<code>src/app.container.js</code>æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹æ–°è¡Œ:</p>
<pre>import React, { useState } from 'react';
// previously written code...

import { uploadPhoto } from './api';

function AppContainer() {
    const [isUploading, setIsUploading] = useState(false);


    async function handlePhotoSelect (file) {
        setIsUploading(true);
        await uploadPhoto(file);
        setIsUploading(false);
    };

    return (
            // previously written code...
            &lt;Header
                isUploading={isUploading}
                onPhotoSelect={handlePhotoSelect}
            /&gt;
            // previously written code...
    );
}</pre>
<p>æœ‰äº†ä¸Šé¢çš„æ”¹å˜ï¼Œæˆ‘ä»¬å·²ç»åœ¨æˆ‘ä»¬çš„<code>App</code>ç»„ä»¶ä¸­æ·»åŠ äº†çŠ¶æ€æŒ‚é’©ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰é’©å­å’ŒçŠ¶æ€ï¼Œæˆ‘é¼“åŠ±ä½ <a href="https://blog.logrocket.com/state-management-using-only-react-hooks/">ä»”ç»†é˜…è¯»å®ƒ</a>ï¼Œä½†æ˜¯ç®€è€Œè¨€ä¹‹ï¼ŒçŠ¶æ€å…è®¸ä½ åœ¨çŠ¶æ€å€¼æ”¹å˜æ—¶é‡æ–°å‘ˆç°ä½ çš„ç”¨æˆ·ç•Œé¢ã€‚</p>
<p>æ¯å½“æˆ‘ä»¬çš„å‡½æ•°<code>handlePhotoSelect</code>ç”¨æ–‡ä»¶å‚æ•°æ‰§è¡Œæ—¶ï¼Œå®ƒå°†é¦–å…ˆæŠŠ<code>isUploading</code>çš„å€¼æ”¹ä¸º<code>true</code>ã€‚ç„¶åï¼Œå®ƒä¼šå°†æ–‡ä»¶æ•°æ®ä¼ é€’ç»™æˆ‘ä»¬çš„<code>uploadPhoto</code>å‡½æ•°ï¼Œå½“å®Œæˆæ—¶ï¼Œå®ƒä¼šå°†<code>isUploading</code>çš„å€¼åˆ‡æ¢åˆ°<code>false</code>:</p>
<pre>&lt;Header
    isUploading={isUploading}
    onPhotoSelect={handlePhotoSelect}
/&gt;</pre>
<p>ç„¶åï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬çš„<code>isUploading</code>çŠ¶æ€ä½œä¸ºé“å…·ä¼ é€’ç»™æˆ‘ä»¬çš„headerç»„ä»¶â€”â€”å¦‚æœæ‚¨è¿˜è®°å¾—çš„è¯ï¼Œå½“<code>isUploading</code>å˜ä¸º<code>true</code>æ—¶ï¼Œæˆ‘ä»¬çš„<strong>ä¸Šä¼ ç…§ç‰‡</strong>æŒ‰é’®å°†è½¬æ¢ä¸ºåŠ è½½çŠ¶æ€ã€‚</p>
<p>ç¬¬äºŒä¸ªé“å…·<code>onPhotoSelect</code>å¾—åˆ°å‡½æ•°<code>handlePhotoSelect</code>ã€‚è¿˜è®°å¾—å½“æˆ‘ä»¬ç¼–å†™<code>Header</code>ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†<code>onPhotoSelect</code>é“å…·ï¼Œä½†ä»æœªä½¿ç”¨è¿‡å®ƒå—ï¼Ÿå¥½å§ï¼Œè®©æˆ‘ä»¬é€šè¿‡åœ¨<code>src/header.component.js</code>æ–‡ä»¶ä¸­åšå¦‚ä¸‹ä¿®æ”¹æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p>
<pre>// previously written code...
function Header ({
    isUploading = false, 
    onPhotoSelect,
}) {
    let hiddenInput = null;

    // previously written code...

    return (
        // previously written code...
                &lt;Button 
                    // previously written code...
                    onClick={() =&gt; hiddenInput.click()}
                &gt;
                    Upload Photo     
                &lt;/Button&gt;

                &lt;input
                    hidden
                    type='file'
                    ref={el =&gt; hiddenInput = el}
                    onChange={(e) =&gt; onPhotoSelect(e.target.files[0])}
                /&gt;
        // previously written code...
    );
};</pre>
<p>ä»¥ä¸Šæ›´æ”¹æ·»åŠ äº†ä¸€ä¸ªéšè—çš„æ–‡ä»¶è¾“å…¥å…ƒç´ ï¼Œå¹¶å°†å…¶å¼•ç”¨å­˜å‚¨åœ¨<code>hiddenInput</code>å˜é‡ä¸­ã€‚æ¯å½“ç‚¹å‡»<code>Button</code>æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å¼•ç”¨å˜é‡è§¦å‘å¯¹æ–‡ä»¶è¾“å…¥å…ƒç´ çš„ç‚¹å‡»ã€‚</p>
<p>ä»é‚£æ—¶èµ·ï¼Œæµè§ˆå™¨çš„å†…ç½®è¡Œä¸ºå¼€å§‹å‘æŒ¥ä½œç”¨ï¼Œè¦æ±‚ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨ç”¨æˆ·åšå‡ºé€‰æ‹©åï¼Œ<code>onChange</code>äº‹ä»¶è¢«è§¦å‘ï¼Œå½“å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨<code>onPhotoSelect</code> propå‡½æ•°å¹¶ä¼ é€’æ‰€é€‰æ–‡ä»¶ä½œä¸ºå®ƒçš„å‚æ•°ã€‚</p>
<p>è¿™å®Œæˆäº†æˆ‘ä»¬çš„å‰ç«¯å’Œåç«¯åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸€ä¸ªé€šä¿¡é€šé“ã€‚ç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤ŸæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ“ä½œï¼Œå¹¶å¾—åˆ°ç±»ä¼¼çš„ç»“æœ:</p>
<ol>
<li>è½¬åˆ°<code><a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a></code></li>
<li>æ‰“å¼€å¼€å‘è€…å·¥å…·å¹¶è½¬åˆ°<strong>ç½‘ç»œ</strong>é€‰é¡¹å¡</li>
<li>ç‚¹å‡»<strong>ä¸Šä¼ ç…§ç‰‡</strong>æŒ‰é’®ï¼Œä»æœ¬åœ°æ–‡ä»¶å¤¹ä¸­é€‰æ‹©ä¸€ä¸ªå›¾åƒæ–‡ä»¶ã€‚</li>
<li>çœ‹åˆ°ä¸€ä¸ªæ–°çš„POSTè¯·æ±‚è¢«å‘é€åˆ°<code><a href="http://localhost:3001/photos" rel="nofollow">http://localhost:3001/photos</a></code>å¹¶è¿”å›ä¸€ä¸ªJSONå“åº”ã€‚</li>
</ol>
<p>è¿™æ˜¯æˆ‘çš„æ ·å­:</p>
<p><img data-attachment-id="6648" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/first-upload-attempt/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png" data-orig-size="730,319" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First upload attempt" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt-300x131.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png" decoding="async" class="aligncenter size-full wp-image-6648 jetpack-lazy-image" src="../Images/0d6da2945ca38326aa85002730edc2b9.png" alt="First Upload Attempt" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt-300x131.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6648" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/first-upload-attempt/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png" data-orig-size="730,319" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="First upload attempt" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt-300x131.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6648" src="../Images/0d6da2945ca38326aa85002730edc2b9.png" alt="First Upload Attempt" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt-300x131.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/first-upload-attempt.png"/></noscript>
<p>è¦éªŒè¯ä¸Šä¼ æ˜¯å¦æˆåŠŸï¼Œè¯·è¿›å…¥<code>api/uploads</code>ç›®å½•ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨é‚£é‡Œçœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚å°è¯•ä¸Šä¼ æ›´å¤šç…§ç‰‡ï¼Œå¹¶æŸ¥çœ‹å®ƒä»¬æ˜¯å¦ç»§ç»­æ˜¾ç¤ºåœ¨è¯¥æ–‡ä»¶å¤¹ä¸­ã€‚è¿™å¾ˆæ£’ï¼Œå¯¹å§ï¼Ÿæˆ‘ä»¬å®é™…ä¸Šæ˜¯é€šè¿‡Reactåº”ç”¨ç¨‹åºä¸Šä¼ ç…§ç‰‡ï¼Œå¹¶ç”¨Node.jsæœåŠ¡å™¨åº”ç”¨ç¨‹åºä¿å­˜ã€‚</p>
<p>é—æ†¾çš„æ˜¯ï¼Œæœ€åä¸€æ­¥æ˜¯ç”¨æˆ‘ä»¬ä¸Šä¼ çš„ç…§ç‰‡æ›¿æ¢é‚£äº›å°çŒ«ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå‘æœåŠ¡å™¨è¯·æ±‚ä¸Šä¼ çš„ç…§ç‰‡å¹¶å–å›ç…§ç‰‡æ–‡ä»¶ã€‚è®©æˆ‘ä»¬é€šè¿‡åœ¨<code>api/src/index.js</code>æ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ªç«¯ç‚¹æ¥åšåˆ°è¿™ä¸€ç‚¹:</p>
<pre>// previously written code...
    app.get('/', (req, res) =&gt; {
        res.json({app: 'photato'});
    });

    app.get("/photo/:filename", (req, res) =&gt; {
        res.sendFile(join(config.uploadDir, `/${req.params.filename}`));
    });
// previously written code...</pre>
<p>æ–°çš„ç«¯ç‚¹å…è®¸æˆ‘ä»¬é€šè¿‡URLä¼ é€’ä»»ä½•å­—ç¬¦ä¸²æ¥ä»£æ›¿<code>:filename</code>ï¼ŒæœåŠ¡å™¨åœ¨æˆ‘ä»¬çš„<code>uploadDir</code>ä¸­æŸ¥æ‰¾å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶ï¼Œå¹¶åœ¨å“åº”ä¸­å‘é€è¯¥æ–‡ä»¶ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<code>image1</code>çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è½¬åˆ°<code><a href="http://localhost:3001/photo/image1" rel="nofollow">http://localhost:3001/photo/image1</a></code>æ¥è®¿é—®è¯¥æ–‡ä»¶ï¼Œè½¬åˆ°<code><a href="http://localhost:3001/photo/image2" rel="nofollow">http://localhost:3001/photo/image2</a></code>ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªåä¸º<code>image2</code>çš„æ–‡ä»¶ã€‚</p>
<p>å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿç°åœ¨å›åˆ°å‰ç«¯ã€‚è¿˜è®°å¾—æˆ‘ä»¬æœ€åˆçš„æ ·æ¿å˜é‡<code>photos</code>æ˜¯ä»€ä¹ˆæ ·å­å—ï¼Ÿæˆ‘ä»¬ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„æ•°æ®ä¸æ˜¯è¿™æ ·çš„ï¼Œå¯¹å—ï¼Ÿæˆ‘ä»¬ä¼šå…ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿”å›åˆ°<code>web/src/api.js</code>æ–‡ä»¶ï¼Œè¿›è¡Œä»¥ä¸‹æ›´æ”¹:</p>
<pre>export async function getPhotos () {
    const response = await fetch(`${API_URL}/photo`);
    const photoData = await response.json();

    if (!photoData.success || photoData.photos.count &lt; 1)
        return [];

    return photoData.photos.rows.map(photo =&gt; ({
        src: `${API_URL}/photo/${photo.filename}`,
        width: 1, 
        height: 1,
    }));
};
</pre>
<p>è¿™äº›é¢å¤–çš„è¡Œåªæ˜¯å°†æˆ‘ä»¬çš„æœåŠ¡å™¨å‘é€çš„æ•°æ®è½¬æ¢æˆå¯ä»¥ä¼ é€’ç»™æˆ‘ä»¬çš„<code>PhotoGallery</code>ç»„ä»¶çš„æ ¼å¼ã€‚å®ƒä»æ¯å¼ ç…§ç‰‡çš„<code>API_URL</code>å’Œæ–‡ä»¶åå±æ€§æ„å»º<code>src</code> URLã€‚</p>
<p>å›åˆ°<code>app.container.js</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä»¥ä¸‹æ›´æ”¹:</p>
<pre>import React, { useState, useEffect } from 'react';
// previously written code...

import { uploadPhoto, getPhotos } from './api';

function AppContainer() {
    const [isUploading, setIsUploading] = useState(false);
    const [photos, setPhotos] = useState([]);

    useEffect(() =&gt; {
        if (!isUploading)
            getPhotos().then(setPhotos);
    }, [isUploading]);


    // previously written code...
}
</pre>
<p>å°±æ˜¯è¿™æ ·ï¼è¿™å°±æ˜¯ä½ éœ€è¦åœ¨å›¾ç‰‡åº“æ˜¾ç¤ºä¸Šä¼ çš„ç…§ç‰‡ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æ›¿æ¢äº†é™æ€çš„<code>photos</code>å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹è®¾ç½®ä¸ºä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>
<p>ä¸Šè¿°å˜åŒ–ä¸­æœ€å€¼å¾—æ³¨æ„çš„æ˜¯<code>useEffect</code>å‡½æ•°ã€‚æ¯æ¬¡<code>isUploading</code>çŠ¶æ€æ”¹å˜æ—¶ï¼Œä½œä¸ºå‰¯ä½œç”¨ï¼ŒReactå°†è¿è¡Œ<code>useEffect</code>è°ƒç”¨ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°ã€‚</p>
<p>åœ¨è¯¥å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥<code>isUploading</code>æ˜¯å¦ä¸º<code>false</code>ï¼Œè¿™æ„å‘³ç€æ–°çš„ä¸Šä¼ å®Œæˆæˆ–è€…ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«åŠ è½½ã€‚åªæœ‰åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œ<code>getPhotos</code>ï¼Œå‡½æ•°çš„ç»“æœå­˜å‚¨åœ¨<code>photos</code>çŠ¶æ€å˜é‡ä¸­ã€‚</p>
<p>è¿™ç¡®ä¿äº†é™¤äº†åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶åŠ è½½æ‰€æœ‰ä»¥å‰çš„ç…§ç‰‡ä¹‹å¤–ï¼Œä¸Šä¼ å®Œæˆåï¼Œç”»å»Šè¿˜ä¼šç”¨æ–°ä¸Šä¼ çš„ç…§ç‰‡è¿›è¡Œåˆ·æ–°ï¼Œè€Œæ— éœ€åˆ·æ–°çª—å£ã€‚</p>
<p>è¿™å¾ˆæœ‰è¶£ï¼Œæ‰€ä»¥æˆ‘è¿ç»­ä¸Šä¼ äº†å››å¼ ç…§ç‰‡ï¼Œè¿™æ˜¯æˆ‘çš„ç…§ç‰‡ç°åœ¨çš„æ ·å­:</p>
<p><img data-attachment-id="6649" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/multi-upload-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png" data-orig-size="730,692" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Multi-upload result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result-300x284.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png" decoding="async" class="aligncenter size-full wp-image-6649 jetpack-lazy-image" src="../Images/bce6803c3d817d93df63d6cccfa1ee64.png" alt="Multi-Upload Result" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result-300x284.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6649" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/multi-upload-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png" data-orig-size="730,692" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Multi-upload result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result-300x284.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6649" src="../Images/bce6803c3d817d93df63d6cccfa1ee64.png" alt="Multi-Upload Result" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result-300x284.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/multi-upload-result.png"/></noscript>
<h2>UXèŠ±çµ®</h2>
<p>è™½ç„¶æˆ‘ä»¬ç¡®å®æœ‰ä¸€ä¸ªåŠŸèƒ½æ­£å¸¸çš„åº”ç”¨ç¨‹åºï¼Œæ»¡è¶³æˆ‘ä»¬è®¾å®šçš„æ‰€æœ‰è¦æ±‚ï¼Œä½†å®ƒå¯ä»¥ä½¿ç”¨ä¸€äº›UXæ”¹è¿›ã€‚ä¾‹å¦‚ï¼Œä¸Šä¼ æˆåŠŸ/é”™è¯¯ä¸ä¼šä¸ºç”¨æˆ·è§¦å‘ä»»ä½•åé¦ˆã€‚æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨Chakra UIä¸­ä¸€ä¸ªæ¼‚äº®çš„å°<code>toast</code>ç»„ä»¶æ¥å®ç°å®ƒã€‚</p>
<p>è®©æˆ‘ä»¬å›åˆ°<code>web/src/app.container.js</code>:</p>
<pre>// previously written code...
import PhotoGallery from 'react-photo-gallery';
import { useToast } from '@chakra-ui/core';
// previously written code...

    const [photos, setPhotos] = useState([]);
    const toast = useToast();

    async function handlePhotoSelect (file) {
        setIsUploading(true);

        try {
            const result = await uploadPhoto(file);
            if (!result.success)
                throw new Error("Error Uploading photo");


            toast({
                duration: 5000,
                status: "success",
                isClosable: true,
                title: "Upload Complete.",
                description: "Saved your photo on Photato!",
            });
        } catch (err) {
            toast({
                duration: 9000,
                status: "error",
                isClosable: true,
                title: "Upload Error.",
                description: "Something went wrong when uploading your photo!",
            });
        }

        setIsUploading(false);
    };
// previously written code...
</pre>
<p>æœ‰äº†ä¸Šé¢çš„æ”¹å˜ï¼Œæ¯æ¬¡ä½ ä¸Šä¼ ä¸€å¼ æ–°çš„ç…§ç‰‡ï¼Œä½ åº”è¯¥ä¼šåœ¨ä½ çš„å±å¹•åº•éƒ¨å¾—åˆ°ä¸€ä¸ªç»¿è‰²çš„æç¤ºã€‚è¿˜è¦æ³¨æ„ï¼Œä¸ºäº†é¿å…é”™è¯¯ï¼Œæˆ‘ä»¬ç”¨<code>status:"error"</code>è°ƒç”¨toastï¼Œå®ƒå°†æ˜¾ç¤ºçº¢è‰²toastè€Œä¸æ˜¯ç»¿è‰²ã€‚</p>
<p>è¿™æ˜¯æˆ‘çš„æˆåŠŸç¥é…’è¯çš„æ ·å­:</p>
<p><img data-attachment-id="6650" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/success-toast/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png" data-orig-size="288,70" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Success toast in green" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png" decoding="async" class="aligncenter size-full wp-image-6650 jetpack-lazy-image" src="../Images/415f5cfcc1051bb9ef76242c222887dc.png" alt="Success Toast In Green" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6650" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/success-toast/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png" data-orig-size="288,70" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Success toast in green" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6650" src="../Images/415f5cfcc1051bb9ef76242c222887dc.png" alt="Success Toast In Green" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/success-toast.png"/></noscript>
<p>å›¾åº“ç”±ç¼©ç•¥å›¾ç»„æˆã€‚æˆ‘ä»¬ä¸åº”è¯¥ä¹Ÿèƒ½çœ‹åˆ°å®Œæ•´çš„å›¾åƒå—ï¼Ÿè¿™å°†å¤§å¤§æé«˜UXï¼Œå¯¹ä¸å¯¹ï¼Ÿæ‰€ä»¥è®©æˆ‘ä»¬ç”¨<a href="https://github.com/jossmac/react-images"> react-images </a>åŒ…æ„å»ºä¸€ä¸ªå…¨å±å¹•ç‰ˆæœ¬çš„å›¾åº“ã€‚</p>
<p>ä»è¿è¡Œ<code>web/</code>ç›®å½•ä¸­çš„<code>yarn add react-images</code>å¼€å§‹ã€‚ç„¶åï¼Œå¼¹å‡ºæ‰“å¼€<code>src/app.container.js</code>æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä½:</p>
<pre>import React, { useState, useEffect, useCallback } from 'react';
import Carousel, { Modal, ModalGateway } from "react-images";
// previously written code...

function AppContainer() {
    const [currentImage, setCurrentImage] = useState(0);
    const [viewerIsOpen, setViewerIsOpen] = useState(false);

    const openLightbox = useCallback((event, { photo, index }) =&gt; {
        setCurrentImage(index);
        setViewerIsOpen(true);
    }, []);

    const closeLightbox = () =&gt; {
        setCurrentImage(0);
        setViewerIsOpen(false);
    };

    // previously written code...
    return (
        // previously written code...
            &lt;PhotoGallery
                photos={photos}
                onClick={openLightbox}
            /&gt;
            &lt;ModalGateway&gt;
                {viewerIsOpen &amp;&amp; (
                    &lt;Modal onClose={closeLightbox}&gt;
                        &lt;Carousel
                            currentIndex={currentImage}
                            views={photos.map(x =&gt; ({
                                ...x,
                                srcset: x.srcSet,
                                caption: x.title
                            }))}
                        /&gt;
                    &lt;/Modal&gt;
                )}
            &lt;/ModalGateway&gt;
        // previously written code...
    );
}
</pre>
<p>è¿™äº›å˜åŒ–æ˜¯è¿™æ ·çš„:</p>
<ul>
<li>ä»<code>react-images</code>å¯¼å…¥å¿…è¦çš„ç»„ä»¶ä»¥æ˜¾ç¤ºå…¨å±å›¾åº“</li>
<li>å¯åŠ¨ä¸¤ä¸ªçŠ¶æ€å˜é‡:<code>currentImage</code>å’Œ<code>viewerIsOpen</code>ã€‚æˆ‘ä»¬å°†å¾ˆå¿«çœ‹åˆ°å®ƒä»¬æ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„</li>
<li>åˆ›å»ºä¸€ä¸ªè®°å¿†åŒ–çš„å›è°ƒå‡½æ•°<code>openLightbox</code>ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ç…§ç‰‡åº“ä¸­çš„ä»»ä½•ä¸€å¼ ç…§ç‰‡æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¢«è§¦å‘ã€‚æ‰§è¡Œæ—¶ï¼Œè¯¥å‡½æ•°å°†<code>viewerIsOpen</code>è®¾ç½®ä¸ºçœŸï¼Œå¹¶è®¾ç½®è¢«ç‚¹å‡»ç…§ç‰‡çš„ç´¢å¼•å·</li>
<li>åˆ›å»ºäº†å¦ä¸€ä¸ªåŠŸèƒ½<code>closeLightbox</code>ï¼Œå®ƒå®é™…ä¸Šå…³é—­äº†å…¨å±å›¾åº“</li>
<li>åœ¨renderæ–¹æ³•ä¸­ï¼Œå¦‚æœ<code>viewerIsOpen</code>æ˜¯<code>true</code>ï¼Œæˆ‘ä»¬æ¸²æŸ“åŒ…å«æ¥è‡ªreact-imagesåº“çš„<code>Carousel</code>ç»„ä»¶çš„æ¨¡æ€ç¯ç®±</li>
<li>ç»„ä»¶<code>Modal</code>æ¥æ”¶é“å…·<code>onClose={closeLightbox}</code>ä»¥ä¾¿ç”¨æˆ·å¯ä»¥å…³é—­å…¨å±å›¾åº“</li>
<li>æˆ‘ä»¬å°†ç´¢å¼•å·ä¼ é€’ç»™å®ƒï¼Œè¿™æ ·å®ƒå°±çŸ¥é“å“ªå¼ ç…§ç‰‡å°†é¦–å…ˆæ˜¾ç¤ºã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è½¬æ¢å›¾åº“ä¸­çš„æ‰€æœ‰ç…§ç‰‡ï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°è½¬ç›˜ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥å…¨å±æ¨¡å¼æµè§ˆæ‰€æœ‰ç…§ç‰‡</li>
</ul>
<p>æœ€ç»ˆç»“æœæ˜¯:</p>
<p><img data-attachment-id="6651" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/full-screen-gallery/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png" data-orig-size="730,591" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Full-screen photo gallery" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery-300x243.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png" decoding="async" class="aligncenter size-full wp-image-6651 jetpack-lazy-image" src="../Images/a6f915c3284262edc31a7246c35409a4.png" alt="Full-Screen Photo Gallery" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery-300x243.png 300w" data-lazy-sizes="(max-width: 730px) 100vw, 730px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="6651" data-permalink="https://blog.logrocket.com/building-photo-gallery-app-from-scratch-chakra-ui/full-screen-gallery/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png" data-orig-size="730,591" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Full-screen photo gallery" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery-300x243.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-6651" src="../Images/a6f915c3284262edc31a7246c35409a4.png" alt="Full-Screen Photo Gallery" srcset="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png 730w, https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery-300x243.png 300w" sizes="(max-width: 730px) 100vw, 730px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2019/09/full-screen-gallery.png"/></noscript>
<h2>ç»“æŸè¯­</h2>
<p>æˆ‘ä»¬åœ¨æ•´ä¸ªæ—…ç¨‹ä¸­æ„å»ºçš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ€§åº”ç”¨ç¨‹åºï¼Œä½†è¿˜æœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´ã€‚æ¶æ„ã€æ–‡ä»¶å¤¹ç»“æ„ã€å¯æµ‹è¯•æ€§â€”â€”æ‰€æœ‰è¿™äº›éƒ½åº”è¯¥åœ¨é‡æ„æˆ‘ä»¬çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åº”ç”¨æ—¶è€ƒè™‘ã€‚æˆ‘å¸Œæœ›ä½ æŠŠè¿™ä½œä¸ºå®¶åº­ä½œä¸šï¼Œå¹¶æ·»åŠ å•å…ƒå’Œ/æˆ–é›†æˆæµ‹è¯•åˆ°ä»£ç åº“ã€‚</p>
<p>Chakra UIæ˜¯ä¸€ä¸ªå¾ˆæœ‰å‰é€”çš„æ–°å·¥å…·ï¼Œå®ƒæœ‰è®¸å¤šç»„ä»¶ï¼Œå¾ˆéš¾åœ¨ä¸€ç¯‡æ–‡ç« ä¸­æ¶µç›–ï¼Œæ‰€ä»¥æˆ‘å¼ºçƒˆå»ºè®®ä½ <a href="https://chakra-ui.com/getting-started" target="_blank" rel="noopener noreferrer">æµè§ˆå®ƒçš„æ–‡æ¡£</a>ä»¥äº†è§£æ›´å¤šã€‚</p>
<p>å¦‚ä»Šï¼Œå°†ä¸Šä¼ çš„å†…å®¹ä¿å­˜åœ¨è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºçš„åŒä¸€ä¸ªç£ç›˜ä¸Šæœ‰ç‚¹ä¸å¤ªå¥½ã€‚å¹¸è¿çš„æ˜¯ï¼ŒMulteræœ‰è®¸å¤šæ–¹ä¾¿çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¯ä»¥è®©ä½ å°†æ–‡ä»¶ç›´æ¥ä¸Šä¼ åˆ°å¤–éƒ¨å­˜å‚¨å™¨ï¼Œå¦‚S3ã€‚å¦‚æœä½ æ›¾ç»åœ¨ZEIT Nowæˆ–Netlifyç­‰æ‰˜ç®¡æœåŠ¡ä¸Šéƒ¨ç½²è¿‡ä½ çš„æœåŠ¡å™¨åº”ç”¨ï¼Œå®ƒä»¬ä¼šæ´¾ä¸Šç”¨åœºã€‚</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720">ä½¿ç”¨LogRocketæ¶ˆé™¤ä¼ ç»Ÿååº”é”™è¯¯æŠ¥å‘Šçš„å™ªéŸ³</h2>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" vwo-el-id="19356441070">LogRocket
</a><p>æ˜¯ä¸€æ¬¾React analyticsè§£å†³æ–¹æ¡ˆï¼Œå¯ä¿æŠ¤æ‚¨å…å—æ•°ç™¾ä¸ªè¯¯æŠ¥é”™è¯¯è­¦æŠ¥çš„å½±å“ï¼Œåªé’ˆå¯¹å°‘æ•°çœŸæ­£é‡è¦çš„é¡¹ç›®ã€‚LogRocketå‘Šè¯‰æ‚¨Reactåº”ç”¨ç¨‹åºä¸­å®é™…å½±å“ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„bugå’ŒUXé—®é¢˜ã€‚</p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<a href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="35866400580">LogRocket
</a><p>è‡ªåŠ¨èšåˆå®¢æˆ·ç«¯é”™è¯¯ã€ååº”é”™è¯¯è¾¹ç•Œã€è¿˜åŸçŠ¶æ€ã€ç¼“æ…¢çš„ç»„ä»¶åŠ è½½æ—¶é—´ã€JSå¼‚å¸¸ã€å‰ç«¯æ€§èƒ½æŒ‡æ ‡å’Œç”¨æˆ·äº¤äº’ã€‚ç„¶åï¼ŒLogRocketä½¿ç”¨æœºå™¨å­¦ä¹ æ¥é€šçŸ¥æ‚¨å½±å“å¤§å¤šæ•°ç”¨æˆ·çš„æœ€å…·å½±å“åŠ›çš„é—®é¢˜ï¼Œå¹¶æä¾›æ‚¨ä¿®å¤å®ƒæ‰€éœ€çš„ä¸Šä¸‹æ–‡ã€‚</p><p vwo-el-id="28675661060">å…³æ³¨é‡è¦çš„React bugâ€”<a class="signup" href="https://lp.logrocket.com/blg/react-signup-issue-free" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">ä»Šå¤©å°±è¯•è¯•LogRocketã€‘ã€‚</a></p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>