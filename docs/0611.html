<html>
<head>
<title>The complete guide to building headless interface components in React - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>React - LogRocketåšå®¢ä¸­æ„å»ºæ— å¤´æ¥å£ç»„ä»¶çš„å®Œæ•´æŒ‡å—</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/the-complete-guide-to-building-headless-interface-components-in-react/#0001-01-01">https://blog.logrocket.com/the-complete-guide-to-building-headless-interface-components-in-react/#0001-01-01</a></blockquote><div><article class="article-post">
<h3>ä»‹ç»</h3>
<p>Reactç»„ä»¶æ˜¯åœ¨Reactä¸­åˆ›å»ºUIçš„æ„å»ºå—ã€‚</p>
<p>è¿™äº›å¹´æ¥å‡ºç°äº†ä¸åŒçš„æ¨¡å¼ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹æœ€ä»¤äººå…´å¥‹çš„UIç»„ä»¶æ„å»ºæ¨¡å¼ä¹‹ä¸€:<a href="https://headless-countdown.netlify.com/" target="_blank" rel="noopener noreferrer">æ— å¤´ç»„ä»¶</a>ã€‚</p>
<p>æ— å¤´ç»„ä»¶ä¸ä¸€å®šç‰¹å®šäºReactâ€”â€”å®ƒä»¬åªæ˜¯å¸®åŠ©æ„å»ºå¯é‡ç”¨UIç»„ä»¶çš„æ¨¡å¼ã€‚</p>
<h3>ä»€ä¹ˆæ˜¯æ— å¤´ç»„ä»¶ï¼Ÿ</h3>
<p>åœ¨æ„å»ºæˆ‘ä»¬çš„ç¤ºä¾‹ä¹‹å‰ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå®šä¹‰ä»€ä¹ˆæ˜¯<a href="https://github.com/learnwithparam/logrocket-headless-component" target="_blank" rel="noopener noreferrer">æ— å¤´ç»„ä»¶</a>:</p>
<blockquote><p>æ²¡æœ‰ç”¨æˆ·ç•Œé¢ä½†å…·æœ‰åŠŸèƒ½çš„ç»„ä»¶ã€‚</p></blockquote>
<p>è¿™åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<p>åŸºæœ¬ä¸Šï¼Œæ— å¤´ç»„ä»¶åŒ…æ‹¬æ‚¨ç”¨æ¥æ„å»ºå…·æœ‰ä»¥ä¸‹åŠŸèƒ½çš„è¡¨æ ¼ç»„ä»¶çš„ä»»ä½•ä¸œè¥¿:</p>
<ul>
<li>æŒ‰åˆ—æ’åº</li>
<li>ä½¿ç”¨è¡¨æ ¼ä¸­çš„è‡ªç”±æ–‡æœ¬è¿›è¡Œæœç´¢</li>
<li>å†…åµŒå¯ç¼–è¾‘è¡Œ</li>
</ul>
<p>æ„å»ºè¿™ç§ç»„ä»¶æœ‰ä¸¤ç§é€‰æ‹©ã€‚</p>
<h3>æ„å»ºæ™ºèƒ½ç»„ä»¶</h3>
<p>æ™ºèƒ½ç»„ä»¶å°†è·å¾—è¡¨æ•°æ®ä½œä¸ºè¾“å…¥ï¼Œå°†å…¶å­˜å‚¨åœ¨å…¶å†…éƒ¨çŠ¶æ€ï¼Œç„¶åå¯¹æ•°æ®æ‰§è¡Œæ‰€æœ‰ç¥å¥‡çš„åŠŸèƒ½ã€‚</p>
<p>å®ƒè¿˜å°†ä¸ºè¡¨åˆ›å»ºä¸€ä¸ªUIï¼Œå¹¶åœ¨ç”¨æˆ·æœç´¢æ•°æ®å’Œå†…éƒ¨çŠ¶æ€æ›´æ–°æ—¶åœ¨DOMä¸­æ˜¾ç¤ºè¯¥è¡¨ï¼Œæˆ–è€…è·å–è¿œç¨‹æ•°æ®å¹¶æ›´æ–°è¯¥è¡¨ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›å¦ä¸€ä¸ªé¡µé¢ä¸­çš„å¦ä¸€ä¸ªè¡¨æ ¼ç»„ä»¶å…·æœ‰ç›¸åŒçš„è¡¨æ ¼ç‰¹æ€§ï¼Œä½†UIä¸åŒï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå®Œå…¨ä¸åŒçš„UIé‡ç”¨è¯¥é€»è¾‘ã€‚</p>
<p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:</p>
<ul>
<li>æ„å»ºä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œæ— éœ€é‡ç”¨ä»»ä½•é€»è¾‘</li>
<li>é€šè¿‡é‡ç”¨æŸä¸ªåŠŸèƒ½æ¥æ„å»ºä¸€ä¸ªæ— å¤´ç»„ä»¶</li>
</ul>
<p>æ€ä¹ˆä¼šï¼Ÿæˆ‘ä¼šè§£é‡Šçš„ã€‚</p>
<h3>æ— å¤´ç»„ä»¶</h3>
<p>æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œæ— å¤´ç»„ä»¶ä¸å…³å¿ƒUIã€‚ç›¸åï¼Œæ— å¤´ç»„ä»¶å…³å¿ƒåŠŸèƒ½ã€‚æ‚¨å¯ä»¥è½»æ¾åœ°é‡ç”¨ä¸è¿™äº›ç»„ä»¶ç›¸å…³è”çš„æ™ºèƒ½ï¼Œå¹¶å°†UIç»„ä»¶åˆ†ç¦»å‡ºæ¥ä»¥å®ç°å¯é‡ç”¨æ€§ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åˆ›å»ºè¡¨çš„ä¾‹å­ã€‚</p>
<p>headlessç»„ä»¶åªæ˜¯å…¬å¼€äº†å¯¹æ•°æ®è¿›è¡Œæ’åºã€è¿‡æ»¤å’Œæ‰§è¡Œæ‰€æœ‰åŠŸèƒ½çš„æ–¹æ³•ã€‚å®ƒè¿˜å°†æ•°æ®è½¬æ¢æˆä¸€ç§ç®€å•çš„æ ¼å¼ï¼Œåªä½œä¸ºè¡¨æ ¼è¡Œè¿è¡Œã€‚</p>
<p>ç„¶åï¼Œä¸€ä¸ªå•ç‹¬çš„UIç»„ä»¶â€”è½¬å‚¨ç»„ä»¶â€”å‘ˆç°è¯¥è¡¨ã€‚æ¯å½“æœ‰ä¸€äº›æ•°æ®æ›´æ”¹æ—¶ï¼Œè¿™ä¸ªè½¬å‚¨ç»„ä»¶éƒ½ä¼šé‡æ–°å‘ˆç°ã€‚</p>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç”¨é€»è¾‘å’ŒUIã€‚</p>
<h3>ä»€ä¹ˆæ—¶å€™éœ€è¦æ— å¤´ç»„ä»¶</h3>
<p>åœ¨æ„å»ºç»„ä»¶åº“æ—¶ï¼Œæ‚¨éœ€è¦æ— å¤´ç»„ä»¶ã€‚ç»™æœ€ç»ˆç”¨æˆ·æŒ‡å®šUIæ€»æ˜¯ä¸å¥½çš„â€”â€”è®©æœ€ç»ˆç”¨æˆ·è‡ªå·±åˆ¶ä½œUIï¼Œè‡ªå·±å¤„ç†åŠŸèƒ½ã€‚</p>
<p>å½“æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä¸åŒçš„UIæ„å»ºç›¸åŒçš„åŠŸèƒ½æ—¶ï¼Œæ— å¤´ç»„ä»¶ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ— å¤´ç»„ä»¶é€‚ç”¨äºä¸‹æ‹‰ç»„ä»¶ã€è¡¨æ ¼ç»„ä»¶å’Œæ ‡ç­¾ç»„ä»¶ã€‚</p>
<h3>å½“æ— å¤´ç»„ä»¶è¢«è¿‡åº¦ä½¿ç”¨æ—¶</h3>
<p>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¸­æ²¡æœ‰é’ˆå¯¹ç›¸åŒåŠŸèƒ½çš„å¤šä¸ªUIï¼Œæˆ–è€…å¦‚æœæ‚¨æ²¡æœ‰æ„å»ºä¸€ä¸ªå¯é‡ç”¨çš„ç»„ä»¶åº“ä¾›ä»–äººä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨æ— å¤´ç»„ä»¶ã€‚</p><div class="code-block code-block-54">
<hr/>
<h3>æ›´å¤šæ¥è‡ªLogRocketçš„ç²¾å½©æ–‡ç« :</h3>

<hr/></div>
<p>æœ¬è´¨ä¸Šï¼Œheadless UIå°†UIå’ŒåŠŸèƒ½åˆ†ç¦»å¼€æ¥ï¼Œä½¿æ¯ä¸€éƒ¨åˆ†éƒ½å¯ä»¥å•ç‹¬é‡ç”¨ã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ„å»ºä¸€ä¸ª<code>react-countdown</code>æ— å¤´ç»„ä»¶ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>Reactæœ‰ä¸‰ç§é«˜çº§æ¨¡å¼æ¥æ„å»ºé«˜åº¦å¯é‡ç”¨çš„åŠŸèƒ½ç»„ä»¶ã€‚</p>
<p>è¿™åŒ…æ‹¬é«˜é˜¶ç»„ä»¶ã€æ¸²æŸ“é“å…·ç»„ä»¶å’Œè‡ªå®šä¹‰ReactæŒ‚é’©ã€‚</p>
<p>æˆ‘ä»¬å°†åœ¨ç¤ºä¾‹ä¸­çœ‹åˆ°æ¸²æŸ“é“å…·ç»„ä»¶å’ŒReactæŒ‚é’©ã€‚</p>
<p>åœ¨æ„å»ºheadlessç»„ä»¶ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆæ„å»ºä¸€ä¸ªç®€å•çš„React countdownï¼Œç„¶åé‡ç”¨å…¶ä¸­çš„åŠŸèƒ½æ¥åˆ›å»ºæˆ‘ä»¬çš„å¯é‡ç”¨headlessç»„ä»¶ã€‚</p>
<h3>ç”¨ç®€å•çš„ç”¨æˆ·ç•Œé¢æ„å»ºååº”å€’è®¡æ—¶ç»„ä»¶</h3>
<p>React-dropdownç»„ä»¶çš„è§„æ ¼:</p>
<ul>
<li>å¯¹äºæœªæ¥çš„æ—¥æœŸï¼Œå®ƒå°†å‘ˆç°è¯¥æ—¥æœŸå‰©ä½™çš„å¤©æ•°ã€å°æ—¶æ•°ã€åˆ†é’Ÿæ•°å’Œç§’æ•°çš„å€’è®¡æ—¶ã€‚</li>
<li>å¯¹äºæ—§æ—¥æœŸæˆ–éæ—¥æœŸï¼Œå®ƒå°†æ˜¾ç¤ºç›¸å…³çš„é”™è¯¯æ¶ˆæ¯ã€‚</li>
</ul>
<p>å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä»£ç ã€‚</p>
<pre>// App.js
    
    import React from "react";
    // Export the SimpleCOuntdown component, we have to build this component :)
    import SimpleCountdown from "./components/simple-countdown";
    
    function App() {
      // Create a future date and pass in to the SimpleCountdown
      const date = new Date("2021-01-01"); // New year - Another 3xx days more :)
    
      return (
        &lt;div className="App"&gt;
          &lt;SimpleCountdown date={date} /&gt;
          &lt;hr /&gt;
        &lt;/div&gt;
      );
    }
    
    export default App;</pre>
<p>ç°åœ¨æˆ‘ä»¬å°†æ„å»ºä¸å­˜åœ¨çš„<code>SimpleCountdown</code>ç»„ä»¶:</p>
<pre>import React, { useState, useEffect, useRef } from "react";

const SimpleCountdown = ({ date }) =&gt; {

/* 
  Need to calculate something from the date value which will give these variables
  
  `isValidDate` - False if not valid, True if valid date
  `isValidFutureDate` - False if its a past date, True if valid future date
  `timeLeft` - An object which updates every second automatically to give you the number of days, hours, minutes and seconds remaining.
*/
const isValidDate = false, isValidFutureDate = false, timeLeft = {};

// The UI just displays what we computed using the date value we received so that 
return (
    &lt;div className="countdown"&gt;
      &lt;h3 className="header"&gt;Simple Countdown&lt;/h3&gt;
      {!isValidDate &amp;&amp; &lt;div&gt;Pass in a valid date props&lt;/div&gt;}
      {!isValidFutureDate &amp;&amp; (
        &lt;div&gt;
          Time up, let's pass a future date to procrastinate more{" "}
          &lt;span role="img" aria-label="sunglass-emoji"&gt;
            ğŸ˜
          &lt;/span&gt;
        &lt;/div&gt;
      )}
      {isValidDate &amp;&amp; isValidFutureDate &amp;&amp; (
        &lt;div&gt;
          {timeLeft.days} days, {timeLeft.hours} hours, {timeLeft.minutes}{" "}
          minutes, {timeLeft.seconds} seconds
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  );
};

export default SimpleCountdown;</pre>
<p>ä¸Šé¢çš„ä¾‹å­åªæ˜¯å±•ç¤ºäº†ä¸€ä¸ªUIçš„ä¾‹å­ã€‚</p>
<p>ä½¿ç”¨<code>date</code>é“å…·ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—è¿™ä¸‰ä¸ªå€¼ã€‚æ¯ç§’è®¡ç®—å¹¶æ›´æ–°ä¸€ä¸ªå¯¹è±¡å˜é‡ã€‚</p>
<p>åœ¨Reactä¸­ï¼Œè¿™æ˜¯ä¸€ç§æ¯ç§’è‡ªåŠ¨æ›´æ–°çš„çŠ¶æ€ã€‚</p>
<p><code>isValidDate</code>â€“æ— æ•ˆæ—¶ä¸ºå‡ï¼Œæœ‰æ•ˆæ—¥æœŸæ—¶ä¸ºçœŸ<br/><code>isValidFutureDate</code>â€“è¿‡å»æ—¥æœŸæ—¶ä¸ºå‡ï¼Œæœ‰æ•ˆæœªæ¥æ—¥æœŸæ—¶ä¸ºçœŸ<br/><code>timeLeft</code>â€“æ¯ç§’è‡ªåŠ¨æ›´æ–°ä»¥æ˜¾ç¤ºå‰©ä½™å¤©æ•°ã€å°æ—¶æ•°ã€åˆ†é’Ÿæ•°å’Œç§’æ•°çš„å¯¹è±¡ã€‚</p>
<p>è®©æˆ‘ä»¬å»æ‰ç®€å•çš„ä¸œè¥¿ï¼Œç„¶åä»æ—¥æœŸå¼€å§‹è®¡ç®—æ‰€æœ‰è¿™äº›å€¼:</p>
<pre>// To check the date, we are using date-fns library
import isValid from "date-fns/isValid";

// This function calc the time remaining from the date and also check whether the date is a valid future date
export const calculateTimeLeft = date =&gt; {
  // Check valid date, if not valid, then return null
  if (!isValid(date)) return null;
  // Get the difference between current date and date props
  const difference = new Date(date) - new Date();
  let timeLeft = {};

  // If there is no difference, return empty object. i.e., the date is not a future date
  if (difference &gt; 0) {
    // if there is a differece, then calculate days, hours, minutes and seconds
    timeLeft = {
      days: Math.floor(difference / (1000 * 60 * 60 * 24)),
      hours: Math.floor((difference / (1000 * 60 * 60)) % 24),
      minutes: Math.floor((difference / 1000 / 60) % 60),
      seconds: Math.floor((difference / 1000) % 60)
    };
  }
  // Return the timeLeft object
  return timeLeft;
};</pre>
<p>è®©æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„<code>utils.js</code>æ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶å¯¼å…¥æˆ‘ä»¬çš„ç»„ä»¶æ–‡ä»¶:</p>
<pre>// simple-countdown.js

import React, { useState, useEffect, useRef } from "react";
// import our util function which calculate the time remaining
import { calculateTimeLeft } from "../utils";

const SimpleCountdown = ({ date }) =&gt; {
  // Calculate the initial time left
  const initialTimeLeft = calculateTimeLeft(date);
  // assign it to a state, so that we will update the state every second
  const [timeLeft, setTimeLeft] = useState(initialTimeLeft);
  const timer = useRef();
  
  // Inorder to update the state every second, we are using useEffect
  useEffect(() =&gt; {
    // Every second this setInterval runs and recalculate the current time left and update the counter in the UI
    timer.current = setInterval(() =&gt; {
      setTimeLeft(calculateTimeLeft(date));
    }, 1000);

    // Cleaning up the timer when unmounting
    return () =&gt; {
      if (timer.current !== undefined) {
        clearInterval(timer.current);
      }
    };
  }, [date]);

  let isValidDate = true,
    isValidFutureDate = true;

  // If timeLeft is Null, then it is not a valid date
  if (timeLeft === null) isValidDate = false;
  // if timeleft is not null but the object doesn't have any key or seconds key is undefined, then its not a future date
  if (timeLeft &amp;&amp; timeLeft.seconds === undefined) isValidFutureDate = false;
  
  // Return the UI
  return (
    ....  
  );
};

export default SimpleCountdown;</pre>
<p>å¾ˆç®€å•ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è®¡ç®—åˆå§‹å‰©ä½™æ—¶é—´ï¼Œç„¶åå°†å…¶åˆ†é…ç»™ä¸€ä¸ªçŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>setInterval</code>æ¥æ¯ç§’æ›´æ–°çŠ¶æ€ï¼Œå¹¶é‡æ–°è®¡ç®—å‰©ä½™æ—¶é—´ã€‚</p>
<p>è¿™æ ·ï¼Œå®ƒä¼šé‡æ–°è®¡ç®—æ¯ç§’å‰©ä½™çš„æ—¶é—´ï¼Œå¹¶åƒå€’è®¡æ—¶ä¸€æ ·æ›´æ–°ç”¨æˆ·ç•Œé¢ã€‚</p>
<p>æˆ‘ä»¬å·²ç»æˆåŠŸåœ°ä½¿ç”¨æˆ‘ä»¬çš„åŠŸèƒ½åˆ›å»ºäº†ä¸€ä¸ªæ¼‚äº®ã€ç®€å•çš„UIã€‚å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„åŠŸèƒ½éƒ½ä¸ç”¨æˆ·ç•Œé¢éš”ç¦»å¼€æ¥ã€‚</p>
<p>å°½ç®¡å¦‚æ­¤ï¼ŒUIä»ç„¶é©»ç•™åœ¨<code>SimpleCountdown</code>ç»„ä»¶ä¸­ã€‚</p>
<p>å¦‚æœä½ æƒ³ç”¨SVGå’ŒCSSåŠ¨ç”»åˆ›å»ºå¦ä¸€ä¸ªå€’è®¡æ—¶UIï¼Œé‚£ä¹ˆä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚å¦‚æœä½ æƒ³é¿å…è¿™ä¸€ç‚¹ï¼Œæå–åŠŸèƒ½ï¼Œåªæ˜¯è®©ç”¨æˆ·ç•Œé¢å“‘å’Œåˆ†ç¦»ã€‚</p>
<p>è®©æˆ‘ä»¬å°†UIåˆ†ç¦»åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œå¹¶åˆ›å»ºå®ƒçš„å¤šä¸ªç‰ˆæœ¬:</p>
<pre>// 1st version of React countdown UI
    import React from "react";
    
    const FirstCountdownUI = ({ timeLeft, isValidDate, isValidFutureDate }) =&gt; {
      return (
        &lt;div className="countdown"&gt;
          &lt;h3 className="header"&gt;First Countdown UI&lt;/h3&gt;
          {!isValidDate &amp;&amp; &lt;div&gt;Pass in a valid date props&lt;/div&gt;}
          {!isValidFutureDate &amp;&amp; (
            &lt;div&gt;
              Time up, let's pass a future date to procrastinate more{" "}
              &lt;span role="img" aria-label="sunglass-emoji"&gt;
                ğŸ˜
              &lt;/span&gt;
            &lt;/div&gt;
          )}
          {isValidDate &amp;&amp; isValidFutureDate &amp;&amp; (
            &lt;div&gt;
              &lt;strong className="countdown-header"&gt;{timeLeft.days}&lt;/strong&gt; days,{" "}
              &lt;strong className="countdown-header"&gt;{timeLeft.hours}&lt;/strong&gt; hours,{" "}
              &lt;strong className="countdown-header"&gt;{timeLeft.minutes}&lt;/strong&gt;{" "}
              minutes,{" "}
              &lt;strong className="countdown-header"&gt;{timeLeft.seconds}&lt;/strong&gt;{" "}
              seconds
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      );
    };
    
    export default FirstCountdownUI;</pre>
<pre>// 2nd version of React countdown UI
    import React from "react";
    
    const SecondCountdownUI = ({ timeLeft, isValidDate, isValidFutureDate }) =&gt; {
      return (
        &lt;div className="countdown"&gt;
          &lt;h3 className="header"&gt;Second Countdown UI&lt;/h3&gt;
            {!isValidDate &amp;&amp; &lt;div&gt;Pass in a valid date props&lt;/div&gt;}
            {!isValidFutureDate &amp;&amp; (
              &lt;div&gt;
                Time up, let's pass a future date to procrastinate more{" "}
                &lt;span role="img" aria-label="sunglass-emoji"&gt;
                  ğŸ˜
                &lt;/span&gt;
              &lt;/div&gt;
            )}
            {isValidDate &amp;&amp; isValidFutureDate &amp;&amp; (
              &lt;div&gt;
                &lt;strong className="countdown-header"&gt;{timeLeft.days} : &lt;/strong&gt;
                &lt;strong className="countdown-header"&gt;
                  {timeLeft.hours} :{" "}
                &lt;/strong&gt;
                &lt;strong className="countdown-header"&gt;
                  {timeLeft.minutes} :{" "}
                &lt;/strong&gt;
                &lt;strong className="countdown-header"&gt;{timeLeft.seconds}&lt;/strong&gt;
              &lt;/div&gt;
            )}
        &lt;/div&gt;
      );
    };
    
    export default SecondCountdownUI;</pre>
<p>æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªä¸åŒçš„UIã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åˆ›å»ºæ— å¤´ç»„ä»¶ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°é‡ç”¨ä»»ä½•UIç»„ä»¶çš„åŠŸèƒ½ã€‚</p>
<h3>ä½¿ç”¨æ¸²æŸ“é“å…·çš„æ— å¤´ç»„ä»¶</h3>
<p>åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬å°†é‡ç”¨æˆ‘ä»¬åˆ›å»ºçš„ç›¸åŒçš„é€»è¾‘ï¼Œåªæ˜¯æ”¹å˜æˆ‘ä»¬å‘ˆç°UIçš„æ–¹å¼ã€‚</p>
<pre>import { useState, useEffect, useRef } from "react";
    import { calculateTimeLeft } from "../utils";
    
    /* 
      All logic are same as previous implementation. 
      Only change is, Instead of rendering a UI, we just send the render props
    */
    const Countdown = ({ date, children }) =&gt; {
      const initialTimeLeft = calculateTimeLeft(date);
      const [timeLeft, setTimeLeft] = useState(initialTimeLeft);
      const timer = useRef();
    
      useEffect(() =&gt; {
        timer.current = setInterval(() =&gt; {
          setTimeLeft(calculateTimeLeft(date));
        }, 1000);
    
        return () =&gt; {
          if (timer.current !== undefined) {
            clearInterval(timer.current);
          }
        };
      }, [date]);
    
      let isValidDate = true,
        isValidFutureDate = true;
    
      if (timeLeft === null) isValidDate = false;
      if (timeLeft &amp;&amp; timeLeft.seconds === undefined) isValidFutureDate = false;
    
      // Instead of rendering a UI, we are returning a function through the children props
      return children({
        isValidDate,
        isValidFutureDate,
        timeLeft
      });
    };
    
    export default Countdown;</pre>
<p>æ‚¨å¯ä»¥å°†å…¶ç§°ä¸ºå­é“å…·ã€å‡½æ•°æˆ–æ¸²æŸ“é“å…·ã€‚</p>
<p>ä¸¤è€…æ˜¯ä¸€ä½“çš„ã€‚å®ƒä¸éœ€è¦æˆä¸ºå­©å­ä»¬çš„é“å…·ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•å¯ä»¥ä½œä¸ºå‡½æ•°è¿”å›çš„å±æ€§ï¼Œå¹¶ä¸”çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨å®ƒé€šè¿‡æ¸²æŸ“å±æ€§è¿”å›çš„å˜é‡æ¥æ¸²æŸ“UIã€‚è¿™æ˜¯åšè¿™ä»¶äº‹çš„å¸¸ç”¨æ–¹æ³•ã€‚</p>
<p>å‘ˆç°UIå¾ˆç®€å•ã€‚</p>
<pre>// On Page 1 - We render first countdown UI

import React from "react";
import FirstCountdownUI from './first-countdown-ui';
import Countdown from './countdown-render-props';

function App() {
  const date = new Date("2021-01-01"); // New year!

  return (
      &lt;Countdown date={date}&gt;
        {(renderProps) =&gt; (
          &lt;FirstCountdownUI {...renderProps} /&gt;
        )}
      &lt;/Countdown&gt;
  );
}
export default App;</pre>
<p>åœ¨ç¬¬äºŒé¡µä¸Šæœ‰Reactå€’è®¡æ—¶:</p>
<pre>// On Page 2, we render second countdown UI

import React from "react";
import SecondCountdownUI from './second-countdown-ui';
import Countdown from './countdown-render-props';

function App() {
  const date = new Date("2021-01-01"); // New year!

  return (
      
        {(renderProps) =&gt; (
          
        )}
      
  );
}
export default App;</pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥é‡ç”¨åŠŸèƒ½ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„åŠŸèƒ½ç»„ä»¶åˆ›å»ºå¤šä¸ªä¸åŒçš„UIã€‚</p>
<p>åŒæ ·çš„æ— å¤´ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨å®šåˆ¶é’©å­æ¥å®ç°ã€‚è¿™æ ·åšæ¯”ä½¿ç”¨åŸºäºæ¸²æŸ“é“å…·çš„ç»„ä»¶æ›´ç®€å•ã€‚</p>
<p>è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€æ­¥ä¸­è¿™æ ·åš:</p>
<h3>è‡ªå®šä¹‰ReactæŒ‚é’©(æ— å¤´ç»„ä»¶)</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ„å»ºè‡ªå®šä¹‰é’©å­ï¼Œå®ƒå°†æä¾›<code>timeLeft</code>ã€<code>isValidDate</code>å’Œ<code>isvalidFutureDate</code>å˜é‡ã€‚</p>
<pre>// use-countdown.js - custom hooks

import { useState, useEffect, useRef } from "react";
import { calculateTimeLeft } from "../utils";

// All the computation are same as previous, only change is, we directly return the values instead of rendering anything.
const useCountdown = date =&gt; {
  const initialTimeLeft = calculateTimeLeft(date);
  const [timeLeft, setTimeLeft] = useState(initialTimeLeft);
  const timer = useRef();

  useEffect(() =&gt; {
    timer.current = setInterval(() =&gt; {
      setTimeLeft(calculateTimeLeft(date));
    }, 1000);

    return () =&gt; {
      if (timer.current !== undefined) {
        clearInterval(timer.current);
      }
    };
  }, [date]);

  let isValidDate = true,
    isValidFutureDate = true;

  if (timeLeft === null) isValidDate = false;
  if (timeLeft &amp;&amp; timeLeft.seconds === undefined) isValidFutureDate = false;

  // We return these computed values for the passed date prop to our hook
  return { isValidDate, isValidFutureDate, timeLeft };
};

export default useCountdown;</pre>
<p>è¿™ä¸ªé’©å­å°†æŠ½è±¡ä¸€åˆ‡ï¼Œæ¯ç§’è®¡ç®—ä¸€æ¬¡<code>timeLeft</code>,å¹¶è¿”å›ç»™å°†è¦ä½¿ç”¨è¿™ä¸ªé’©å­çš„ç»„ä»¶ã€‚</p>
<p>è®©æˆ‘ä»¬ç”¨ä¸¤ä¸ªä¸åŒçš„ç”¨æˆ·ç•Œé¢å’Œç›¸åŒçš„è‡ªå®šä¹‰å€’è®¡æ—¶æŒ‚é’©æ¥æ¸²æŸ“æˆ‘ä»¬çš„ä¸¤ä¸ªé¡µé¢:</p>
<pre>// On Page 1 - We render first countdown UI

import React from "react";
import FirstCountdownUI from './first-countdown-ui';
import useCountdown from './use-countdown'; // importing the custom hook

function App() {
  const date = new Date("2021-01-01"); // New year!
  // pass in the date and get all the values from the hook, throw it to the UI
  const { timeLeft, isValidDate, isValidFutureDate } = useCountdown(date);

  return (
      &lt;FirstCountdownUI 
        timeLeft={timeLeft} 
        isValidDate={isValidDate} 
        isValidFutureDate={isValidFutureDate} 
      /&gt;
  );
}

export default App;</pre>
<p>åœ¨å¸¦æœ‰è‡ªå®šä¹‰å€’è®¡æ—¶æŒ‚é’©çš„ç¬¬äºŒé¡µä¸Š:</p>
<pre>// On Page 2, we render second countdown UI

import React from "react";
import SecondCountdownUI from './second-countdown-ui';
import useCountdown from './use-countdown'; // importing the custom hook

function App() {
  const date = new Date("2021-01-01"); // New year!
  // pass in the date and get all the values from the hook, throw it to the UI
  const { timeLeft, isValidDate, isValidFutureDate } = useCountdown(date);

  return (
      &lt;SecondCountdownUI 
        timeLeft={timeLeft} 
        isValidDate={isValidDate} 
        isValidFutureDate={isValidFutureDate} 
       /&gt;
  );
}

export default App;</pre>
<p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç”¨ç»„ä»¶å¹¶å°†é€»è¾‘ä»UIä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p>
<p>æ‚¨ç”šè‡³å¯ä»¥å°†è¿™ä¸ªæ— å¤´ç»„ä»¶å•ç‹¬å‘å¸ƒä¸ºNPMåº“ï¼Œå¹¶åœ¨å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å®ƒã€‚</p>
<h3>ç»“è®º</h3>
<p>Reactä¸–ç•Œä¸­ä¸€äº›å¸¸ç”¨çš„æ— å¤´ç»„ä»¶åŒ…æ‹¬:</p>

<p>æ‚¨å¯ä»¥æŸ¥çœ‹è¿™äº›ä»£ç åº“ï¼Œäº†è§£å¤§é‡ä¿¡æ¯ï¼Œå¹¶äº†è§£è¿™äº›åº“æ˜¯å¦‚ä½•ä¼˜é›…åœ°åˆ›å»ºçš„ã€‚</p>
<p>å¸Œæœ›ä½ åœ¨Reactä¸­å­¦åˆ°äº†ä¸€äº›æŠ€å·§ã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ç¤ºä¾‹ä»£ç åº“<a href="https://github.com/learnwithparam/logrocket-headless-component" target="_blank" rel="noopener noreferrer">ï¼Œåœ¨è¿™é‡Œ</a>æŸ¥çœ‹æ¼”ç¤º<a href="https://headless-countdown.netlify.com/" target="_blank" rel="noopener noreferrer">ã€‚</a></p>
<p>è¯·åœ¨è¯„è®ºä¸­åˆ†äº«ä½ çš„æƒ³æ³•ã€‚</p><div class="code-block code-block-17">
<div class="blog-plug inline-plug react-plug" vwo-el-id="26283398190">
<h2 vwo-el-id="41600691720"><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener"> LogRocket </a>:å…¨é¢äº†è§£æ‚¨çš„ç”Ÿäº§Reactåº”ç”¨</h2><p>è°ƒè¯•Reactåº”ç”¨ç¨‹åºå¯èƒ½å¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯å½“ç”¨æˆ·é‡åˆ°éš¾ä»¥é‡ç°çš„é—®é¢˜æ—¶ã€‚å¦‚æœæ‚¨å¯¹ç›‘è§†å’Œè·Ÿè¸ªReduxçŠ¶æ€ã€è‡ªåŠ¨æ˜¾ç¤ºJavaScripté”™è¯¯ä»¥åŠè·Ÿè¸ªç¼“æ…¢çš„ç½‘ç»œè¯·æ±‚å’Œç»„ä»¶åŠ è½½æ—¶é—´æ„Ÿå…´è¶£ï¼Œ</p><a href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" vwo-el-id="19356441070">try LogRocket</a><p>. </p><a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441380">
<img class="first-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/f300c244a1a1cf916df8b4cb02bec6c6.png" vwo-el-id="18272717540" data-lazy-loaded="1" data-original-src="https://files.readme.io/27c94e7-Image_2017-06-05_at_9.46.04_PM.png"/>
</a>
<a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="19356441690">
<img class="second-react-image alignnone size-full wp-image-46 jetpack-lazy-image jetpack-lazy-image--handled" src="../Images/d6f5a5dd739296c1dd7aab3d5e77eeb9.png" alt="LogRocket Dashboard Free Trial Banner" vwo-el-id="30720362350" data-lazy-loaded="1" data-original-src="https://blog.logrocket.com/wp-content/uploads/2017/03/1d0cd-1s_rmyo6nbrasp-xtvbaxfg.png"/>
</a>
<p vwo-el-id="28675660440" class="">LogRocket ç»“åˆäº†ä¼šè¯å›æ”¾ã€äº§å“åˆ†æå’Œé”™è¯¯è·Ÿè¸ªï¼Œä½¿è½¯ä»¶å›¢é˜Ÿèƒ½å¤Ÿåˆ›å»ºç†æƒ³çš„webå’Œç§»åŠ¨äº§å“ä½“éªŒã€‚è¿™å¯¹ä½ æ¥è¯´æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>LogRocketä¸æ˜¯çŒœæµ‹é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œä¹Ÿä¸æ˜¯è¦æ±‚ç”¨æˆ·æä¾›æˆªå›¾å’Œæ—¥å¿—è½¬å‚¨ï¼Œè€Œæ˜¯è®©æ‚¨å›æ”¾é—®é¢˜ï¼Œå°±åƒå®ƒä»¬å‘ç”Ÿåœ¨æ‚¨è‡ªå·±çš„æµè§ˆå™¨ä¸­ä¸€æ ·ï¼Œä»¥å¿«é€Ÿäº†è§£å“ªé‡Œå‡ºé”™äº†ã€‚</p>
<p>ä¸å†æœ‰å˜ˆæ‚çš„è­¦æŠ¥ã€‚æ™ºèƒ½é”™è¯¯è·Ÿè¸ªå…è®¸æ‚¨å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ï¼Œç„¶åä»ä¸­å­¦ä¹ ã€‚è·å¾—æœ‰å½±å“çš„ç”¨æˆ·é—®é¢˜çš„é€šçŸ¥ï¼Œè€Œä¸æ˜¯è¯¯æŠ¥ã€‚è­¦æŠ¥è¶Šå°‘ï¼Œæœ‰ç”¨çš„ä¿¡å·è¶Šå¤šã€‚</p>
<p vwo-el-id="28675660750">LogRocket Reduxä¸­é—´ä»¶åŒ…ä¸ºæ‚¨çš„ç”¨æˆ·ä¼šè¯å¢åŠ äº†ä¸€å±‚é¢å¤–çš„å¯è§æ€§ã€‚LogRocketè®°å½•Reduxå­˜å‚¨ä¸­çš„æ‰€æœ‰æ“ä½œå’ŒçŠ¶æ€ã€‚</p>
<p vwo-el-id="28675661060">ç°ä»£åŒ–æ‚¨è°ƒè¯•Reactåº”ç”¨çš„æ–¹å¼â€” <a class="signup" href="https://lp.logrocket.com/blg/react-signup-general" target="_blank" rel="noopener noreferrer" vwo-el-id="40093418840">å¼€å§‹å…è´¹ç›‘æ§</a>ã€‚</p>
</div></div>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>