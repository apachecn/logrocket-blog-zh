<html>
<head>
<title>Build an event keeper app with Ionic and AWS - LogRocket Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>ç”¨Ionicå’ŒAWS - LogRocketåšå®¢æ„å»ºä¸€ä¸ªäº‹ä»¶ç®¡ç†å™¨åº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/#0001-01-01">https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/#0001-01-01</a></blockquote><div><article class="article-post">
<p>Ionic frameworkæ˜¯ä¸€ä¸ªå¼€æºUIå·¥å…·åŒ…ï¼Œç”¨äºä½¿ç”¨webæŠ€æœ¯(HTMLã€CSSå’ŒJavaScript)æ„å»ºé«˜æ€§èƒ½ã€é«˜è´¨é‡çš„ç§»åŠ¨å’Œæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå¹¶é›†æˆäº†Angularã€Vueå’ŒReactç­‰æµè¡Œæ¡†æ¶ã€‚</p>
<p>äºšé©¬é€Šç½‘ç»œæœåŠ¡(AWS)ä»¥æŒ‰éœ€ä»˜è´¹çš„æ–¹å¼æä¾›æŒ‰éœ€äº‘å¹³å°ã€‚</p>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åä¸ºS3çš„AWSæœåŠ¡æ„å»ºä¸€ä¸ªäº‹ä»¶ç®¡ç†å™¨åº”ç”¨ç¨‹åºæ¥ä¿å­˜æˆ‘ä»¬çš„å›¾åƒã€‚æ‰€æœ‰ä¸Šä¼ åˆ°æˆ‘ä»¬å¹³å°çš„å›¾åƒå°†è¢«å­˜å‚¨åœ¨AWS S3æ¡¶ä¸­ï¼Œæˆ‘ä»¬çš„å›¾åƒçš„URLå°†è¢«è¿”å›ã€‚</p>
<h2 id="prerequisites">å…ˆå†³æ¡ä»¶</h2>
<p>è¦è·Ÿéšæœ¬æ•™ç¨‹ï¼Œæ‚¨éœ€è¦:</p>
<ul>
<li>å¯¹HTMLã€CSSå’ŒJavaScript (ES6+)æœ‰åŸºæœ¬çš„äº†è§£</li>
<li>å®‰è£…äº†ä»£ç ç¼–è¾‘å™¨ï¼Œå¦‚VSä»£ç </li>
<li>é‚®é€’å‘˜å·²å®‰è£…</li>
<li>MongoDBè®¾ç½®</li>
<li><a href="https://blog.logrocket.com/angular-10-is-now-available-heres-what-you-need-to-know/" target="_blank" rel="noopener noreferrer">è§’åº¦</a>å’ŒExpress.jsçš„åŸºç¡€çŸ¥è¯†</li>
</ul>
<h2 id="buildingthebackend">æ„å»ºåç«¯</h2>
<p>è¦æ„å»ºåç«¯ï¼Œè¯·å®Œæˆä»¥ä¸‹æ­¥éª¤ã€‚</p>
<ol>
<li>åˆå§‹åŒ–æ–°çš„èŠ‚ç‚¹é¡¹ç›®</li>
<li>å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–é¡¹</li>
<li>åˆ›å»ºExpressæœåŠ¡å™¨å¹¶é…ç½®ä¾èµ–å…³ç³»</li>
<li>åˆ›å»ºå’Œé…ç½®MongoDB</li>
<li>åˆ›å»ºäº‹ä»¶ç®¡ç†å™¨æ¨¡å‹</li>
<li>è®¾ç½®AWSå’ŒMulter</li>
<li>åˆ›å»ºå¿…è¦çš„è·¯çº¿å’Œæ§åˆ¶å™¨</li>
<li>ä½¿ç”¨é‚®é€’å‘˜æµ‹è¯•è·¯çº¿</li>
</ol>
<h2 id="initialiseanewnodejsproject">åˆå§‹åŒ–æ–°çš„èŠ‚ç‚¹é¡¹ç›®</h2>
<p>è®©æˆ‘ä»¬é¦–å…ˆåœ¨æ¡Œé¢ä¸Šä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚æ‰“å¼€æ‚¨çš„ç»ˆç«¯ï¼Œé”®å…¥ä»¥ä¸‹å†…å®¹ã€‚</p>
<pre>cd desktop
mkdir event-app &amp;&amp; cd event-app
mkdir server &amp;&amp; cd server
code
</pre>
<p>è¿™é‡Œæˆ‘ä»¬åœ¨æ¡Œé¢ä¸Šåˆ›å»ºä¸€ä¸ª<code>event-app</code>ç›®å½•ã€‚åœ¨<code>event-app</code>ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<code>server</code>ç›®å½•ã€‚è¿™æ˜¯æˆ‘ä»¬è®¾ç½®åç«¯åº”ç”¨ç¨‹åºçš„åœ°æ–¹ã€‚</p>
<p>å‘½ä»¤å°†åœ¨VSä»£ç ä¸­è®¾ç½®æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚VSä»£ç è¢«é‡æ–°å®šä¹‰å’Œä¼˜åŒ–ï¼Œç”¨äºæ„å»ºå’Œè°ƒè¯•ç°ä»£webå’Œäº‘åº”ç”¨ç¨‹åºã€‚è¯·éšæ„ä½¿ç”¨æ‚¨é€‰æ‹©çš„ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ã€‚å‡ºäºæœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨VSä»£ç é›†æˆç»ˆç«¯ã€‚</p>
<p>è¦è®¾ç½®Node.jsåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶æ¥ç®¡ç†æˆ‘ä»¬æ‰€æœ‰çš„é¡¹ç›®ä¾èµ–é¡¹ã€‚è¦åˆ›å»ºå®ƒï¼Œåœ¨ç»ˆç«¯ä¸Šè¿è¡Œ<code>npm init -y</code>ã€‚</p>
<pre>npm init -y
</pre>
<p>è¿™å°†åˆ›å»ºä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ã€‚</p>
<h2 id="installalltherequireddependenciesforourapplication">å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹</h2>
<p>æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†éœ€è¦ä»¥ä¸‹npmåŒ…è¿›è¡Œå¼€å‘ã€‚</p>
<ul>
<li><code>Expressjs</code> â€”ä¸€ä¸ªnode.jsæ¡†æ¶ï¼Œå¯ä»¥è½»æ¾æ„å»ºwebåº”ç”¨ã€‚</li>
<li><code>mongoose</code> â€”ä¸€ä¸ªç”¨äºå¼‚æ­¥æŸ¥è¯¢MongoDBçš„å¯¹è±¡å»ºæ¨¡å·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„ã€åŸºäºæ¨¡å¼çš„è§£å†³æ–¹æ¡ˆæ¥ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæ•°æ®å»ºæ¨¡</li>
<li><code>body-parser</code> â€”å…è®¸Expressè¯»å–è¯·æ±‚ä¸»ä½“ï¼Œç„¶åå°†å…¶è§£ææˆå¯ä»¥ç†è§£çš„JSONå¯¹è±¡çš„åŒ…</li>
<li><code>cors</code> â€”ä¸€ç§ä¸­é—´ä»¶ï¼Œå¯ç”¨äºæ”¯æŒå…·æœ‰å„ç§é€‰é¡¹çš„CORS</li>
<li><code>morgan</code> â€”è®°å½•æ‰€æœ‰è·¯ç”±å’Œè¯·æ±‚çš„æ—¥å¿—å·¥å…·</li>
<li><code>aws-sdk</code> â€”å®˜æ–¹AWS SDK for JavaScriptï¼Œå¯ç”¨äºæµè§ˆå™¨ã€ç§»åŠ¨è®¾å¤‡å’ŒNode.jsåç«¯</li>
<li><code>multer</code> â€”ç”¨äºå¤„ç†å¤šéƒ¨åˆ†è¡¨å•æ•°æ®çš„Node.jsä¸­é—´ä»¶ï¼Œä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶</li>
<li><code>dotenv</code> â€”ä¸€ä¸ªé›¶ä¾èµ–æ¨¡å—ï¼Œå°†ç¯å¢ƒå˜é‡ä»<code>.env</code>æ–‡ä»¶åŠ è½½åˆ°<code>process.env</code>ä¸­ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸ºåº”ç”¨ç¨‹åºå­˜å‚¨æ‰€æœ‰å¤–éƒ¨ç¯å¢ƒå˜é‡çš„åœ°æ–¹ï¼Œæ¯”å¦‚AWS secretã€IDç­‰ã€‚</li>
<li><code>multer-s3</code> â€”ç”¨äºæµå¼ä¼ è¾“AWS S3 Multerå­˜å‚¨å¼•æ“çš„åŒ…</li>
<li>æ¯æ¬¡æˆ‘ä»¬ä¿®æ”¹ä»£ç æ—¶ï¼Œè¿™ä¸ªåŒ…éƒ½ä¼šé‡æ–°è¿è¡ŒExpressæœåŠ¡å™¨</li>
</ul>
<p>ä»å…¨å±€å®‰è£…Nodemonå¼€å§‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°æœºå™¨ä¸Šçš„ä»»ä½•åœ°æ–¹è®¿é—®å®ƒã€‚</p>
<pre>npm install -g nodemon
</pre>
<p>æ¥ä¸‹æ¥ï¼Œå®‰è£…æ‰€æœ‰å…¶ä»–ä¾èµ–é¡¹ã€‚</p>
<pre>npm i --save express body-parser cors morgan aws-sdk multer multer-s3 mongoose dotenv
</pre>
<p>è¿™ä¸ªå‘½ä»¤å°†å®‰è£…æ‰€æœ‰è¿™äº›åŒ…ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æˆ‘ä»¬åœ¨<code>package.js file</code>ä¸­çš„ä¾èµ–é¡¹ä¸­ã€‚å®ƒè¿˜åˆ›å»ºäº†ä¸€ä¸ª<code>node-modules</code>ç›®å½•ï¼Œè¿™æ˜¯æˆ‘ä»¬æ‰€æœ‰åŒ…å­˜å‚¨çš„åœ°æ–¹ã€‚</p>
<p>è®°ä½ï¼Œåœ¨å°†é¡¹ç›®æ¨é€åˆ°gitæ—¶ï¼Œä¸è¦æ·»åŠ è¿™ä¸ªåŒ…ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåˆ›å»ºä¸€ä¸ª<code>.gitignore</code>æ–‡ä»¶</p>
<pre>touch .gitignore
</pre>
<p>è¯¥å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ª<code>.gitignore</code>æ–‡ä»¶ã€‚æ‰“å¼€æ–‡ä»¶å¹¶åœ¨å…¶ä¸­é”®å…¥<code>node-modules</code>ã€‚</p>
<h2 id="createanexpressserverandconfigurealldependencies">åˆ›å»ºexpressæœåŠ¡å™¨å¹¶é…ç½®æ‰€æœ‰ä¾èµ–é¡¹ã€‚</h2>
<p><span>è¦è®¾ç½®ExpressæœåŠ¡å™¨ï¼Œåˆ›å»ºä¸€ä¸ª</span> <code>src</code> <span>ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­æ”¾ç½®ä¸€ä¸ª</span> <code>index.js</code> <span>æ–‡ä»¶ã€‚è¿™æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„åŸºæœ¬æ–‡ä»¶ã€‚æˆ‘ä»¬å°†åœ¨è¿™é‡Œå®šä¹‰æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè·¯ç”±å¹¶é…ç½®ä¸€äº›åŒ…ã€‚</span></p>
<p><span>å°†ä¸‹é¢çš„ä»£ç æ·»åŠ åˆ°</span> <code>index.js</code> <span>æ–‡ä»¶ä¸­ã€‚</span></p>
<pre>require('dotenv').config()
const express = require("express");
const PORT = process.env.PORT || 4000;
const morgan = require("morgan");
const cors = require("cors");
const bodyParser = require("body-parser");
const app = express();
//--------------registering cors -----------------
app.use(cors());
//----------------configure body parser --------------
app.use(bodyParser.urlencoded({
    extended: false
}));
app.use(bodyParser.json());
//---------------configure morgan  --------
app.use(morgan("dev"));

// define first route
app.get("/", (req, res) =&gt; {
    res.json({
        data: "Hello MEIN developers...The `I` stands for IonicğŸ˜ğŸ˜"
    });
});
app.listen(PORT, () =&gt; {
    console.log(`App is running on ${PORT}`);
});
</pre>
<p>æ‰“å¼€<code>package.json</code>æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚è¿è¡Œ<code>npm run dev:start</code>å°†å¼•å¯¼æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</p>
<pre>"scripts": {
    "start:dev":"nodemon src"
  },
</pre>
<p>å¦‚æœæ‚¨åœ¨æµè§ˆå™¨ä¸Šæ‰“å¼€åº”ç”¨ç¨‹åºï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹:</p>
<p><img data-attachment-id="22042" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/open-app-in-browser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png" data-orig-size="720,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Open app in browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser-300x90.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png" decoding="async" class="aligncenter size-full wp-image-22042 jetpack-lazy-image" src="../Images/28b3c4f45b6541960ab227a272752c67.png" alt="Open App in Browser" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser-300x90.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22042" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/open-app-in-browser/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png" data-orig-size="720,216" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Open app in browser" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser-300x90.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22042" src="../Images/28b3c4f45b6541960ab227a272752c67.png" alt="Open App in Browser" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser-300x90.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/open-app-in-browser.png"/></noscript>
<h2 id="createandconfiguremongodbdatabase">åˆ›å»ºå’Œé…ç½®MongoDBæ•°æ®åº“</h2>
<p>åˆ›å»ºä¸€ä¸ª<code>config</code>ç›®å½•ã€‚åœ¨<code>config</code>ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª<code>mongoose.js</code>æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚</p>
<pre>const mongoose = require("mongoose");
module.exports = function (app) {
    mongoose.connect("mongodb://localhost:27017/ionic-app", {
        useUnifiedTopology: true,
        useNewUrlParser: true,
        useFindAndModify: false
    }).then(res =&gt; console.log("Database conneceted")).catch(err =&gt; console.log(err))
    mongoose.Promise = global.Promise;
    process.on("SIGINT", cleanup);
    process.on("SIGTERM", cleanup);
    process.on("SIGHUP", cleanup);
    if (app) {
        app.set("mongoose", mongoose);
    }
};
function cleanup() {
    mongoose.connection.close(function () {
        process.exit(0);
    });
}
</pre>
<p>æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„æ ¹æ–‡ä»¶ä¸­æ³¨å†Œå®ƒï¼Œç„¶åä¼ é€’<code>express()</code>çš„å®ä¾‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„<code>index.js</code>æ–‡ä»¶ä¸­è¦æ±‚è¿™ä¸ªæ¨¡å—ã€‚</p>
<pre>require("./config/mongoose")(app);
</pre>
<p>ä¸€æ—¦ä½ è¿™æ ·åšäº†ï¼Œå¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œä½ ä¼šåœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°<code>Database conneceted</code>ã€‚</p>
<h2 id="createtheeventkeepermodel">åˆ›å»ºäº‹ä»¶ç®¡ç†å™¨æ¨¡å‹</h2>
<p>ç°åœ¨æˆ‘ä»¬çš„æ•°æ®åº“å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºæˆ‘ä»¬çš„Mongooseæ¨¡å¼ï¼Œå®ƒæ¥å—ä¸€ä¸ªå®šä¹‰äº‹ä»¶æ¨¡å¼å±æ€§çš„å¯¹è±¡ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªç›®å½•æ¥ä¿å­˜æ¨¡å¼ã€è·¯ç”±å’Œæ§åˆ¶å™¨ã€‚</p>
<pre>cd src
mkdir api &amp;&amp; cd api
mkdir events &amp;&amp; cd events
touch model.js &amp;&amp; touch controller.js &amp;&amp; touch routes.js
</pre>
<p>è®©æˆ‘ä»¬é€šè¿‡åœ¨<code>events/model.js</code>æ–‡ä»¶ä¸­æ·»åŠ è¿™äº›ä»£ç æ¥å®šä¹‰æˆ‘ä»¬çš„äº‹ä»¶æ¨¡å¼:</p>
<pre>const mongoose = require("mongoose");
const eventSchema = mongoose.Schema({
    name: {
        type: String,
        required: true
    },
    image: {
        type: String,
        required: true
    },
    description: {
        type: String,
        required: true
    }
}, {
    timestamps: true,
});
const Event = mongoose.model("Event", eventSchema);
module.exports = Event;
</pre>
<p>Mongooseå°†æ¨¡å¼è½¬æ¢æˆæ•°æ®åº“ä¸­çš„æ–‡æ¡£ã€‚è¿™äº›å±æ€§ç„¶åè¢«è½¬æ¢æˆæ–‡æ¡£ä¸­çš„å­—æ®µã€‚</p>
<h2 id="setupawsandmulter">è®¾ç½®AWSå’ŒMulter</h2>
<p><span>é¦–å…ˆï¼Œä½ éœ€è¦æ³¨å†Œä¸€ä¸ª<a href="https://aws.amazon.com" target="_blank" rel="noopener noreferrer"> AWSè´¦æˆ·</a>ã€‚</span></p>
<p><span>ç™»å½•åï¼Œæ‚¨ä¼šåœ¨å¯¼èˆªæ ä¸Šçœ‹åˆ°</span> <code>services</code> <span>é“¾æ¥ã€‚ç‚¹å‡»å®ƒå¹¶åœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œs3â€ã€‚</span></p>
<p><img data-attachment-id="22040" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/aws-services-search-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png" data-orig-size="720,390" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AWS Services search page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png" decoding="async" class="aligncenter size-full wp-image-22040 jetpack-lazy-image" src="../Images/c33945719baacb2c77f52e690eaccbb0.png" alt="AWS Services Search Page" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page-300x163.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22040" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/aws-services-search-page/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png" data-orig-size="720,390" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AWS Services search page" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page-300x163.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22040" src="../Images/c33945719baacb2c77f52e690eaccbb0.png" alt="AWS Services Search Page" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page-300x163.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-search-page.png"/></noscript>
<p>ç‚¹å‡»S3ã€‚è¿™æ˜¯æˆ‘ä»¬å°†ç”¨äºäº‘å­˜å‚¨çš„å†…å®¹ã€‚</p>
<p>é€šè¿‡å•å‡»â€œåˆ›å»ºå­˜å‚¨æ¡¶â€ï¼Œä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºåˆ›å»ºæ–°çš„å­˜å‚¨æ¡¶å°†å¼¹å‡ºä¸€ä¸ªæ¨¡å¼ï¼Œè¦æ±‚æ‚¨æŒ‡å®šæ‚¨çš„bucketçš„åç§°ã€‚è°ƒç”¨æ‚¨çš„å­˜å‚¨æ¡¶<code>eventskeeper</code>å¹¶é€‰æ‹©<code>US West (N. California)</code>ä½œä¸ºæ‚¨çš„åŒºåŸŸã€‚</p>
<p>è½¬åˆ°â€œæƒé™â€éƒ¨åˆ†ï¼Œå–æ¶ˆé€‰ä¸­å¤é€‰æ¡†ä»¥é˜»æ­¢æ‰€æœ‰å…¬å…±è®¿é—®ï¼Œç„¶åä¿å­˜æ‚¨çš„æ›´æ”¹ã€‚</p>
<p><img data-attachment-id="22039" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/aws-services-permissions-tab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png" data-orig-size="720,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AWS Services Permissions tab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab-300x142.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png" decoding="async" class="aligncenter size-full wp-image-22039 jetpack-lazy-image" src="../Images/641f80245c4c2dcd6531f22df95fcce2.png" alt="AWS Services Permissions Tab" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab-300x142.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22039" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/aws-services-permissions-tab/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png" data-orig-size="720,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AWS Services Permissions tab" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab-300x142.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22039" src="../Images/641f80245c4c2dcd6531f22df95fcce2.png" alt="AWS Services Permissions Tab" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab-300x142.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-services-permissions-tab.png"/></noscript>
<p>Nexï¼Œæˆ‘ä»¬éœ€è¦æ‹¿åˆ°æ‰€æœ‰çš„å®‰å…¨è¯ä¹¦ã€‚å•å‡»é¡µé¢é¡¶éƒ¨çš„ç™»å½•ç”¨æˆ·åï¼Œç„¶åå•å‡»â€œæˆ‘çš„å®‰å…¨å‡­è¯â€</p>
<p><img data-attachment-id="22038" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/aws-management-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png" data-orig-size="720,312" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AWS management console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console-300x130.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png" decoding="async" class="aligncenter size-full wp-image-22038 jetpack-lazy-image" src="../Images/c9fe23c734649ea3e65e8090ead478eb.png" alt="AWS Management Console" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console-300x130.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22038" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/aws-management-console/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png" data-orig-size="720,312" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="AWS management console" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console-300x130.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22038" src="../Images/c9fe23c734649ea3e65e8090ead478eb.png" alt="AWS Management Console" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console-300x130.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/aws-management-console.png"/></noscript>
<p>è¿™å°†å¸¦æ‚¨åˆ°ä¸€ä¸ªé¡µé¢ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®æ‚¨çš„å®‰å…¨å‡­è¯ã€‚ç‚¹æŒ‰â€œè®¿é—®å¯†é’¥â€ï¼Œç„¶åç‚¹æŒ‰â€œåˆ›å»ºæ–°çš„è®¿é—®å¯†é’¥â€æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªåŒ…å«æ‚¨çš„å®‰å…¨ç»†èŠ‚çš„æ¨¡å‹ã€‚å¤åˆ¶è¿™äº›ç»†èŠ‚ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ª<code>.env</code>æ–‡ä»¶ä¸­ã€‚</p>
<p>åˆ›å»º<code>.env</code>æ–‡ä»¶ã€‚</p>
<pre>touch .env
</pre>
<p>åœ¨<code>.env</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</p>
<pre>ACCESS_KEY=****************ZZN7SQDUJUPQ
ACEESS_SECRET=**********************ifn30**
</pre>
<p>ç”¨æ‚¨ä»è¯¥ç½‘ç«™è·å¾—çš„å®‰å…¨è¯¦ç»†ä¿¡æ¯æ›¿æ¢è¿™äº›å€¼ã€‚ä¸è¦å¿˜è®°å°†è¿™ä¸ªæ–‡ä»¶æ·»åŠ åˆ°<code>.gitignore</code>æ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨configç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>aws.js</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</p>
<pre>const aws = require('aws-sdk')
const multer = require('multer')
const multerS3 = require('multer-s3')


aws.config.update({
    secretAccessKey: process.env.ACEESS_SECRET,
    accessKeyId: process.env.ACCESS_KEY,
    region: 'eu-west-3'
})
const s3 = new aws.S3();
const fileFilter = (req, file, cb) =&gt; {
    if (file.mimetype.startsWith('image')) {
        cb(null, true);
    } else {
        cb(new Error('Not an image! Please upload an image.', 400), false);
    }
};
const upload = multer({
    fileFilter,
    storage: multerS3({
        s3,
        bucket: 'eventskeeper',
        acl: 'public-read',
        metadata: function (req, file, cb) {
            cb(null, {
                fieldName: "TESTING_META_DATA"
            });
        },
        key: function (req, file, cb) {
            cb(null, Date.now().toString())
        }
    })
})
module.exports = {
    upload,
    s3
}
</pre>
<p>é¦–å…ˆå°†<code>aws-sdk</code>ã€<code>multer</code>å’Œ<code>multer-s3</code>å¯¼å…¥è¯¥æ–‡ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­çš„å‡­è¯æ¥é…ç½®æ‚¨çš„<code>aws-sdk</code>åŒ…ã€‚ç”¨é…ç½®å¯¹è±¡ä¸­çš„åŒºåŸŸæ›¿æ¢æ‚¨çš„åŒºåŸŸã€‚</p>
<p>ä¸‹ä¸€æ­¥æ˜¯ä¸ºæ‚¨çš„æ–‡ä»¶ä¸Šä¼ åˆ›å»ºä¸€ä¸ªç®€å•çš„è¿‡æ»¤å™¨ï¼Œå®ƒåªæ¥å—ä»<code>image</code>å¼€å§‹çš„<code>mimetype</code>æ–‡ä»¶ç±»å‹ã€‚</p>
<p>åœ¨å®šä¹‰äº†è¿™ä¸ªè¿‡æ»¤å™¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªMulterå®ä¾‹æ¥æ¥æ”¶è¿‡æ»¤å™¨å’Œæˆ‘ä»¬å°†å‘å…¶å‘é€æ–‡ä»¶çš„bucketé…ç½®ã€‚åœ¨<code>multerS3</code>å®ä¾‹ä¸­ï¼ŒæŒ‡å®šå°†ä¿å­˜æ‚¨çš„æ–‡ä»¶çš„å­˜å‚¨æ¡¶çš„åç§°ï¼Œç„¶åå°†<code>alc</code>è®¾ç½®ä¸º<code>public read</code>ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥éšæ—¶æ·»åŠ æ–‡ä»¶ã€‚</p>
<p>è¦ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦å¯¼å‡ºå‡½æ•°ï¼Œä»¥ä¾¿ä»»ä½•JSæ¨¡å—éƒ½å¯ä»¥è®¿é—®å®ƒã€‚</p>
<h2 id="createthenecessaryroutesandcontrollers">åˆ›å»ºå¿…è¦çš„è·¯çº¿å’Œæ§åˆ¶å™¨ã€‚</h2>
<p>æˆ‘ä»¬åŸºæœ¬ä¸Šæœ‰ä¸¤æ¡è·¯çº¿:ä¸€æ¡è·å–æ‰€æœ‰äº‹ä»¶ï¼Œå¦ä¸€æ¡æ·»åŠ æ–°äº‹ä»¶ã€‚</p>
<p>åœ¨<code>api/events/routes.js</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹è·¯çº¿ã€‚</p>
<pre>const eventController = require("./controller");
const router = require("express").Router();

router.post("/", eventController.addEvent)
router.get("/", eventController.getAllEvents)


module.exports = router;
</pre>
<p>æˆ‘ä»¬å¿…é¡»åœ¨æ§åˆ¶å™¨æ–‡ä»¶ä¸­åˆ›å»º<code>addEvent</code>å’Œ<code>getAllEvents</code>æ–¹æ³•ã€‚é¦–å…ˆåœ¨<code>api/events/controller.js</code>æ–‡ä»¶ä¸­åˆ›å»º<code>addEvent</code>æ–¹æ³•ã€‚</p>
<pre>let Event = require('./model');
const {
    upload,
    s3
} = require('../../config/aws')

const singleUpload = upload.single('image');
exports.addEvent = async (req, res) =&gt; {
    try {
        await singleUpload(req, res, err =&gt; {
            if (err) {
                return res.status(422).json({
                    title: "File Upload Error",
                    desription: err.message
                })
            }
            const event = new Event({
                name: req.body.name,
                description: req.body.description,
                image: req.file.location
            })
            event.save();
            res.status(200).json({
                status: "Success",
                mes: "New Event Created"
            })
        })
    } catch (err) {
        res.status(500).json({
            status: "error",
            error: err
        })
    }
}
</pre>
<p>æˆ‘ä»¬è¿˜éœ€è¦å¼•å…¥äº‹ä»¶æ¨¡å—å’ŒAWSé…ç½®æ¨¡å—ã€‚é¦–å…ˆæ£€æŸ¥åœ¨å°è¯•ä¸Šä¼ å›¾åƒæ—¶æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯ï¼Œå¹¶ä¸ºä»»ä½•ä¸å¯å¤„ç†çš„å®ä½“æŠ›å‡ºä¸€ä¸ª<code>422</code>é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œä½¿ç”¨<code>req.body</code>è®¿é—®è¯·æ±‚ä¸­å‘é€çš„JSONæ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>req.file.location</code>è·å–å›¾åƒçš„URLã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåˆ›å»º<code>getAllEvents</code>å‡½æ•°ã€‚è¿™å°†åŸºæœ¬ä¸Šè·å¾—å­˜å‚¨åœ¨MongoDBä¸­çš„æ‰€æœ‰äº‹ä»¶ã€‚</p>
<pre>exports.getAllEvents = async (req, res) =&gt; {
    try {
        let events = await Event.find();
        res.status(200).json({
            status: "Success",
            data: events
        })
    } catch (err) {
        res.status(500).json({
            status: "error",
            error: err
        })
    }
}
</pre>
<p>ä½¿ç”¨<code>find()</code>æ–¹æ³•è·å–æ•°æ®åº“ä¸­å­˜å‚¨çš„æ‰€æœ‰æ•°æ®ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„äº‹ä»¶æ³¨å†Œä¸€ä¸ªå…¨å±€è·¯ç”±å¤„ç†å™¨ã€‚åœ¨<code>api</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>routeHandler.js</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p>
<pre>const EventRoutes = require("./events/routes");
module.exports = (app) =&gt; {
    app.use("/event", EventRoutes);
}
</pre>
<p>æ¥ä¸‹æ¥ï¼Œå°†å…¶æ³¨å†Œåˆ°<code>index.js</code>æ–‡ä»¶ä¸­ã€‚</p>
<pre>require("./api/routehandler")(app);
</pre>
<p>æ˜¯æ—¶å€™åœ¨POSTMANä¸Šæµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº†ã€‚</p>
<h3>å‘å¸ƒæ´»åŠ¨</h3>
<p><img data-attachment-id="22044" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/post-event/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png" data-orig-size="720,467" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Post an event" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png" decoding="async" class="aligncenter size-full wp-image-22044 jetpack-lazy-image" src="../Images/ef6393a43c6046164eaa9cc2ca489313.png" alt="Post an Event" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/post-event-300x195.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22044" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/post-event/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png" data-orig-size="720,467" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Post an event" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event-300x195.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22044" src="../Images/ef6393a43c6046164eaa9cc2ca489313.png" alt="Post an Event" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/post-event-300x195.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/post-event.png"/></noscript>
<h3>è·å–æ‰€æœ‰äº‹ä»¶</h3>
<p><img data-attachment-id="22043" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/get-all-events/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png" data-orig-size="720,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Get all events" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png" decoding="async" class="aligncenter size-full wp-image-22043 jetpack-lazy-image" src="../Images/d9286946cdc062d3b4f26a7f257572ea.png" alt="Get All Events" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events-300x197.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22043" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/get-all-events/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png" data-orig-size="720,473" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Get all events" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events-300x197.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22043" src="../Images/d9286946cdc062d3b4f26a7f257572ea.png" alt="Get All Events" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events-300x197.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/get-all-events.png"/></noscript>
<h2 id="settingupthemobileapp">è®¾ç½®ç§»åŠ¨åº”ç”¨ç¨‹åº</h2>
<p>åœ¨å…¨çƒèŒƒå›´å†…å®‰è£…ç¦»å­å’Œå…¶ä»–ç¦»å­å·¥å…·ã€‚</p>
<pre>npm install -g @ionic/cli native-run cordova-res
</pre>
<p>åœ¨æ¡Œé¢ä¸Šåˆ›å»ºä¸€ä¸ªåä¸º<code>events</code>çš„æ–°ç›®å½•ã€‚åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ç¦»å­åº”ç”¨ç¨‹åºå’Œè§’åº¦ç›®å½•å†…ã€‚</p>
<pre>cd desktop
cd event-app &amp;&amp; mkdir events &amp;&amp; cd events
ionic start events tabs --type=angular --capacitor
</pre>
<p>è¿™ä¸ªIonic Angularåº”ç”¨ç¨‹åºä½¿ç”¨Tabs starteræ¨¡æ¿ï¼Œå¹¶ä¸ºåŸç”ŸåŠŸèƒ½æ·»åŠ äº†ç”µå®¹å™¨ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›å…¥æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº:</p>
<pre>cd events
</pre>
<p>Ionic PWAå…ƒç´ åº“å°†åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æä¾›åŸºäºwebçš„åŠŸèƒ½ã€‚è¦å®‰è£…å®ƒï¼Œè¯·åœ¨åº”ç”¨ç¨‹åºç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p>
<pre>npm install @ionic/pwa-elements
</pre>
<p>è¦ä½¿ç”¨è¿™ä¸ªåŒ…ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒå¯¼å…¥åˆ°æˆ‘ä»¬çš„<code>src/main.ts</code>æ–‡ä»¶ä¸­ã€‚</p>
<pre>import { defineCustomElements } from '@ionic/pwa-elements/loader';

// Call the element loader after the platform has been bootstrapped
defineCustomElements(window);
</pre>
<p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä¸Šæ²¡æœ‰å®‰è£…Ionic labï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç»ˆç«¯ä¸Šè¿è¡Œ<code>npm i -D -E @ionic/lab</code>æ¥å®‰è£…å®ƒã€‚</p>
<pre>ionic serve --lab
</pre>
<p>è¿™å°†åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç«¯å£8100ã€‚</p>
<p><img data-attachment-id="22045" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/app-open-on-port-8100/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="App open on port 8100" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png" decoding="async" class="aligncenter size-full wp-image-22045 jetpack-lazy-image" src="../Images/b6c19f691df6b19a99b417ecc2485f89.png" alt="App Open on Port 8100" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100-300x161.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22045" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/app-open-on-port-8100/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png" data-orig-size="720,387" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="App open on port 8100" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100-300x161.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22045" src="../Images/b6c19f691df6b19a99b417ecc2485f89.png" alt="App Open on Port 8100" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100-300x161.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/app-open-on-port-8100.png"/></noscript>
<h2 id="settinguptheuserinterface">è®¾ç½®ç”¨æˆ·ç•Œé¢</h2>
<p>æ˜¯æ—¶å€™è®¾ç½®ç”¨æˆ·ç•Œé¢äº†ã€‚æˆ‘ä»¬å°†ä»å®šåˆ¶é€‰é¡¹å¡å¼€å§‹ã€‚</p>
<p>è½¬åˆ°<code>src/app/tabs/tabs.page</code>å¹¶ä¿®æ”¹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre>&lt;ion-tabs&gt;
  &lt;ion-tab-bar slot="bottom"&gt;
    &lt;ion-tab-button tab="tab1"&gt;
      &lt;ion-icon name="home-outline"&gt;&lt;/ion-icon&gt;
      &lt;ion-label&gt;Events&lt;/ion-label&gt;
    &lt;/ion-tab-button&gt;
    &lt;ion-tab-button tab="tab2"&gt;
      &lt;ion-icon name="add-outline"&gt;&lt;/ion-icon&gt;
      &lt;ion-label&gt;Add Event&lt;/ion-label&gt;
    &lt;/ion-tab-button&gt;
  &lt;/ion-tab-bar&gt;
&lt;/ion-tabs&gt;
</pre>
<p>æˆ‘ä»¬å°†ä½¿ç”¨å¡ç‰‡æ¥è¡¨ç¤ºæˆ‘ä»¬çš„äº‹ä»¶ï¼Œæ‰€ä»¥ç°åœ¨è½¬åˆ°<code>src/app/tab1/tab1.page.html</code>å¹¶ç”¨ä¸‹é¢çš„ä»£ç ä¿®æ”¹é‚£é‡Œçš„ä»£ç ã€‚</p>
<pre>&lt;ion-header [translucent]="true"&gt;
  &lt;ion-toolbar&gt;
    &lt;ion-title&gt;
      Events
    &lt;/ion-title&gt;
  &lt;/ion-toolbar&gt;
&lt;/ion-header&gt;
&lt;ion-content [fullscreen]="true"&gt;
  &lt;ion-card&gt;
    &lt;img style="width:100%;height:250px;object-fit: cover;"
      src="https://images.pexels.com/photos/3323208/pexels-photo-3323208.jpeg?cs=srgb&amp;dl=woman-leaning-on-sinalco-cola-can-3323208.jpg&amp;fm=jpg"
      alt=""&gt;
    &lt;ion-card-header&gt;
      &lt;ion-card-subtitle&gt;Card Subtitle&lt;/ion-card-subtitle&gt;
      &lt;ion-card-title&gt;Card Title&lt;/ion-card-title&gt;
    &lt;/ion-card-header&gt;
    &lt;ion-card-content&gt;
      Keep close to Nature's heart... and break clear away, once in awhile,
      and climb a mountain or spend a week in the woods. Wash your spirit clean.
    &lt;/ion-card-content&gt;
  &lt;/ion-card&gt;
&lt;/ion-content&gt;
</pre>
<p>ä¿®æ”¹çš„ç»“æœåº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img data-attachment-id="22041" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/modified-code-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png" data-orig-size="720,431" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Modified code result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png" decoding="async" class="aligncenter size-full wp-image-22041 jetpack-lazy-image" src="../Images/e44ea36b1ac863aa6402eca5f93bfd0f.png" alt="Modified Code Result" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result-300x180.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22041" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/modified-code-result/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png" data-orig-size="720,431" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Modified code result" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result-300x180.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22041" src="../Images/e44ea36b1ac863aa6402eca5f93bfd0f.png" alt="Modified Code Result" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result-300x180.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/modified-code-result.png"/></noscript>
<p>åœ¨<code>tabs2</code>ç»„ä»¶ä¸­åˆ›å»ºä¸€ä¸ªè¡¨å•ï¼Œç”¨äºæ·»åŠ æ–°äº‹ä»¶ã€‚å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code>src/app/tab2/tab2.page.html</code>ã€‚</p>
<pre>&lt;ion-header [translucent]="true"&gt;
  &lt;ion-toolbar&gt;
    &lt;ion-title&gt;
      Add Event
    &lt;/ion-title&gt;
  &lt;/ion-toolbar&gt;
&lt;/ion-header&gt;
&lt;ion-content [fullscreen]="true" class="ion-padding"&gt;
  &lt;div id="container"&gt;
    &lt;form&gt;
      &lt;ion-item id="rounded"&gt;
        &lt;ion-label position="stacked"&gt;Name&lt;/ion-label&gt;
        &lt;ion-input id="input"&gt;&lt;/ion-input&gt;
      &lt;/ion-item&gt;
      &lt;ion-item id="rounded"&gt;
        &lt;ion-input id="photo" name="file" type="file" accept="image/*" (change)="handleFileInput($event.target.files)"&gt;
        &lt;/ion-input&gt;
      &lt;/ion-item&gt;
      &lt;ion-item&gt;
        &lt;ion-label position="stacked"&gt;Description&lt;/ion-label&gt;
        &lt;ion-textarea rows="6" cols="20"&gt;&lt;/ion-textarea&gt;
      &lt;/ion-item&gt;
      &lt;div class="ion-padding"&gt;
        &lt;ion-button expand="block" type="submit" class="ion-no-margin"&gt;Add An Event&lt;/ion-button&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;


&lt;/ion-content&gt;
</pre>
<p>æ¥ä¸‹æ¥ï¼Œç»™<code>src/app/tab2/tab2.page.scss</code>æ·»åŠ ä¸€äº›æ ·å¼ã€‚</p>
<pre>#rounded {
    width: 100%;
    margin-top: 30px;
    -moz-border-radius: 50px;
    -webkit-border-radius: 50px;
    border-radius: 10px;
    margin-bottom: 10px;
}
</pre>
<p><img data-attachment-id="22036" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/add-styles/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png" data-orig-size="720,438" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add styles to events" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png" decoding="async" class="aligncenter size-full wp-image-22036 jetpack-lazy-image" src="../Images/2acc1223b494bafc7139a214b8e660a1.png" alt="Add Styles to Events" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles-300x183.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22036" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/add-styles/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png" data-orig-size="720,438" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Add styles to events" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22036" src="../Images/2acc1223b494bafc7139a214b8e660a1.png" alt="Add Styles to Events" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles-300x183.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/add-styles.png"/></noscript>
<h2 id="creatingtheeventservice">åˆ›å»ºäº‹ä»¶æœåŠ¡</h2>
<p>ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªæœåŠ¡æ¥å¤„ç†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰HTTPè¯·æ±‚ã€‚</p>
<pre>ionic generate service api/event
</pre>
<p>è¿è¡Œè¯¥å‘½ä»¤å°†ç”Ÿæˆä¸€ä¸ª<code>api</code>ç›®å½•ã€‚åœ¨<code>api</code>ç›®å½•ä¸­ï¼Œä¿®æ”¹<code>event.service.ts</code>å¦‚ä¸‹:</p>
<pre>import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

@Injectable({
  providedIn: 'root'
})

export class EventService {
  readonly rootURL: string = 'http://localhost:4000';
  getAllEvents() {
    return this.http.get(`${this.rootURL}/event`);
  }
    addNewEvent(payload) {
      return this.http.post(`${this.rootURL}/event`, payload);
    }
  constructor(private http: HttpClient) {}
}
</pre>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„<code>src/app/app.module.ts</code>ä¸­æ³¨å†ŒAngularçš„<code>HttpClientModule</code>ã€‚</p>
<pre>import { HttpClientModule } from '@angular/common/http';
</pre>
<p>ç„¶åï¼Œå°†å…¶æ·»åŠ åˆ°<code>imports</code>æ•°ç»„ä¸­ã€‚</p>
<pre>  imports: [  ...other packages, HttpClientModule ]
</pre>
<h2 id="implementingtheapis">å®ç°API</h2>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†æˆ‘ä»¬çš„æœåŠ¡å¼•å…¥åˆ°æˆ‘ä»¬çš„<code>tab1</code>å’Œ<code>tab2</code>ç»„ä»¶ä¸­ã€‚ç”¨ä¸‹é¢çš„ä»£ç ç¼–è¾‘<code>src/app/tab1/tab1.page.ts</code>ä¸­çš„ä»£ç ã€‚</p>
<pre>import { Component } from '@angular/core';
import { EventService } from '../../app/api/event.service';
@Component({
  selector: 'app-tab1',
  templateUrl: 'tab1.page.html',
  styleUrls: [ 'tab1.page.scss' ]
})
export class Tab1Page {
  constructor(private Event: EventService) {}
  events = [];
  getEvents() {
    console.log('hello');
    this.Event.getAllEvents().subscribe((data: any) =&gt; {
      this.events = data.data.reverse();
//the reverse method will get from the latest event added
    });
  }
  ngOnInit(): void {
    //Called after the constructor, initializing input properties, and the first call to ngOnChanges.
    //Add 'implements OnInit' to the class.
    this.getEvents();
  }
}
</pre>
<p>åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåšçš„æ˜¯å¼•å…¥æˆ‘ä»¬çš„äº‹ä»¶æœåŠ¡ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªçŠ¶æ€æ¥ä¿å­˜æ‰€æœ‰çš„äº‹ä»¶ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–¹æ³•æ¥æŸ¥è¯¢æ‰€æœ‰äº‹ä»¶ï¼Œå¹¶å°†å…¶æ³¨å†Œåˆ°<code>ngOnInit</code>ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­ã€‚</p>
<p>æˆ‘ä»¬å°†é€šè¿‡ä¿®æ”¹ä»£ç åœ¨æ¨¡æ¿çš„å¡ç‰‡ä¸Šæ˜¾ç¤ºæˆ‘ä»¬çš„äº‹ä»¶ã€‚</p>
<pre>&lt;ion-header [translucent]="true"&gt;
  &lt;ion-toolbar&gt;
    &lt;ion-title&gt;
      Events
    &lt;/ion-title&gt;
  &lt;/ion-toolbar&gt;
&lt;/ion-header&gt;
&lt;ion-content [fullscreen]="true"&gt;
  &lt;ion-card *ngFor="let event of events"&gt;
    &lt;img style="width:100%;height:250px;object-fit: cover;" [src]="event.image" alt=""&gt;
    &lt;ion-card-header&gt;
      &lt;ion-card-title&gt;{{event.name}}&lt;/ion-card-title&gt;
      &lt;ion-card-subtitle&gt;{{event.createdAt |date}}&lt;/ion-card-subtitle&gt;
    &lt;/ion-card-header&gt;
    &lt;ion-card-content&gt;
      {{event.description}}
    &lt;/ion-card-content&gt;
  &lt;/ion-card&gt;
&lt;/ion-content&gt;
</pre>
<p>è¿™æ ·åšå°†æ˜¾ç¤ºæˆ‘ä»¬æ•°æ®åº“ä¸­çš„æ‰€æœ‰äº‹ä»¶ã€‚</p>
<p><img data-attachment-id="22037" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/all-events-in-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png" data-orig-size="720,439" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="All events in the database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png" decoding="async" class="aligncenter size-full wp-image-22037 jetpack-lazy-image" src="../Images/3c0a3af53c5dbe39ad1eee93f062c957.png" alt="All Events in the Database" data-lazy-srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database-300x183.png 300w" data-lazy-sizes="(max-width: 720px) 100vw, 720px" data-lazy-src="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png"/></p><noscript><img data-lazy-fallback="1" data-attachment-id="22037" data-permalink="https://blog.logrocket.com/build-an-event-keeper-app-with-ionic-and-aws/all-events-in-database/" data-orig-file="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png" data-orig-size="720,439" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="All events in the database" data-image-description="" data-image-caption="" data-medium-file="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database-300x183.png" data-large-file="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png" decoding="async" loading="lazy" class="aligncenter size-full wp-image-22037" src="../Images/3c0a3af53c5dbe39ad1eee93f062c957.png" alt="All Events in the Database" srcset="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png 720w, https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database-300x183.png 300w" sizes="(max-width: 720px) 100vw, 720px" data-original-src="https://blog.logrocket.com/wp-content/uploads/2020/07/all-events-in-database.png"/></noscript>
<h2 id="implementingaddevents">å®ç°æ·»åŠ äº‹ä»¶</h2>
<p>åœ¨javascriptä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>formData</code>æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è§’åº¦ååº”å½¢å¼æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ã€‚æˆ‘ä»¬å°†ä»å¯¼å…¥<code>src/app/tab2/tab2.module.ts</code>æ–‡ä»¶ä¸­çš„<code>FormsModule</code>å’Œ<code>ReactiveFormsModule</code>æ¨¡å—å¼€å§‹:</p>
<pre>import { FormsModule, ReactiveFormsModule } from '@angular/forms';
imports: [... other modules, FormsModule,ReactiveFormsModule, ],
</pre>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºç»„ä»¶ä¸­ä½¿ç”¨Angularçš„ååº”å½¢å¼ã€‚å°†<code>FormGroup</code>ã€<code>FormControl</code>å’Œ<code>EventService</code>å¯¼å…¥åˆ°<code>tab2.page.ts</code>æ–‡ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨<code>formControl</code>æ¨¡å—å®šä¹‰è¡¨å•çš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<pre>import { FormGroup, FormControl } from '@angular/forms';
import { EventService } from '../../app/api/event.service';


//this should be added inside the Tab2Page Class
eventForm = new FormGroup({
    name: new FormControl(''),
    description: new FormControl('')
  });
  constructor(private Event: EventService) {}
</pre>
<p>æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„è¾“å…¥å­—æ®µã€‚è¿™å°†æ˜¯ä¸€ä¸ªæ›´æ”¹äº‹ä»¶ï¼Œå½“é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶æ—¶å°†ä¼šè§‚å¯Ÿã€‚æ‚¨çš„æ–‡ä»¶ä¸Šä¼ è¾“å…¥åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p>
<pre> &lt;ion-input id="photo" name="file" type="file" accept="image/*" (change)="handleFileInput($event.target.files)"&gt;
        &lt;/ion-input&gt;
</pre>
<p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªä¿å­˜æ–‡ä»¶çš„çŠ¶æ€å¹¶å®šä¹‰<code>handleFileInput</code>æ–¹æ³•ã€‚</p>
<pre>  fileToUpload: File = null;
  handleFileInput(files: FileList) {
    this.fileToUpload = files.item(0);
    console.log(this.fileToUpload);
  }
</pre>
<p>ç°åœ¨å¦‚æœæ‚¨é€‰æ‹©ä¸€ä¸ªå›¾åƒæ¥ä¸Šä¼ å®ƒï¼Œå°†è¢«è®°å½•åˆ°æ§åˆ¶å°ã€‚è¯•è¯•å§ï¼</p>
<p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªæ·»åŠ æ–°äº‹ä»¶çš„æ–¹æ³•ã€‚å°†ä»¥ä¸‹æ–¹æ³•æ·»åŠ åˆ°<code>tab2.page.ts</code>æ–‡ä»¶ä¸­ã€‚</p>
<pre>    addEvent() {
        const formData: FormData = new FormData();
        formData.append('image', this.fileToUpload, this.fileToUpload.name);
        formData.append('name', this.eventForm.value.name);
        formData.append('description', this.eventForm.value.description);
        this.Event.addNewEvent(formData).subscribe(
            (data: any) =&gt; {
                console.log(data);
            },
            (err: HttpErrorResponse) =&gt; {
                console.log({ error: err });
            }
        );
    }
</pre>
<p>ä½¿ç”¨è¡¨å•æ•°æ®å°†æ•°æ®æ·»åŠ åˆ°è¾“å…¥å­—æ®µä¸­ï¼Œç„¶åå°†<code>addNewEvent</code>æœåŠ¡ä¸­çš„<code>formData</code>ä½œä¸ºæœ‰æ•ˆè½½è·ä¼ é€’ã€‚</p>
<p>è¿™æ ·åšä¹‹åï¼Œå°†æ‚¨çš„<code>tab2</code>è¡¨å•ä¿®æ”¹å¦‚ä¸‹ã€‚</p>
<pre>  &lt;form [formGroup]="eventForm" (submit)="addEvent()"&gt;
      &lt;ion-item id="rounded"&gt;
        &lt;ion-label position="stacked"&gt;Name&lt;/ion-label&gt;
        &lt;ion-input formControlName="name" id="input" required&gt;&lt;/ion-input&gt;
      &lt;/ion-item&gt;
      &lt;ion-item id="rounded"&gt;
        &lt;ion-input id="photo" type="file" accept="image/*" (change)="handleFileInput($event.target.files)"&gt;
        &lt;/ion-input&gt;
      &lt;/ion-item&gt;
      &lt;ion-item&gt;
        &lt;ion-label position="stacked"&gt;Description&lt;/ion-label&gt;
        &lt;ion-textarea formControlName="description" rows="6" cols="20" required&gt;&lt;/ion-textarea&gt;
      &lt;/ion-item&gt;
      &lt;div class="ion-padding"&gt;
        &lt;ion-button expand="block" type="submit" class="ion-no-margin"&gt;Add An Event&lt;/ion-button&gt;
      &lt;/div&gt;
    &lt;/form&gt;
</pre>
<p>ç°åœ¨åˆ·æ–°æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶å°è¯•æ·»åŠ ä¸€ä¸ªæ–°äº‹ä»¶ã€‚</p>
<h2 id="addingspinnersandtoast">æ·»åŠ æ—‹è½¬å™¨å’Œåå¸</h2>
<p>æˆ‘ä»¬éœ€è¦æ·»åŠ é¢„åŠ è½½å™¨å’Œtoastï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘ç”¨æˆ·æ˜¾ç¤ºæ·»åŠ äº‹ä»¶æ–¹æ³•æ˜¯å¦æˆåŠŸã€‚toastå°†è®°å½•æˆåŠŸå’Œé”™è¯¯æ¶ˆæ¯ã€‚</p>
<p>å¯¼å…¥<code>LoadingController</code>å’Œ<code>ToastController</code>ï¼Œç„¶ååœ¨æ„é€ å‡½æ•°ä¸­æ³¨å†Œå®ƒä»¬ã€‚</p>
<pre>import { LoadingController } from '@ionic/angular';
import { ToastController } from '@ionic/angular';

constructor(
        private Event: EventService,
        public loadingController: LoadingController,
        public toastController: ToastController
    ) {}
</pre>
<p>æˆ‘ä»¬å¿…é¡»å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥æ˜¾ç¤ºå’Œéšè—æˆ‘ä»¬çš„åŠ è½½å™¨ï¼Œå¹¶æ˜¾ç¤ºæˆ‘ä»¬çš„ç¥é…’è¯ã€‚</p>
<pre>    async presentLoading() {
        const loading = await this.loadingController.create({
            message: 'Please wait...',
            translucent: true
        });
        return await loading.present();
    }
    async presentToast(message) {
        const toast = await this.toastController.create({
            message: message,
            duration: 2000
        });
        return toast.present();
    }
</pre>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„<code>addEvent</code>æ–¹æ³•ã€‚</p>
<pre>addEvent() {
        this.presentLoading();
        const formData: FormData = new FormData();
        formData.append('image', this.fileToUpload, this.fileToUpload.name);
        formData.append('name', this.eventForm.value.name);
        formData.append('description', this.eventForm.value.description);
        this.Event.addNewEvent(formData).subscribe(
            (data: any) =&gt; {
                this.loadingController.dismiss();
                this.eventForm.reset();
                this.presentToast('Event Added');
            },
            (err: HttpErrorResponse) =&gt; {
                this.loadingController.dismiss();
                this.presentToast('Something Went Wrong');
                console.log({ error: err });
            }
        );
    }
</pre>
<p>æ­å–œä½ ï¼æ‚¨åˆšåˆšæ„å»ºäº†ä¸€ä¸ªç®€å•çš„æ´»åŠ¨åº”ç”¨ç¨‹åºã€‚</p>
<h2 id="conclusion">ç»“è®º</h2>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•ç”¨Ionicæ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ·»åŠ æ›´å¥½çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç”¨æˆ·ç™»å½•å’Œæ³¨å†Œã€‚äº†è§£åç«¯å’Œç§»åŠ¨åº”ç”¨ç¨‹åºå¦‚ä½•é€šä¿¡å°†æœ‰åŠ©äºæ‚¨æ„å»ºæ›´å¤§ã€æ›´å¤æ‚ã€åŠŸèƒ½æ›´ä¸°å¯Œçš„åº”ç”¨ç¨‹åºã€‚</p>
<p>å¯¹äºæœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„æºä»£ç ï¼Œè¯·å‰å¾€<a href="https://github.com/Wisdom132/Ionic-and-AWS-app" target="_blank" rel="noopener noreferrer"> GitHub </a>ã€‚</p>

<p class="clearfix"/>
<p class="clearfix"/>
</article>

</div>    
</body>
</html>